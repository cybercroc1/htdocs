/*! jQuery v3.2.1 | (c) JS Foundation and other contributors | jquery.org/license */
!function(a,b){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){"use strict";var c=[],d=a.document,e=Object.getPrototypeOf,f=c.slice,g=c.concat,h=c.push,i=c.indexOf,j={},k=j.toString,l=j.hasOwnProperty,m=l.toString,n=m.call(Object),o={};function p(a,b){b=b||d;var c=b.createElement("script");c.text=a,b.head.appendChild(c).parentNode.removeChild(c)}var q="3.2.1",r=function(a,b){return new r.fn.init(a,b)},s=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,t=/^-ms-/,u=/-([a-z])/g,v=function(a,b){return b.toUpperCase()};r.fn=r.prototype={jquery:q,constructor:r,length:0,toArray:function(){return f.call(this)},get:function(a){return null==a?f.call(this):a<0?this[a+this.length]:this[a]},pushStack:function(a){var b=r.merge(this.constructor(),a);return b.prevObject=this,b},each:function(a){return r.each(this,a)},map:function(a){return this.pushStack(r.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(f.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(a<0?b:0);return this.pushStack(c>=0&&c<b?[this[c]]:[])},end:function(){return this.prevObject||this.constructor()},push:h,sort:c.sort,splice:c.splice},r.extend=r.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||r.isFunction(g)||(g={}),h===i&&(g=this,h--);h<i;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&(r.isPlainObject(d)||(e=Array.isArray(d)))?(e?(e=!1,f=c&&Array.isArray(c)?c:[]):f=c&&r.isPlainObject(c)?c:{},g[b]=r.extend(j,f,d)):void 0!==d&&(g[b]=d));return g},r.extend({expando:"jQuery"+(q+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===r.type(a)},isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){var b=r.type(a);return("number"===b||"string"===b)&&!isNaN(a-parseFloat(a))},isPlainObject:function(a){var b,c;return!(!a||"[object Object]"!==k.call(a))&&(!(b=e(a))||(c=l.call(b,"constructor")&&b.constructor,"function"==typeof c&&m.call(c)===n))},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?j[k.call(a)]||"object":typeof a},globalEval:function(a){p(a)},camelCase:function(a){return a.replace(t,"ms-").replace(u,v)},each:function(a,b){var c,d=0;if(w(a)){for(c=a.length;d<c;d++)if(b.call(a[d],d,a[d])===!1)break}else for(d in a)if(b.call(a[d],d,a[d])===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(s,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(w(Object(a))?r.merge(c,"string"==typeof a?[a]:a):h.call(c,a)),c},inArray:function(a,b,c){return null==b?-1:i.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;d<c;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;f<g;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,e,f=0,h=[];if(w(a))for(d=a.length;f<d;f++)e=b(a[f],f,c),null!=e&&h.push(e);else for(f in a)e=b(a[f],f,c),null!=e&&h.push(e);return g.apply([],h)},guid:1,proxy:function(a,b){var c,d,e;if("string"==typeof b&&(c=a[b],b=a,a=c),r.isFunction(a))return d=f.call(arguments,2),e=function(){return a.apply(b||this,d.concat(f.call(arguments)))},e.guid=a.guid=a.guid||r.guid++,e},now:Date.now,support:o}),"function"==typeof Symbol&&(r.fn[Symbol.iterator]=c[Symbol.iterator]),r.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(a,b){j["[object "+b+"]"]=b.toLowerCase()});function w(a){var b=!!a&&"length"in a&&a.length,c=r.type(a);return"function"!==c&&!r.isWindow(a)&&("array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a)}var x=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u="sizzle"+1*new Date,v=a.document,w=0,x=0,y=ha(),z=ha(),A=ha(),B=function(a,b){return a===b&&(l=!0),0},C={}.hasOwnProperty,D=[],E=D.pop,F=D.push,G=D.push,H=D.slice,I=function(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1},J="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",K="[\\x20\\t\\r\\n\\f]",L="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",M="\\["+K+"*("+L+")(?:"+K+"*([*^$|!~]?=)"+K+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+L+"))|)"+K+"*\\]",N=":("+L+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+M+")*)|.*)\\)|)",O=new RegExp(K+"+","g"),P=new RegExp("^"+K+"+|((?:^|[^\\\\])(?:\\\\.)*)"+K+"+$","g"),Q=new RegExp("^"+K+"*,"+K+"*"),R=new RegExp("^"+K+"*([>+~]|"+K+")"+K+"*"),S=new RegExp("="+K+"*([^\\]'\"]*?)"+K+"*\\]","g"),T=new RegExp(N),U=new RegExp("^"+L+"$"),V={ID:new RegExp("^#("+L+")"),CLASS:new RegExp("^\\.("+L+")"),TAG:new RegExp("^("+L+"|[*])"),ATTR:new RegExp("^"+M),PSEUDO:new RegExp("^"+N),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+K+"*(even|odd|(([+-]|)(\\d*)n|)"+K+"*(?:([+-]|)"+K+"*(\\d+)|))"+K+"*\\)|)","i"),bool:new RegExp("^(?:"+J+")$","i"),needsContext:new RegExp("^"+K+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+K+"*((?:-\\d)?\\d*)"+K+"*\\)|)(?=[^-]|$)","i")},W=/^(?:input|select|textarea|button)$/i,X=/^h\d$/i,Y=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,$=/[+~]/,_=new RegExp("\\\\([\\da-f]{1,6}"+K+"?|("+K+")|.)","ig"),aa=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:d<0?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},ba=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ca=function(a,b){return b?"\0"===a?"\ufffd":a.slice(0,-1)+"\\"+a.charCodeAt(a.length-1).toString(16)+" ":"\\"+a},da=function(){m()},ea=ta(function(a){return a.disabled===!0&&("form"in a||"label"in a)},{dir:"parentNode",next:"legend"});try{G.apply(D=H.call(v.childNodes),v.childNodes),D[v.childNodes.length].nodeType}catch(fa){G={apply:D.length?function(a,b){F.apply(a,H.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]);a.length=c-1}}}function ga(a,b,d,e){var f,h,j,k,l,o,r,s=b&&b.ownerDocument,w=b?b.nodeType:9;if(d=d||[],"string"!=typeof a||!a||1!==w&&9!==w&&11!==w)return d;if(!e&&((b?b.ownerDocument||b:v)!==n&&m(b),b=b||n,p)){if(11!==w&&(l=Z.exec(a)))if(f=l[1]){if(9===w){if(!(j=b.getElementById(f)))return d;if(j.id===f)return d.push(j),d}else if(s&&(j=s.getElementById(f))&&t(b,j)&&j.id===f)return d.push(j),d}else{if(l[2])return G.apply(d,b.getElementsByTagName(a)),d;if((f=l[3])&&c.getElementsByClassName&&b.getElementsByClassName)return G.apply(d,b.getElementsByClassName(f)),d}if(c.qsa&&!A[a+" "]&&(!q||!q.test(a))){if(1!==w)s=b,r=a;else if("object"!==b.nodeName.toLowerCase()){(k=b.getAttribute("id"))?k=k.replace(ba,ca):b.setAttribute("id",k=u),o=g(a),h=o.length;while(h--)o[h]="#"+k+" "+sa(o[h]);r=o.join(","),s=$.test(a)&&qa(b.parentNode)||b}if(r)try{return G.apply(d,s.querySelectorAll(r)),d}catch(x){}finally{k===u&&b.removeAttribute("id")}}}return i(a.replace(P,"$1"),b,d,e)}function ha(){var a=[];function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}return b}function ia(a){return a[u]=!0,a}function ja(a){var b=n.createElement("fieldset");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function ka(a,b){var c=a.split("|"),e=c.length;while(e--)d.attrHandle[c[e]]=b}function la(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&a.sourceIndex-b.sourceIndex;if(d)return d;if(c)while(c=c.nextSibling)if(c===b)return-1;return a?1:-1}function ma(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function na(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function oa(a){return function(b){return"form"in b?b.parentNode&&b.disabled===!1?"label"in b?"label"in b.parentNode?b.parentNode.disabled===a:b.disabled===a:b.isDisabled===a||b.isDisabled!==!a&&ea(b)===a:b.disabled===a:"label"in b&&b.disabled===a}}function pa(a){return ia(function(b){return b=+b,ia(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function qa(a){return a&&"undefined"!=typeof a.getElementsByTagName&&a}c=ga.support={},f=ga.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return!!b&&"HTML"!==b.nodeName},m=ga.setDocument=function(a){var b,e,g=a?a.ownerDocument||a:v;return g!==n&&9===g.nodeType&&g.documentElement?(n=g,o=n.documentElement,p=!f(n),v!==n&&(e=n.defaultView)&&e.top!==e&&(e.addEventListener?e.addEventListener("unload",da,!1):e.attachEvent&&e.attachEvent("onunload",da)),c.attributes=ja(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=ja(function(a){return a.appendChild(n.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=Y.test(n.getElementsByClassName),c.getById=ja(function(a){return o.appendChild(a).id=u,!n.getElementsByName||!n.getElementsByName(u).length}),c.getById?(d.filter.ID=function(a){var b=a.replace(_,aa);return function(a){return a.getAttribute("id")===b}},d.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&p){var c=b.getElementById(a);return c?[c]:[]}}):(d.filter.ID=function(a){var b=a.replace(_,aa);return function(a){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}},d.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&p){var c,d,e,f=b.getElementById(a);if(f){if(c=f.getAttributeNode("id"),c&&c.value===a)return[f];e=b.getElementsByName(a),d=0;while(f=e[d++])if(c=f.getAttributeNode("id"),c&&c.value===a)return[f]}return[]}}),d.find.TAG=c.getElementsByTagName?function(a,b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(a):c.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){while(c=f[e++])1===c.nodeType&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){if("undefined"!=typeof b.getElementsByClassName&&p)return b.getElementsByClassName(a)},r=[],q=[],(c.qsa=Y.test(n.querySelectorAll))&&(ja(function(a){o.appendChild(a).innerHTML="<a id='"+u+"'></a><select id='"+u+"-\r\\' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&q.push("[*^$]="+K+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||q.push("\\["+K+"*(?:value|"+J+")"),a.querySelectorAll("[id~="+u+"-]").length||q.push("~="),a.querySelectorAll(":checked").length||q.push(":checked"),a.querySelectorAll("a#"+u+"+*").length||q.push(".#.+[+~]")}),ja(function(a){a.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var b=n.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&q.push("name"+K+"*[*^$|!~]?="),2!==a.querySelectorAll(":enabled").length&&q.push(":enabled",":disabled"),o.appendChild(a).disabled=!0,2!==a.querySelectorAll(":disabled").length&&q.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),q.push(",.*:")})),(c.matchesSelector=Y.test(s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&ja(function(a){c.disconnectedMatch=s.call(a,"*"),s.call(a,"[s!='']:x"),r.push("!=",N)}),q=q.length&&new RegExp(q.join("|")),r=r.length&&new RegExp(r.join("|")),b=Y.test(o.compareDocumentPosition),t=b||Y.test(o.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return!0;return!1},B=b?function(a,b){if(a===b)return l=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===n||a.ownerDocument===v&&t(v,a)?-1:b===n||b.ownerDocument===v&&t(v,b)?1:k?I(k,a)-I(k,b):0:4&d?-1:1)}:function(a,b){if(a===b)return l=!0,0;var c,d=0,e=a.parentNode,f=b.parentNode,g=[a],h=[b];if(!e||!f)return a===n?-1:b===n?1:e?-1:f?1:k?I(k,a)-I(k,b):0;if(e===f)return la(a,b);c=a;while(c=c.parentNode)g.unshift(c);c=b;while(c=c.parentNode)h.unshift(c);while(g[d]===h[d])d++;return d?la(g[d],h[d]):g[d]===v?-1:h[d]===v?1:0},n):n},ga.matches=function(a,b){return ga(a,null,null,b)},ga.matchesSelector=function(a,b){if((a.ownerDocument||a)!==n&&m(a),b=b.replace(S,"='$1']"),c.matchesSelector&&p&&!A[b+" "]&&(!r||!r.test(b))&&(!q||!q.test(b)))try{var d=s.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return ga(b,n,null,[a]).length>0},ga.contains=function(a,b){return(a.ownerDocument||a)!==n&&m(a),t(a,b)},ga.attr=function(a,b){(a.ownerDocument||a)!==n&&m(a);var e=d.attrHandle[b.toLowerCase()],f=e&&C.call(d.attrHandle,b.toLowerCase())?e(a,b,!p):void 0;return void 0!==f?f:c.attributes||!p?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},ga.escape=function(a){return(a+"").replace(ba,ca)},ga.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},ga.uniqueSort=function(a){var b,d=[],e=0,f=0;if(l=!c.detectDuplicates,k=!c.sortStable&&a.slice(0),a.sort(B),l){while(b=a[f++])b===a[f]&&(e=d.push(f));while(e--)a.splice(d[e],1)}return k=null,a},e=ga.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(3===f||4===f)return a.nodeValue}else while(b=a[d++])c+=e(b);return c},d=ga.selectors={cacheLength:50,createPseudo:ia,match:V,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(_,aa),a[3]=(a[3]||a[4]||a[5]||"").replace(_,aa),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||ga.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&ga.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return V.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&T.test(c)&&(b=g(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(_,aa).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=y[a+" "];return b||(b=new RegExp("(^|"+K+")"+a+"("+K+"|$)"))&&y(a,function(a){return b.test("string"==typeof a.className&&a.className||"undefined"!=typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=ga.attr(d,a);return null==e?"!="===b:!b||(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e.replace(O," ")+" ").indexOf(c)>-1:"|="===b&&(e===c||e.slice(0,c.length+1)===c+"-"))}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h,t=!1;if(q){if(f){while(p){m=b;while(m=m[p])if(h?m.nodeName.toLowerCase()===r:1===m.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){m=q,l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===w&&j[1],t=n&&j[2],m=n&&q.childNodes[n];while(m=++n&&m&&m[p]||(t=n=0)||o.pop())if(1===m.nodeType&&++t&&m===b){k[a]=[w,n,t];break}}else if(s&&(m=b,l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===w&&j[1],t=n),t===!1)while(m=++n&&m&&m[p]||(t=n=0)||o.pop())if((h?m.nodeName.toLowerCase()===r:1===m.nodeType)&&++t&&(s&&(l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),k[a]=[w,t]),m===b))break;return t-=e,t===d||t%d===0&&t/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||ga.error("unsupported pseudo: "+a);return e[u]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?ia(function(a,c){var d,f=e(a,b),g=f.length;while(g--)d=I(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:ia(function(a){var b=[],c=[],d=h(a.replace(P,"$1"));return d[u]?ia(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),b[0]=null,!c.pop()}}),has:ia(function(a){return function(b){return ga(a,b).length>0}}),contains:ia(function(a){return a=a.replace(_,aa),function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:ia(function(a){return U.test(a||"")||ga.error("unsupported lang: "+a),a=a.replace(_,aa).toLowerCase(),function(b){var c;do if(c=p?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===o},focus:function(a){return a===n.activeElement&&(!n.hasFocus||n.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:oa(!1),disabled:oa(!0),checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return X.test(a.nodeName)},input:function(a){return W.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:pa(function(){return[0]}),last:pa(function(a,b){return[b-1]}),eq:pa(function(a,b,c){return[c<0?c+b:c]}),even:pa(function(a,b){for(var c=0;c<b;c+=2)a.push(c);return a}),odd:pa(function(a,b){for(var c=1;c<b;c+=2)a.push(c);return a}),lt:pa(function(a,b,c){for(var d=c<0?c+b:c;--d>=0;)a.push(d);return a}),gt:pa(function(a,b,c){for(var d=c<0?c+b:c;++d<b;)a.push(d);return a})}},d.pseudos.nth=d.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=ma(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=na(b);function ra(){}ra.prototype=d.filters=d.pseudos,d.setFilters=new ra,g=ga.tokenize=function(a,b){var c,e,f,g,h,i,j,k=z[a+" "];if(k)return b?0:k.slice(0);h=a,i=[],j=d.preFilter;while(h){c&&!(e=Q.exec(h))||(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=R.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(P," ")}),h=h.slice(c.length));for(g in d.filter)!(e=V[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?ga.error(a):z(a,i).slice(0)};function sa(a){for(var b=0,c=a.length,d="";b<c;b++)d+=a[b].value;return d}function ta(a,b,c){var d=b.dir,e=b.next,f=e||d,g=c&&"parentNode"===f,h=x++;return b.first?function(b,c,e){while(b=b[d])if(1===b.nodeType||g)return a(b,c,e);return!1}:function(b,c,i){var j,k,l,m=[w,h];if(i){while(b=b[d])if((1===b.nodeType||g)&&a(b,c,i))return!0}else while(b=b[d])if(1===b.nodeType||g)if(l=b[u]||(b[u]={}),k=l[b.uniqueID]||(l[b.uniqueID]={}),e&&e===b.nodeName.toLowerCase())b=b[d]||b;else{if((j=k[f])&&j[0]===w&&j[1]===h)return m[2]=j[2];if(k[f]=m,m[2]=a(b,c,i))return!0}return!1}}function ua(a){return a.length>1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return!1;return!0}:a[0]}function va(a,b,c){for(var d=0,e=b.length;d<e;d++)ga(a,b[d],c);return c}function wa(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;h<i;h++)(f=a[h])&&(c&&!c(f,d,e)||(g.push(f),j&&b.push(h)));return g}function xa(a,b,c,d,e,f){return d&&!d[u]&&(d=xa(d)),e&&!e[u]&&(e=xa(e,f)),ia(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||va(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:wa(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d){j=wa(r,n),d(j,[],h,i),k=j.length;while(k--)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l))}if(f){if(e||a){if(e){j=[],k=r.length;while(k--)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}k=r.length;while(k--)(l=r[k])&&(j=e?I(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=wa(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):G.apply(g,r)})}function ya(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[" "],i=g?1:0,k=ta(function(a){return a===b},h,!0),l=ta(function(a){return I(b,a)>-1},h,!0),m=[function(a,c,d){var e=!g&&(d||c!==j)||((b=c).nodeType?k(a,c,d):l(a,c,d));return b=null,e}];i<f;i++)if(c=d.relative[a[i].type])m=[ta(ua(m),c)];else{if(c=d.filter[a[i].type].apply(null,a[i].matches),c[u]){for(e=++i;e<f;e++)if(d.relative[a[e].type])break;return xa(i>1&&ua(m),i>1&&sa(a.slice(0,i-1).concat({value:" "===a[i-2].type?"*":""})).replace(P,"$1"),c,i<e&&ya(a.slice(i,e)),e<f&&ya(a=a.slice(e)),e<f&&sa(a))}m.push(c)}return ua(m)}function za(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,h,i,k){var l,o,q,r=0,s="0",t=f&&[],u=[],v=j,x=f||e&&d.find.TAG("*",k),y=w+=null==v?1:Math.random()||.1,z=x.length;for(k&&(j=g===n||g||k);s!==z&&null!=(l=x[s]);s++){if(e&&l){o=0,g||l.ownerDocument===n||(m(l),h=!p);while(q=a[o++])if(q(l,g||n,h)){i.push(l);break}k&&(w=y)}c&&((l=!q&&l)&&r--,f&&t.push(l))}if(r+=s,c&&s!==r){o=0;while(q=b[o++])q(t,u,g,h);if(f){if(r>0)while(s--)t[s]||u[s]||(u[s]=E.call(i));u=wa(u)}G.apply(i,u),k&&!f&&u.length>0&&r+b.length>1&&ga.uniqueSort(i)}return k&&(w=y,j=v),t};return c?ia(f):f}return h=ga.compile=function(a,b){var c,d=[],e=[],f=A[a+" "];if(!f){b||(b=g(a)),c=b.length;while(c--)f=ya(b[c]),f[u]?d.push(f):e.push(f);f=A(a,za(e,d)),f.selector=a}return f},i=ga.select=function(a,b,c,e){var f,i,j,k,l,m="function"==typeof a&&a,n=!e&&g(a=m.selector||a);if(c=c||[],1===n.length){if(i=n[0]=n[0].slice(0),i.length>2&&"ID"===(j=i[0]).type&&9===b.nodeType&&p&&d.relative[i[1].type]){if(b=(d.find.ID(j.matches[0].replace(_,aa),b)||[])[0],!b)return c;m&&(b=b.parentNode),a=a.slice(i.shift().value.length)}f=V.needsContext.test(a)?0:i.length;while(f--){if(j=i[f],d.relative[k=j.type])break;if((l=d.find[k])&&(e=l(j.matches[0].replace(_,aa),$.test(i[0].type)&&qa(b.parentNode)||b))){if(i.splice(f,1),a=e.length&&sa(i),!a)return G.apply(c,e),c;break}}}return(m||h(a,n))(e,b,!p,c,!b||$.test(a)&&qa(b.parentNode)||b),c},c.sortStable=u.split("").sort(B).join("")===u,c.detectDuplicates=!!l,m(),c.sortDetached=ja(function(a){return 1&a.compareDocumentPosition(n.createElement("fieldset"))}),ja(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||ka("type|href|height|width",function(a,b,c){if(!c)return a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&ja(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||ka("value",function(a,b,c){if(!c&&"input"===a.nodeName.toLowerCase())return a.defaultValue}),ja(function(a){return null==a.getAttribute("disabled")})||ka(J,function(a,b,c){var d;if(!c)return a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),ga}(a);r.find=x,r.expr=x.selectors,r.expr[":"]=r.expr.pseudos,r.uniqueSort=r.unique=x.uniqueSort,r.text=x.getText,r.isXMLDoc=x.isXML,r.contains=x.contains,r.escapeSelector=x.escape;var y=function(a,b,c){var d=[],e=void 0!==c;while((a=a[b])&&9!==a.nodeType)if(1===a.nodeType){if(e&&r(a).is(c))break;d.push(a)}return d},z=function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c},A=r.expr.match.needsContext;function B(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()}var C=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,D=/^.[^:#\[\.,]*$/;function E(a,b,c){return r.isFunction(b)?r.grep(a,function(a,d){return!!b.call(a,d,a)!==c}):b.nodeType?r.grep(a,function(a){return a===b!==c}):"string"!=typeof b?r.grep(a,function(a){return i.call(b,a)>-1!==c}):D.test(b)?r.filter(b,a,c):(b=r.filter(b,a),r.grep(a,function(a){return i.call(b,a)>-1!==c&&1===a.nodeType}))}r.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?r.find.matchesSelector(d,a)?[d]:[]:r.find.matches(a,r.grep(b,function(a){return 1===a.nodeType}))},r.fn.extend({find:function(a){var b,c,d=this.length,e=this;if("string"!=typeof a)return this.pushStack(r(a).filter(function(){for(b=0;b<d;b++)if(r.contains(e[b],this))return!0}));for(c=this.pushStack([]),b=0;b<d;b++)r.find(a,e[b],c);return d>1?r.uniqueSort(c):c},filter:function(a){return this.pushStack(E(this,a||[],!1))},not:function(a){return this.pushStack(E(this,a||[],!0))},is:function(a){return!!E(this,"string"==typeof a&&A.test(a)?r(a):a||[],!1).length}});var F,G=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,H=r.fn.init=function(a,b,c){var e,f;if(!a)return this;if(c=c||F,"string"==typeof a){if(e="<"===a[0]&&">"===a[a.length-1]&&a.length>=3?[null,a,null]:G.exec(a),!e||!e[1]&&b)return!b||b.jquery?(b||c).find(a):this.constructor(b).find(a);if(e[1]){if(b=b instanceof r?b[0]:b,r.merge(this,r.parseHTML(e[1],b&&b.nodeType?b.ownerDocument||b:d,!0)),C.test(e[1])&&r.isPlainObject(b))for(e in b)r.isFunction(this[e])?this[e](b[e]):this.attr(e,b[e]);return this}return f=d.getElementById(e[2]),f&&(this[0]=f,this.length=1),this}return a.nodeType?(this[0]=a,this.length=1,this):r.isFunction(a)?void 0!==c.ready?c.ready(a):a(r):r.makeArray(a,this)};H.prototype=r.fn,F=r(d);var I=/^(?:parents|prev(?:Until|All))/,J={children:!0,contents:!0,next:!0,prev:!0};r.fn.extend({has:function(a){var b=r(a,this),c=b.length;return this.filter(function(){for(var a=0;a<c;a++)if(r.contains(this,b[a]))return!0})},closest:function(a,b){var c,d=0,e=this.length,f=[],g="string"!=typeof a&&r(a);if(!A.test(a))for(;d<e;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&r.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?r.uniqueSort(f):f)},index:function(a){return a?"string"==typeof a?i.call(r(a),this[0]):i.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(r.uniqueSort(r.merge(this.get(),r(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});function K(a,b){while((a=a[b])&&1!==a.nodeType);return a}r.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return y(a,"parentNode")},parentsUntil:function(a,b,c){return y(a,"parentNode",c)},next:function(a){return K(a,"nextSibling")},prev:function(a){return K(a,"previousSibling")},nextAll:function(a){return y(a,"nextSibling")},prevAll:function(a){return y(a,"previousSibling")},nextUntil:function(a,b,c){return y(a,"nextSibling",c)},prevUntil:function(a,b,c){return y(a,"previousSibling",c)},siblings:function(a){return z((a.parentNode||{}).firstChild,a)},children:function(a){return z(a.firstChild)},contents:function(a){return B(a,"iframe")?a.contentDocument:(B(a,"template")&&(a=a.content||a),r.merge([],a.childNodes))}},function(a,b){r.fn[a]=function(c,d){var e=r.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=r.filter(d,e)),this.length>1&&(J[a]||r.uniqueSort(e),I.test(a)&&e.reverse()),this.pushStack(e)}});var L=/[^\x20\t\r\n\f]+/g;function M(a){var b={};return r.each(a.match(L)||[],function(a,c){b[c]=!0}),b}r.Callbacks=function(a){a="string"==typeof a?M(a):r.extend({},a);var b,c,d,e,f=[],g=[],h=-1,i=function(){for(e=e||a.once,d=b=!0;g.length;h=-1){c=g.shift();while(++h<f.length)f[h].apply(c[0],c[1])===!1&&a.stopOnFalse&&(h=f.length,c=!1)}a.memory||(c=!1),b=!1,e&&(f=c?[]:"")},j={add:function(){return f&&(c&&!b&&(h=f.length-1,g.push(c)),function d(b){r.each(b,function(b,c){r.isFunction(c)?a.unique&&j.has(c)||f.push(c):c&&c.length&&"string"!==r.type(c)&&d(c)})}(arguments),c&&!b&&i()),this},remove:function(){return r.each(arguments,function(a,b){var c;while((c=r.inArray(b,f,c))>-1)f.splice(c,1),c<=h&&h--}),this},has:function(a){return a?r.inArray(a,f)>-1:f.length>0},empty:function(){return f&&(f=[]),this},disable:function(){return e=g=[],f=c="",this},disabled:function(){return!f},lock:function(){return e=g=[],c||b||(f=c=""),this},locked:function(){return!!e},fireWith:function(a,c){return e||(c=c||[],c=[a,c.slice?c.slice():c],g.push(c),b||i()),this},fire:function(){return j.fireWith(this,arguments),this},fired:function(){return!!d}};return j};function N(a){return a}function O(a){throw a}function P(a,b,c,d){var e;try{a&&r.isFunction(e=a.promise)?e.call(a).done(b).fail(c):a&&r.isFunction(e=a.then)?e.call(a,b,c):b.apply(void 0,[a].slice(d))}catch(a){c.apply(void 0,[a])}}r.extend({Deferred:function(b){var c=[["notify","progress",r.Callbacks("memory"),r.Callbacks("memory"),2],["resolve","done",r.Callbacks("once memory"),r.Callbacks("once memory"),0,"resolved"],["reject","fail",r.Callbacks("once memory"),r.Callbacks("once memory"),1,"rejected"]],d="pending",e={state:function(){return d},always:function(){return f.done(arguments).fail(arguments),this},"catch":function(a){return e.then(null,a)},pipe:function(){var a=arguments;return r.Deferred(function(b){r.each(c,function(c,d){var e=r.isFunction(a[d[4]])&&a[d[4]];f[d[1]](function(){var a=e&&e.apply(this,arguments);a&&r.isFunction(a.promise)?a.promise().progress(b.notify).done(b.resolve).fail(b.reject):b[d[0]+"With"](this,e?[a]:arguments)})}),a=null}).promise()},then:function(b,d,e){var f=0;function g(b,c,d,e){return function(){var h=this,i=arguments,j=function(){var a,j;if(!(b<f)){if(a=d.apply(h,i),a===c.promise())throw new TypeError("Thenable self-resolution");j=a&&("object"==typeof a||"function"==typeof a)&&a.then,r.isFunction(j)?e?j.call(a,g(f,c,N,e),g(f,c,O,e)):(f++,j.call(a,g(f,c,N,e),g(f,c,O,e),g(f,c,N,c.notifyWith))):(d!==N&&(h=void 0,i=[a]),(e||c.resolveWith)(h,i))}},k=e?j:function(){try{j()}catch(a){r.Deferred.exceptionHook&&r.Deferred.exceptionHook(a,k.stackTrace),b+1>=f&&(d!==O&&(h=void 0,i=[a]),c.rejectWith(h,i))}};b?k():(r.Deferred.getStackHook&&(k.stackTrace=r.Deferred.getStackHook()),a.setTimeout(k))}}return r.Deferred(function(a){c[0][3].add(g(0,a,r.isFunction(e)?e:N,a.notifyWith)),c[1][3].add(g(0,a,r.isFunction(b)?b:N)),c[2][3].add(g(0,a,r.isFunction(d)?d:O))}).promise()},promise:function(a){return null!=a?r.extend(a,e):e}},f={};return r.each(c,function(a,b){var g=b[2],h=b[5];e[b[1]]=g.add,h&&g.add(function(){d=h},c[3-a][2].disable,c[0][2].lock),g.add(b[3].fire),f[b[0]]=function(){return f[b[0]+"With"](this===f?void 0:this,arguments),this},f[b[0]+"With"]=g.fireWith}),e.promise(f),b&&b.call(f,f),f},when:function(a){var b=arguments.length,c=b,d=Array(c),e=f.call(arguments),g=r.Deferred(),h=function(a){return function(c){d[a]=this,e[a]=arguments.length>1?f.call(arguments):c,--b||g.resolveWith(d,e)}};if(b<=1&&(P(a,g.done(h(c)).resolve,g.reject,!b),"pending"===g.state()||r.isFunction(e[c]&&e[c].then)))return g.then();while(c--)P(e[c],h(c),g.reject);return g.promise()}});var Q=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;r.Deferred.exceptionHook=function(b,c){a.console&&a.console.warn&&b&&Q.test(b.name)&&a.console.warn("jQuery.Deferred exception: "+b.message,b.stack,c)},r.readyException=function(b){a.setTimeout(function(){throw b})};var R=r.Deferred();r.fn.ready=function(a){return R.then(a)["catch"](function(a){r.readyException(a)}),this},r.extend({isReady:!1,readyWait:1,ready:function(a){(a===!0?--r.readyWait:r.isReady)||(r.isReady=!0,a!==!0&&--r.readyWait>0||R.resolveWith(d,[r]))}}),r.ready.then=R.then;function S(){d.removeEventListener("DOMContentLoaded",S),
a.removeEventListener("load",S),r.ready()}"complete"===d.readyState||"loading"!==d.readyState&&!d.documentElement.doScroll?a.setTimeout(r.ready):(d.addEventListener("DOMContentLoaded",S),a.addEventListener("load",S));var T=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===r.type(c)){e=!0;for(h in c)T(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,r.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(r(a),c)})),b))for(;h<i;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f},U=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};function V(){this.expando=r.expando+V.uid++}V.uid=1,V.prototype={cache:function(a){var b=a[this.expando];return b||(b={},U(a)&&(a.nodeType?a[this.expando]=b:Object.defineProperty(a,this.expando,{value:b,configurable:!0}))),b},set:function(a,b,c){var d,e=this.cache(a);if("string"==typeof b)e[r.camelCase(b)]=c;else for(d in b)e[r.camelCase(d)]=b[d];return e},get:function(a,b){return void 0===b?this.cache(a):a[this.expando]&&a[this.expando][r.camelCase(b)]},access:function(a,b,c){return void 0===b||b&&"string"==typeof b&&void 0===c?this.get(a,b):(this.set(a,b,c),void 0!==c?c:b)},remove:function(a,b){var c,d=a[this.expando];if(void 0!==d){if(void 0!==b){Array.isArray(b)?b=b.map(r.camelCase):(b=r.camelCase(b),b=b in d?[b]:b.match(L)||[]),c=b.length;while(c--)delete d[b[c]]}(void 0===b||r.isEmptyObject(d))&&(a.nodeType?a[this.expando]=void 0:delete a[this.expando])}},hasData:function(a){var b=a[this.expando];return void 0!==b&&!r.isEmptyObject(b)}};var W=new V,X=new V,Y=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Z=/[A-Z]/g;function $(a){return"true"===a||"false"!==a&&("null"===a?null:a===+a+""?+a:Y.test(a)?JSON.parse(a):a)}function _(a,b,c){var d;if(void 0===c&&1===a.nodeType)if(d="data-"+b.replace(Z,"-$&").toLowerCase(),c=a.getAttribute(d),"string"==typeof c){try{c=$(c)}catch(e){}X.set(a,b,c)}else c=void 0;return c}r.extend({hasData:function(a){return X.hasData(a)||W.hasData(a)},data:function(a,b,c){return X.access(a,b,c)},removeData:function(a,b){X.remove(a,b)},_data:function(a,b,c){return W.access(a,b,c)},_removeData:function(a,b){W.remove(a,b)}}),r.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=X.get(f),1===f.nodeType&&!W.get(f,"hasDataAttrs"))){c=g.length;while(c--)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=r.camelCase(d.slice(5)),_(f,d,e[d])));W.set(f,"hasDataAttrs",!0)}return e}return"object"==typeof a?this.each(function(){X.set(this,a)}):T(this,function(b){var c;if(f&&void 0===b){if(c=X.get(f,a),void 0!==c)return c;if(c=_(f,a),void 0!==c)return c}else this.each(function(){X.set(this,a,b)})},null,b,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){X.remove(this,a)})}}),r.extend({queue:function(a,b,c){var d;if(a)return b=(b||"fx")+"queue",d=W.get(a,b),c&&(!d||Array.isArray(c)?d=W.access(a,b,r.makeArray(c)):d.push(c)),d||[]},dequeue:function(a,b){b=b||"fx";var c=r.queue(a,b),d=c.length,e=c.shift(),f=r._queueHooks(a,b),g=function(){r.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return W.get(a,c)||W.access(a,c,{empty:r.Callbacks("once memory").add(function(){W.remove(a,[b+"queue",c])})})}}),r.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?r.queue(this[0],a):void 0===b?this:this.each(function(){var c=r.queue(this,a,b);r._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&r.dequeue(this,a)})},dequeue:function(a){return this.each(function(){r.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=r.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};"string"!=typeof a&&(b=a,a=void 0),a=a||"fx";while(g--)c=W.get(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var aa=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ba=new RegExp("^(?:([+-])=|)("+aa+")([a-z%]*)$","i"),ca=["Top","Right","Bottom","Left"],da=function(a,b){return a=b||a,"none"===a.style.display||""===a.style.display&&r.contains(a.ownerDocument,a)&&"none"===r.css(a,"display")},ea=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};function fa(a,b,c,d){var e,f=1,g=20,h=d?function(){return d.cur()}:function(){return r.css(a,b,"")},i=h(),j=c&&c[3]||(r.cssNumber[b]?"":"px"),k=(r.cssNumber[b]||"px"!==j&&+i)&&ba.exec(r.css(a,b));if(k&&k[3]!==j){j=j||k[3],c=c||[],k=+i||1;do f=f||".5",k/=f,r.style(a,b,k+j);while(f!==(f=h()/i)&&1!==f&&--g)}return c&&(k=+k||+i||0,e=c[1]?k+(c[1]+1)*c[2]:+c[2],d&&(d.unit=j,d.start=k,d.end=e)),e}var ga={};function ha(a){var b,c=a.ownerDocument,d=a.nodeName,e=ga[d];return e?e:(b=c.body.appendChild(c.createElement(d)),e=r.css(b,"display"),b.parentNode.removeChild(b),"none"===e&&(e="block"),ga[d]=e,e)}function ia(a,b){for(var c,d,e=[],f=0,g=a.length;f<g;f++)d=a[f],d.style&&(c=d.style.display,b?("none"===c&&(e[f]=W.get(d,"display")||null,e[f]||(d.style.display="")),""===d.style.display&&da(d)&&(e[f]=ha(d))):"none"!==c&&(e[f]="none",W.set(d,"display",c)));for(f=0;f<g;f++)null!=e[f]&&(a[f].style.display=e[f]);return a}r.fn.extend({show:function(){return ia(this,!0)},hide:function(){return ia(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){da(this)?r(this).show():r(this).hide()})}});var ja=/^(?:checkbox|radio)$/i,ka=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,la=/^$|\/(?:java|ecma)script/i,ma={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ma.optgroup=ma.option,ma.tbody=ma.tfoot=ma.colgroup=ma.caption=ma.thead,ma.th=ma.td;function na(a,b){var c;return c="undefined"!=typeof a.getElementsByTagName?a.getElementsByTagName(b||"*"):"undefined"!=typeof a.querySelectorAll?a.querySelectorAll(b||"*"):[],void 0===b||b&&B(a,b)?r.merge([a],c):c}function oa(a,b){for(var c=0,d=a.length;c<d;c++)W.set(a[c],"globalEval",!b||W.get(b[c],"globalEval"))}var pa=/<|&#?\w+;/;function qa(a,b,c,d,e){for(var f,g,h,i,j,k,l=b.createDocumentFragment(),m=[],n=0,o=a.length;n<o;n++)if(f=a[n],f||0===f)if("object"===r.type(f))r.merge(m,f.nodeType?[f]:f);else if(pa.test(f)){g=g||l.appendChild(b.createElement("div")),h=(ka.exec(f)||["",""])[1].toLowerCase(),i=ma[h]||ma._default,g.innerHTML=i[1]+r.htmlPrefilter(f)+i[2],k=i[0];while(k--)g=g.lastChild;r.merge(m,g.childNodes),g=l.firstChild,g.textContent=""}else m.push(b.createTextNode(f));l.textContent="",n=0;while(f=m[n++])if(d&&r.inArray(f,d)>-1)e&&e.push(f);else if(j=r.contains(f.ownerDocument,f),g=na(l.appendChild(f),"script"),j&&oa(g),c){k=0;while(f=g[k++])la.test(f.type||"")&&c.push(f)}return l}!function(){var a=d.createDocumentFragment(),b=a.appendChild(d.createElement("div")),c=d.createElement("input");c.setAttribute("type","radio"),c.setAttribute("checked","checked"),c.setAttribute("name","t"),b.appendChild(c),o.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",o.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue}();var ra=d.documentElement,sa=/^key/,ta=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,ua=/^([^.]*)(?:\.(.+)|)/;function va(){return!0}function wa(){return!1}function xa(){try{return d.activeElement}catch(a){}}function ya(a,b,c,d,e,f){var g,h;if("object"==typeof b){"string"!=typeof c&&(d=d||c,c=void 0);for(h in b)ya(a,h,c,d,b[h],f);return a}if(null==d&&null==e?(e=c,d=c=void 0):null==e&&("string"==typeof c?(e=d,d=void 0):(e=d,d=c,c=void 0)),e===!1)e=wa;else if(!e)return a;return 1===f&&(g=e,e=function(a){return r().off(a),g.apply(this,arguments)},e.guid=g.guid||(g.guid=r.guid++)),a.each(function(){r.event.add(this,b,e,d,c)})}r.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=W.get(a);if(q){c.handler&&(f=c,c=f.handler,e=f.selector),e&&r.find.matchesSelector(ra,e),c.guid||(c.guid=r.guid++),(i=q.events)||(i=q.events={}),(g=q.handle)||(g=q.handle=function(b){return"undefined"!=typeof r&&r.event.triggered!==b.type?r.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(L)||[""],j=b.length;while(j--)h=ua.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n&&(l=r.event.special[n]||{},n=(e?l.delegateType:l.bindType)||n,l=r.event.special[n]||{},k=r.extend({type:n,origType:p,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&r.expr.match.needsContext.test(e),namespace:o.join(".")},f),(m=i[n])||(m=i[n]=[],m.delegateCount=0,l.setup&&l.setup.call(a,d,o,g)!==!1||a.addEventListener&&a.addEventListener(n,g)),l.add&&(l.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,k):m.push(k),r.event.global[n]=!0)}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=W.hasData(a)&&W.get(a);if(q&&(i=q.events)){b=(b||"").match(L)||[""],j=b.length;while(j--)if(h=ua.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n){l=r.event.special[n]||{},n=(d?l.delegateType:l.bindType)||n,m=i[n]||[],h=h[2]&&new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;while(f--)k=m[f],!e&&p!==k.origType||c&&c.guid!==k.guid||h&&!h.test(k.namespace)||d&&d!==k.selector&&("**"!==d||!k.selector)||(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&(l.teardown&&l.teardown.call(a,o,q.handle)!==!1||r.removeEvent(a,n,q.handle),delete i[n])}else for(n in i)r.event.remove(a,n+b[j],c,d,!0);r.isEmptyObject(i)&&W.remove(a,"handle events")}},dispatch:function(a){var b=r.event.fix(a),c,d,e,f,g,h,i=new Array(arguments.length),j=(W.get(this,"events")||{})[b.type]||[],k=r.event.special[b.type]||{};for(i[0]=b,c=1;c<arguments.length;c++)i[c]=arguments[c];if(b.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,b)!==!1){h=r.event.handlers.call(this,b,j),c=0;while((f=h[c++])&&!b.isPropagationStopped()){b.currentTarget=f.elem,d=0;while((g=f.handlers[d++])&&!b.isImmediatePropagationStopped())b.rnamespace&&!b.rnamespace.test(g.namespace)||(b.handleObj=g,b.data=g.data,e=((r.event.special[g.origType]||{}).handle||g.handler).apply(f.elem,i),void 0!==e&&(b.result=e)===!1&&(b.preventDefault(),b.stopPropagation()))}return k.postDispatch&&k.postDispatch.call(this,b),b.result}},handlers:function(a,b){var c,d,e,f,g,h=[],i=b.delegateCount,j=a.target;if(i&&j.nodeType&&!("click"===a.type&&a.button>=1))for(;j!==this;j=j.parentNode||this)if(1===j.nodeType&&("click"!==a.type||j.disabled!==!0)){for(f=[],g={},c=0;c<i;c++)d=b[c],e=d.selector+" ",void 0===g[e]&&(g[e]=d.needsContext?r(e,this).index(j)>-1:r.find(e,this,null,[j]).length),g[e]&&f.push(d);f.length&&h.push({elem:j,handlers:f})}return j=this,i<b.length&&h.push({elem:j,handlers:b.slice(i)}),h},addProp:function(a,b){Object.defineProperty(r.Event.prototype,a,{enumerable:!0,configurable:!0,get:r.isFunction(b)?function(){if(this.originalEvent)return b(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[a]},set:function(b){Object.defineProperty(this,a,{enumerable:!0,configurable:!0,writable:!0,value:b})}})},fix:function(a){return a[r.expando]?a:new r.Event(a)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==xa()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===xa()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&B(this,"input"))return this.click(),!1},_default:function(a){return B(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}}},r.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c)},r.Event=function(a,b){return this instanceof r.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?va:wa,this.target=a.target&&3===a.target.nodeType?a.target.parentNode:a.target,this.currentTarget=a.currentTarget,this.relatedTarget=a.relatedTarget):this.type=a,b&&r.extend(this,b),this.timeStamp=a&&a.timeStamp||r.now(),void(this[r.expando]=!0)):new r.Event(a,b)},r.Event.prototype={constructor:r.Event,isDefaultPrevented:wa,isPropagationStopped:wa,isImmediatePropagationStopped:wa,isSimulated:!1,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=va,a&&!this.isSimulated&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=va,a&&!this.isSimulated&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=va,a&&!this.isSimulated&&a.stopImmediatePropagation(),this.stopPropagation()}},r.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(a){var b=a.button;return null==a.which&&sa.test(a.type)?null!=a.charCode?a.charCode:a.keyCode:!a.which&&void 0!==b&&ta.test(a.type)?1&b?1:2&b?3:4&b?2:0:a.which}},r.event.addProp),r.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){r.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return e&&(e===d||r.contains(d,e))||(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),r.fn.extend({on:function(a,b,c,d){return ya(this,a,b,c,d)},one:function(a,b,c,d){return ya(this,a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,r(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return b!==!1&&"function"!=typeof b||(c=b,b=void 0),c===!1&&(c=wa),this.each(function(){r.event.remove(this,a,c,b)})}});var za=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Aa=/<script|<style|<link/i,Ba=/checked\s*(?:[^=]|=\s*.checked.)/i,Ca=/^true\/(.*)/,Da=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Ea(a,b){return B(a,"table")&&B(11!==b.nodeType?b:b.firstChild,"tr")?r(">tbody",a)[0]||a:a}function Fa(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function Ga(a){var b=Ca.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function Ha(a,b){var c,d,e,f,g,h,i,j;if(1===b.nodeType){if(W.hasData(a)&&(f=W.access(a),g=W.set(b,f),j=f.events)){delete g.handle,g.events={};for(e in j)for(c=0,d=j[e].length;c<d;c++)r.event.add(b,e,j[e][c])}X.hasData(a)&&(h=X.access(a),i=r.extend({},h),X.set(b,i))}}function Ia(a,b){var c=b.nodeName.toLowerCase();"input"===c&&ja.test(a.type)?b.checked=a.checked:"input"!==c&&"textarea"!==c||(b.defaultValue=a.defaultValue)}function Ja(a,b,c,d){b=g.apply([],b);var e,f,h,i,j,k,l=0,m=a.length,n=m-1,q=b[0],s=r.isFunction(q);if(s||m>1&&"string"==typeof q&&!o.checkClone&&Ba.test(q))return a.each(function(e){var f=a.eq(e);s&&(b[0]=q.call(this,e,f.html())),Ja(f,b,c,d)});if(m&&(e=qa(b,a[0].ownerDocument,!1,a,d),f=e.firstChild,1===e.childNodes.length&&(e=f),f||d)){for(h=r.map(na(e,"script"),Fa),i=h.length;l<m;l++)j=e,l!==n&&(j=r.clone(j,!0,!0),i&&r.merge(h,na(j,"script"))),c.call(a[l],j,l);if(i)for(k=h[h.length-1].ownerDocument,r.map(h,Ga),l=0;l<i;l++)j=h[l],la.test(j.type||"")&&!W.access(j,"globalEval")&&r.contains(k,j)&&(j.src?r._evalUrl&&r._evalUrl(j.src):p(j.textContent.replace(Da,""),k))}return a}function Ka(a,b,c){for(var d,e=b?r.filter(b,a):a,f=0;null!=(d=e[f]);f++)c||1!==d.nodeType||r.cleanData(na(d)),d.parentNode&&(c&&r.contains(d.ownerDocument,d)&&oa(na(d,"script")),d.parentNode.removeChild(d));return a}r.extend({htmlPrefilter:function(a){return a.replace(za,"<$1></$2>")},clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=r.contains(a.ownerDocument,a);if(!(o.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||r.isXMLDoc(a)))for(g=na(h),f=na(a),d=0,e=f.length;d<e;d++)Ia(f[d],g[d]);if(b)if(c)for(f=f||na(a),g=g||na(h),d=0,e=f.length;d<e;d++)Ha(f[d],g[d]);else Ha(a,h);return g=na(h,"script"),g.length>0&&oa(g,!i&&na(a,"script")),h},cleanData:function(a){for(var b,c,d,e=r.event.special,f=0;void 0!==(c=a[f]);f++)if(U(c)){if(b=c[W.expando]){if(b.events)for(d in b.events)e[d]?r.event.remove(c,d):r.removeEvent(c,d,b.handle);c[W.expando]=void 0}c[X.expando]&&(c[X.expando]=void 0)}}}),r.fn.extend({detach:function(a){return Ka(this,a,!0)},remove:function(a){return Ka(this,a)},text:function(a){return T(this,function(a){return void 0===a?r.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=a)})},null,a,arguments.length)},append:function(){return Ja(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=Ea(this,a);b.appendChild(a)}})},prepend:function(){return Ja(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=Ea(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return Ja(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return Ja(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(r.cleanData(na(a,!1)),a.textContent="");return this},clone:function(a,b){return a=null!=a&&a,b=null==b?a:b,this.map(function(){return r.clone(this,a,b)})},html:function(a){return T(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"==typeof a&&!Aa.test(a)&&!ma[(ka.exec(a)||["",""])[1].toLowerCase()]){a=r.htmlPrefilter(a);try{for(;c<d;c++)b=this[c]||{},1===b.nodeType&&(r.cleanData(na(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=[];return Ja(this,arguments,function(b){var c=this.parentNode;r.inArray(this,a)<0&&(r.cleanData(na(this)),c&&c.replaceChild(b,this))},a)}}),r.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){r.fn[a]=function(a){for(var c,d=[],e=r(a),f=e.length-1,g=0;g<=f;g++)c=g===f?this:this.clone(!0),r(e[g])[b](c),h.apply(d,c.get());return this.pushStack(d)}});var La=/^margin/,Ma=new RegExp("^("+aa+")(?!px)[a-z%]+$","i"),Na=function(b){var c=b.ownerDocument.defaultView;return c&&c.opener||(c=a),c.getComputedStyle(b)};!function(){function b(){if(i){i.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",i.innerHTML="",ra.appendChild(h);var b=a.getComputedStyle(i);c="1%"!==b.top,g="2px"===b.marginLeft,e="4px"===b.width,i.style.marginRight="50%",f="4px"===b.marginRight,ra.removeChild(h),i=null}}var c,e,f,g,h=d.createElement("div"),i=d.createElement("div");i.style&&(i.style.backgroundClip="content-box",i.cloneNode(!0).style.backgroundClip="",o.clearCloneStyle="content-box"===i.style.backgroundClip,h.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",h.appendChild(i),r.extend(o,{pixelPosition:function(){return b(),c},boxSizingReliable:function(){return b(),e},pixelMarginRight:function(){return b(),f},reliableMarginLeft:function(){return b(),g}}))}();function Oa(a,b,c){var d,e,f,g,h=a.style;return c=c||Na(a),c&&(g=c.getPropertyValue(b)||c[b],""!==g||r.contains(a.ownerDocument,a)||(g=r.style(a,b)),!o.pixelMarginRight()&&Ma.test(g)&&La.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0!==g?g+"":g}function Pa(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}var Qa=/^(none|table(?!-c[ea]).+)/,Ra=/^--/,Sa={position:"absolute",visibility:"hidden",display:"block"},Ta={letterSpacing:"0",fontWeight:"400"},Ua=["Webkit","Moz","ms"],Va=d.createElement("div").style;function Wa(a){if(a in Va)return a;var b=a[0].toUpperCase()+a.slice(1),c=Ua.length;while(c--)if(a=Ua[c]+b,a in Va)return a}function Xa(a){var b=r.cssProps[a];return b||(b=r.cssProps[a]=Wa(a)||a),b}function Ya(a,b,c){var d=ba.exec(b);return d?Math.max(0,d[2]-(c||0))+(d[3]||"px"):b}function Za(a,b,c,d,e){var f,g=0;for(f=c===(d?"border":"content")?4:"width"===b?1:0;f<4;f+=2)"margin"===c&&(g+=r.css(a,c+ca[f],!0,e)),d?("content"===c&&(g-=r.css(a,"padding"+ca[f],!0,e)),"margin"!==c&&(g-=r.css(a,"border"+ca[f]+"Width",!0,e))):(g+=r.css(a,"padding"+ca[f],!0,e),"padding"!==c&&(g+=r.css(a,"border"+ca[f]+"Width",!0,e)));return g}function $a(a,b,c){var d,e=Na(a),f=Oa(a,b,e),g="border-box"===r.css(a,"boxSizing",!1,e);return Ma.test(f)?f:(d=g&&(o.boxSizingReliable()||f===a.style[b]),"auto"===f&&(f=a["offset"+b[0].toUpperCase()+b.slice(1)]),f=parseFloat(f)||0,f+Za(a,b,c||(g?"border":"content"),d,e)+"px")}r.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=Oa(a,"opacity");return""===c?"1":c}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=r.camelCase(b),i=Ra.test(b),j=a.style;return i||(b=Xa(h)),g=r.cssHooks[b]||r.cssHooks[h],void 0===c?g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:j[b]:(f=typeof c,"string"===f&&(e=ba.exec(c))&&e[1]&&(c=fa(a,b,e),f="number"),null!=c&&c===c&&("number"===f&&(c+=e&&e[3]||(r.cssNumber[h]?"":"px")),o.clearCloneStyle||""!==c||0!==b.indexOf("background")||(j[b]="inherit"),g&&"set"in g&&void 0===(c=g.set(a,c,d))||(i?j.setProperty(b,c):j[b]=c)),void 0)}},css:function(a,b,c,d){var e,f,g,h=r.camelCase(b),i=Ra.test(b);return i||(b=Xa(h)),g=r.cssHooks[b]||r.cssHooks[h],g&&"get"in g&&(e=g.get(a,!0,c)),void 0===e&&(e=Oa(a,b,d)),"normal"===e&&b in Ta&&(e=Ta[b]),""===c||c?(f=parseFloat(e),c===!0||isFinite(f)?f||0:e):e}}),r.each(["height","width"],function(a,b){r.cssHooks[b]={get:function(a,c,d){if(c)return!Qa.test(r.css(a,"display"))||a.getClientRects().length&&a.getBoundingClientRect().width?$a(a,b,d):ea(a,Sa,function(){return $a(a,b,d)})},set:function(a,c,d){var e,f=d&&Na(a),g=d&&Za(a,b,d,"border-box"===r.css(a,"boxSizing",!1,f),f);return g&&(e=ba.exec(c))&&"px"!==(e[3]||"px")&&(a.style[b]=c,c=r.css(a,b)),Ya(a,c,g)}}}),r.cssHooks.marginLeft=Pa(o.reliableMarginLeft,function(a,b){if(b)return(parseFloat(Oa(a,"marginLeft"))||a.getBoundingClientRect().left-ea(a,{marginLeft:0},function(){return a.getBoundingClientRect().left}))+"px"}),r.each({margin:"",padding:"",border:"Width"},function(a,b){r.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];d<4;d++)e[a+ca[d]+b]=f[d]||f[d-2]||f[0];return e}},La.test(a)||(r.cssHooks[a+b].set=Ya)}),r.fn.extend({css:function(a,b){return T(this,function(a,b,c){var d,e,f={},g=0;if(Array.isArray(b)){for(d=Na(a),e=b.length;g<e;g++)f[b[g]]=r.css(a,b[g],!1,d);return f}return void 0!==c?r.style(a,b,c):r.css(a,b)},a,b,arguments.length>1)}});function _a(a,b,c,d,e){return new _a.prototype.init(a,b,c,d,e)}r.Tween=_a,_a.prototype={constructor:_a,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||r.easing._default,this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(r.cssNumber[c]?"":"px")},cur:function(){var a=_a.propHooks[this.prop];return a&&a.get?a.get(this):_a.propHooks._default.get(this)},run:function(a){var b,c=_a.propHooks[this.prop];return this.options.duration?this.pos=b=r.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):_a.propHooks._default.set(this),this}},_a.prototype.init.prototype=_a.prototype,_a.propHooks={_default:{get:function(a){var b;return 1!==a.elem.nodeType||null!=a.elem[a.prop]&&null==a.elem.style[a.prop]?a.elem[a.prop]:(b=r.css(a.elem,a.prop,""),b&&"auto"!==b?b:0)},set:function(a){r.fx.step[a.prop]?r.fx.step[a.prop](a):1!==a.elem.nodeType||null==a.elem.style[r.cssProps[a.prop]]&&!r.cssHooks[a.prop]?a.elem[a.prop]=a.now:r.style(a.elem,a.prop,a.now+a.unit)}}},_a.propHooks.scrollTop=_a.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},r.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2},_default:"swing"},r.fx=_a.prototype.init,r.fx.step={};var ab,bb,cb=/^(?:toggle|show|hide)$/,db=/queueHooks$/;function eb(){bb&&(d.hidden===!1&&a.requestAnimationFrame?a.requestAnimationFrame(eb):a.setTimeout(eb,r.fx.interval),r.fx.tick())}function fb(){return a.setTimeout(function(){ab=void 0}),ab=r.now()}function gb(a,b){var c,d=0,e={height:a};for(b=b?1:0;d<4;d+=2-b)c=ca[d],e["margin"+c]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function hb(a,b,c){for(var d,e=(kb.tweeners[b]||[]).concat(kb.tweeners["*"]),f=0,g=e.length;f<g;f++)if(d=e[f].call(c,b,a))return d}function ib(a,b,c){var d,e,f,g,h,i,j,k,l="width"in b||"height"in b,m=this,n={},o=a.style,p=a.nodeType&&da(a),q=W.get(a,"fxshow");c.queue||(g=r._queueHooks(a,"fx"),null==g.unqueued&&(g.unqueued=0,h=g.empty.fire,g.empty.fire=function(){g.unqueued||h()}),g.unqueued++,m.always(function(){m.always(function(){g.unqueued--,r.queue(a,"fx").length||g.empty.fire()})}));for(d in b)if(e=b[d],cb.test(e)){if(delete b[d],f=f||"toggle"===e,e===(p?"hide":"show")){if("show"!==e||!q||void 0===q[d])continue;p=!0}n[d]=q&&q[d]||r.style(a,d)}if(i=!r.isEmptyObject(b),i||!r.isEmptyObject(n)){l&&1===a.nodeType&&(c.overflow=[o.overflow,o.overflowX,o.overflowY],j=q&&q.display,null==j&&(j=W.get(a,"display")),k=r.css(a,"display"),"none"===k&&(j?k=j:(ia([a],!0),j=a.style.display||j,k=r.css(a,"display"),ia([a]))),("inline"===k||"inline-block"===k&&null!=j)&&"none"===r.css(a,"float")&&(i||(m.done(function(){o.display=j}),null==j&&(k=o.display,j="none"===k?"":k)),o.display="inline-block")),c.overflow&&(o.overflow="hidden",m.always(function(){o.overflow=c.overflow[0],o.overflowX=c.overflow[1],o.overflowY=c.overflow[2]})),i=!1;for(d in n)i||(q?"hidden"in q&&(p=q.hidden):q=W.access(a,"fxshow",{display:j}),f&&(q.hidden=!p),p&&ia([a],!0),m.done(function(){p||ia([a]),W.remove(a,"fxshow");for(d in n)r.style(a,d,n[d])})),i=hb(p?q[d]:0,d,m),d in q||(q[d]=i.start,p&&(i.end=i.start,i.start=0))}}function jb(a,b){var c,d,e,f,g;for(c in a)if(d=r.camelCase(c),e=b[d],f=a[c],Array.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=r.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function kb(a,b,c){var d,e,f=0,g=kb.prefilters.length,h=r.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=ab||fb(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;g<i;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),f<1&&i?c:(i||h.notifyWith(a,[j,1,0]),h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:r.extend({},b),opts:r.extend(!0,{specialEasing:{},easing:r.easing._default},c),originalProperties:b,originalOptions:c,startTime:ab||fb(),duration:c.duration,tweens:[],createTween:function(b,c){var d=r.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;c<d;c++)j.tweens[c].run(1);return b?(h.notifyWith(a,[j,1,0]),h.resolveWith(a,[j,b])):h.rejectWith(a,[j,b]),this}}),k=j.props;for(jb(k,j.opts.specialEasing);f<g;f++)if(d=kb.prefilters[f].call(j,a,k,j.opts))return r.isFunction(d.stop)&&(r._queueHooks(j.elem,j.opts.queue).stop=r.proxy(d.stop,d)),d;return r.map(k,hb,j),r.isFunction(j.opts.start)&&j.opts.start.call(a,j),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always),r.fx.timer(r.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j}r.Animation=r.extend(kb,{tweeners:{"*":[function(a,b){var c=this.createTween(a,b);return fa(c.elem,a,ba.exec(b),c),c}]},tweener:function(a,b){r.isFunction(a)?(b=a,a=["*"]):a=a.match(L);for(var c,d=0,e=a.length;d<e;d++)c=a[d],kb.tweeners[c]=kb.tweeners[c]||[],kb.tweeners[c].unshift(b)},prefilters:[ib],prefilter:function(a,b){b?kb.prefilters.unshift(a):kb.prefilters.push(a)}}),r.speed=function(a,b,c){var d=a&&"object"==typeof a?r.extend({},a):{complete:c||!c&&b||r.isFunction(a)&&a,duration:a,easing:c&&b||b&&!r.isFunction(b)&&b};return r.fx.off?d.duration=0:"number"!=typeof d.duration&&(d.duration in r.fx.speeds?d.duration=r.fx.speeds[d.duration]:d.duration=r.fx.speeds._default),null!=d.queue&&d.queue!==!0||(d.queue="fx"),d.old=d.complete,d.complete=function(){r.isFunction(d.old)&&d.old.call(this),d.queue&&r.dequeue(this,d.queue)},d},r.fn.extend({fadeTo:function(a,b,c,d){return this.filter(da).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=r.isEmptyObject(a),f=r.speed(b,c,d),g=function(){var b=kb(this,r.extend({},a),f);(e||W.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=r.timers,g=W.get(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&db.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));!b&&c||r.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=W.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=r.timers,g=d?d.length:0;for(c.finish=!0,r.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;b<g;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),r.each(["toggle","show","hide"],function(a,b){var c=r.fn[b];r.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(gb(b,!0),a,d,e)}}),r.each({slideDown:gb("show"),slideUp:gb("hide"),slideToggle:gb("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){r.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),r.timers=[],r.fx.tick=function(){var a,b=0,c=r.timers;for(ab=r.now();b<c.length;b++)a=c[b],a()||c[b]!==a||c.splice(b--,1);c.length||r.fx.stop(),ab=void 0},r.fx.timer=function(a){r.timers.push(a),r.fx.start()},r.fx.interval=13,r.fx.start=function(){bb||(bb=!0,eb())},r.fx.stop=function(){bb=null},r.fx.speeds={slow:600,fast:200,_default:400},r.fn.delay=function(b,c){return b=r.fx?r.fx.speeds[b]||b:b,c=c||"fx",this.queue(c,function(c,d){var e=a.setTimeout(c,b);d.stop=function(){a.clearTimeout(e)}})},function(){var a=d.createElement("input"),b=d.createElement("select"),c=b.appendChild(d.createElement("option"));a.type="checkbox",o.checkOn=""!==a.value,o.optSelected=c.selected,a=d.createElement("input"),a.value="t",a.type="radio",o.radioValue="t"===a.value}();var lb,mb=r.expr.attrHandle;r.fn.extend({attr:function(a,b){return T(this,r.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){r.removeAttr(this,a)})}}),r.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return"undefined"==typeof a.getAttribute?r.prop(a,b,c):(1===f&&r.isXMLDoc(a)||(e=r.attrHooks[b.toLowerCase()]||(r.expr.match.bool.test(b)?lb:void 0)),void 0!==c?null===c?void r.removeAttr(a,b):e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:(a.setAttribute(b,c+""),c):e&&"get"in e&&null!==(d=e.get(a,b))?d:(d=r.find.attr(a,b),
null==d?void 0:d))},attrHooks:{type:{set:function(a,b){if(!o.radioValue&&"radio"===b&&B(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}},removeAttr:function(a,b){var c,d=0,e=b&&b.match(L);if(e&&1===a.nodeType)while(c=e[d++])a.removeAttribute(c)}}),lb={set:function(a,b,c){return b===!1?r.removeAttr(a,c):a.setAttribute(c,c),c}},r.each(r.expr.match.bool.source.match(/\w+/g),function(a,b){var c=mb[b]||r.find.attr;mb[b]=function(a,b,d){var e,f,g=b.toLowerCase();return d||(f=mb[g],mb[g]=e,e=null!=c(a,b,d)?g:null,mb[g]=f),e}});var nb=/^(?:input|select|textarea|button)$/i,ob=/^(?:a|area)$/i;r.fn.extend({prop:function(a,b){return T(this,r.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[r.propFix[a]||a]})}}),r.extend({prop:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return 1===f&&r.isXMLDoc(a)||(b=r.propFix[b]||b,e=r.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){var b=r.find.attr(a,"tabindex");return b?parseInt(b,10):nb.test(a.nodeName)||ob.test(a.nodeName)&&a.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),o.optSelected||(r.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null},set:function(a){var b=a.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex)}}),r.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){r.propFix[this.toLowerCase()]=this});function pb(a){var b=a.match(L)||[];return b.join(" ")}function qb(a){return a.getAttribute&&a.getAttribute("class")||""}r.fn.extend({addClass:function(a){var b,c,d,e,f,g,h,i=0;if(r.isFunction(a))return this.each(function(b){r(this).addClass(a.call(this,b,qb(this)))});if("string"==typeof a&&a){b=a.match(L)||[];while(c=this[i++])if(e=qb(c),d=1===c.nodeType&&" "+pb(e)+" "){g=0;while(f=b[g++])d.indexOf(" "+f+" ")<0&&(d+=f+" ");h=pb(d),e!==h&&c.setAttribute("class",h)}}return this},removeClass:function(a){var b,c,d,e,f,g,h,i=0;if(r.isFunction(a))return this.each(function(b){r(this).removeClass(a.call(this,b,qb(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof a&&a){b=a.match(L)||[];while(c=this[i++])if(e=qb(c),d=1===c.nodeType&&" "+pb(e)+" "){g=0;while(f=b[g++])while(d.indexOf(" "+f+" ")>-1)d=d.replace(" "+f+" "," ");h=pb(d),e!==h&&c.setAttribute("class",h)}}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):r.isFunction(a)?this.each(function(c){r(this).toggleClass(a.call(this,c,qb(this),b),b)}):this.each(function(){var b,d,e,f;if("string"===c){d=0,e=r(this),f=a.match(L)||[];while(b=f[d++])e.hasClass(b)?e.removeClass(b):e.addClass(b)}else void 0!==a&&"boolean"!==c||(b=qb(this),b&&W.set(this,"__className__",b),this.setAttribute&&this.setAttribute("class",b||a===!1?"":W.get(this,"__className__")||""))})},hasClass:function(a){var b,c,d=0;b=" "+a+" ";while(c=this[d++])if(1===c.nodeType&&(" "+pb(qb(c))+" ").indexOf(b)>-1)return!0;return!1}});var rb=/\r/g;r.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=r.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,r(this).val()):a,null==e?e="":"number"==typeof e?e+="":Array.isArray(e)&&(e=r.map(e,function(a){return null==a?"":a+""})),b=r.valHooks[this.type]||r.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=r.valHooks[e.type]||r.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(rb,""):null==c?"":c)}}}),r.extend({valHooks:{option:{get:function(a){var b=r.find.attr(a,"value");return null!=b?b:pb(r.text(a))}},select:{get:function(a){var b,c,d,e=a.options,f=a.selectedIndex,g="select-one"===a.type,h=g?null:[],i=g?f+1:e.length;for(d=f<0?i:g?f:0;d<i;d++)if(c=e[d],(c.selected||d===f)&&!c.disabled&&(!c.parentNode.disabled||!B(c.parentNode,"optgroup"))){if(b=r(c).val(),g)return b;h.push(b)}return h},set:function(a,b){var c,d,e=a.options,f=r.makeArray(b),g=e.length;while(g--)d=e[g],(d.selected=r.inArray(r.valHooks.option.get(d),f)>-1)&&(c=!0);return c||(a.selectedIndex=-1),f}}}}),r.each(["radio","checkbox"],function(){r.valHooks[this]={set:function(a,b){if(Array.isArray(b))return a.checked=r.inArray(r(a).val(),b)>-1}},o.checkOn||(r.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var sb=/^(?:focusinfocus|focusoutblur)$/;r.extend(r.event,{trigger:function(b,c,e,f){var g,h,i,j,k,m,n,o=[e||d],p=l.call(b,"type")?b.type:b,q=l.call(b,"namespace")?b.namespace.split("."):[];if(h=i=e=e||d,3!==e.nodeType&&8!==e.nodeType&&!sb.test(p+r.event.triggered)&&(p.indexOf(".")>-1&&(q=p.split("."),p=q.shift(),q.sort()),k=p.indexOf(":")<0&&"on"+p,b=b[r.expando]?b:new r.Event(p,"object"==typeof b&&b),b.isTrigger=f?2:3,b.namespace=q.join("."),b.rnamespace=b.namespace?new RegExp("(^|\\.)"+q.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=e),c=null==c?[b]:r.makeArray(c,[b]),n=r.event.special[p]||{},f||!n.trigger||n.trigger.apply(e,c)!==!1)){if(!f&&!n.noBubble&&!r.isWindow(e)){for(j=n.delegateType||p,sb.test(j+p)||(h=h.parentNode);h;h=h.parentNode)o.push(h),i=h;i===(e.ownerDocument||d)&&o.push(i.defaultView||i.parentWindow||a)}g=0;while((h=o[g++])&&!b.isPropagationStopped())b.type=g>1?j:n.bindType||p,m=(W.get(h,"events")||{})[b.type]&&W.get(h,"handle"),m&&m.apply(h,c),m=k&&h[k],m&&m.apply&&U(h)&&(b.result=m.apply(h,c),b.result===!1&&b.preventDefault());return b.type=p,f||b.isDefaultPrevented()||n._default&&n._default.apply(o.pop(),c)!==!1||!U(e)||k&&r.isFunction(e[p])&&!r.isWindow(e)&&(i=e[k],i&&(e[k]=null),r.event.triggered=p,e[p](),r.event.triggered=void 0,i&&(e[k]=i)),b.result}},simulate:function(a,b,c){var d=r.extend(new r.Event,c,{type:a,isSimulated:!0});r.event.trigger(d,null,b)}}),r.fn.extend({trigger:function(a,b){return this.each(function(){r.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];if(c)return r.event.trigger(a,b,c,!0)}}),r.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(a,b){r.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),r.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),o.focusin="onfocusin"in a,o.focusin||r.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){r.event.simulate(b,a.target,r.event.fix(a))};r.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=W.access(d,b);e||d.addEventListener(a,c,!0),W.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=W.access(d,b)-1;e?W.access(d,b,e):(d.removeEventListener(a,c,!0),W.remove(d,b))}}});var tb=a.location,ub=r.now(),vb=/\?/;r.parseXML=function(b){var c;if(!b||"string"!=typeof b)return null;try{c=(new a.DOMParser).parseFromString(b,"text/xml")}catch(d){c=void 0}return c&&!c.getElementsByTagName("parsererror").length||r.error("Invalid XML: "+b),c};var wb=/\[\]$/,xb=/\r?\n/g,yb=/^(?:submit|button|image|reset|file)$/i,zb=/^(?:input|select|textarea|keygen)/i;function Ab(a,b,c,d){var e;if(Array.isArray(b))r.each(b,function(b,e){c||wb.test(a)?d(a,e):Ab(a+"["+("object"==typeof e&&null!=e?b:"")+"]",e,c,d)});else if(c||"object"!==r.type(b))d(a,b);else for(e in b)Ab(a+"["+e+"]",b[e],c,d)}r.param=function(a,b){var c,d=[],e=function(a,b){var c=r.isFunction(b)?b():b;d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(null==c?"":c)};if(Array.isArray(a)||a.jquery&&!r.isPlainObject(a))r.each(a,function(){e(this.name,this.value)});else for(c in a)Ab(c,a[c],b,e);return d.join("&")},r.fn.extend({serialize:function(){return r.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=r.prop(this,"elements");return a?r.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!r(this).is(":disabled")&&zb.test(this.nodeName)&&!yb.test(a)&&(this.checked||!ja.test(a))}).map(function(a,b){var c=r(this).val();return null==c?null:Array.isArray(c)?r.map(c,function(a){return{name:b.name,value:a.replace(xb,"\r\n")}}):{name:b.name,value:c.replace(xb,"\r\n")}}).get()}});var Bb=/%20/g,Cb=/#.*$/,Db=/([?&])_=[^&]*/,Eb=/^(.*?):[ \t]*([^\r\n]*)$/gm,Fb=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Gb=/^(?:GET|HEAD)$/,Hb=/^\/\//,Ib={},Jb={},Kb="*/".concat("*"),Lb=d.createElement("a");Lb.href=tb.href;function Mb(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(L)||[];if(r.isFunction(c))while(d=f[e++])"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function Nb(a,b,c,d){var e={},f=a===Jb;function g(h){var i;return e[h]=!0,r.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}return g(b.dataTypes[0])||!e["*"]&&g("*")}function Ob(a,b){var c,d,e=r.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((e[c]?a:d||(d={}))[c]=b[c]);return d&&r.extend(!0,a,d),a}function Pb(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while("*"===i[0])i.shift(),void 0===d&&(d=a.mimeType||b.getResponseHeader("Content-Type"));if(d)for(e in h)if(h[e]&&h[e].test(d)){i.unshift(e);break}if(i[0]in c)f=i[0];else{for(e in c){if(!i[0]||a.converters[e+" "+i[0]]){f=e;break}g||(g=e)}f=f||g}if(f)return f!==i[0]&&i.unshift(f),c[f]}function Qb(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];f=k.shift();while(f)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}r.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:tb.href,type:"GET",isLocal:Fb.test(tb.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Kb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":r.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?Ob(Ob(a,r.ajaxSettings),b):Ob(r.ajaxSettings,a)},ajaxPrefilter:Mb(Ib),ajaxTransport:Mb(Jb),ajax:function(b,c){"object"==typeof b&&(c=b,b=void 0),c=c||{};var e,f,g,h,i,j,k,l,m,n,o=r.ajaxSetup({},c),p=o.context||o,q=o.context&&(p.nodeType||p.jquery)?r(p):r.event,s=r.Deferred(),t=r.Callbacks("once memory"),u=o.statusCode||{},v={},w={},x="canceled",y={readyState:0,getResponseHeader:function(a){var b;if(k){if(!h){h={};while(b=Eb.exec(g))h[b[1].toLowerCase()]=b[2]}b=h[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return k?g:null},setRequestHeader:function(a,b){return null==k&&(a=w[a.toLowerCase()]=w[a.toLowerCase()]||a,v[a]=b),this},overrideMimeType:function(a){return null==k&&(o.mimeType=a),this},statusCode:function(a){var b;if(a)if(k)y.always(a[y.status]);else for(b in a)u[b]=[u[b],a[b]];return this},abort:function(a){var b=a||x;return e&&e.abort(b),A(0,b),this}};if(s.promise(y),o.url=((b||o.url||tb.href)+"").replace(Hb,tb.protocol+"//"),o.type=c.method||c.type||o.method||o.type,o.dataTypes=(o.dataType||"*").toLowerCase().match(L)||[""],null==o.crossDomain){j=d.createElement("a");try{j.href=o.url,j.href=j.href,o.crossDomain=Lb.protocol+"//"+Lb.host!=j.protocol+"//"+j.host}catch(z){o.crossDomain=!0}}if(o.data&&o.processData&&"string"!=typeof o.data&&(o.data=r.param(o.data,o.traditional)),Nb(Ib,o,c,y),k)return y;l=r.event&&o.global,l&&0===r.active++&&r.event.trigger("ajaxStart"),o.type=o.type.toUpperCase(),o.hasContent=!Gb.test(o.type),f=o.url.replace(Cb,""),o.hasContent?o.data&&o.processData&&0===(o.contentType||"").indexOf("application/x-www-form-urlencoded")&&(o.data=o.data.replace(Bb,"+")):(n=o.url.slice(f.length),o.data&&(f+=(vb.test(f)?"&":"?")+o.data,delete o.data),o.cache===!1&&(f=f.replace(Db,"$1"),n=(vb.test(f)?"&":"?")+"_="+ub++ +n),o.url=f+n),o.ifModified&&(r.lastModified[f]&&y.setRequestHeader("If-Modified-Since",r.lastModified[f]),r.etag[f]&&y.setRequestHeader("If-None-Match",r.etag[f])),(o.data&&o.hasContent&&o.contentType!==!1||c.contentType)&&y.setRequestHeader("Content-Type",o.contentType),y.setRequestHeader("Accept",o.dataTypes[0]&&o.accepts[o.dataTypes[0]]?o.accepts[o.dataTypes[0]]+("*"!==o.dataTypes[0]?", "+Kb+"; q=0.01":""):o.accepts["*"]);for(m in o.headers)y.setRequestHeader(m,o.headers[m]);if(o.beforeSend&&(o.beforeSend.call(p,y,o)===!1||k))return y.abort();if(x="abort",t.add(o.complete),y.done(o.success),y.fail(o.error),e=Nb(Jb,o,c,y)){if(y.readyState=1,l&&q.trigger("ajaxSend",[y,o]),k)return y;o.async&&o.timeout>0&&(i=a.setTimeout(function(){y.abort("timeout")},o.timeout));try{k=!1,e.send(v,A)}catch(z){if(k)throw z;A(-1,z)}}else A(-1,"No Transport");function A(b,c,d,h){var j,m,n,v,w,x=c;k||(k=!0,i&&a.clearTimeout(i),e=void 0,g=h||"",y.readyState=b>0?4:0,j=b>=200&&b<300||304===b,d&&(v=Pb(o,y,d)),v=Qb(o,v,y,j),j?(o.ifModified&&(w=y.getResponseHeader("Last-Modified"),w&&(r.lastModified[f]=w),w=y.getResponseHeader("etag"),w&&(r.etag[f]=w)),204===b||"HEAD"===o.type?x="nocontent":304===b?x="notmodified":(x=v.state,m=v.data,n=v.error,j=!n)):(n=x,!b&&x||(x="error",b<0&&(b=0))),y.status=b,y.statusText=(c||x)+"",j?s.resolveWith(p,[m,x,y]):s.rejectWith(p,[y,x,n]),y.statusCode(u),u=void 0,l&&q.trigger(j?"ajaxSuccess":"ajaxError",[y,o,j?m:n]),t.fireWith(p,[y,x]),l&&(q.trigger("ajaxComplete",[y,o]),--r.active||r.event.trigger("ajaxStop")))}return y},getJSON:function(a,b,c){return r.get(a,b,c,"json")},getScript:function(a,b){return r.get(a,void 0,b,"script")}}),r.each(["get","post"],function(a,b){r[b]=function(a,c,d,e){return r.isFunction(c)&&(e=e||d,d=c,c=void 0),r.ajax(r.extend({url:a,type:b,dataType:e,data:c,success:d},r.isPlainObject(a)&&a))}}),r._evalUrl=function(a){return r.ajax({url:a,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,"throws":!0})},r.fn.extend({wrapAll:function(a){var b;return this[0]&&(r.isFunction(a)&&(a=a.call(this[0])),b=r(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstElementChild)a=a.firstElementChild;return a}).append(this)),this},wrapInner:function(a){return r.isFunction(a)?this.each(function(b){r(this).wrapInner(a.call(this,b))}):this.each(function(){var b=r(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=r.isFunction(a);return this.each(function(c){r(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(a){return this.parent(a).not("body").each(function(){r(this).replaceWith(this.childNodes)}),this}}),r.expr.pseudos.hidden=function(a){return!r.expr.pseudos.visible(a)},r.expr.pseudos.visible=function(a){return!!(a.offsetWidth||a.offsetHeight||a.getClientRects().length)},r.ajaxSettings.xhr=function(){try{return new a.XMLHttpRequest}catch(b){}};var Rb={0:200,1223:204},Sb=r.ajaxSettings.xhr();o.cors=!!Sb&&"withCredentials"in Sb,o.ajax=Sb=!!Sb,r.ajaxTransport(function(b){var c,d;if(o.cors||Sb&&!b.crossDomain)return{send:function(e,f){var g,h=b.xhr();if(h.open(b.type,b.url,b.async,b.username,b.password),b.xhrFields)for(g in b.xhrFields)h[g]=b.xhrFields[g];b.mimeType&&h.overrideMimeType&&h.overrideMimeType(b.mimeType),b.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest");for(g in e)h.setRequestHeader(g,e[g]);c=function(a){return function(){c&&(c=d=h.onload=h.onerror=h.onabort=h.onreadystatechange=null,"abort"===a?h.abort():"error"===a?"number"!=typeof h.status?f(0,"error"):f(h.status,h.statusText):f(Rb[h.status]||h.status,h.statusText,"text"!==(h.responseType||"text")||"string"!=typeof h.responseText?{binary:h.response}:{text:h.responseText},h.getAllResponseHeaders()))}},h.onload=c(),d=h.onerror=c("error"),void 0!==h.onabort?h.onabort=d:h.onreadystatechange=function(){4===h.readyState&&a.setTimeout(function(){c&&d()})},c=c("abort");try{h.send(b.hasContent&&b.data||null)}catch(i){if(c)throw i}},abort:function(){c&&c()}}}),r.ajaxPrefilter(function(a){a.crossDomain&&(a.contents.script=!1)}),r.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(a){return r.globalEval(a),a}}}),r.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),r.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(e,f){b=r("<script>").prop({charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&f("error"===a.type?404:200,a.type)}),d.head.appendChild(b[0])},abort:function(){c&&c()}}}});var Tb=[],Ub=/(=)\?(?=&|$)|\?\?/;r.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Tb.pop()||r.expando+"_"+ub++;return this[a]=!0,a}}),r.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(Ub.test(b.url)?"url":"string"==typeof b.data&&0===(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ub.test(b.data)&&"data");if(h||"jsonp"===b.dataTypes[0])return e=b.jsonpCallback=r.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(Ub,"$1"+e):b.jsonp!==!1&&(b.url+=(vb.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||r.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){void 0===f?r(a).removeProp(e):a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,Tb.push(e)),g&&r.isFunction(f)&&f(g[0]),g=f=void 0}),"script"}),o.createHTMLDocument=function(){var a=d.implementation.createHTMLDocument("").body;return a.innerHTML="<form></form><form></form>",2===a.childNodes.length}(),r.parseHTML=function(a,b,c){if("string"!=typeof a)return[];"boolean"==typeof b&&(c=b,b=!1);var e,f,g;return b||(o.createHTMLDocument?(b=d.implementation.createHTMLDocument(""),e=b.createElement("base"),e.href=d.location.href,b.head.appendChild(e)):b=d),f=C.exec(a),g=!c&&[],f?[b.createElement(f[1])]:(f=qa([a],b,g),g&&g.length&&r(g).remove(),r.merge([],f.childNodes))},r.fn.load=function(a,b,c){var d,e,f,g=this,h=a.indexOf(" ");return h>-1&&(d=pb(a.slice(h)),a=a.slice(0,h)),r.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),g.length>0&&r.ajax({url:a,type:e||"GET",dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?r("<div>").append(r.parseHTML(a)).find(d):a)}).always(c&&function(a,b){g.each(function(){c.apply(this,f||[a.responseText,b,a])})}),this},r.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){r.fn[b]=function(a){return this.on(b,a)}}),r.expr.pseudos.animated=function(a){return r.grep(r.timers,function(b){return a===b.elem}).length},r.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=r.css(a,"position"),l=r(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=r.css(a,"top"),i=r.css(a,"left"),j=("absolute"===k||"fixed"===k)&&(f+i).indexOf("auto")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),r.isFunction(b)&&(b=b.call(a,c,r.extend({},h))),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},r.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){r.offset.setOffset(this,a,b)});var b,c,d,e,f=this[0];if(f)return f.getClientRects().length?(d=f.getBoundingClientRect(),b=f.ownerDocument,c=b.documentElement,e=b.defaultView,{top:d.top+e.pageYOffset-c.clientTop,left:d.left+e.pageXOffset-c.clientLeft}):{top:0,left:0}},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};return"fixed"===r.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),B(a[0],"html")||(d=a.offset()),d={top:d.top+r.css(a[0],"borderTopWidth",!0),left:d.left+r.css(a[0],"borderLeftWidth",!0)}),{top:b.top-d.top-r.css(c,"marginTop",!0),left:b.left-d.left-r.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var a=this.offsetParent;while(a&&"static"===r.css(a,"position"))a=a.offsetParent;return a||ra})}}),r.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c="pageYOffset"===b;r.fn[a]=function(d){return T(this,function(a,d,e){var f;return r.isWindow(a)?f=a:9===a.nodeType&&(f=a.defaultView),void 0===e?f?f[b]:a[d]:void(f?f.scrollTo(c?f.pageXOffset:e,c?e:f.pageYOffset):a[d]=e)},a,d,arguments.length)}}),r.each(["top","left"],function(a,b){r.cssHooks[b]=Pa(o.pixelPosition,function(a,c){if(c)return c=Oa(a,b),Ma.test(c)?r(a).position()[b]+"px":c})}),r.each({Height:"height",Width:"width"},function(a,b){r.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){r.fn[d]=function(e,f){var g=arguments.length&&(c||"boolean"!=typeof e),h=c||(e===!0||f===!0?"margin":"border");return T(this,function(b,c,e){var f;return r.isWindow(b)?0===d.indexOf("outer")?b["inner"+a]:b.document.documentElement["client"+a]:9===b.nodeType?(f=b.documentElement,Math.max(b.body["scroll"+a],f["scroll"+a],b.body["offset"+a],f["offset"+a],f["client"+a])):void 0===e?r.css(b,c,h):r.style(b,c,e,h)},b,g?e:void 0,g)}})}),r.fn.extend({bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}}),r.holdReady=function(a){a?r.readyWait++:r.ready(!0)},r.isArray=Array.isArray,r.parseJSON=JSON.parse,r.nodeName=B,"function"==typeof define&&define.amd&&define("jquery",[],function(){return r});var Vb=a.jQuery,Wb=a.$;return r.noConflict=function(b){return a.$===r&&(a.$=Wb),b&&a.jQuery===r&&(a.jQuery=Vb),r},b||(a.jQuery=a.$=r),r});

;;
/*!
 * jQuery Form Plugin
 * version: 2.96 (16-FEB-2012)
 * @requires jQuery v1.3.2 or later
 *
 * Examples and documentation at: http://malsup.com/jquery/form/
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 */
(function($){$.fn.ajaxSubmit=function(options){if(!this.length){log('ajaxSubmit: skipping submit process - no element selected');return this;}
var method,action,url,$form=this;if(typeof options=='function'){options={success:options};}
method=this.attr('method');action=this.attr('action');url=(typeof action==='string')?$.trim(action):'';url=url||window.location.href||'';if(url){url=(url.match(/^([^#]+)/)||[])[1];}
options=$.extend(true,{url:url,success:$.ajaxSettings.success,type:method||'GET',iframeSrc:/^https/i.test(window.location.href||'')?'javascript:false':'about:blank'},options);var veto={};this.trigger('form-pre-serialize',[this,options,veto]);if(veto.veto){log('ajaxSubmit: submit vetoed via form-pre-serialize trigger');return this;}
if(options.beforeSerialize&&options.beforeSerialize(this,options)===false){log('ajaxSubmit: submit aborted via beforeSerialize callback');return this;}
var traditional=options.traditional;if(traditional===undefined){traditional=$.ajaxSettings.traditional;}
var qx,n,v,a=this.formToArray(options.semantic);if(options.data){options.extraData=options.data;qx=$.param(options.data,traditional);}
if(options.beforeSubmit&&options.beforeSubmit(a,this,options)===false){log('ajaxSubmit: submit aborted via beforeSubmit callback');return this;}
this.trigger('form-submit-validate',[a,this,options,veto]);if(veto.veto){log('ajaxSubmit: submit vetoed via form-submit-validate trigger');return this;}
var q=$.param(a,traditional);if(qx){q=(q?(q+'&'+qx):qx);}
if(options.type.toUpperCase()=='GET'){options.url+=(options.url.indexOf('?')>=0?'&':'?')+q;options.data=null;}
else{options.data=q;}
var callbacks=[];if(options.resetForm){callbacks.push(function(){$form.resetForm();});}
if(options.clearForm){callbacks.push(function(){$form.clearForm(options.includeHidden);});}
if(!options.dataType&&options.target){var oldSuccess=options.success||function(){};callbacks.push(function(data){var fn=options.replaceTarget?'replaceWith':'html';$(options.target)[fn](data).each(oldSuccess,arguments);});}
else if(options.success){callbacks.push(options.success);}
options.success=function(data,status,xhr){var context=options.context||options;for(var i=0,max=callbacks.length;i<max;i++){callbacks[i].apply(context,[data,status,xhr||$form,$form]);}};var fileInputs=$('input:file:enabled[value]',this);var hasFileInputs=fileInputs.length>0;var mp='multipart/form-data';var multipart=($form.attr('enctype')==mp||$form.attr('encoding')==mp);var fileAPI=!!(hasFileInputs&&fileInputs.get(0).files&&window.FormData);log("fileAPI :"+fileAPI);var shouldUseFrame=(hasFileInputs||multipart)&&!fileAPI;if(options.iframe!==false&&(options.iframe||shouldUseFrame)){if(options.closeKeepAlive){$.get(options.closeKeepAlive,function(){fileUploadIframe(a);});}
else{fileUploadIframe(a);}}
else if((hasFileInputs||multipart)&&fileAPI){options.progress=options.progress||$.noop;fileUploadXhr(a);}
else{$.ajax(options);}
this.trigger('form-submit-notify',[this,options]);return this;function fileUploadXhr(a){var formdata=new FormData();for(var i=0;i<a.length;i++){if(a[i].type=='file')
continue;formdata.append(a[i].name,a[i].value);}
$form.find('input:file:enabled').each(function(){var name=$(this).attr('name'),files=this.files;if(name){for(var i=0;i<files.length;i++)
formdata.append(name,files[i]);}});if(options.extraData){for(var k in options.extraData)
formdata.append(k,options.extraData[k])}
options.data=null;var s=$.extend(true,{},$.ajaxSettings,options,{contentType:false,processData:false,cache:false,type:'POST'});s.data=null;var beforeSend=s.beforeSend;s.beforeSend=function(xhr,o){o.data=formdata;if(xhr.upload){xhr.upload.onprogress=function(event){o.progress(event.position,event.total);};}
if(beforeSend)
beforeSend.call(o,xhr,options);};$.ajax(s);}
function fileUploadIframe(a){var form=$form[0],el,i,s,g,id,$io,io,xhr,sub,n,timedOut,timeoutHandle;var useProp=!!$.fn.prop;if(a){if(useProp){for(i=0;i<a.length;i++){el=$(form[a[i].name]);el.prop('disabled',false);}}else{for(i=0;i<a.length;i++){el=$(form[a[i].name]);el.removeAttr('disabled');}};}
if($(':input[name=submit],:input[id=submit]',form).length){alert('Error: Form elements must not have name or id of "submit".');return;}
s=$.extend(true,{},$.ajaxSettings,options);s.context=s.context||s;id='jqFormIO'+(new Date().getTime());if(s.iframeTarget){$io=$(s.iframeTarget);n=$io.attr('name');if(n==null)
$io.attr('name',id);else
id=n;}
else{$io=$('<iframe name="'+id+'" src="'+s.iframeSrc+'" />');$io.css({position:'absolute',top:'-1000px',left:'-1000px'});}
io=$io[0];xhr={aborted:0,responseText:null,responseXML:null,status:0,statusText:'n/a',getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(status){var e=(status==='timeout'?'timeout':'aborted');log('aborting upload... '+e);this.aborted=1;$io.attr('src',s.iframeSrc);xhr.error=e;s.error&&s.error.call(s.context,xhr,e,status);g&&$.event.trigger("ajaxError",[xhr,s,e]);s.complete&&s.complete.call(s.context,xhr,e);}};g=s.global;if(g&&!$.active++){$.event.trigger("ajaxStart");}
if(g){$.event.trigger("ajaxSend",[xhr,s]);}
if(s.beforeSend&&s.beforeSend.call(s.context,xhr,s)===false){if(s.global){$.active--;}
return;}
if(xhr.aborted){return;}
sub=form.clk;if(sub){n=sub.name;if(n&&!sub.disabled){s.extraData=s.extraData||{};s.extraData[n]=sub.value;if(sub.type=="image"){s.extraData[n+'.x']=form.clk_x;s.extraData[n+'.y']=form.clk_y;}}}
var CLIENT_TIMEOUT_ABORT=1;var SERVER_ABORT=2;function getDoc(frame){var doc=frame.contentWindow?frame.contentWindow.document:frame.contentDocument?frame.contentDocument:frame.document;return doc;}
var csrf_token=$('meta[name=csrf-token]').attr('content');var csrf_param=$('meta[name=csrf-param]').attr('content');if(csrf_param&&csrf_token){s.extraData=s.extraData||{};s.extraData[csrf_param]=csrf_token;}
function doSubmit(){var t=$form.attr('target'),a=$form.attr('action');form.setAttribute('target',id);if(!method){form.setAttribute('method','POST');}
if(a!=s.url){form.setAttribute('action',s.url);}
if(!s.skipEncodingOverride&&(!method||/post/i.test(method))){$form.attr({encoding:'multipart/form-data',enctype:'multipart/form-data'});}
if(s.timeout){timeoutHandle=setTimeout(function(){timedOut=true;cb(CLIENT_TIMEOUT_ABORT);},s.timeout);}
function checkState(){try{var state=getDoc(io).readyState;log('state = '+state);if(state.toLowerCase()=='uninitialized')
setTimeout(checkState,50);}
catch(e){log('Server abort: ',e,' (',e.name,')');cb(SERVER_ABORT);timeoutHandle&&clearTimeout(timeoutHandle);timeoutHandle=undefined;}}
var extraInputs=[];try{if(s.extraData){for(var n in s.extraData){extraInputs.push($('<input type="hidden" name="'+n+'">').attr('value',s.extraData[n]).appendTo(form)[0]);}}
if(!s.iframeTarget){$io.appendTo('body');io.attachEvent?io.attachEvent('onload',cb):io.addEventListener('load',cb,false);}
setTimeout(checkState,15);form.submit();}
finally{form.setAttribute('action',a);if(t){form.setAttribute('target',t);}else{$form.removeAttr('target');}
$(extraInputs).remove();}}
if(s.forceSync){doSubmit();}
else{setTimeout(doSubmit,10);}
var data,doc,domCheckCount=50,callbackProcessed;function cb(e){if(xhr.aborted||callbackProcessed){return;}
try{doc=getDoc(io);}
catch(ex){log('cannot access response document: ',ex);e=SERVER_ABORT;}
if(e===CLIENT_TIMEOUT_ABORT&&xhr){xhr.abort('timeout');return;}
else if(e==SERVER_ABORT&&xhr){xhr.abort('server abort');return;}
if(!doc||doc.location.href==s.iframeSrc){if(!timedOut)
return;}
io.detachEvent?io.detachEvent('onload',cb):io.removeEventListener('load',cb,false);var status='success',errMsg;try{if(timedOut){throw'timeout';}
var isXml=s.dataType=='xml'||doc.XMLDocument||$.isXMLDoc(doc);log('isXml='+isXml);if(!isXml&&window.opera&&(doc.body==null||doc.body.innerHTML=='')){if(--domCheckCount){log('requeing onLoad callback, DOM not available');setTimeout(cb,250);return;}}
var docRoot=doc.body?doc.body:doc.documentElement;xhr.responseText=docRoot?docRoot.innerHTML:null;xhr.responseXML=doc.XMLDocument?doc.XMLDocument:doc;if(isXml)
s.dataType='xml';xhr.getResponseHeader=function(header){var headers={'content-type':s.dataType};return headers[header];};if(docRoot){xhr.status=Number(docRoot.getAttribute('status'))||xhr.status;xhr.statusText=docRoot.getAttribute('statusText')||xhr.statusText;}
var dt=(s.dataType||'').toLowerCase();var scr=/(json|script|text)/.test(dt);if(scr||s.textarea){var ta=doc.getElementsByTagName('textarea')[0];if(ta){xhr.responseText=ta.value;xhr.status=Number(ta.getAttribute('status'))||xhr.status;xhr.statusText=ta.getAttribute('statusText')||xhr.statusText;}
else if(scr){var pre=doc.getElementsByTagName('pre')[0];var b=doc.getElementsByTagName('body')[0];if(pre){xhr.responseText=pre.textContent?pre.textContent:pre.innerText;}
else if(b){xhr.responseText=b.textContent?b.textContent:b.innerText;}}}
else if(dt=='xml'&&!xhr.responseXML&&xhr.responseText!=null){xhr.responseXML=toXml(xhr.responseText);}
try{data=httpData(xhr,dt,s);}
catch(e){status='parsererror';xhr.error=errMsg=(e||status);}}
catch(e){log('error caught: ',e);status='error';xhr.error=errMsg=(e||status);}
if(xhr.aborted){log('upload aborted');status=null;}
if(xhr.status){status=(xhr.status>=200&&xhr.status<300||xhr.status===304)?'success':'error';}
if(status==='success'){s.success&&s.success.call(s.context,data,'success',xhr);g&&$.event.trigger("ajaxSuccess",[xhr,s]);}
else if(status){if(errMsg==undefined)
errMsg=xhr.statusText;s.error&&s.error.call(s.context,xhr,status,errMsg);g&&$.event.trigger("ajaxError",[xhr,s,errMsg]);}
g&&$.event.trigger("ajaxComplete",[xhr,s]);if(g&&!--$.active){$.event.trigger("ajaxStop");}
s.complete&&s.complete.call(s.context,xhr,status);callbackProcessed=true;if(s.timeout)
clearTimeout(timeoutHandle);setTimeout(function(){if(!s.iframeTarget)
$io.remove();xhr.responseXML=null;},100);}
var toXml=$.parseXML||function(s,doc){if(window.ActiveXObject){doc=new ActiveXObject('Microsoft.XMLDOM');doc.async='false';doc.loadXML(s);}
else{doc=(new DOMParser()).parseFromString(s,'text/xml');}
return(doc&&doc.documentElement&&doc.documentElement.nodeName!='parsererror')?doc:null;};var parseJSON=$.parseJSON||function(s){return window['eval']('('+s+')');};var httpData=function(xhr,type,s){var ct=xhr.getResponseHeader('content-type')||'',xml=type==='xml'||!type&&ct.indexOf('xml')>=0,data=xml?xhr.responseXML:xhr.responseText;if(xml&&data.documentElement.nodeName==='parsererror'){$.error&&$.error('parsererror');}
if(s&&s.dataFilter){data=s.dataFilter(data,type);}
if(typeof data==='string'){if(type==='json'||!type&&ct.indexOf('json')>=0){data=parseJSON(data);}else if(type==="script"||!type&&ct.indexOf("javascript")>=0){$.globalEval(data);}}
return data;};}};$.fn.ajaxForm=function(options){options=options||{};options.delegation=options.delegation&&$.isFunction($.fn.on);if(!options.delegation&&this.length===0){var o={s:this.selector,c:this.context};if(!$.isReady&&o.s){log('DOM not ready, queuing ajaxForm');$(function(){$(o.s,o.c).ajaxForm(options);});return this;}
log('terminating; zero elements found by selector'+($.isReady?'':' (DOM not ready)'));return this;}
if(options.delegation){$(document).off('submit.form-plugin',this.selector,doAjaxSubmit).off('click.form-plugin',this.selector,captureSubmittingElement).on('submit.form-plugin',this.selector,options,doAjaxSubmit).on('click.form-plugin',this.selector,options,captureSubmittingElement);return this;}
return this.ajaxFormUnbind().bind('submit.form-plugin',options,doAjaxSubmit).bind('click.form-plugin',options,captureSubmittingElement);};function doAjaxSubmit(e){var options=e.data;if(!e.isDefaultPrevented()){e.preventDefault();$(this).ajaxSubmit(options);}}
function captureSubmittingElement(e){var target=e.target;var $el=$(target);if(!($el.is(":submit,input:image"))){var t=$el.closest(':submit');if(t.length==0){return;}
target=t[0];}
var form=this;form.clk=target;if(target.type=='image'){if(e.offsetX!=undefined){form.clk_x=e.offsetX;form.clk_y=e.offsetY;}else if(typeof $.fn.offset=='function'){var offset=$el.offset();form.clk_x=e.pageX-offset.left;form.clk_y=e.pageY-offset.top;}else{form.clk_x=e.pageX-target.offsetLeft;form.clk_y=e.pageY-target.offsetTop;}}
setTimeout(function(){form.clk=form.clk_x=form.clk_y=null;},100);};$.fn.ajaxFormUnbind=function(){return this.unbind('submit.form-plugin click.form-plugin');};$.fn.formToArray=function(semantic){var a=[];if(this.length===0){return a;}
var form=this[0];var els=semantic?form.getElementsByTagName('*'):form.elements;if(!els){return a;}
var i,j,n,v,el,max,jmax;for(i=0,max=els.length;i<max;i++){el=els[i];n=el.name;if(!n){continue;}
if(semantic&&form.clk&&el.type=="image"){if(!el.disabled&&form.clk==el){a.push({name:n,value:$(el).val(),type:el.type});a.push({name:n+'.x',value:form.clk_x},{name:n+'.y',value:form.clk_y});}
continue;}
v=$.fieldValue(el,true);if(v&&v.constructor==Array){for(j=0,jmax=v.length;j<jmax;j++){a.push({name:n,value:v[j]});}}
else if(v!==null&&typeof v!='undefined'){a.push({name:n,value:v,type:el.type});}}
if(!semantic&&form.clk){var $input=$(form.clk),input=$input[0];n=input.name;if(n&&!input.disabled&&input.type=='image'){a.push({name:n,value:$input.val()});a.push({name:n+'.x',value:form.clk_x},{name:n+'.y',value:form.clk_y});}}
return a;};$.fn.formSerialize=function(semantic){return $.param(this.formToArray(semantic));};$.fn.fieldSerialize=function(successful){var a=[];this.each(function(){var n=this.name;if(!n){return;}
var v=$.fieldValue(this,successful);if(v&&v.constructor==Array){for(var i=0,max=v.length;i<max;i++){a.push({name:n,value:v[i]});}}
else if(v!==null&&typeof v!='undefined'){a.push({name:this.name,value:v});}});return $.param(a);};$.fn.fieldValue=function(successful){for(var val=[],i=0,max=this.length;i<max;i++){var el=this[i];var v=$.fieldValue(el,successful);if(v===null||typeof v=='undefined'||(v.constructor==Array&&!v.length)){continue;}
v.constructor==Array?$.merge(val,v):val.push(v);}
return val;};$.fieldValue=function(el,successful){var n=el.name,t=el.type,tag=el.tagName.toLowerCase();if(successful===undefined){successful=true;}
if(successful&&(!n||el.disabled||t=='reset'||t=='button'||(t=='checkbox'||t=='radio')&&!el.checked||(t=='submit'||t=='image')&&el.form&&el.form.clk!=el||tag=='select'&&el.selectedIndex==-1)){return null;}
if(tag=='select'){var index=el.selectedIndex;if(index<0){return null;}
var a=[],ops=el.options;var one=(t=='select-one');var max=(one?index+1:ops.length);for(var i=(one?index:0);i<max;i++){var op=ops[i];if(op.selected){var v=op.value;if(!v){v=(op.attributes&&op.attributes['value']&&!(op.attributes['value'].specified))?op.text:op.value;}
if(one){return v;}
a.push(v);}}
return a;}
return $(el).val();};$.fn.clearForm=function(includeHidden){return this.each(function(){$('input,select,textarea',this).clearFields(includeHidden);});};$.fn.clearFields=$.fn.clearInputs=function(includeHidden){var re=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var t=this.type,tag=this.tagName.toLowerCase();if(re.test(t)||tag=='textarea'||(includeHidden&&/hidden/.test(t))){this.value='';}
else if(t=='checkbox'||t=='radio'){this.checked=false;}
else if(tag=='select'){this.selectedIndex=-1;}});};$.fn.resetForm=function(){return this.each(function(){if(typeof this.reset=='function'||(typeof this.reset=='object'&&!this.reset.nodeType)){this.reset();}});};$.fn.enable=function(b){if(b===undefined){b=true;}
return this.each(function(){this.disabled=!b;});};$.fn.selected=function(select){if(select===undefined){select=true;}
return this.each(function(){var t=this.type;if(t=='checkbox'||t=='radio'){this.checked=select;}
else if(this.tagName.toLowerCase()=='option'){var $sel=$(this).parent('select');if(select&&$sel[0]&&$sel[0].type=='select-one'){$sel.find('option').selected(false);}
this.selected=select;}});};$.fn.ajaxSubmit.debug=false;function log(){if(!$.fn.ajaxSubmit.debug)
return;var msg='[jquery.form] '+Array.prototype.join.call(arguments,'');if(window.console&&window.console.log){window.console.log(msg);}
else if(window.opera&&window.opera.postError){window.opera.postError(msg);}};})(jQuery);
;// ==================================================
// fancyBox v3.5.7
//
// Licensed GPLv3 for open source use
// or fancyBox Commercial License for commercial use
//
// http://fancyapps.com/fancybox/
// Copyright 2019 fancyApps
//
// ==================================================
!function(t,e,n,o){"use strict";function i(t,e){var o,i,a,s=[],r=0;t&&t.isDefaultPrevented()||(t.preventDefault(),e=e||{},t&&t.data&&(e=h(t.data.options,e)),o=e.$target||n(t.currentTarget).trigger("blur"),(a=n.fancybox.getInstance())&&a.$trigger&&a.$trigger.is(o)||(e.selector?s=n(e.selector):(i=o.attr("data-fancybox")||"",i?(s=t.data?t.data.items:[],s=s.length?s.filter('[data-fancybox="'+i+'"]'):n('[data-fancybox="'+i+'"]')):s=[o]),r=n(s).index(o),r<0&&(r=0),a=n.fancybox.open(s,e,r),a.$trigger=o))}if(t.console=t.console||{info:function(t){}},n){if(n.fn.fancybox)return void console.info("fancyBox already initialized");var a={closeExisting:!1,loop:!1,gutter:50,keyboard:!0,preventCaptionOverlap:!0,arrows:!0,infobar:!0,smallBtn:"auto",toolbar:"auto",buttons:["zoom","slideShow","thumbs","close"],idleTime:3,protect:!1,modal:!1,image:{preload:!1},ajax:{settings:{data:{fancybox:!0}}},iframe:{tpl:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" allowfullscreen="allowfullscreen" allow="autoplay; fullscreen" src=""></iframe>',preload:!0,css:{},attr:{scrolling:"auto"}},video:{tpl:'<video class="fancybox-video" controls controlsList="nodownload" poster="{{poster}}"><source src="{{src}}" type="{{format}}" />Sorry, your browser doesn\'t support embedded videos, <a href="{{src}}">download</a> and watch with your favorite video player!</video>',format:"",autoStart:!0},defaultType:"image",animationEffect:"zoom",animationDuration:366,zoomOpacity:"auto",transitionEffect:"fade",transitionDuration:366,slideClass:"",baseClass:"",baseTpl:'<div class="fancybox-container" role="dialog" tabindex="-1"><div class="fancybox-bg"></div><div class="fancybox-inner"><div class="fancybox-infobar"><span data-fancybox-index></span>&nbsp;/&nbsp;<span data-fancybox-count></span></div><div class="fancybox-toolbar">{{buttons}}</div><div class="fancybox-navigation">{{arrows}}</div><div class="fancybox-stage"></div><div class="fancybox-caption"><div class="fancybox-caption__body"></div></div></div></div>',spinnerTpl:'<div class="fancybox-loading"></div>',errorTpl:'<div class="fancybox-error"><p>{{ERROR}}</p></div>',btnTpl:{download:'<a download data-fancybox-download class="fancybox-button fancybox-button--download" title="{{DOWNLOAD}}" href="javascript:;"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18.62 17.09V19H5.38v-1.91zm-2.97-6.96L17 11.45l-5 4.87-5-4.87 1.36-1.32 2.68 2.64V5h1.92v7.77z"/></svg></a>',zoom:'<button data-fancybox-zoom class="fancybox-button fancybox-button--zoom" title="{{ZOOM}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18.7 17.3l-3-3a5.9 5.9 0 0 0-.6-7.6 5.9 5.9 0 0 0-8.4 0 5.9 5.9 0 0 0 0 8.4 5.9 5.9 0 0 0 7.7.7l3 3a1 1 0 0 0 1.3 0c.4-.5.4-1 0-1.5zM8.1 13.8a4 4 0 0 1 0-5.7 4 4 0 0 1 5.7 0 4 4 0 0 1 0 5.7 4 4 0 0 1-5.7 0z"/></svg></button>',close:'<button data-fancybox-close class="fancybox-button fancybox-button--close" title="{{CLOSE}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 10.6L6.6 5.2 5.2 6.6l5.4 5.4-5.4 5.4 1.4 1.4 5.4-5.4 5.4 5.4 1.4-1.4-5.4-5.4 5.4-5.4-1.4-1.4-5.4 5.4z"/></svg></button>',arrowLeft:'<button data-fancybox-prev class="fancybox-button fancybox-button--arrow_left" title="{{PREV}}"><div><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11.28 15.7l-1.34 1.37L5 12l4.94-5.07 1.34 1.38-2.68 2.72H19v1.94H8.6z"/></svg></div></button>',arrowRight:'<button data-fancybox-next class="fancybox-button fancybox-button--arrow_right" title="{{NEXT}}"><div><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M15.4 12.97l-2.68 2.72 1.34 1.38L19 12l-4.94-5.07-1.34 1.38 2.68 2.72H5v1.94z"/></svg></div></button>',smallBtn:'<button type="button" data-fancybox-close class="fancybox-button fancybox-close-small" title="{{CLOSE}}"><svg xmlns="http://www.w3.org/2000/svg" version="1" viewBox="0 0 24 24"><path d="M13 12l5-5-1-1-5 5-5-5-1 1 5 5-5 5 1 1 5-5 5 5 1-1z"/></svg></button>'},parentEl:"body",hideScrollbar:!0,autoFocus:!0,backFocus:!0,trapFocus:!0,fullScreen:{autoStart:!1},touch:{vertical:!0,momentum:!0},hash:null,media:{},slideShow:{autoStart:!1,speed:3e3},thumbs:{autoStart:!1,hideOnClose:!0,parentEl:".fancybox-container",axis:"y"},wheel:"auto",onInit:n.noop,beforeLoad:n.noop,afterLoad:n.noop,beforeShow:n.noop,afterShow:n.noop,beforeClose:n.noop,afterClose:n.noop,onActivate:n.noop,onDeactivate:n.noop,clickContent:function(t,e){return"image"===t.type&&"zoom"},clickSlide:"close",clickOutside:"close",dblclickContent:!1,dblclickSlide:!1,dblclickOutside:!1,mobile:{preventCaptionOverlap:!1,idleTime:!1,clickContent:function(t,e){return"image"===t.type&&"toggleControls"},clickSlide:function(t,e){return"image"===t.type?"toggleControls":"close"},dblclickContent:function(t,e){return"image"===t.type&&"zoom"},dblclickSlide:function(t,e){return"image"===t.type&&"zoom"}},lang:"en",i18n:{en:{CLOSE:"Close",NEXT:"Next",PREV:"Previous",ERROR:"The requested content cannot be loaded. <br/> Please try again later.",PLAY_START:"Start slideshow",PLAY_STOP:"Pause slideshow",FULL_SCREEN:"Full screen",THUMBS:"Thumbnails",DOWNLOAD:"Download",SHARE:"Share",ZOOM:"Zoom"},de:{CLOSE:"Schlie&szlig;en",NEXT:"Weiter",PREV:"Zur&uuml;ck",ERROR:"Die angeforderten Daten konnten nicht geladen werden. <br/> Bitte versuchen Sie es sp&auml;ter nochmal.",PLAY_START:"Diaschau starten",PLAY_STOP:"Diaschau beenden",FULL_SCREEN:"Vollbild",THUMBS:"Vorschaubilder",DOWNLOAD:"Herunterladen",SHARE:"Teilen",ZOOM:"Vergr&ouml;&szlig;ern"}}},s=n(t),r=n(e),c=0,l=function(t){return t&&t.hasOwnProperty&&t instanceof n},d=function(){return t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||function(e){return t.setTimeout(e,1e3/60)}}(),u=function(){return t.cancelAnimationFrame||t.webkitCancelAnimationFrame||t.mozCancelAnimationFrame||t.oCancelAnimationFrame||function(e){t.clearTimeout(e)}}(),f=function(){var t,n=e.createElement("fakeelement"),o={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(t in o)if(void 0!==n.style[t])return o[t];return"transitionend"}(),p=function(t){return t&&t.length&&t[0].offsetHeight},h=function(t,e){var o=n.extend(!0,{},t,e);return n.each(e,function(t,e){n.isArray(e)&&(o[t]=e)}),o},g=function(t){var o,i;return!(!t||t.ownerDocument!==e)&&(n(".fancybox-container").css("pointer-events","none"),o={x:t.getBoundingClientRect().left+t.offsetWidth/2,y:t.getBoundingClientRect().top+t.offsetHeight/2},i=e.elementFromPoint(o.x,o.y)===t,n(".fancybox-container").css("pointer-events",""),i)},b=function(t,e,o){var i=this;i.opts=h({index:o},n.fancybox.defaults),n.isPlainObject(e)&&(i.opts=h(i.opts,e)),n.fancybox.isMobile&&(i.opts=h(i.opts,i.opts.mobile)),i.id=i.opts.id||++c,i.currIndex=parseInt(i.opts.index,10)||0,i.prevIndex=null,i.prevPos=null,i.currPos=0,i.firstRun=!0,i.group=[],i.slides={},i.addContent(t),i.group.length&&i.init()};n.extend(b.prototype,{init:function(){var o,i,a=this,s=a.group[a.currIndex],r=s.opts;r.closeExisting&&n.fancybox.close(!0),n("body").addClass("fancybox-active"),!n.fancybox.getInstance()&&!1!==r.hideScrollbar&&!n.fancybox.isMobile&&e.body.scrollHeight>t.innerHeight&&(n("head").append('<style id="fancybox-style-noscroll" type="text/css">.compensate-for-scrollbar{margin-right:'+(t.innerWidth-e.documentElement.clientWidth)+"px;}</style>"),n("body").addClass("compensate-for-scrollbar")),i="",n.each(r.buttons,function(t,e){i+=r.btnTpl[e]||""}),o=n(a.translate(a,r.baseTpl.replace("{{buttons}}",i).replace("{{arrows}}",r.btnTpl.arrowLeft+r.btnTpl.arrowRight))).attr("id","fancybox-container-"+a.id).addClass(r.baseClass).data("FancyBox",a).appendTo(r.parentEl),a.$refs={container:o},["bg","inner","infobar","toolbar","stage","caption","navigation"].forEach(function(t){a.$refs[t]=o.find(".fancybox-"+t)}),a.trigger("onInit"),a.activate(),a.jumpTo(a.currIndex)},translate:function(t,e){var n=t.opts.i18n[t.opts.lang]||t.opts.i18n.en;return e.replace(/\{\{(\w+)\}\}/g,function(t,e){return void 0===n[e]?t:n[e]})},addContent:function(t){var e,o=this,i=n.makeArray(t);n.each(i,function(t,e){var i,a,s,r,c,l={},d={};n.isPlainObject(e)?(l=e,d=e.opts||e):"object"===n.type(e)&&n(e).length?(i=n(e),d=i.data()||{},d=n.extend(!0,{},d,d.options),d.$orig=i,l.src=o.opts.src||d.src||i.attr("href"),l.type||l.src||(l.type="inline",l.src=e)):l={type:"html",src:e+""},l.opts=n.extend(!0,{},o.opts,d),n.isArray(d.buttons)&&(l.opts.buttons=d.buttons),n.fancybox.isMobile&&l.opts.mobile&&(l.opts=h(l.opts,l.opts.mobile)),a=l.type||l.opts.type,r=l.src||"",!a&&r&&((s=r.match(/\.(mp4|mov|ogv|webm)((\?|#).*)?$/i))?(a="video",l.opts.video.format||(l.opts.video.format="video/"+("ogv"===s[1]?"ogg":s[1]))):r.match(/(^data:image\/[a-z0-9+\/=]*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg|ico)((\?|#).*)?$)/i)?a="image":r.match(/\.(pdf)((\?|#).*)?$/i)?(a="iframe",l=n.extend(!0,l,{contentType:"pdf",opts:{iframe:{preload:!1}}})):"#"===r.charAt(0)&&(a="inline")),a?l.type=a:o.trigger("objectNeedsType",l),l.contentType||(l.contentType=n.inArray(l.type,["html","inline","ajax"])>-1?"html":l.type),l.index=o.group.length,"auto"==l.opts.smallBtn&&(l.opts.smallBtn=n.inArray(l.type,["html","inline","ajax"])>-1),"auto"===l.opts.toolbar&&(l.opts.toolbar=!l.opts.smallBtn),l.$thumb=l.opts.$thumb||null,l.opts.$trigger&&l.index===o.opts.index&&(l.$thumb=l.opts.$trigger.find("img:first"),l.$thumb.length&&(l.opts.$orig=l.opts.$trigger)),l.$thumb&&l.$thumb.length||!l.opts.$orig||(l.$thumb=l.opts.$orig.find("img:first")),l.$thumb&&!l.$thumb.length&&(l.$thumb=null),l.thumb=l.opts.thumb||(l.$thumb?l.$thumb[0].src:null),"function"===n.type(l.opts.caption)&&(l.opts.caption=l.opts.caption.apply(e,[o,l])),"function"===n.type(o.opts.caption)&&(l.opts.caption=o.opts.caption.apply(e,[o,l])),l.opts.caption instanceof n||(l.opts.caption=void 0===l.opts.caption?"":l.opts.caption+""),"ajax"===l.type&&(c=r.split(/\s+/,2),c.length>1&&(l.src=c.shift(),l.opts.filter=c.shift())),l.opts.modal&&(l.opts=n.extend(!0,l.opts,{trapFocus:!0,infobar:0,toolbar:0,smallBtn:0,keyboard:0,slideShow:0,fullScreen:0,thumbs:0,touch:0,clickContent:!1,clickSlide:!1,clickOutside:!1,dblclickContent:!1,dblclickSlide:!1,dblclickOutside:!1})),o.group.push(l)}),Object.keys(o.slides).length&&(o.updateControls(),(e=o.Thumbs)&&e.isActive&&(e.create(),e.focus()))},addEvents:function(){var e=this;e.removeEvents(),e.$refs.container.on("click.fb-close","[data-fancybox-close]",function(t){t.stopPropagation(),t.preventDefault(),e.close(t)}).on("touchstart.fb-prev click.fb-prev","[data-fancybox-prev]",function(t){t.stopPropagation(),t.preventDefault(),e.previous()}).on("touchstart.fb-next click.fb-next","[data-fancybox-next]",function(t){t.stopPropagation(),t.preventDefault(),e.next()}).on("click.fb","[data-fancybox-zoom]",function(t){e[e.isScaledDown()?"scaleToActual":"scaleToFit"]()}),s.on("orientationchange.fb resize.fb",function(t){t&&t.originalEvent&&"resize"===t.originalEvent.type?(e.requestId&&u(e.requestId),e.requestId=d(function(){e.update(t)})):(e.current&&"iframe"===e.current.type&&e.$refs.stage.hide(),setTimeout(function(){e.$refs.stage.show(),e.update(t)},n.fancybox.isMobile?600:250))}),r.on("keydown.fb",function(t){var o=n.fancybox?n.fancybox.getInstance():null,i=o.current,a=t.keyCode||t.which;if(9==a)return void(i.opts.trapFocus&&e.focus(t));if(!(!i.opts.keyboard||t.ctrlKey||t.altKey||t.shiftKey||n(t.target).is("input,textarea,video,audio,select")))return 8===a||27===a?(t.preventDefault(),void e.close(t)):37===a||38===a?(t.preventDefault(),void e.previous()):39===a||40===a?(t.preventDefault(),void e.next()):void e.trigger("afterKeydown",t,a)}),e.group[e.currIndex].opts.idleTime&&(e.idleSecondsCounter=0,r.on("mousemove.fb-idle mouseleave.fb-idle mousedown.fb-idle touchstart.fb-idle touchmove.fb-idle scroll.fb-idle keydown.fb-idle",function(t){e.idleSecondsCounter=0,e.isIdle&&e.showControls(),e.isIdle=!1}),e.idleInterval=t.setInterval(function(){++e.idleSecondsCounter>=e.group[e.currIndex].opts.idleTime&&!e.isDragging&&(e.isIdle=!0,e.idleSecondsCounter=0,e.hideControls())},1e3))},removeEvents:function(){var e=this;s.off("orientationchange.fb resize.fb"),r.off("keydown.fb .fb-idle"),this.$refs.container.off(".fb-close .fb-prev .fb-next"),e.idleInterval&&(t.clearInterval(e.idleInterval),e.idleInterval=null)},previous:function(t){return this.jumpTo(this.currPos-1,t)},next:function(t){return this.jumpTo(this.currPos+1,t)},jumpTo:function(t,e){var o,i,a,s,r,c,l,d,u,f=this,h=f.group.length;if(!(f.isDragging||f.isClosing||f.isAnimating&&f.firstRun)){if(t=parseInt(t,10),!(a=f.current?f.current.opts.loop:f.opts.loop)&&(t<0||t>=h))return!1;if(o=f.firstRun=!Object.keys(f.slides).length,r=f.current,f.prevIndex=f.currIndex,f.prevPos=f.currPos,s=f.createSlide(t),h>1&&((a||s.index<h-1)&&f.createSlide(t+1),(a||s.index>0)&&f.createSlide(t-1)),f.current=s,f.currIndex=s.index,f.currPos=s.pos,f.trigger("beforeShow",o),f.updateControls(),s.forcedDuration=void 0,n.isNumeric(e)?s.forcedDuration=e:e=s.opts[o?"animationDuration":"transitionDuration"],e=parseInt(e,10),i=f.isMoved(s),s.$slide.addClass("fancybox-slide--current"),o)return s.opts.animationEffect&&e&&f.$refs.container.css("transition-duration",e+"ms"),f.$refs.container.addClass("fancybox-is-open").trigger("focus"),f.loadSlide(s),void f.preload("image");c=n.fancybox.getTranslate(r.$slide),l=n.fancybox.getTranslate(f.$refs.stage),n.each(f.slides,function(t,e){n.fancybox.stop(e.$slide,!0)}),r.pos!==s.pos&&(r.isComplete=!1),r.$slide.removeClass("fancybox-slide--complete fancybox-slide--current"),i?(u=c.left-(r.pos*c.width+r.pos*r.opts.gutter),n.each(f.slides,function(t,o){o.$slide.removeClass("fancybox-animated").removeClass(function(t,e){return(e.match(/(^|\s)fancybox-fx-\S+/g)||[]).join(" ")});var i=o.pos*c.width+o.pos*o.opts.gutter;n.fancybox.setTranslate(o.$slide,{top:0,left:i-l.left+u}),o.pos!==s.pos&&o.$slide.addClass("fancybox-slide--"+(o.pos>s.pos?"next":"previous")),p(o.$slide),n.fancybox.animate(o.$slide,{top:0,left:(o.pos-s.pos)*c.width+(o.pos-s.pos)*o.opts.gutter},e,function(){o.$slide.css({transform:"",opacity:""}).removeClass("fancybox-slide--next fancybox-slide--previous"),o.pos===f.currPos&&f.complete()})})):e&&s.opts.transitionEffect&&(d="fancybox-animated fancybox-fx-"+s.opts.transitionEffect,r.$slide.addClass("fancybox-slide--"+(r.pos>s.pos?"next":"previous")),n.fancybox.animate(r.$slide,d,e,function(){r.$slide.removeClass(d).removeClass("fancybox-slide--next fancybox-slide--previous")},!1)),s.isLoaded?f.revealContent(s):f.loadSlide(s),f.preload("image")}},createSlide:function(t){var e,o,i=this;return o=t%i.group.length,o=o<0?i.group.length+o:o,!i.slides[t]&&i.group[o]&&(e=n('<div class="fancybox-slide"></div>').appendTo(i.$refs.stage),i.slides[t]=n.extend(!0,{},i.group[o],{pos:t,$slide:e,isLoaded:!1}),i.updateSlide(i.slides[t])),i.slides[t]},scaleToActual:function(t,e,o){var i,a,s,r,c,l=this,d=l.current,u=d.$content,f=n.fancybox.getTranslate(d.$slide).width,p=n.fancybox.getTranslate(d.$slide).height,h=d.width,g=d.height;l.isAnimating||l.isMoved()||!u||"image"!=d.type||!d.isLoaded||d.hasError||(l.isAnimating=!0,n.fancybox.stop(u),t=void 0===t?.5*f:t,e=void 0===e?.5*p:e,i=n.fancybox.getTranslate(u),i.top-=n.fancybox.getTranslate(d.$slide).top,i.left-=n.fancybox.getTranslate(d.$slide).left,r=h/i.width,c=g/i.height,a=.5*f-.5*h,s=.5*p-.5*g,h>f&&(a=i.left*r-(t*r-t),a>0&&(a=0),a<f-h&&(a=f-h)),g>p&&(s=i.top*c-(e*c-e),s>0&&(s=0),s<p-g&&(s=p-g)),l.updateCursor(h,g),n.fancybox.animate(u,{top:s,left:a,scaleX:r,scaleY:c},o||366,function(){l.isAnimating=!1}),l.SlideShow&&l.SlideShow.isActive&&l.SlideShow.stop())},scaleToFit:function(t){var e,o=this,i=o.current,a=i.$content;o.isAnimating||o.isMoved()||!a||"image"!=i.type||!i.isLoaded||i.hasError||(o.isAnimating=!0,n.fancybox.stop(a),e=o.getFitPos(i),o.updateCursor(e.width,e.height),n.fancybox.animate(a,{top:e.top,left:e.left,scaleX:e.width/a.width(),scaleY:e.height/a.height()},t||366,function(){o.isAnimating=!1}))},getFitPos:function(t){var e,o,i,a,s=this,r=t.$content,c=t.$slide,l=t.width||t.opts.width,d=t.height||t.opts.height,u={};return!!(t.isLoaded&&r&&r.length)&&(e=n.fancybox.getTranslate(s.$refs.stage).width,o=n.fancybox.getTranslate(s.$refs.stage).height,e-=parseFloat(c.css("paddingLeft"))+parseFloat(c.css("paddingRight"))+parseFloat(r.css("marginLeft"))+parseFloat(r.css("marginRight")),o-=parseFloat(c.css("paddingTop"))+parseFloat(c.css("paddingBottom"))+parseFloat(r.css("marginTop"))+parseFloat(r.css("marginBottom")),l&&d||(l=e,d=o),i=Math.min(1,e/l,o/d),l*=i,d*=i,l>e-.5&&(l=e),d>o-.5&&(d=o),"image"===t.type?(u.top=Math.floor(.5*(o-d))+parseFloat(c.css("paddingTop")),u.left=Math.floor(.5*(e-l))+parseFloat(c.css("paddingLeft"))):"video"===t.contentType&&(a=t.opts.width&&t.opts.height?l/d:t.opts.ratio||16/9,d>l/a?d=l/a:l>d*a&&(l=d*a)),u.width=l,u.height=d,u)},update:function(t){var e=this;n.each(e.slides,function(n,o){e.updateSlide(o,t)})},updateSlide:function(t,e){var o=this,i=t&&t.$content,a=t.width||t.opts.width,s=t.height||t.opts.height,r=t.$slide;o.adjustCaption(t),i&&(a||s||"video"===t.contentType)&&!t.hasError&&(n.fancybox.stop(i),n.fancybox.setTranslate(i,o.getFitPos(t)),t.pos===o.currPos&&(o.isAnimating=!1,o.updateCursor())),o.adjustLayout(t),r.length&&(r.trigger("refresh"),t.pos===o.currPos&&o.$refs.toolbar.add(o.$refs.navigation.find(".fancybox-button--arrow_right")).toggleClass("compensate-for-scrollbar",r.get(0).scrollHeight>r.get(0).clientHeight)),o.trigger("onUpdate",t,e)},centerSlide:function(t){var e=this,o=e.current,i=o.$slide;!e.isClosing&&o&&(i.siblings().css({transform:"",opacity:""}),i.parent().children().removeClass("fancybox-slide--previous fancybox-slide--next"),n.fancybox.animate(i,{top:0,left:0,opacity:1},void 0===t?0:t,function(){i.css({transform:"",opacity:""}),o.isComplete||e.complete()},!1))},isMoved:function(t){var e,o,i=t||this.current;return!!i&&(o=n.fancybox.getTranslate(this.$refs.stage),e=n.fancybox.getTranslate(i.$slide),!i.$slide.hasClass("fancybox-animated")&&(Math.abs(e.top-o.top)>.5||Math.abs(e.left-o.left)>.5))},updateCursor:function(t,e){var o,i,a=this,s=a.current,r=a.$refs.container;s&&!a.isClosing&&a.Guestures&&(r.removeClass("fancybox-is-zoomable fancybox-can-zoomIn fancybox-can-zoomOut fancybox-can-swipe fancybox-can-pan"),o=a.canPan(t,e),i=!!o||a.isZoomable(),r.toggleClass("fancybox-is-zoomable",i),n("[data-fancybox-zoom]").prop("disabled",!i),o?r.addClass("fancybox-can-pan"):i&&("zoom"===s.opts.clickContent||n.isFunction(s.opts.clickContent)&&"zoom"==s.opts.clickContent(s))?r.addClass("fancybox-can-zoomIn"):s.opts.touch&&(s.opts.touch.vertical||a.group.length>1)&&"video"!==s.contentType&&r.addClass("fancybox-can-swipe"))},isZoomable:function(){var t,e=this,n=e.current;if(n&&!e.isClosing&&"image"===n.type&&!n.hasError){if(!n.isLoaded)return!0;if((t=e.getFitPos(n))&&(n.width>t.width||n.height>t.height))return!0}return!1},isScaledDown:function(t,e){var o=this,i=!1,a=o.current,s=a.$content;return void 0!==t&&void 0!==e?i=t<a.width&&e<a.height:s&&(i=n.fancybox.getTranslate(s),i=i.width<a.width&&i.height<a.height),i},canPan:function(t,e){var o=this,i=o.current,a=null,s=!1;return"image"===i.type&&(i.isComplete||t&&e)&&!i.hasError&&(s=o.getFitPos(i),void 0!==t&&void 0!==e?a={width:t,height:e}:i.isComplete&&(a=n.fancybox.getTranslate(i.$content)),a&&s&&(s=Math.abs(a.width-s.width)>1.5||Math.abs(a.height-s.height)>1.5)),s},loadSlide:function(t){var e,o,i,a=this;if(!t.isLoading&&!t.isLoaded){if(t.isLoading=!0,!1===a.trigger("beforeLoad",t))return t.isLoading=!1,!1;switch(e=t.type,o=t.$slide,o.off("refresh").trigger("onReset").addClass(t.opts.slideClass),e){case"image":a.setImage(t);break;case"iframe":a.setIframe(t);break;case"html":a.setContent(t,t.src||t.content);break;case"video":a.setContent(t,t.opts.video.tpl.replace(/\{\{src\}\}/gi,t.src).replace("{{format}}",t.opts.videoFormat||t.opts.video.format||"").replace("{{poster}}",t.thumb||""));break;case"inline":n(t.src).length?a.setContent(t,n(t.src)):a.setError(t);break;case"ajax":a.showLoading(t),i=n.ajax(n.extend({},t.opts.ajax.settings,{url:t.src,success:function(e,n){"success"===n&&a.setContent(t,e)},error:function(e,n){e&&"abort"!==n&&a.setError(t)}})),o.one("onReset",function(){i.abort()});break;default:a.setError(t)}return!0}},setImage:function(t){var o,i=this;setTimeout(function(){var e=t.$image;i.isClosing||!t.isLoading||e&&e.length&&e[0].complete||t.hasError||i.showLoading(t)},50),i.checkSrcset(t),t.$content=n('<div class="fancybox-content"></div>').addClass("fancybox-is-hidden").appendTo(t.$slide.addClass("fancybox-slide--image")),!1!==t.opts.preload&&t.opts.width&&t.opts.height&&t.thumb&&(t.width=t.opts.width,t.height=t.opts.height,o=e.createElement("img"),o.onerror=function(){n(this).remove(),t.$ghost=null},o.onload=function(){i.afterLoad(t)},t.$ghost=n(o).addClass("fancybox-image").appendTo(t.$content).attr("src",t.thumb)),i.setBigImage(t)},checkSrcset:function(e){var n,o,i,a,s=e.opts.srcset||e.opts.image.srcset;if(s){i=t.devicePixelRatio||1,a=t.innerWidth*i,o=s.split(",").map(function(t){var e={};return t.trim().split(/\s+/).forEach(function(t,n){var o=parseInt(t.substring(0,t.length-1),10);if(0===n)return e.url=t;o&&(e.value=o,e.postfix=t[t.length-1])}),e}),o.sort(function(t,e){return t.value-e.value});for(var r=0;r<o.length;r++){var c=o[r];if("w"===c.postfix&&c.value>=a||"x"===c.postfix&&c.value>=i){n=c;break}}!n&&o.length&&(n=o[o.length-1]),n&&(e.src=n.url,e.width&&e.height&&"w"==n.postfix&&(e.height=e.width/e.height*n.value,e.width=n.value),e.opts.srcset=s)}},setBigImage:function(t){var o=this,i=e.createElement("img"),a=n(i);t.$image=a.one("error",function(){o.setError(t)}).one("load",function(){var e;t.$ghost||(o.resolveImageSlideSize(t,this.naturalWidth,this.naturalHeight),o.afterLoad(t)),o.isClosing||(t.opts.srcset&&(e=t.opts.sizes,e&&"auto"!==e||(e=(t.width/t.height>1&&s.width()/s.height()>1?"100":Math.round(t.width/t.height*100))+"vw"),a.attr("sizes",e).attr("srcset",t.opts.srcset)),t.$ghost&&setTimeout(function(){t.$ghost&&!o.isClosing&&t.$ghost.hide()},Math.min(300,Math.max(1e3,t.height/1600))),o.hideLoading(t))}).addClass("fancybox-image").attr("src",t.src).appendTo(t.$content),(i.complete||"complete"==i.readyState)&&a.naturalWidth&&a.naturalHeight?a.trigger("load"):i.error&&a.trigger("error")},resolveImageSlideSize:function(t,e,n){var o=parseInt(t.opts.width,10),i=parseInt(t.opts.height,10);t.width=e,t.height=n,o>0&&(t.width=o,t.height=Math.floor(o*n/e)),i>0&&(t.width=Math.floor(i*e/n),t.height=i)},setIframe:function(t){var e,o=this,i=t.opts.iframe,a=t.$slide;t.$content=n('<div class="fancybox-content'+(i.preload?" fancybox-is-hidden":"")+'"></div>').css(i.css).appendTo(a),a.addClass("fancybox-slide--"+t.contentType),t.$iframe=e=n(i.tpl.replace(/\{rnd\}/g,(new Date).getTime())).attr(i.attr).appendTo(t.$content),i.preload?(o.showLoading(t),e.on("load.fb error.fb",function(e){this.isReady=1,t.$slide.trigger("refresh"),o.afterLoad(t)}),a.on("refresh.fb",function(){var n,o,s=t.$content,r=i.css.width,c=i.css.height;if(1===e[0].isReady){try{n=e.contents(),o=n.find("body")}catch(t){}o&&o.length&&o.children().length&&(a.css("overflow","visible"),s.css({width:"100%","max-width":"100%",height:"9999px"}),void 0===r&&(r=Math.ceil(Math.max(o[0].clientWidth,o.outerWidth(!0)))),s.css("width",r||"").css("max-width",""),void 0===c&&(c=Math.ceil(Math.max(o[0].clientHeight,o.outerHeight(!0)))),s.css("height",c||""),a.css("overflow","auto")),s.removeClass("fancybox-is-hidden")}})):o.afterLoad(t),e.attr("src",t.src),a.one("onReset",function(){try{n(this).find("iframe").hide().unbind().attr("src","//about:blank")}catch(t){}n(this).off("refresh.fb").empty(),t.isLoaded=!1,t.isRevealed=!1})},setContent:function(t,e){var o=this;o.isClosing||(o.hideLoading(t),t.$content&&n.fancybox.stop(t.$content),t.$slide.empty(),l(e)&&e.parent().length?((e.hasClass("fancybox-content")||e.parent().hasClass("fancybox-content"))&&e.parents(".fancybox-slide").trigger("onReset"),t.$placeholder=n("<div>").hide().insertAfter(e),e.css("display","inline-block")):t.hasError||("string"===n.type(e)&&(e=n("<div>").append(n.trim(e)).contents()),t.opts.filter&&(e=n("<div>").html(e).find(t.opts.filter))),t.$slide.one("onReset",function(){n(this).find("video,audio").trigger("pause"),t.$placeholder&&(t.$placeholder.after(e.removeClass("fancybox-content").hide()).remove(),t.$placeholder=null),t.$smallBtn&&(t.$smallBtn.remove(),t.$smallBtn=null),t.hasError||(n(this).empty(),t.isLoaded=!1,t.isRevealed=!1)}),n(e).appendTo(t.$slide),n(e).is("video,audio")&&(n(e).addClass("fancybox-video"),n(e).wrap("<div></div>"),t.contentType="video",t.opts.width=t.opts.width||n(e).attr("width"),t.opts.height=t.opts.height||n(e).attr("height")),t.$content=t.$slide.children().filter("div,form,main,video,audio,article,.fancybox-content").first(),t.$content.siblings().hide(),t.$content.length||(t.$content=t.$slide.wrapInner("<div></div>").children().first()),t.$content.addClass("fancybox-content"),t.$slide.addClass("fancybox-slide--"+t.contentType),o.afterLoad(t))},setError:function(t){t.hasError=!0,t.$slide.trigger("onReset").removeClass("fancybox-slide--"+t.contentType).addClass("fancybox-slide--error"),t.contentType="html",this.setContent(t,this.translate(t,t.opts.errorTpl)),t.pos===this.currPos&&(this.isAnimating=!1)},showLoading:function(t){var e=this;(t=t||e.current)&&!t.$spinner&&(t.$spinner=n(e.translate(e,e.opts.spinnerTpl)).appendTo(t.$slide).hide().fadeIn("fast"))},hideLoading:function(t){var e=this;(t=t||e.current)&&t.$spinner&&(t.$spinner.stop().remove(),delete t.$spinner)},afterLoad:function(t){var e=this;e.isClosing||(t.isLoading=!1,t.isLoaded=!0,e.trigger("afterLoad",t),e.hideLoading(t),!t.opts.smallBtn||t.$smallBtn&&t.$smallBtn.length||(t.$smallBtn=n(e.translate(t,t.opts.btnTpl.smallBtn)).appendTo(t.$content)),t.opts.protect&&t.$content&&!t.hasError&&(t.$content.on("contextmenu.fb",function(t){return 2==t.button&&t.preventDefault(),!0}),"image"===t.type&&n('<div class="fancybox-spaceball"></div>').appendTo(t.$content)),e.adjustCaption(t),e.adjustLayout(t),t.pos===e.currPos&&e.updateCursor(),e.revealContent(t))},adjustCaption:function(t){var e,n=this,o=t||n.current,i=o.opts.caption,a=o.opts.preventCaptionOverlap,s=n.$refs.caption,r=!1;s.toggleClass("fancybox-caption--separate",a),a&&i&&i.length&&(o.pos!==n.currPos?(e=s.clone().appendTo(s.parent()),e.children().eq(0).empty().html(i),r=e.outerHeight(!0),e.empty().remove()):n.$caption&&(r=n.$caption.outerHeight(!0)),o.$slide.css("padding-bottom",r||""))},adjustLayout:function(t){var e,n,o,i,a=this,s=t||a.current;s.isLoaded&&!0!==s.opts.disableLayoutFix&&(s.$content.css("margin-bottom",""),s.$content.outerHeight()>s.$slide.height()+.5&&(o=s.$slide[0].style["padding-bottom"],i=s.$slide.css("padding-bottom"),parseFloat(i)>0&&(e=s.$slide[0].scrollHeight,s.$slide.css("padding-bottom",0),Math.abs(e-s.$slide[0].scrollHeight)<1&&(n=i),s.$slide.css("padding-bottom",o))),s.$content.css("margin-bottom",n))},revealContent:function(t){var e,o,i,a,s=this,r=t.$slide,c=!1,l=!1,d=s.isMoved(t),u=t.isRevealed;return t.isRevealed=!0,e=t.opts[s.firstRun?"animationEffect":"transitionEffect"],i=t.opts[s.firstRun?"animationDuration":"transitionDuration"],i=parseInt(void 0===t.forcedDuration?i:t.forcedDuration,10),!d&&t.pos===s.currPos&&i||(e=!1),"zoom"===e&&(t.pos===s.currPos&&i&&"image"===t.type&&!t.hasError&&(l=s.getThumbPos(t))?c=s.getFitPos(t):e="fade"),"zoom"===e?(s.isAnimating=!0,c.scaleX=c.width/l.width,c.scaleY=c.height/l.height,a=t.opts.zoomOpacity,"auto"==a&&(a=Math.abs(t.width/t.height-l.width/l.height)>.1),a&&(l.opacity=.1,c.opacity=1),n.fancybox.setTranslate(t.$content.removeClass("fancybox-is-hidden"),l),p(t.$content),void n.fancybox.animate(t.$content,c,i,function(){s.isAnimating=!1,s.complete()})):(s.updateSlide(t),e?(n.fancybox.stop(r),o="fancybox-slide--"+(t.pos>=s.prevPos?"next":"previous")+" fancybox-animated fancybox-fx-"+e,r.addClass(o).removeClass("fancybox-slide--current"),t.$content.removeClass("fancybox-is-hidden"),p(r),"image"!==t.type&&t.$content.hide().show(0),void n.fancybox.animate(r,"fancybox-slide--current",i,function(){r.removeClass(o).css({transform:"",opacity:""}),t.pos===s.currPos&&s.complete()},!0)):(t.$content.removeClass("fancybox-is-hidden"),u||!d||"image"!==t.type||t.hasError||t.$content.hide().fadeIn("fast"),void(t.pos===s.currPos&&s.complete())))},getThumbPos:function(t){var e,o,i,a,s,r=!1,c=t.$thumb;return!(!c||!g(c[0]))&&(e=n.fancybox.getTranslate(c),o=parseFloat(c.css("border-top-width")||0),i=parseFloat(c.css("border-right-width")||0),a=parseFloat(c.css("border-bottom-width")||0),s=parseFloat(c.css("border-left-width")||0),r={top:e.top+o,left:e.left+s,width:e.width-i-s,height:e.height-o-a,scaleX:1,scaleY:1},e.width>0&&e.height>0&&r)},complete:function(){var t,e=this,o=e.current,i={};!e.isMoved()&&o.isLoaded&&(o.isComplete||(o.isComplete=!0,o.$slide.siblings().trigger("onReset"),e.preload("inline"),p(o.$slide),o.$slide.addClass("fancybox-slide--complete"),n.each(e.slides,function(t,o){o.pos>=e.currPos-1&&o.pos<=e.currPos+1?i[o.pos]=o:o&&(n.fancybox.stop(o.$slide),o.$slide.off().remove())}),e.slides=i),e.isAnimating=!1,e.updateCursor(),e.trigger("afterShow"),o.opts.video.autoStart&&o.$slide.find("video,audio").filter(":visible:first").trigger("play").one("ended",function(){Document.exitFullscreen?Document.exitFullscreen():this.webkitExitFullscreen&&this.webkitExitFullscreen(),e.next()}),o.opts.autoFocus&&"html"===o.contentType&&(t=o.$content.find("input[autofocus]:enabled:visible:first"),t.length?t.trigger("focus"):e.focus(null,!0)),o.$slide.scrollTop(0).scrollLeft(0))},preload:function(t){var e,n,o=this;o.group.length<2||(n=o.slides[o.currPos+1],e=o.slides[o.currPos-1],e&&e.type===t&&o.loadSlide(e),n&&n.type===t&&o.loadSlide(n))},focus:function(t,o){var i,a,s=this,r=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden])","iframe","object","embed","video","audio","[contenteditable]",'[tabindex]:not([tabindex^="-"])'].join(",");s.isClosing||(i=!t&&s.current&&s.current.isComplete?s.current.$slide.find("*:visible"+(o?":not(.fancybox-close-small)":"")):s.$refs.container.find("*:visible"),i=i.filter(r).filter(function(){return"hidden"!==n(this).css("visibility")&&!n(this).hasClass("disabled")}),i.length?(a=i.index(e.activeElement),t&&t.shiftKey?(a<0||0==a)&&(t.preventDefault(),i.eq(i.length-1).trigger("focus")):(a<0||a==i.length-1)&&(t&&t.preventDefault(),i.eq(0).trigger("focus"))):s.$refs.container.trigger("focus"))},activate:function(){var t=this;n(".fancybox-container").each(function(){var e=n(this).data("FancyBox");e&&e.id!==t.id&&!e.isClosing&&(e.trigger("onDeactivate"),e.removeEvents(),e.isVisible=!1)}),t.isVisible=!0,(t.current||t.isIdle)&&(t.update(),t.updateControls()),t.trigger("onActivate"),t.addEvents()},close:function(t,e){var o,i,a,s,r,c,l,u=this,f=u.current,h=function(){u.cleanUp(t)};return!u.isClosing&&(u.isClosing=!0,!1===u.trigger("beforeClose",t)?(u.isClosing=!1,d(function(){u.update()}),!1):(u.removeEvents(),a=f.$content,o=f.opts.animationEffect,i=n.isNumeric(e)?e:o?f.opts.animationDuration:0,f.$slide.removeClass("fancybox-slide--complete fancybox-slide--next fancybox-slide--previous fancybox-animated"),!0!==t?n.fancybox.stop(f.$slide):o=!1,f.$slide.siblings().trigger("onReset").remove(),i&&u.$refs.container.removeClass("fancybox-is-open").addClass("fancybox-is-closing").css("transition-duration",i+"ms"),u.hideLoading(f),u.hideControls(!0),u.updateCursor(),"zoom"!==o||a&&i&&"image"===f.type&&!u.isMoved()&&!f.hasError&&(l=u.getThumbPos(f))||(o="fade"),"zoom"===o?(n.fancybox.stop(a),s=n.fancybox.getTranslate(a),c={top:s.top,left:s.left,scaleX:s.width/l.width,scaleY:s.height/l.height,width:l.width,height:l.height},r=f.opts.zoomOpacity,
"auto"==r&&(r=Math.abs(f.width/f.height-l.width/l.height)>.1),r&&(l.opacity=0),n.fancybox.setTranslate(a,c),p(a),n.fancybox.animate(a,l,i,h),!0):(o&&i?n.fancybox.animate(f.$slide.addClass("fancybox-slide--previous").removeClass("fancybox-slide--current"),"fancybox-animated fancybox-fx-"+o,i,h):!0===t?setTimeout(h,i):h(),!0)))},cleanUp:function(e){var o,i,a,s=this,r=s.current.opts.$orig;s.current.$slide.trigger("onReset"),s.$refs.container.empty().remove(),s.trigger("afterClose",e),s.current.opts.backFocus&&(r&&r.length&&r.is(":visible")||(r=s.$trigger),r&&r.length&&(i=t.scrollX,a=t.scrollY,r.trigger("focus"),n("html, body").scrollTop(a).scrollLeft(i))),s.current=null,o=n.fancybox.getInstance(),o?o.activate():(n("body").removeClass("fancybox-active compensate-for-scrollbar"),n("#fancybox-style-noscroll").remove())},trigger:function(t,e){var o,i=Array.prototype.slice.call(arguments,1),a=this,s=e&&e.opts?e:a.current;if(s?i.unshift(s):s=a,i.unshift(a),n.isFunction(s.opts[t])&&(o=s.opts[t].apply(s,i)),!1===o)return o;"afterClose"!==t&&a.$refs?a.$refs.container.trigger(t+".fb",i):r.trigger(t+".fb",i)},updateControls:function(){var t=this,o=t.current,i=o.index,a=t.$refs.container,s=t.$refs.caption,r=o.opts.caption;o.$slide.trigger("refresh"),r&&r.length?(t.$caption=s,s.children().eq(0).html(r)):t.$caption=null,t.hasHiddenControls||t.isIdle||t.showControls(),a.find("[data-fancybox-count]").html(t.group.length),a.find("[data-fancybox-index]").html(i+1),a.find("[data-fancybox-prev]").prop("disabled",!o.opts.loop&&i<=0),a.find("[data-fancybox-next]").prop("disabled",!o.opts.loop&&i>=t.group.length-1),"image"===o.type?a.find("[data-fancybox-zoom]").show().end().find("[data-fancybox-download]").attr("href",o.opts.image.src||o.src).show():o.opts.toolbar&&a.find("[data-fancybox-download],[data-fancybox-zoom]").hide(),n(e.activeElement).is(":hidden,[disabled]")&&t.$refs.container.trigger("focus")},hideControls:function(t){var e=this,n=["infobar","toolbar","nav"];!t&&e.current.opts.preventCaptionOverlap||n.push("caption"),this.$refs.container.removeClass(n.map(function(t){return"fancybox-show-"+t}).join(" ")),this.hasHiddenControls=!0},showControls:function(){var t=this,e=t.current?t.current.opts:t.opts,n=t.$refs.container;t.hasHiddenControls=!1,t.idleSecondsCounter=0,n.toggleClass("fancybox-show-toolbar",!(!e.toolbar||!e.buttons)).toggleClass("fancybox-show-infobar",!!(e.infobar&&t.group.length>1)).toggleClass("fancybox-show-caption",!!t.$caption).toggleClass("fancybox-show-nav",!!(e.arrows&&t.group.length>1)).toggleClass("fancybox-is-modal",!!e.modal)},toggleControls:function(){this.hasHiddenControls?this.showControls():this.hideControls()}}),n.fancybox={version:"3.5.7",defaults:a,getInstance:function(t){var e=n('.fancybox-container:not(".fancybox-is-closing"):last').data("FancyBox"),o=Array.prototype.slice.call(arguments,1);return e instanceof b&&("string"===n.type(t)?e[t].apply(e,o):"function"===n.type(t)&&t.apply(e,o),e)},open:function(t,e,n){return new b(t,e,n)},close:function(t){var e=this.getInstance();e&&(e.close(),!0===t&&this.close(t))},destroy:function(){this.close(!0),r.add("body").off("click.fb-start","**")},isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),use3d:function(){var n=e.createElement("div");return t.getComputedStyle&&t.getComputedStyle(n)&&t.getComputedStyle(n).getPropertyValue("transform")&&!(e.documentMode&&e.documentMode<11)}(),getTranslate:function(t){var e;return!(!t||!t.length)&&(e=t[0].getBoundingClientRect(),{top:e.top||0,left:e.left||0,width:e.width,height:e.height,opacity:parseFloat(t.css("opacity"))})},setTranslate:function(t,e){var n="",o={};if(t&&e)return void 0===e.left&&void 0===e.top||(n=(void 0===e.left?t.position().left:e.left)+"px, "+(void 0===e.top?t.position().top:e.top)+"px",n=this.use3d?"translate3d("+n+", 0px)":"translate("+n+")"),void 0!==e.scaleX&&void 0!==e.scaleY?n+=" scale("+e.scaleX+", "+e.scaleY+")":void 0!==e.scaleX&&(n+=" scaleX("+e.scaleX+")"),n.length&&(o.transform=n),void 0!==e.opacity&&(o.opacity=e.opacity),void 0!==e.width&&(o.width=e.width),void 0!==e.height&&(o.height=e.height),t.css(o)},animate:function(t,e,o,i,a){var s,r=this;n.isFunction(o)&&(i=o,o=null),r.stop(t),s=r.getTranslate(t),t.on(f,function(c){(!c||!c.originalEvent||t.is(c.originalEvent.target)&&"z-index"!=c.originalEvent.propertyName)&&(r.stop(t),n.isNumeric(o)&&t.css("transition-duration",""),n.isPlainObject(e)?void 0!==e.scaleX&&void 0!==e.scaleY&&r.setTranslate(t,{top:e.top,left:e.left,width:s.width*e.scaleX,height:s.height*e.scaleY,scaleX:1,scaleY:1}):!0!==a&&t.removeClass(e),n.isFunction(i)&&i(c))}),n.isNumeric(o)&&t.css("transition-duration",o+"ms"),n.isPlainObject(e)?(void 0!==e.scaleX&&void 0!==e.scaleY&&(delete e.width,delete e.height,t.parent().hasClass("fancybox-slide--image")&&t.parent().addClass("fancybox-is-scaling")),n.fancybox.setTranslate(t,e)):t.addClass(e),t.data("timer",setTimeout(function(){t.trigger(f)},o+33))},stop:function(t,e){t&&t.length&&(clearTimeout(t.data("timer")),e&&t.trigger(f),t.off(f).css("transition-duration",""),t.parent().removeClass("fancybox-is-scaling"))}},n.fn.fancybox=function(t){var e;return t=t||{},e=t.selector||!1,e?n("body").off("click.fb-start",e).on("click.fb-start",e,{options:t},i):this.off("click.fb-start").on("click.fb-start",{items:this,options:t},i),this},r.on("click.fb-start","[data-fancybox]",i),r.on("click.fb-start","[data-fancybox-trigger]",function(t){n('[data-fancybox="'+n(this).attr("data-fancybox-trigger")+'"]').eq(n(this).attr("data-fancybox-index")||0).trigger("click.fb-start",{$trigger:n(this)})}),function(){var t=null;r.on("mousedown mouseup focus blur",".fancybox-button",function(e){switch(e.type){case"mousedown":t=n(this);break;case"mouseup":t=null;break;case"focusin":n(".fancybox-button").removeClass("fancybox-focus"),n(this).is(t)||n(this).is("[disabled]")||n(this).addClass("fancybox-focus");break;case"focusout":n(".fancybox-button").removeClass("fancybox-focus")}})}()}}(window,document,jQuery),function(t){"use strict";var e={youtube:{matcher:/(youtube\.com|youtu\.be|youtube\-nocookie\.com)\/(watch\?(.*&)?v=|v\/|u\/|embed\/?)?(videoseries\?list=(.*)|[\w-]{11}|\?listType=(.*)&list=(.*))(.*)/i,params:{autoplay:1,autohide:1,fs:1,rel:0,hd:1,wmode:"transparent",enablejsapi:1,html5:1},paramPlace:8,type:"iframe",url:"https://www.youtube-nocookie.com/embed/$4",thumb:"https://img.youtube.com/vi/$4/hqdefault.jpg"},vimeo:{matcher:/^.+vimeo.com\/(.*\/)?([\d]+)(.*)?/,params:{autoplay:1,hd:1,show_title:1,show_byline:1,show_portrait:0,fullscreen:1},paramPlace:3,type:"iframe",url:"//player.vimeo.com/video/$2"},instagram:{matcher:/(instagr\.am|instagram\.com)\/p\/([a-zA-Z0-9_\-]+)\/?/i,type:"image",url:"//$1/p/$2/media/?size=l"},gmap_place:{matcher:/(maps\.)?google\.([a-z]{2,3}(\.[a-z]{2})?)\/(((maps\/(place\/(.*)\/)?\@(.*),(\d+.?\d+?)z))|(\?ll=))(.*)?/i,type:"iframe",url:function(t){return"//maps.google."+t[2]+"/?ll="+(t[9]?t[9]+"&z="+Math.floor(t[10])+(t[12]?t[12].replace(/^\//,"&"):""):t[12]+"").replace(/\?/,"&")+"&output="+(t[12]&&t[12].indexOf("layer=c")>0?"svembed":"embed")}},gmap_search:{matcher:/(maps\.)?google\.([a-z]{2,3}(\.[a-z]{2})?)\/(maps\/search\/)(.*)/i,type:"iframe",url:function(t){return"//maps.google."+t[2]+"/maps?q="+t[5].replace("query=","q=").replace("api=1","")+"&output=embed"}}},n=function(e,n,o){if(e)return o=o||"","object"===t.type(o)&&(o=t.param(o,!0)),t.each(n,function(t,n){e=e.replace("$"+t,n||"")}),o.length&&(e+=(e.indexOf("?")>0?"&":"?")+o),e};t(document).on("objectNeedsType.fb",function(o,i,a){var s,r,c,l,d,u,f,p=a.src||"",h=!1;s=t.extend(!0,{},e,a.opts.media),t.each(s,function(e,o){if(c=p.match(o.matcher)){if(h=o.type,f=e,u={},o.paramPlace&&c[o.paramPlace]){d=c[o.paramPlace],"?"==d[0]&&(d=d.substring(1)),d=d.split("&");for(var i=0;i<d.length;++i){var s=d[i].split("=",2);2==s.length&&(u[s[0]]=decodeURIComponent(s[1].replace(/\+/g," ")))}}return l=t.extend(!0,{},o.params,a.opts[e],u),p="function"===t.type(o.url)?o.url.call(this,c,l,a):n(o.url,c,l),r="function"===t.type(o.thumb)?o.thumb.call(this,c,l,a):n(o.thumb,c),"youtube"===e?p=p.replace(/&t=((\d+)m)?(\d+)s/,function(t,e,n,o){return"&start="+((n?60*parseInt(n,10):0)+parseInt(o,10))}):"vimeo"===e&&(p=p.replace("&%23","#")),!1}}),h?(a.opts.thumb||a.opts.$thumb&&a.opts.$thumb.length||(a.opts.thumb=r),"iframe"===h&&(a.opts=t.extend(!0,a.opts,{iframe:{preload:!1,attr:{scrolling:"no"}}})),t.extend(a,{type:h,src:p,origSrc:a.src,contentSource:f,contentType:"image"===h?"image":"gmap_place"==f||"gmap_search"==f?"map":"video"})):p&&(a.type=a.opts.defaultType)});var o={youtube:{src:"https://www.youtube.com/iframe_api",class:"YT",loading:!1,loaded:!1},vimeo:{src:"https://player.vimeo.com/api/player.js",class:"Vimeo",loading:!1,loaded:!1},load:function(t){var e,n=this;if(this[t].loaded)return void setTimeout(function(){n.done(t)});this[t].loading||(this[t].loading=!0,e=document.createElement("script"),e.type="text/javascript",e.src=this[t].src,"youtube"===t?window.onYouTubeIframeAPIReady=function(){n[t].loaded=!0,n.done(t)}:e.onload=function(){n[t].loaded=!0,n.done(t)},document.body.appendChild(e))},done:function(e){var n,o,i;"youtube"===e&&delete window.onYouTubeIframeAPIReady,(n=t.fancybox.getInstance())&&(o=n.current.$content.find("iframe"),"youtube"===e&&void 0!==YT&&YT?i=new YT.Player(o.attr("id"),{events:{onStateChange:function(t){0==t.data&&n.next()}}}):"vimeo"===e&&void 0!==Vimeo&&Vimeo&&(i=new Vimeo.Player(o),i.on("ended",function(){n.next()})))}};t(document).on({"afterShow.fb":function(t,e,n){e.group.length>1&&("youtube"===n.contentSource||"vimeo"===n.contentSource)&&o.load(n.contentSource)}})}(jQuery),function(t,e,n){"use strict";var o=function(){return t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||function(e){return t.setTimeout(e,1e3/60)}}(),i=function(){return t.cancelAnimationFrame||t.webkitCancelAnimationFrame||t.mozCancelAnimationFrame||t.oCancelAnimationFrame||function(e){t.clearTimeout(e)}}(),a=function(e){var n=[];e=e.originalEvent||e||t.e,e=e.touches&&e.touches.length?e.touches:e.changedTouches&&e.changedTouches.length?e.changedTouches:[e];for(var o in e)e[o].pageX?n.push({x:e[o].pageX,y:e[o].pageY}):e[o].clientX&&n.push({x:e[o].clientX,y:e[o].clientY});return n},s=function(t,e,n){return e&&t?"x"===n?t.x-e.x:"y"===n?t.y-e.y:Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)):0},r=function(t){if(t.is('a,area,button,[role="button"],input,label,select,summary,textarea,video,audio,iframe')||n.isFunction(t.get(0).onclick)||t.data("selectable"))return!0;for(var e=0,o=t[0].attributes,i=o.length;e<i;e++)if("data-fancybox-"===o[e].nodeName.substr(0,14))return!0;return!1},c=function(e){var n=t.getComputedStyle(e)["overflow-y"],o=t.getComputedStyle(e)["overflow-x"],i=("scroll"===n||"auto"===n)&&e.scrollHeight>e.clientHeight,a=("scroll"===o||"auto"===o)&&e.scrollWidth>e.clientWidth;return i||a},l=function(t){for(var e=!1;;){if(e=c(t.get(0)))break;if(t=t.parent(),!t.length||t.hasClass("fancybox-stage")||t.is("body"))break}return e},d=function(t){var e=this;e.instance=t,e.$bg=t.$refs.bg,e.$stage=t.$refs.stage,e.$container=t.$refs.container,e.destroy(),e.$container.on("touchstart.fb.touch mousedown.fb.touch",n.proxy(e,"ontouchstart"))};d.prototype.destroy=function(){var t=this;t.$container.off(".fb.touch"),n(e).off(".fb.touch"),t.requestId&&(i(t.requestId),t.requestId=null),t.tapped&&(clearTimeout(t.tapped),t.tapped=null)},d.prototype.ontouchstart=function(o){var i=this,c=n(o.target),d=i.instance,u=d.current,f=u.$slide,p=u.$content,h="touchstart"==o.type;if(h&&i.$container.off("mousedown.fb.touch"),(!o.originalEvent||2!=o.originalEvent.button)&&f.length&&c.length&&!r(c)&&!r(c.parent())&&(c.is("img")||!(o.originalEvent.clientX>c[0].clientWidth+c.offset().left))){if(!u||d.isAnimating||u.$slide.hasClass("fancybox-animated"))return o.stopPropagation(),void o.preventDefault();i.realPoints=i.startPoints=a(o),i.startPoints.length&&(u.touch&&o.stopPropagation(),i.startEvent=o,i.canTap=!0,i.$target=c,i.$content=p,i.opts=u.opts.touch,i.isPanning=!1,i.isSwiping=!1,i.isZooming=!1,i.isScrolling=!1,i.canPan=d.canPan(),i.startTime=(new Date).getTime(),i.distanceX=i.distanceY=i.distance=0,i.canvasWidth=Math.round(f[0].clientWidth),i.canvasHeight=Math.round(f[0].clientHeight),i.contentLastPos=null,i.contentStartPos=n.fancybox.getTranslate(i.$content)||{top:0,left:0},i.sliderStartPos=n.fancybox.getTranslate(f),i.stagePos=n.fancybox.getTranslate(d.$refs.stage),i.sliderStartPos.top-=i.stagePos.top,i.sliderStartPos.left-=i.stagePos.left,i.contentStartPos.top-=i.stagePos.top,i.contentStartPos.left-=i.stagePos.left,n(e).off(".fb.touch").on(h?"touchend.fb.touch touchcancel.fb.touch":"mouseup.fb.touch mouseleave.fb.touch",n.proxy(i,"ontouchend")).on(h?"touchmove.fb.touch":"mousemove.fb.touch",n.proxy(i,"ontouchmove")),n.fancybox.isMobile&&e.addEventListener("scroll",i.onscroll,!0),((i.opts||i.canPan)&&(c.is(i.$stage)||i.$stage.find(c).length)||(c.is(".fancybox-image")&&o.preventDefault(),n.fancybox.isMobile&&c.parents(".fancybox-caption").length))&&(i.isScrollable=l(c)||l(c.parent()),n.fancybox.isMobile&&i.isScrollable||o.preventDefault(),(1===i.startPoints.length||u.hasError)&&(i.canPan?(n.fancybox.stop(i.$content),i.isPanning=!0):i.isSwiping=!0,i.$container.addClass("fancybox-is-grabbing")),2===i.startPoints.length&&"image"===u.type&&(u.isLoaded||u.$ghost)&&(i.canTap=!1,i.isSwiping=!1,i.isPanning=!1,i.isZooming=!0,n.fancybox.stop(i.$content),i.centerPointStartX=.5*(i.startPoints[0].x+i.startPoints[1].x)-n(t).scrollLeft(),i.centerPointStartY=.5*(i.startPoints[0].y+i.startPoints[1].y)-n(t).scrollTop(),i.percentageOfImageAtPinchPointX=(i.centerPointStartX-i.contentStartPos.left)/i.contentStartPos.width,i.percentageOfImageAtPinchPointY=(i.centerPointStartY-i.contentStartPos.top)/i.contentStartPos.height,i.startDistanceBetweenFingers=s(i.startPoints[0],i.startPoints[1]))))}},d.prototype.onscroll=function(t){var n=this;n.isScrolling=!0,e.removeEventListener("scroll",n.onscroll,!0)},d.prototype.ontouchmove=function(t){var e=this;return void 0!==t.originalEvent.buttons&&0===t.originalEvent.buttons?void e.ontouchend(t):e.isScrolling?void(e.canTap=!1):(e.newPoints=a(t),void((e.opts||e.canPan)&&e.newPoints.length&&e.newPoints.length&&(e.isSwiping&&!0===e.isSwiping||t.preventDefault(),e.distanceX=s(e.newPoints[0],e.startPoints[0],"x"),e.distanceY=s(e.newPoints[0],e.startPoints[0],"y"),e.distance=s(e.newPoints[0],e.startPoints[0]),e.distance>0&&(e.isSwiping?e.onSwipe(t):e.isPanning?e.onPan():e.isZooming&&e.onZoom()))))},d.prototype.onSwipe=function(e){var a,s=this,r=s.instance,c=s.isSwiping,l=s.sliderStartPos.left||0;if(!0!==c)"x"==c&&(s.distanceX>0&&(s.instance.group.length<2||0===s.instance.current.index&&!s.instance.current.opts.loop)?l+=Math.pow(s.distanceX,.8):s.distanceX<0&&(s.instance.group.length<2||s.instance.current.index===s.instance.group.length-1&&!s.instance.current.opts.loop)?l-=Math.pow(-s.distanceX,.8):l+=s.distanceX),s.sliderLastPos={top:"x"==c?0:s.sliderStartPos.top+s.distanceY,left:l},s.requestId&&(i(s.requestId),s.requestId=null),s.requestId=o(function(){s.sliderLastPos&&(n.each(s.instance.slides,function(t,e){var o=e.pos-s.instance.currPos;n.fancybox.setTranslate(e.$slide,{top:s.sliderLastPos.top,left:s.sliderLastPos.left+o*s.canvasWidth+o*e.opts.gutter})}),s.$container.addClass("fancybox-is-sliding"))});else if(Math.abs(s.distance)>10){if(s.canTap=!1,r.group.length<2&&s.opts.vertical?s.isSwiping="y":r.isDragging||!1===s.opts.vertical||"auto"===s.opts.vertical&&n(t).width()>800?s.isSwiping="x":(a=Math.abs(180*Math.atan2(s.distanceY,s.distanceX)/Math.PI),s.isSwiping=a>45&&a<135?"y":"x"),"y"===s.isSwiping&&n.fancybox.isMobile&&s.isScrollable)return void(s.isScrolling=!0);r.isDragging=s.isSwiping,s.startPoints=s.newPoints,n.each(r.slides,function(t,e){var o,i;n.fancybox.stop(e.$slide),o=n.fancybox.getTranslate(e.$slide),i=n.fancybox.getTranslate(r.$refs.stage),e.$slide.css({transform:"",opacity:"","transition-duration":""}).removeClass("fancybox-animated").removeClass(function(t,e){return(e.match(/(^|\s)fancybox-fx-\S+/g)||[]).join(" ")}),e.pos===r.current.pos&&(s.sliderStartPos.top=o.top-i.top,s.sliderStartPos.left=o.left-i.left),n.fancybox.setTranslate(e.$slide,{top:o.top-i.top,left:o.left-i.left})}),r.SlideShow&&r.SlideShow.isActive&&r.SlideShow.stop()}},d.prototype.onPan=function(){var t=this;if(s(t.newPoints[0],t.realPoints[0])<(n.fancybox.isMobile?10:5))return void(t.startPoints=t.newPoints);t.canTap=!1,t.contentLastPos=t.limitMovement(),t.requestId&&i(t.requestId),t.requestId=o(function(){n.fancybox.setTranslate(t.$content,t.contentLastPos)})},d.prototype.limitMovement=function(){var t,e,n,o,i,a,s=this,r=s.canvasWidth,c=s.canvasHeight,l=s.distanceX,d=s.distanceY,u=s.contentStartPos,f=u.left,p=u.top,h=u.width,g=u.height;return i=h>r?f+l:f,a=p+d,t=Math.max(0,.5*r-.5*h),e=Math.max(0,.5*c-.5*g),n=Math.min(r-h,.5*r-.5*h),o=Math.min(c-g,.5*c-.5*g),l>0&&i>t&&(i=t-1+Math.pow(-t+f+l,.8)||0),l<0&&i<n&&(i=n+1-Math.pow(n-f-l,.8)||0),d>0&&a>e&&(a=e-1+Math.pow(-e+p+d,.8)||0),d<0&&a<o&&(a=o+1-Math.pow(o-p-d,.8)||0),{top:a,left:i}},d.prototype.limitPosition=function(t,e,n,o){var i=this,a=i.canvasWidth,s=i.canvasHeight;return n>a?(t=t>0?0:t,t=t<a-n?a-n:t):t=Math.max(0,a/2-n/2),o>s?(e=e>0?0:e,e=e<s-o?s-o:e):e=Math.max(0,s/2-o/2),{top:e,left:t}},d.prototype.onZoom=function(){var e=this,a=e.contentStartPos,r=a.width,c=a.height,l=a.left,d=a.top,u=s(e.newPoints[0],e.newPoints[1]),f=u/e.startDistanceBetweenFingers,p=Math.floor(r*f),h=Math.floor(c*f),g=(r-p)*e.percentageOfImageAtPinchPointX,b=(c-h)*e.percentageOfImageAtPinchPointY,m=(e.newPoints[0].x+e.newPoints[1].x)/2-n(t).scrollLeft(),v=(e.newPoints[0].y+e.newPoints[1].y)/2-n(t).scrollTop(),y=m-e.centerPointStartX,x=v-e.centerPointStartY,w=l+(g+y),$=d+(b+x),S={top:$,left:w,scaleX:f,scaleY:f};e.canTap=!1,e.newWidth=p,e.newHeight=h,e.contentLastPos=S,e.requestId&&i(e.requestId),e.requestId=o(function(){n.fancybox.setTranslate(e.$content,e.contentLastPos)})},d.prototype.ontouchend=function(t){var o=this,s=o.isSwiping,r=o.isPanning,c=o.isZooming,l=o.isScrolling;if(o.endPoints=a(t),o.dMs=Math.max((new Date).getTime()-o.startTime,1),o.$container.removeClass("fancybox-is-grabbing"),n(e).off(".fb.touch"),e.removeEventListener("scroll",o.onscroll,!0),o.requestId&&(i(o.requestId),o.requestId=null),o.isSwiping=!1,o.isPanning=!1,o.isZooming=!1,o.isScrolling=!1,o.instance.isDragging=!1,o.canTap)return o.onTap(t);o.speed=100,o.velocityX=o.distanceX/o.dMs*.5,o.velocityY=o.distanceY/o.dMs*.5,r?o.endPanning():c?o.endZooming():o.endSwiping(s,l)},d.prototype.endSwiping=function(t,e){var o=this,i=!1,a=o.instance.group.length,s=Math.abs(o.distanceX),r="x"==t&&a>1&&(o.dMs>130&&s>10||s>50);o.sliderLastPos=null,"y"==t&&!e&&Math.abs(o.distanceY)>50?(n.fancybox.animate(o.instance.current.$slide,{top:o.sliderStartPos.top+o.distanceY+150*o.velocityY,opacity:0},200),i=o.instance.close(!0,250)):r&&o.distanceX>0?i=o.instance.previous(300):r&&o.distanceX<0&&(i=o.instance.next(300)),!1!==i||"x"!=t&&"y"!=t||o.instance.centerSlide(200),o.$container.removeClass("fancybox-is-sliding")},d.prototype.endPanning=function(){var t,e,o,i=this;i.contentLastPos&&(!1===i.opts.momentum||i.dMs>350?(t=i.contentLastPos.left,e=i.contentLastPos.top):(t=i.contentLastPos.left+500*i.velocityX,e=i.contentLastPos.top+500*i.velocityY),o=i.limitPosition(t,e,i.contentStartPos.width,i.contentStartPos.height),o.width=i.contentStartPos.width,o.height=i.contentStartPos.height,n.fancybox.animate(i.$content,o,366))},d.prototype.endZooming=function(){var t,e,o,i,a=this,s=a.instance.current,r=a.newWidth,c=a.newHeight;a.contentLastPos&&(t=a.contentLastPos.left,e=a.contentLastPos.top,i={top:e,left:t,width:r,height:c,scaleX:1,scaleY:1},n.fancybox.setTranslate(a.$content,i),r<a.canvasWidth&&c<a.canvasHeight?a.instance.scaleToFit(150):r>s.width||c>s.height?a.instance.scaleToActual(a.centerPointStartX,a.centerPointStartY,150):(o=a.limitPosition(t,e,r,c),n.fancybox.animate(a.$content,o,150)))},d.prototype.onTap=function(e){var o,i=this,s=n(e.target),r=i.instance,c=r.current,l=e&&a(e)||i.startPoints,d=l[0]?l[0].x-n(t).scrollLeft()-i.stagePos.left:0,u=l[0]?l[0].y-n(t).scrollTop()-i.stagePos.top:0,f=function(t){var o=c.opts[t];if(n.isFunction(o)&&(o=o.apply(r,[c,e])),o)switch(o){case"close":r.close(i.startEvent);break;case"toggleControls":r.toggleControls();break;case"next":r.next();break;case"nextOrClose":r.group.length>1?r.next():r.close(i.startEvent);break;case"zoom":"image"==c.type&&(c.isLoaded||c.$ghost)&&(r.canPan()?r.scaleToFit():r.isScaledDown()?r.scaleToActual(d,u):r.group.length<2&&r.close(i.startEvent))}};if((!e.originalEvent||2!=e.originalEvent.button)&&(s.is("img")||!(d>s[0].clientWidth+s.offset().left))){if(s.is(".fancybox-bg,.fancybox-inner,.fancybox-outer,.fancybox-container"))o="Outside";else if(s.is(".fancybox-slide"))o="Slide";else{if(!r.current.$content||!r.current.$content.find(s).addBack().filter(s).length)return;o="Content"}if(i.tapped){if(clearTimeout(i.tapped),i.tapped=null,Math.abs(d-i.tapX)>50||Math.abs(u-i.tapY)>50)return this;f("dblclick"+o)}else i.tapX=d,i.tapY=u,c.opts["dblclick"+o]&&c.opts["dblclick"+o]!==c.opts["click"+o]?i.tapped=setTimeout(function(){i.tapped=null,r.isAnimating||f("click"+o)},500):f("click"+o);return this}},n(e).on("onActivate.fb",function(t,e){e&&!e.Guestures&&(e.Guestures=new d(e))}).on("beforeClose.fb",function(t,e){e&&e.Guestures&&e.Guestures.destroy()})}(window,document,jQuery),function(t,e){"use strict";e.extend(!0,e.fancybox.defaults,{btnTpl:{slideShow:'<button data-fancybox-play class="fancybox-button fancybox-button--play" title="{{PLAY_START}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6.5 5.4v13.2l11-6.6z"/></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.33 5.75h2.2v12.5h-2.2V5.75zm5.15 0h2.2v12.5h-2.2V5.75z"/></svg></button>'},slideShow:{autoStart:!1,speed:3e3,progress:!0}});var n=function(t){this.instance=t,this.init()};e.extend(n.prototype,{timer:null,isActive:!1,$button:null,init:function(){var t=this,n=t.instance,o=n.group[n.currIndex].opts.slideShow;t.$button=n.$refs.toolbar.find("[data-fancybox-play]").on("click",function(){t.toggle()}),n.group.length<2||!o?t.$button.hide():o.progress&&(t.$progress=e('<div class="fancybox-progress"></div>').appendTo(n.$refs.inner))},set:function(t){var n=this,o=n.instance,i=o.current;i&&(!0===t||i.opts.loop||o.currIndex<o.group.length-1)?n.isActive&&"video"!==i.contentType&&(n.$progress&&e.fancybox.animate(n.$progress.show(),{scaleX:1},i.opts.slideShow.speed),n.timer=setTimeout(function(){o.current.opts.loop||o.current.index!=o.group.length-1?o.next():o.jumpTo(0)},i.opts.slideShow.speed)):(n.stop(),o.idleSecondsCounter=0,o.showControls())},clear:function(){var t=this;clearTimeout(t.timer),t.timer=null,t.$progress&&t.$progress.removeAttr("style").hide()},start:function(){var t=this,e=t.instance.current;e&&(t.$button.attr("title",(e.opts.i18n[e.opts.lang]||e.opts.i18n.en).PLAY_STOP).removeClass("fancybox-button--play").addClass("fancybox-button--pause"),t.isActive=!0,e.isComplete&&t.set(!0),t.instance.trigger("onSlideShowChange",!0))},stop:function(){var t=this,e=t.instance.current;t.clear(),t.$button.attr("title",(e.opts.i18n[e.opts.lang]||e.opts.i18n.en).PLAY_START).removeClass("fancybox-button--pause").addClass("fancybox-button--play"),t.isActive=!1,t.instance.trigger("onSlideShowChange",!1),t.$progress&&t.$progress.removeAttr("style").hide()},toggle:function(){var t=this;t.isActive?t.stop():t.start()}}),e(t).on({"onInit.fb":function(t,e){e&&!e.SlideShow&&(e.SlideShow=new n(e))},"beforeShow.fb":function(t,e,n,o){var i=e&&e.SlideShow;o?i&&n.opts.slideShow.autoStart&&i.start():i&&i.isActive&&i.clear()},"afterShow.fb":function(t,e,n){var o=e&&e.SlideShow;o&&o.isActive&&o.set()},"afterKeydown.fb":function(n,o,i,a,s){var r=o&&o.SlideShow;!r||!i.opts.slideShow||80!==s&&32!==s||e(t.activeElement).is("button,a,input")||(a.preventDefault(),r.toggle())},"beforeClose.fb onDeactivate.fb":function(t,e){var n=e&&e.SlideShow;n&&n.stop()}}),e(t).on("visibilitychange",function(){var n=e.fancybox.getInstance(),o=n&&n.SlideShow;o&&o.isActive&&(t.hidden?o.clear():o.set())})}(document,jQuery),function(t,e){"use strict";var n=function(){for(var e=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],n={},o=0;o<e.length;o++){var i=e[o];if(i&&i[1]in t){for(var a=0;a<i.length;a++)n[e[0][a]]=i[a];return n}}return!1}();if(n){var o={request:function(e){e=e||t.documentElement,e[n.requestFullscreen](e.ALLOW_KEYBOARD_INPUT)},exit:function(){t[n.exitFullscreen]()},toggle:function(e){e=e||t.documentElement,this.isFullscreen()?this.exit():this.request(e)},isFullscreen:function(){return Boolean(t[n.fullscreenElement])},enabled:function(){return Boolean(t[n.fullscreenEnabled])}};e.extend(!0,e.fancybox.defaults,{btnTpl:{fullScreen:'<button data-fancybox-fullscreen class="fancybox-button fancybox-button--fsenter" title="{{FULL_SCREEN}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"/></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5 16h3v3h2v-5H5zm3-8H5v2h5V5H8zm6 11h2v-3h3v-2h-5zm2-11V5h-2v5h5V8z"/></svg></button>'},fullScreen:{autoStart:!1}}),e(t).on(n.fullscreenchange,function(){var t=o.isFullscreen(),n=e.fancybox.getInstance();n&&(n.current&&"image"===n.current.type&&n.isAnimating&&(n.isAnimating=!1,n.update(!0,!0,0),n.isComplete||n.complete()),n.trigger("onFullscreenChange",t),n.$refs.container.toggleClass("fancybox-is-fullscreen",t),n.$refs.toolbar.find("[data-fancybox-fullscreen]").toggleClass("fancybox-button--fsenter",!t).toggleClass("fancybox-button--fsexit",t))})}e(t).on({"onInit.fb":function(t,e){var i;if(!n)return void e.$refs.toolbar.find("[data-fancybox-fullscreen]").remove();e&&e.group[e.currIndex].opts.fullScreen?(i=e.$refs.container,i.on("click.fb-fullscreen","[data-fancybox-fullscreen]",function(t){t.stopPropagation(),t.preventDefault(),o.toggle()}),e.opts.fullScreen&&!0===e.opts.fullScreen.autoStart&&o.request(),e.FullScreen=o):e&&e.$refs.toolbar.find("[data-fancybox-fullscreen]").hide()},"afterKeydown.fb":function(t,e,n,o,i){e&&e.FullScreen&&70===i&&(o.preventDefault(),e.FullScreen.toggle())},"beforeClose.fb":function(t,e){e&&e.FullScreen&&e.$refs.container.hasClass("fancybox-is-fullscreen")&&o.exit()}})}(document,jQuery),function(t,e){"use strict";var n="fancybox-thumbs";e.fancybox.defaults=e.extend(!0,{btnTpl:{thumbs:'<button data-fancybox-thumbs class="fancybox-button fancybox-button--thumbs" title="{{THUMBS}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.59 14.59h3.76v3.76h-3.76v-3.76zm-4.47 0h3.76v3.76h-3.76v-3.76zm-4.47 0h3.76v3.76H5.65v-3.76zm8.94-4.47h3.76v3.76h-3.76v-3.76zm-4.47 0h3.76v3.76h-3.76v-3.76zm-4.47 0h3.76v3.76H5.65v-3.76zm8.94-4.47h3.76v3.76h-3.76V5.65zm-4.47 0h3.76v3.76h-3.76V5.65zm-4.47 0h3.76v3.76H5.65V5.65z"/></svg></button>'},thumbs:{autoStart:!1,hideOnClose:!0,parentEl:".fancybox-container",axis:"y"}},e.fancybox.defaults);var o=function(t){this.init(t)};e.extend(o.prototype,{$button:null,$grid:null,$list:null,isVisible:!1,isActive:!1,init:function(t){var e=this,n=t.group,o=0;e.instance=t,e.opts=n[t.currIndex].opts.thumbs,t.Thumbs=e,e.$button=t.$refs.toolbar.find("[data-fancybox-thumbs]");for(var i=0,a=n.length;i<a&&(n[i].thumb&&o++,!(o>1));i++);o>1&&e.opts?(e.$button.removeAttr("style").on("click",function(){e.toggle()}),e.isActive=!0):e.$button.hide()},create:function(){var t,o=this,i=o.instance,a=o.opts.parentEl,s=[];o.$grid||(o.$grid=e('<div class="'+n+" "+n+"-"+o.opts.axis+'"></div>').appendTo(i.$refs.container.find(a).addBack().filter(a)),o.$grid.on("click","a",function(){i.jumpTo(e(this).attr("data-index"))})),o.$list||(o.$list=e('<div class="'+n+'__list">').appendTo(o.$grid)),e.each(i.group,function(e,n){t=n.thumb,t||"image"!==n.type||(t=n.src),s.push('<a href="javascript:;" tabindex="0" data-index="'+e+'"'+(t&&t.length?' style="background-image:url('+t+')"':'class="fancybox-thumbs-missing"')+"></a>")}),o.$list[0].innerHTML=s.join(""),"x"===o.opts.axis&&o.$list.width(parseInt(o.$grid.css("padding-right"),10)+i.group.length*o.$list.children().eq(0).outerWidth(!0))},focus:function(t){var e,n,o=this,i=o.$list,a=o.$grid;o.instance.current&&(e=i.children().removeClass("fancybox-thumbs-active").filter('[data-index="'+o.instance.current.index+'"]').addClass("fancybox-thumbs-active"),n=e.position(),"y"===o.opts.axis&&(n.top<0||n.top>i.height()-e.outerHeight())?i.stop().animate({scrollTop:i.scrollTop()+n.top},t):"x"===o.opts.axis&&(n.left<a.scrollLeft()||n.left>a.scrollLeft()+(a.width()-e.outerWidth()))&&i.parent().stop().animate({scrollLeft:n.left},t))},update:function(){var t=this;t.instance.$refs.container.toggleClass("fancybox-show-thumbs",this.isVisible),t.isVisible?(t.$grid||t.create(),t.instance.trigger("onThumbsShow"),t.focus(0)):t.$grid&&t.instance.trigger("onThumbsHide"),t.instance.update()},hide:function(){this.isVisible=!1,this.update()},show:function(){this.isVisible=!0,this.update()},toggle:function(){this.isVisible=!this.isVisible,this.update()}}),e(t).on({"onInit.fb":function(t,e){var n;e&&!e.Thumbs&&(n=new o(e),n.isActive&&!0===n.opts.autoStart&&n.show())},"beforeShow.fb":function(t,e,n,o){var i=e&&e.Thumbs;i&&i.isVisible&&i.focus(o?0:250)},"afterKeydown.fb":function(t,e,n,o,i){var a=e&&e.Thumbs;a&&a.isActive&&71===i&&(o.preventDefault(),a.toggle())},"beforeClose.fb":function(t,e){var n=e&&e.Thumbs;n&&n.isVisible&&!1!==n.opts.hideOnClose&&n.$grid.hide()}})}(document,jQuery),function(t,e){"use strict";function n(t){var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return String(t).replace(/[&<>"'`=\/]/g,function(t){return e[t]})}e.extend(!0,e.fancybox.defaults,{btnTpl:{share:'<button data-fancybox-share class="fancybox-button fancybox-button--share" title="{{SHARE}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.55 19c1.4-8.4 9.1-9.8 11.9-9.8V5l7 7-7 6.3v-3.5c-2.8 0-10.5 2.1-11.9 4.2z"/></svg></button>'},share:{url:function(t,e){return!t.currentHash&&"inline"!==e.type&&"html"!==e.type&&(e.origSrc||e.src)||window.location},
tpl:'<div class="fancybox-share"><h1>{{SHARE}}</h1><p><a class="fancybox-share__button fancybox-share__button--fb" href="https://www.facebook.com/sharer/sharer.php?u={{url}}"><svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="m287 456v-299c0-21 6-35 35-35h38v-63c-7-1-29-3-55-3-54 0-91 33-91 94v306m143-254h-205v72h196" /></svg><span>Facebook</span></a><a class="fancybox-share__button fancybox-share__button--tw" href="https://twitter.com/intent/tweet?url={{url}}&text={{descr}}"><svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="m456 133c-14 7-31 11-47 13 17-10 30-27 37-46-15 10-34 16-52 20-61-62-157-7-141 75-68-3-129-35-169-85-22 37-11 86 26 109-13 0-26-4-37-9 0 39 28 72 65 80-12 3-25 4-37 2 10 33 41 57 77 57-42 30-77 38-122 34 170 111 378-32 359-208 16-11 30-25 41-42z" /></svg><span>Twitter</span></a><a class="fancybox-share__button fancybox-share__button--pt" href="https://www.pinterest.com/pin/create/button/?url={{url}}&description={{descr}}&media={{media}}"><svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="m265 56c-109 0-164 78-164 144 0 39 15 74 47 87 5 2 10 0 12-5l4-19c2-6 1-8-3-13-9-11-15-25-15-45 0-58 43-110 113-110 62 0 96 38 96 88 0 67-30 122-73 122-24 0-42-19-36-44 6-29 20-60 20-81 0-19-10-35-31-35-25 0-44 26-44 60 0 21 7 36 7 36l-30 125c-8 37-1 83 0 87 0 3 4 4 5 2 2-3 32-39 42-75l16-64c8 16 31 29 56 29 74 0 124-67 124-157 0-69-58-132-146-132z" fill="#fff"/></svg><span>Pinterest</span></a></p><p><input class="fancybox-share__input" type="text" value="{{url_raw}}" onclick="select()" /></p></div>'}}),e(t).on("click","[data-fancybox-share]",function(){var t,o,i=e.fancybox.getInstance(),a=i.current||null;a&&("function"===e.type(a.opts.share.url)&&(t=a.opts.share.url.apply(a,[i,a])),o=a.opts.share.tpl.replace(/\{\{media\}\}/g,"image"===a.type?encodeURIComponent(a.src):"").replace(/\{\{url\}\}/g,encodeURIComponent(t)).replace(/\{\{url_raw\}\}/g,n(t)).replace(/\{\{descr\}\}/g,i.$caption?encodeURIComponent(i.$caption.text()):""),e.fancybox.open({src:i.translate(i,o),type:"html",opts:{touch:!1,animationEffect:!1,afterLoad:function(t,e){i.$refs.container.one("beforeClose.fb",function(){t.close(null,0)}),e.$content.find(".fancybox-share__button").click(function(){return window.open(this.href,"Share","width=550, height=450"),!1})},mobile:{autoFocus:!1}}}))})}(document,jQuery),function(t,e,n){"use strict";function o(){var e=t.location.hash.substr(1),n=e.split("-"),o=n.length>1&&/^\+?\d+$/.test(n[n.length-1])?parseInt(n.pop(-1),10)||1:1,i=n.join("-");return{hash:e,index:o<1?1:o,gallery:i}}function i(t){""!==t.gallery&&n("[data-fancybox='"+n.escapeSelector(t.gallery)+"']").eq(t.index-1).focus().trigger("click.fb-start")}function a(t){var e,n;return!!t&&(e=t.current?t.current.opts:t.opts,""!==(n=e.hash||(e.$orig?e.$orig.data("fancybox")||e.$orig.data("fancybox-trigger"):""))&&n)}n.escapeSelector||(n.escapeSelector=function(t){return(t+"").replace(/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g,function(t,e){return e?"\0"===t?"":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t})}),n(function(){!1!==n.fancybox.defaults.hash&&(n(e).on({"onInit.fb":function(t,e){var n,i;!1!==e.group[e.currIndex].opts.hash&&(n=o(),(i=a(e))&&n.gallery&&i==n.gallery&&(e.currIndex=n.index-1))},"beforeShow.fb":function(n,o,i,s){var r;i&&!1!==i.opts.hash&&(r=a(o))&&(o.currentHash=r+(o.group.length>1?"-"+(i.index+1):""),t.location.hash!=="#"+o.currentHash&&(s&&!o.origHash&&(o.origHash=t.location.hash),o.hashTimer&&clearTimeout(o.hashTimer),o.hashTimer=setTimeout(function(){"replaceState"in t.history?(t.history[s?"pushState":"replaceState"]({},e.title,t.location.pathname+t.location.search+"#"+o.currentHash),s&&(o.hasCreatedHistory=!0)):t.location.hash=o.currentHash,o.hashTimer=null},300)))},"beforeClose.fb":function(n,o,i){i&&!1!==i.opts.hash&&(clearTimeout(o.hashTimer),o.currentHash&&o.hasCreatedHistory?t.history.back():o.currentHash&&("replaceState"in t.history?t.history.replaceState({},e.title,t.location.pathname+t.location.search+(o.origHash||"")):t.location.hash=o.origHash),o.currentHash=null)}}),n(t).on("hashchange.fb",function(){var t=o(),e=null;n.each(n(".fancybox-container").get().reverse(),function(t,o){var i=n(o).data("FancyBox");if(i&&i.currentHash)return e=i,!1}),e?e.currentHash===t.gallery+"-"+t.index||1===t.index&&e.currentHash==t.gallery||(e.currentHash=null,e.close()):""!==t.gallery&&i(t)}),setTimeout(function(){n.fancybox.getInstance()||i(o())},50))})}(window,document,jQuery),function(t,e){"use strict";var n=(new Date).getTime();e(t).on({"onInit.fb":function(t,e,o){e.$refs.stage.on("mousewheel DOMMouseScroll wheel MozMousePixelScroll",function(t){var o=e.current,i=(new Date).getTime();e.group.length<2||!1===o.opts.wheel||"auto"===o.opts.wheel&&"image"!==o.type||(t.preventDefault(),t.stopPropagation(),o.$slide.hasClass("fancybox-animated")||(t=t.originalEvent||t,i-n<250||(n=i,e[(-t.deltaY||-t.deltaX||t.wheelDelta||-t.detail)<0?"next":"previous"]())))})}})}(document,jQuery);
;/*
 * jQuery doTimeout: Like setTimeout, but better! - v1.0 - 3/3/2010
 * http://benalman.com/projects/jquery-dotimeout-plugin/
 *
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
(function($){var a={},c="doTimeout",d=Array.prototype.slice;$[c]=function(){return b.apply(window,[0].concat(d.call(arguments)))};$.fn[c]=function(){var f=d.call(arguments),e=b.apply(this,[c+f[0]].concat(f));return typeof f[0]==="number"||typeof f[1]==="number"?this:e};function b(l){var m=this,h,k={},g=l?$.fn:$,n=arguments,i=4,f=n[1],j=n[2],p=n[3];if(typeof f!=="string"){i--;f=l=0;j=n[1];p=n[2]}if(l){h=m.eq(0);h.data(l,k=h.data(l)||{})}else{if(f){k=a[f]||(a[f]={})}}k.id&&clearTimeout(k.id);delete k.id;function e(){if(l){h.removeData(l)}else{if(f){delete a[f]}}}function o(){k.id=setTimeout(function(){k.fn()},j)}if(p){k.fn=function(q){if(typeof p==="string"){p=g[p]}p.apply(m,d.call(n,i))===true&&!q?o():e()};o()}else{if(k.fn){j===undefined?e():k.fn(j===false);return true}else{e()}}}})(jQuery);
;/* Modernizr 2.6.2 (Custom Build) | MIT & BSD
 * Build: http://modernizr.com/download/#-opacity-csstransforms-csstransforms3d-csstransitions-input-inputtypes-touch-shiv-cssclasses-addtest-prefixed-teststyles-testprop-testallprops-hasevent-prefixes-domprefixes-load
 */
;window.Modernizr=function(a,b,c){function B(a){j.cssText=a}function C(a,b){return B(n.join(a+";")+(b||""))}function D(a,b){return typeof a===b}function E(a,b){return!!~(""+a).indexOf(b)}function F(a,b){for(var d in a){var e=a[d];if(!E(e,"-")&&j[e]!==c)return b=="pfx"?e:!0}return!1}function G(a,b,d){for(var e in a){var f=b[a[e]];if(f!==c)return d===!1?a[e]:D(f,"function")?f.bind(d||b):f}return!1}function H(a,b,c){var d=a.charAt(0).toUpperCase()+a.slice(1),e=(a+" "+p.join(d+" ")+d).split(" ");return D(b,"string")||D(b,"undefined")?F(e,b):(e=(a+" "+q.join(d+" ")+d).split(" "),G(e,b,c))}function I(){e.input=function(c){for(var d=0,e=c.length;d<e;d++)t[c[d]]=c[d]in k;return t.list&&(t.list=!!b.createElement("datalist")&&!!a.HTMLDataListElement),t}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" ")),e.inputtypes=function(a){for(var d=0,e,f,h,i=a.length;d<i;d++)k.setAttribute("type",f=a[d]),e=k.type!=="text",e&&(k.value=l,k.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(f)&&k.style.WebkitAppearance!==c?(g.appendChild(k),h=b.defaultView,e=h.getComputedStyle&&h.getComputedStyle(k,null).WebkitAppearance!=="textfield"&&k.offsetHeight!==0,g.removeChild(k)):/^(search|tel)$/.test(f)||(/^(url|email)$/.test(f)?e=k.checkValidity&&k.checkValidity()===!1:e=k.value!=l)),s[a[d]]=!!e;return s}("search tel url email datetime date month week time datetime-local number range color".split(" "))}var d="2.6.2",e={},f=!0,g=b.documentElement,h="modernizr",i=b.createElement(h),j=i.style,k=b.createElement("input"),l=":)",m={}.toString,n=" -webkit- -moz- -o- -ms- ".split(" "),o="Webkit Moz O ms",p=o.split(" "),q=o.toLowerCase().split(" "),r={},s={},t={},u=[],v=u.slice,w,x=function(a,c,d,e){var f,i,j,k,l=b.createElement("div"),m=b.body,n=m||b.createElement("body");if(parseInt(d,10))while(d--)j=b.createElement("div"),j.id=e?e[d]:h+(d+1),l.appendChild(j);return f=["&#173;",'<style id="s',h,'">',a,"</style>"].join(""),l.id=h,(m?l:n).innerHTML+=f,n.appendChild(l),m||(n.style.background="",n.style.overflow="hidden",k=g.style.overflow,g.style.overflow="hidden",g.appendChild(n)),i=c(l,a),m?l.parentNode.removeChild(l):(n.parentNode.removeChild(n),g.style.overflow=k),!!i},y=function(){function d(d,e){e=e||b.createElement(a[d]||"div"),d="on"+d;var f=d in e;return f||(e.setAttribute||(e=b.createElement("div")),e.setAttribute&&e.removeAttribute&&(e.setAttribute(d,""),f=D(e[d],"function"),D(e[d],"undefined")||(e[d]=c),e.removeAttribute(d))),e=null,f}var a={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return d}(),z={}.hasOwnProperty,A;!D(z,"undefined")&&!D(z.call,"undefined")?A=function(a,b){return z.call(a,b)}:A=function(a,b){return b in a&&D(a.constructor.prototype[b],"undefined")},Function.prototype.bind||(Function.prototype.bind=function(b){var c=this;if(typeof c!="function")throw new TypeError;var d=v.call(arguments,1),e=function(){if(this instanceof e){var a=function(){};a.prototype=c.prototype;var f=new a,g=c.apply(f,d.concat(v.call(arguments)));return Object(g)===g?g:f}return c.apply(b,d.concat(v.call(arguments)))};return e}),r.touch=function(){var c;return"ontouchstart"in a||a.DocumentTouch&&b instanceof DocumentTouch?c=!0:x(["@media (",n.join("touch-enabled),("),h,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(a){c=a.offsetTop===9}),c},r.opacity=function(){return C("opacity:.55"),/^0.55$/.test(j.opacity)},r.csstransforms=function(){return!!H("transform")},r.csstransforms3d=function(){var a=!!H("perspective");return a&&"webkitPerspective"in g.style&&x("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(b,c){a=b.offsetLeft===9&&b.offsetHeight===3}),a},r.csstransitions=function(){return H("transition")};for(var J in r)A(r,J)&&(w=J.toLowerCase(),e[w]=r[J](),u.push((e[w]?"":"no-")+w));return e.input||I(),e.addTest=function(a,b){if(typeof a=="object")for(var d in a)A(a,d)&&e.addTest(d,a[d]);else{a=a.toLowerCase();if(e[a]!==c)return e;b=typeof b=="function"?b():b,typeof f!="undefined"&&f&&(g.className+=" "+(b?"":"no-")+a),e[a]=b}return e},B(""),i=k=null,function(a,b){function k(a,b){var c=a.createElement("p"),d=a.getElementsByTagName("head")[0]||a.documentElement;return c.innerHTML="x<style>"+b+"</style>",d.insertBefore(c.lastChild,d.firstChild)}function l(){var a=r.elements;return typeof a=="string"?a.split(" "):a}function m(a){var b=i[a[g]];return b||(b={},h++,a[g]=h,i[h]=b),b}function n(a,c,f){c||(c=b);if(j)return c.createElement(a);f||(f=m(c));var g;return f.cache[a]?g=f.cache[a].cloneNode():e.test(a)?g=(f.cache[a]=f.createElem(a)).cloneNode():g=f.createElem(a),g.canHaveChildren&&!d.test(a)?f.frag.appendChild(g):g}function o(a,c){a||(a=b);if(j)return a.createDocumentFragment();c=c||m(a);var d=c.frag.cloneNode(),e=0,f=l(),g=f.length;for(;e<g;e++)d.createElement(f[e]);return d}function p(a,b){b.cache||(b.cache={},b.createElem=a.createElement,b.createFrag=a.createDocumentFragment,b.frag=b.createFrag()),a.createElement=function(c){return r.shivMethods?n(c,a,b):b.createElem(c)},a.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+l().join().replace(/\w+/g,function(a){return b.createElem(a),b.frag.createElement(a),'c("'+a+'")'})+");return n}")(r,b.frag)}function q(a){a||(a=b);var c=m(a);return r.shivCSS&&!f&&!c.hasCSS&&(c.hasCSS=!!k(a,"article,aside,figcaption,figure,footer,header,hgroup,nav,section{display:block}mark{background:#FF0;color:#000}")),j||p(a,c),a}var c=a.html5||{},d=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,e=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,f,g="_html5shiv",h=0,i={},j;(function(){try{var a=b.createElement("a");a.innerHTML="<xyz></xyz>",f="hidden"in a,j=a.childNodes.length==1||function(){b.createElement("a");var a=b.createDocumentFragment();return typeof a.cloneNode=="undefined"||typeof a.createDocumentFragment=="undefined"||typeof a.createElement=="undefined"}()}catch(c){f=!0,j=!0}})();var r={elements:c.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",shivCSS:c.shivCSS!==!1,supportsUnknownElements:j,shivMethods:c.shivMethods!==!1,type:"default",shivDocument:q,createElement:n,createDocumentFragment:o};a.html5=r,q(b)}(this,b),e._version=d,e._prefixes=n,e._domPrefixes=q,e._cssomPrefixes=p,e.hasEvent=y,e.testProp=function(a){return F([a])},e.testAllProps=H,e.testStyles=x,e.prefixed=function(a,b,c){return b?H(a,b,c):H(a,"pfx")},g.className=g.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(f?" js "+u.join(" "):""),e}(this,this.document),function(a,b,c){function d(a){return"[object Function]"==o.call(a)}function e(a){return"string"==typeof a}function f(){}function g(a){return!a||"loaded"==a||"complete"==a||"uninitialized"==a}function h(){var a=p.shift();q=1,a?a.t?m(function(){("c"==a.t?B.injectCss:B.injectJs)(a.s,0,a.a,a.x,a.e,1)},0):(a(),h()):q=0}function i(a,c,d,e,f,i,j){function k(b){if(!o&&g(l.readyState)&&(u.r=o=1,!q&&h(),l.onload=l.onreadystatechange=null,b)){"img"!=a&&m(function(){t.removeChild(l)},50);for(var d in y[c])y[c].hasOwnProperty(d)&&y[c][d].onload()}}var j=j||B.errorTimeout,l=b.createElement(a),o=0,r=0,u={t:d,s:c,e:f,a:i,x:j};1===y[c]&&(r=1,y[c]=[]),"object"==a?l.data=c:(l.src=c,l.type=a),l.width=l.height="0",l.onerror=l.onload=l.onreadystatechange=function(){k.call(this,r)},p.splice(e,0,u),"img"!=a&&(r||2===y[c]?(t.insertBefore(l,s?null:n),m(k,j)):y[c].push(l))}function j(a,b,c,d,f){return q=0,b=b||"j",e(a)?i("c"==b?v:u,a,b,this.i++,c,d,f):(p.splice(this.i++,0,a),1==p.length&&h()),this}function k(){var a=B;return a.loader={load:j,i:0},a}var l=b.documentElement,m=a.setTimeout,n=b.getElementsByTagName("script")[0],o={}.toString,p=[],q=0,r="MozAppearance"in l.style,s=r&&!!b.createRange().compareNode,t=s?l:n.parentNode,l=a.opera&&"[object Opera]"==o.call(a.opera),l=!!b.attachEvent&&!l,u=r?"object":l?"script":"img",v=l?"script":u,w=Array.isArray||function(a){return"[object Array]"==o.call(a)},x=[],y={},z={timeout:function(a,b){return b.length&&(a.timeout=b[0]),a}},A,B;B=function(a){function b(a){var a=a.split("!"),b=x.length,c=a.pop(),d=a.length,c={url:c,origUrl:c,prefixes:a},e,f,g;for(f=0;f<d;f++)g=a[f].split("="),(e=z[g.shift()])&&(c=e(c,g));for(f=0;f<b;f++)c=x[f](c);return c}function g(a,e,f,g,h){var i=b(a),j=i.autoCallback;i.url.split(".").pop().split("?").shift(),i.bypass||(e&&(e=d(e)?e:e[a]||e[g]||e[a.split("/").pop().split("?")[0]]),i.instead?i.instead(a,e,f,g,h):(y[i.url]?i.noexec=!0:y[i.url]=1,f.load(i.url,i.forceCSS||!i.forceJS&&"css"==i.url.split(".").pop().split("?").shift()?"c":c,i.noexec,i.attrs,i.timeout),(d(e)||d(j))&&f.load(function(){k(),e&&e(i.origUrl,h,g),j&&j(i.origUrl,h,g),y[i.url]=2})))}function h(a,b){function c(a,c){if(a){if(e(a))c||(j=function(){var a=[].slice.call(arguments);k.apply(this,a),l()}),g(a,j,b,0,h);else if(Object(a)===a)for(n in m=function(){var b=0,c;for(c in a)a.hasOwnProperty(c)&&b++;return b}(),a)a.hasOwnProperty(n)&&(!c&&!--m&&(d(j)?j=function(){var a=[].slice.call(arguments);k.apply(this,a),l()}:j[n]=function(a){return function(){var b=[].slice.call(arguments);a&&a.apply(this,b),l()}}(k[n])),g(a[n],j,b,n,h))}else!c&&l()}var h=!!a.test,i=a.load||a.both,j=a.callback||f,k=j,l=a.complete||f,m,n;c(h?a.yep:a.nope,!!i),i&&c(i)}var i,j,l=this.yepnope.loader;if(e(a))g(a,0,l,0);else if(w(a))for(i=0;i<a.length;i++)j=a[i],e(j)?g(j,0,l,0):w(j)?B(j):Object(j)===j&&h(j,l);else Object(a)===a&&h(a,l)},B.addPrefix=function(a,b){z[a]=b},B.addFilter=function(a){x.push(a)},B.errorTimeout=1e4,null==b.readyState&&b.addEventListener&&(b.readyState="loading",b.addEventListener("DOMContentLoaded",A=function(){b.removeEventListener("DOMContentLoaded",A,0),b.readyState="complete"},0)),a.yepnope=k(),a.yepnope.executeStack=h,a.yepnope.injectJs=function(a,c,d,e,i,j){var k=b.createElement("script"),l,o,e=e||B.errorTimeout;k.src=a;for(o in d)k.setAttribute(o,d[o]);c=j?h:c||f,k.onreadystatechange=k.onload=function(){!l&&g(k.readyState)&&(l=1,c(),k.onload=k.onreadystatechange=null)},m(function(){l||(l=1,c(1))},e),i?k.onload():n.parentNode.insertBefore(k,n)},a.yepnope.injectCss=function(a,c,d,e,g,i){var e=b.createElement("link"),j,c=i?h:c||f;e.href=a,e.rel="stylesheet",e.type="text/css";for(j in d)e.setAttribute(j,d[j]);g||(n.parentNode.insertBefore(e,n),m(c,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))};
;// Chosen, a Select Box Enhancer for jQuery and Protoype
// by Patrick Filler for Harvest, http://getharvest.com
//
// Version 0.9.8
// Full source at https://github.com/harvesthq/chosen
// Copyright (c) 2011 Harvest http://getharvest.com

// MIT License, https://github.com/harvesthq/chosen/blob/master/LICENSE.md
// This file is generated by `cake build`, do not edit it by hand.
(function(){var SelectParser;SelectParser=function(){function SelectParser(){this.options_index=0,this.parsed=[]}return SelectParser.prototype.add_node=function(child){return child.nodeName.toUpperCase()==="OPTGROUP"?this.add_group(child):this.add_option(child)},SelectParser.prototype.add_group=function(group){var group_position,option,_i,_len,_ref,_results;group_position=this.parsed.length,this.parsed.push({array_index:group_position,group:!0,label:group.label,children:0,disabled:group.disabled}),_ref=group.childNodes,_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++)option=_ref[_i],_results.push(this.add_option(option,group_position,group.disabled));return _results},SelectParser.prototype.add_option=function(option,group_position,group_disabled){if(option.nodeName.toUpperCase()==="OPTION")return option.text!==""?(group_position!=null&&(this.parsed[group_position].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:option.value,text:option.text,html:option.innerHTML,selected:option.selected,disabled:group_disabled===!0?group_disabled:option.disabled,group_array_index:group_position,classes:option.className,style:option.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1},SelectParser}(),SelectParser.select_to_array=function(select){var child,parser,_i,_len,_ref;parser=new SelectParser,_ref=select.childNodes;for(_i=0,_len=_ref.length;_i<_len;_i++)child=_ref[_i],parser.add_node(child);return parser.parsed},this.SelectParser=SelectParser}).call(this),function(){var AbstractChosen,root;root=this,AbstractChosen=function(){function AbstractChosen(form_field,options){this.form_field=form_field,this.options=options!=null?options:{},this.set_default_values(),this.is_multiple=this.form_field.multiple,this.set_default_text(),this.setup(),this.set_up_html(),this.register_observers(),this.finish_setup()}return AbstractChosen.prototype.set_default_values=function(){var _this=this;return this.click_test_action=function(evt){return _this.test_active_click(evt)},this.activate_action=function(evt){return _this.activate_field(evt)},this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.result_single_selected=null,this.allow_single_deselect=this.options.allow_single_deselect!=null&&this.form_field.options[0]!=null&&this.form_field.options[0].text===""?this.options.allow_single_deselect:!1,this.disable_search_threshold=this.options.disable_search_threshold||0,this.disable_search=this.options.disable_search||!1,this.search_contains=this.options.search_contains||!1,this.choices=0,this.single_backstroke_delete=this.options.single_backstroke_delete||!1,this.max_selected_options=this.options.max_selected_options||Infinity},AbstractChosen.prototype.set_default_text=function(){return this.form_field.getAttribute("data-placeholder")?this.default_text=this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.default_text=this.options.placeholder_text_multiple||this.options.placeholder_text||"Select Some Options":this.default_text=this.options.placeholder_text_single||this.options.placeholder_text||"Select an Option",this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||"No results match"},AbstractChosen.prototype.mouse_enter=function(){return this.mouse_on_container=!0},AbstractChosen.prototype.mouse_leave=function(){return this.mouse_on_container=!1},AbstractChosen.prototype.input_focus=function(evt){var _this=this;if(this.is_multiple){if(!this.active_field)return setTimeout(function(){return _this.container_mousedown()},50)}else if(!this.active_field)return this.activate_field()},AbstractChosen.prototype.input_blur=function(evt){var _this=this;if(!this.mouse_on_container)return this.active_field=!1,setTimeout(function(){return _this.blur_test()},100)},AbstractChosen.prototype.result_add_option=function(option){var classes,style;return option.disabled?"":(option.dom_id=this.container_id+"_o_"+option.array_index,classes=option.selected&&this.is_multiple?[]:["active-result"],option.selected&&classes.push("result-selected"),option.group_array_index!=null&&classes.push("group-option"),option.classes!==""&&classes.push(option.classes),style=option.style.cssText!==""?' style="'+option.style+'"':"",'<li id="'+option.dom_id+'" class="'+classes.join(" ")+'"'+style+">"+option.html+"</li>")},AbstractChosen.prototype.results_update_field=function(){return this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.result_single_selected=null,this.results_build()},AbstractChosen.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},AbstractChosen.prototype.results_search=function(evt){return this.results_showing?this.winnow_results():this.results_show()},AbstractChosen.prototype.keyup_checker=function(evt){var stroke,_ref;stroke=(_ref=evt.which)!=null?_ref:evt.keyCode,this.search_field_scale();switch(stroke){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices>0)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:evt.preventDefault();if(this.results_showing)return this.result_select(evt);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}},AbstractChosen.prototype.generate_field_id=function(){var new_id;return new_id=this.generate_random_id(),this.form_field.id=new_id,new_id},AbstractChosen.prototype.generate_random_char=function(){var chars,newchar,rand;return chars="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",rand=Math.floor(Math.random()*chars.length),newchar=chars.substring(rand,rand+1)},AbstractChosen}(),root.AbstractChosen=AbstractChosen}.call(this),function(){var $,Chosen,get_side_border_padding,root,__hasProp=Object.prototype.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};root=this,$=jQuery,$.fn.extend({chosen:function(options){return $.browser.msie&&($.browser.version==="6.0"||$.browser.version==="7.0"&&document.documentMode===7)?this:this.each(function(input_field){var $this;$this=$(this);if(!$this.hasClass("chzn-done"))return $this.data("chosen",new Chosen(this,options))})}}),Chosen=function(_super){function Chosen(){Chosen.__super__.constructor.apply(this,arguments)}return __extends(Chosen,_super),Chosen.prototype.setup=function(){return this.form_field_jq=$(this.form_field),this.current_value=this.form_field_jq.val(),this.is_rtl=this.form_field_jq.hasClass("chzn-rtl")},Chosen.prototype.finish_setup=function(){return this.form_field_jq.addClass("chzn-done")},Chosen.prototype.set_up_html=function(){var container_div,dd_top,dd_width,sf_width;return this.container_id=this.form_field.id.length?this.form_field.id.replace(/[^\w]/g,"_"):this.generate_field_id(),this.container_id+="_chzn",this.f_width=this.form_field_jq.outerWidth(),container_div=$("<div />",{id:this.container_id,"class":"chzn-container"+(this.is_rtl?" chzn-rtl":""),style:"width: "+this.f_width+"px;"}),this.is_multiple?container_div.html('<ul class="chzn-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chzn-drop" style="left:-9000px;"><ul class="chzn-results"></ul></div>'):container_div.html('<div class="marker"></div><a href="javascript:void(0)" class="chzn-single chzn-default" tabindex="-1"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chzn-drop" style="left:-9000px;"><div class="chzn-search"><input type="text" autocomplete="off" /></div><ul class="chzn-results"></ul></div>'),this.form_field_jq.hide().after(container_div),this.container=$("#"+this.container_id),this.container.addClass("chzn-container-"+(this.is_multiple?"multi":"single")),this.dropdown=this.container.find("div.chzn-drop").first(),dd_top=this.container.height(),dd_width=this.f_width-get_side_border_padding(this.dropdown),this.dropdown.css({width:dd_width+"px",top:dd_top+"px"}),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chzn-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chzn-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chzn-search").first(),this.selected_item=this.container.find(".chzn-single").first(),sf_width=dd_width-get_side_border_padding(this.search_container)-get_side_border_padding(this.search_field),this.search_field.css({width:sf_width+"px"})),this.results_build(),this.set_tab_index(),this.form_field_jq.trigger("liszt:ready",{chosen:this})},Chosen.prototype.register_observers=function(){var _this=this;return this.container.mousedown(function(evt){return _this.container_mousedown(evt)}),this.container.mouseup(function(evt){return _this.container_mouseup(evt)}),this.container.mouseenter(function(evt){return _this.mouse_enter(evt)}),this.container.mouseleave(function(evt){return _this.mouse_leave(evt)}),this.search_results.mouseup(function(evt){return _this.search_results_mouseup(evt)}),this.search_results.mouseover(function(evt){return _this.search_results_mouseover(evt)}),this.search_results.mouseout(function(evt){return _this.search_results_mouseout(evt)}),this.form_field_jq.bind("liszt:updated",function(evt){return _this.results_update_field(evt)}),this.form_field_jq.bind("liszt:activate",function(evt){return _this.activate_field(evt)}),this.form_field_jq.bind("liszt:open",function(evt){return _this.container_mousedown(evt)}),this.search_field.blur(function(evt){return _this.input_blur(evt)}),this.search_field.keyup(function(evt){return _this.keyup_checker(evt)}),this.search_field.keydown(function(evt){return _this.keydown_checker(evt)}),this.search_field.focus(function(evt){return _this.input_focus(evt)}),this.is_multiple?this.search_choices.click(function(evt){return _this.choices_click(evt)}):this.container.click(function(evt){return evt.preventDefault()})},Chosen.prototype.search_field_disabled=function(){this.is_disabled=this.form_field_jq[0].disabled;if(this.is_disabled)return this.container.addClass("chzn-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus",this.activate_action),this.close_field();this.container.removeClass("chzn-disabled"),this.search_field[0].disabled=!1;if(!this.is_multiple)return this.selected_item.bind("focus",this.activate_action)},Chosen.prototype.container_mousedown=function(evt){var target_closelink;if(!this.is_disabled)return target_closelink=evt!=null?$(evt.target).hasClass("search-choice-close"):!1,evt&&evt.type==="mousedown"&&!this.results_showing&&evt.stopPropagation(),!this.pending_destroy_click&&!target_closelink?(this.active_field?!this.is_multiple&&evt&&($(evt.target)[0]===this.selected_item[0]||$(evt.target).parents("a.chzn-single").length)&&(evt.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),$(document).click(this.click_test_action),this.results_show()),this.activate_field()):this.pending_destroy_click=!1},Chosen.prototype.container_mouseup=function(evt){if(evt.target.nodeName==="ABBR"&&!this.is_disabled)return this.results_reset(evt)},Chosen.prototype.blur_test=function(evt){if(!this.active_field&&this.container.hasClass("chzn-container-active"))return this.close_field()},Chosen.prototype.close_field=function(){return $(document).unbind("click",this.click_test_action),this.active_field=!1,this.results_hide(),this.container.removeClass("chzn-container-active"),this.winnow_results_clear(),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},Chosen.prototype.activate_field=function(){return this.container.addClass("chzn-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},Chosen.prototype.test_active_click=function(evt){return $(evt.target).parents("#"+this.container_id).length?this.active_field=!0:this.close_field()},Chosen.prototype.results_build=function(){var content,data,_i,_len,_ref;this.parsing=!0,this.results_data=root.SelectParser.select_to_array(this.form_field),this.is_multiple&&this.choices>0?(this.search_choices.find("li.search-choice").remove(),this.choices=0):this.is_multiple||(this.selected_item.addClass("chzn-default").find("span").text(this.default_text),this.disable_search||this.form_field.options.length<=this.disable_search_threshold?this.container.addClass("chzn-container-single-nosearch"):this.container.removeClass("chzn-container-single-nosearch")),content="",_ref=this.results_data;for(_i=0,_len=_ref.length;_i<_len;_i++)data=_ref[_i],data.group?content+=this.result_add_group(data):data.empty||(content+=this.result_add_option(data),data.selected&&this.is_multiple?this.choice_build(data):data.selected&&!this.is_multiple&&(this.selected_item.removeClass("chzn-default").find("span").text(data.text),this.allow_single_deselect&&this.single_deselect_control_build()));return this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.search_results.html(content),this.parsing=!1},Chosen.prototype.result_add_group=function(group){return group.disabled?"":(group.dom_id=this.container_id+"_g_"+group.array_index,'<li id="'+group.dom_id+'" class="group-result">'+$("<div />").text(group.label).html()+"</li>")},Chosen.prototype.result_do_highlight=function(el){var high_bottom,high_top,maxHeight,visible_bottom,visible_top;if(el.length){this.result_clear_highlight(),this.result_highlight=el,this.result_highlight.addClass("highlighted"),maxHeight=parseInt(this.search_results.css("maxHeight"),10),visible_top=this.search_results.scrollTop(),visible_bottom=maxHeight+visible_top,high_top=this.result_highlight.position().top+this.search_results.scrollTop(),high_bottom=high_top+this.result_highlight.outerHeight();if(high_bottom>=visible_bottom)return this.search_results.scrollTop(high_bottom-maxHeight>0?high_bottom-maxHeight:0);if(high_top<visible_top)return this.search_results.scrollTop(high_top)}},Chosen.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},Chosen.prototype.results_show=function(){var dd_top;if(!this.is_multiple)this.selected_item.addClass("chzn-single-with-drop"),this.result_single_selected&&this.result_do_highlight(this.result_single_selected);else if(this.max_selected_options<=this.choices)return this.form_field_jq.trigger("liszt:maxselected",{chosen:this}),!1;return dd_top=this.is_multiple?this.container.height():this.container.height()-1,this.form_field_jq.trigger("liszt:showing_dropdown",{chosen:this}),this.dropdown.css({top:dd_top+"px",left:0}),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results()},Chosen.prototype.results_hide=function(){return this.is_multiple||this.selected_item.removeClass("chzn-single-with-drop"),this.result_clear_highlight(),this.form_field_jq.trigger("liszt:hiding_dropdown",{chosen:this}),this.dropdown.css({left:"-9000px"}),this.results_showing=!1},Chosen.prototype.set_tab_index=function(el){var ti;if(this.form_field_jq.attr("tabindex"))return ti=this.form_field_jq.attr("tabindex"),this.form_field_jq.attr("tabindex",-1),this.search_field.attr("tabindex",ti)},Chosen.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},Chosen.prototype.search_results_mouseup=function(evt){var target;target=$(evt.target).hasClass("active-result")?$(evt.target):$(evt.target).parents(".active-result").first();if(target.length)return this.result_highlight=target,this.result_select(evt),this.search_field.focus()},Chosen.prototype.search_results_mouseover=function(evt){var target;target=$(evt.target).hasClass("active-result")?$(evt.target):$(evt.target).parents(".active-result").first();if(target)return this.result_do_highlight(target)},Chosen.prototype.search_results_mouseout=function(evt){if($(evt.target).hasClass("active-result"))return this.result_clear_highlight()},Chosen.prototype.choices_click=function(evt){evt.preventDefault();if(this.active_field&&!$(evt.target).hasClass("search-choice")&&!this.results_showing)return this.results_show()},Chosen.prototype.choice_build=function(item){var choice_id,html,link,_this=this;return this.is_multiple&&this.max_selected_options<=this.choices?(this.form_field_jq.trigger("liszt:maxselected",{chosen:this}),!1):(choice_id=this.container_id+"_c_"+item.array_index,this.choices+=1,item.disabled?html='<li class="search-choice search-choice-disabled" id="'+choice_id+'"><span>'+item.html+"</span></li>":html='<li class="search-choice" id="'+choice_id+'"><span>'+item.html+'</span><a href="javascript:void(0)" class="search-choice-close" rel="'+item.array_index+'"></a></li>',this.search_container.before(html),link=$("#"+choice_id).find("a").first(),link.click(function(evt){return _this.choice_destroy_link_click(evt)}))},Chosen.prototype.choice_destroy_link_click=function(evt){return evt.preventDefault(),this.is_disabled?evt.stopPropagation:(this.pending_destroy_click=!0,this.choice_destroy($(evt.target)))},Chosen.prototype.choice_destroy=function(link){if(this.result_deselect(link.attr("rel")))return this.choices-=1,this.show_search_field_default(),this.is_multiple&&this.choices>0&&this.search_field.val().length<1&&this.results_hide(),link.parents("li").first().remove()},Chosen.prototype.results_reset=function(){this.form_field.options[0].selected=!0,this.selected_item.find("span").text(this.default_text),this.is_multiple||this.selected_item.addClass("chzn-default"),this.show_search_field_default(),this.results_reset_cleanup(),this.form_field_jq.trigger("change");if(this.active_field)return this.results_hide()},Chosen.prototype.results_reset_cleanup=function(){return this.current_value=this.form_field_jq.val(),this.selected_item.find("abbr").remove()},Chosen.prototype.result_select=function(evt){var high,high_id,item,position;if(this.result_highlight)return high=this.result_highlight,high_id=high.attr("id"),this.result_clear_highlight(),this.is_multiple?this.result_deactivate(high):(this.search_results.find(".result-selected").removeClass("result-selected"),this.result_single_selected=high,this.selected_item.removeClass("chzn-default")),high.addClass("result-selected"),position=high_id.substr(high_id.lastIndexOf("_")+1),item=this.results_data[position],item.selected=!0,this.form_field.options[item.options_index].selected=!0,this.is_multiple?this.choice_build(item):(this.selected_item.find("span").first().text(item.text),this.allow_single_deselect&&this.single_deselect_control_build()),(!evt.metaKey||!this.is_multiple)&&this.results_hide(),this.search_field.val(""),(this.is_multiple||this.form_field_jq.val()!==this.current_value)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[item.options_index].value}),this.current_value=this.form_field_jq.val(),this.search_field_scale()},Chosen.prototype.result_activate=function(el){return el.addClass("active-result")},Chosen.prototype.result_deactivate=function(el){return el.removeClass("active-result")},Chosen.prototype.result_deselect=function(pos){var result,result_data;return result_data=this.results_data[pos],this.form_field.options[result_data.options_index].disabled?!1:(result_data.selected=!1,this.form_field.options[result_data.options_index].selected=!1,result=$("#"+this.container_id+"_o_"+pos),result.removeClass("result-selected").addClass("active-result").show(),this.result_clear_highlight(),this.winnow_results(),this.form_field_jq.trigger("change",{deselected:this.form_field.options[result_data.options_index].value}),this.search_field_scale(),!0)},Chosen.prototype.single_deselect_control_build=function(){if(this.allow_single_deselect&&this.selected_item.find("abbr").length<1)return this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>')},Chosen.prototype.winnow_results=function(){var found,option,part,parts,regex,regexAnchor,result,result_id,results,searchText,startpos,text,zregex,_i,_j,_len,_len2,_ref;this.no_results_clear(),results=0,searchText=this.search_field.val()===this.default_text?"":$("<div/>").text($.trim(this.search_field.val())).html(),regexAnchor=this.search_contains?"":"^",regex=new RegExp(regexAnchor+searchText.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i"),zregex=new RegExp(searchText.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i"),_ref=this.results_data;for(_i=0,_len=_ref.length;_i<_len;_i++){option=_ref[_i];if(!option.disabled&&!option.empty)if(option.group)$("#"+option.dom_id).css("display","none");else if(!this.is_multiple||!option.selected){found=!1,result_id=option.dom_id,result=$("#"+result_id);if(regex.test(option.html))found=!0,results+=1;else if(option.html.indexOf(" ")>=0||option.html.indexOf("[")===0){parts=option.html.replace(/\[|\]/g,"").split(" ");if(parts.length)for(_j=0,_len2=parts.length;_j<_len2;_j++)part=parts[_j],regex.test(part)&&(found=!0,results+=1)}found?(searchText.length?(startpos=option.html.search(zregex),text=option.html.substr(0,startpos+searchText.length)+"</em>"+option.html.substr(startpos+searchText.length),text=text.substr(0,startpos)+"<em>"+text.substr(startpos)):text=option.html,result.html(text),this.result_activate(result),option.group_array_index!=null&&$("#"+this.results_data[option.group_array_index].dom_id).css("display","list-item")):(this.result_highlight&&result_id===this.result_highlight.attr("id")&&this.result_clear_highlight(),this.result_deactivate(result))}}return results<1&&searchText.length?this.no_results(searchText):this.winnow_results_set_highlight()},Chosen.prototype.winnow_results_clear=function(){var li,lis,_i,_len,_results;this.search_field.val(""),lis=this.search_results.find("li"),_results=[];for(_i=0,_len=lis.length;_i<_len;_i++)li=lis[_i],li=$(li),li.hasClass("group-result")?_results.push(li.css("display","auto")):!this.is_multiple||!li.hasClass("result-selected")?_results.push(this.result_activate(li)):_results.push(void 0);return _results},Chosen.prototype.winnow_results_set_highlight=function(){var do_high,selected_results;if(!this.result_highlight){selected_results=this.is_multiple?[]:this.search_results.find(".result-selected.active-result"),do_high=selected_results.length?selected_results.first():this.search_results.find(".active-result").first();if(do_high!=null)return this.result_do_highlight(do_high)}},Chosen.prototype.no_results=function(terms){var no_results_html;return no_results_html=$('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>'),no_results_html.find("span").first().html(terms),this.search_results.append(no_results_html)},Chosen.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},Chosen.prototype.keydown_arrow=function(){var first_active,next_sib;this.result_highlight?this.results_showing&&(next_sib=this.result_highlight.nextAll("li.active-result").first(),next_sib&&this.result_do_highlight(next_sib)):(first_active=this.search_results.find("li.active-result").first(),first_active&&this.result_do_highlight($(first_active)));if(!this.results_showing)return this.results_show()},Chosen.prototype.keyup_arrow=function(){var prev_sibs;if(!this.results_showing&&!this.is_multiple)return this.results_show();if(this.result_highlight)return prev_sibs=this.result_highlight.prevAll("li.active-result"),prev_sibs.length?this.result_do_highlight(prev_sibs.first()):(this.choices>0&&this.results_hide(),this.result_clear_highlight())},Chosen.prototype.keydown_backstroke=function(){var next_available_destroy;if(this.pending_backstroke)return this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke();next_available_destroy=this.search_container.siblings("li.search-choice").last();if(next_available_destroy.length&&!next_available_destroy.hasClass("search-choice-disabled"))return this.pending_backstroke=next_available_destroy,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")},Chosen.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},Chosen.prototype.keydown_checker=function(evt){var stroke,_ref;stroke=(_ref=evt.which)!=null?_ref:evt.keyCode,this.search_field_scale(),stroke!==8&&this.pending_backstroke&&this.clear_backstroke();switch(stroke){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(evt),this.mouse_on_container=!1;break;case 13:evt.preventDefault();break;case 38:evt.preventDefault(),this.keyup_arrow();break;case 40:this.keydown_arrow()}},Chosen.prototype.search_field_scale=function(){var dd_top,div,h,style,style_block,styles,w,_i,_len;if(this.is_multiple){h=0,w=0,style_block="position:absolute; left: -1000px; top: -1000px; display:none;",styles=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"];for(_i=0,_len=styles.length;_i<_len;_i++)style=styles[_i],style_block+=style+":"+this.search_field.css(style)+";";return div=$("<div />",{style:style_block}),div.text(this.search_field.val()),$("body").append(div),w=div.width()+25,div.remove(),w>this.f_width-10&&(w=this.f_width-10),this.search_field.css({width:w+"px"}),dd_top=this.container.height(),this.dropdown.css({top:dd_top+"px"})}},Chosen.prototype.generate_random_id=function(){var string;string="sel"+this.generate_random_char()+this.generate_random_char()+this.generate_random_char();while($("#"+string).length>0)string+=this.generate_random_char();return string},Chosen}(AbstractChosen),get_side_border_padding=function(elmt){var side_border_padding;return side_border_padding=elmt.outerWidth()-elmt.width()},root.get_side_border_padding=get_side_border_padding}.call(this);
;/*!
 * jQuery lockfixed plugin
 * http://www.directlyrics.com/code/lockfixed/
 *
 * Copyright 2012 Yvo Schaap
 * Released under the MIT license
 * http://www.directlyrics.com/code/lockfixed/license.txt
 *
 * Date: Sun Jan 27 2013 12:00:00 GMT
 */
(function($,undefined){$.extend({"lockfixed":function(el,config){if(config&&config.offset){config.offset.bottom=parseInt(config.offset.bottom,10);config.offset.top=parseInt(config.offset.top,10);}else{config.offset={bottom:100,top:0};}
var el=$(el);if(el&&el.offset()){var el_top=el.offset().top,el_left=el.offset().left,el_height=el.outerHeight(true),el_width=el.outerWidth(),el_position=el.css("position"),el_position_top=el.css("top"),el_margin_top=parseInt(el.css("marginTop"),10),max_height=$(document).height()-config.offset.bottom,top=0,swtch=false,pos_not_fixed=false;if(config.forcemargin===true||navigator.userAgent.match(/\bMSIE (4|5|6)\./)||navigator.userAgent.match(/\bOS (3|4|5|6)_/)||navigator.userAgent.match(/\bAndroid (1|2|3|4)\./i)){pos_not_fixed=true;}
$(window).bind('scroll resize orientationchange load',el,function(e){var el_height=el.outerHeight(),scroll_top=$(window).scrollTop();if(pos_not_fixed&&document.activeElement&&document.activeElement.nodeName==="INPUT"){return;}
if(scroll_top>=(el_top-(el_margin_top?el_margin_top:0)-config.offset.top)){if(max_height<(scroll_top+el_height+el_margin_top+config.offset.top)){top=(scroll_top+el_height+el_margin_top+config.offset.top)-max_height;}else{top=0;}
if(pos_not_fixed){el.css({'marginTop':parseInt(((el_margin_top?el_margin_top:0)+(scroll_top-el_top-top)+2*config.offset.top),10)+'px'});}else{el.css({'position':'fixed','top':(config.offset.top-top)+'px','width':el_width+"px"});}}else{el.css({'position':el_position,'top':el_position_top,'width':el_width+"px",'marginTop':(el_margin_top?el_margin_top:0)+"px"});}});}}});})(jQuery);
;/**
 * Copyright (c) 2007-2012 Ariel Flesler - aflesler(at)gmail(dot)com | http://flesler.blogspot.com
 * Dual licensed under MIT and GPL.
 * @author Ariel Flesler
 * @version 1.4.3.1
 */
;(function($){var h=$.scrollTo=function(a,b,c){$(window).scrollTo(a,b,c)};h.defaults={axis:'xy',duration:parseFloat($.fn.jquery)>=1.3?0:1,limit:true};h.window=function(a){return $(window)._scrollable()};$.fn._scrollable=function(){return this.map(function(){var a=this,isWin=!a.nodeName||$.inArray(a.nodeName.toLowerCase(),['iframe','#document','html','body'])!=-1;if(!isWin)return a;var b=(a.contentWindow||a).document||a.ownerDocument||a;return/webkit/i.test(navigator.userAgent)||b.compatMode=='BackCompat'?b.body:b.documentElement})};$.fn.scrollTo=function(e,f,g){if(typeof f=='object'){g=f;f=0}if(typeof g=='function')g={onAfter:g};if(e=='max')e=9e9;g=$.extend({},h.defaults,g);f=f||g.duration;g.queue=g.queue&&g.axis.length>1;if(g.queue)f/=2;g.offset=both(g.offset);g.over=both(g.over);return this._scrollable().each(function(){if(e==null)return;var d=this,$elem=$(d),targ=e,toff,attr={},win=$elem.is('html,body');switch(typeof targ){case'number':case'string':if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(targ)){targ=both(targ);break}targ=$(targ,this);if(!targ.length)return;case'object':if(targ.is||targ.style)toff=(targ=$(targ)).offset()}$.each(g.axis.split(''),function(i,a){var b=a=='x'?'Left':'Top',pos=b.toLowerCase(),key='scroll'+b,old=d[key],max=h.max(d,a);if(toff){attr[key]=toff[pos]+(win?0:old-$elem.offset()[pos]);if(g.margin){attr[key]-=parseInt(targ.css('margin'+b))||0;attr[key]-=parseInt(targ.css('border'+b+'Width'))||0}attr[key]+=g.offset[pos]||0;if(g.over[pos])attr[key]+=targ[a=='x'?'width':'height']()*g.over[pos]}else{var c=targ[pos];attr[key]=c.slice&&c.slice(-1)=='%'?parseFloat(c)/100*max:c}if(g.limit&&/^\d+$/.test(attr[key]))attr[key]=attr[key]<=0?0:Math.min(attr[key],max);if(!i&&g.queue){if(old!=attr[key])animate(g.onAfterFirst);delete attr[key]}});animate(g.onAfter);function animate(a){$elem.animate(attr,f,g.easing,a&&function(){a.call(this,e,g)})}}).end()};h.max=function(a,b){var c=b=='x'?'Width':'Height',scroll='scroll'+c;if(!$(a).is('html,body'))return a[scroll]-$(a)[c.toLowerCase()]();var d='client'+c,html=a.ownerDocument.documentElement,body=a.ownerDocument.body;return Math.max(html[scroll],body[scroll])-Math.min(html[d],body[d])};function both(a){return typeof a=='object'?a:{top:a,left:a}}})(jQuery);
;$.fn.autolist=function(options){var options=jQuery.extend({timeout:3000,animate:700,link:false},options);return this.each(function(){var stopped=false;var sel=$(this);var img=$(sel).width();var img_amount=$(sel).find(".img_box img").size();var img_box=img*img_amount;$(sel).find(".img_box > div:first").css("display","block");$(sel).find(".paging > div:first").addClass("active");$(sel).find(".img_box").css("width",img_box);function move(){trigger=active.index();$(sel).find(".paging div").removeClass("active");active.addClass("active");$(sel).find(".img_box > div:eq("+trigger+")").fadeIn(options.animate);$(sel).find(".img_box > div:eq("+trigger+")").siblings().fadeOut(options.animate);if(options.link!==false)
$(sel).find(".link").attr("href",$(sel).find(".img_box > div:eq("+trigger+") img").attr("link")).attr('target',$(sel).find(".img_box > div:eq("+trigger+") img").attr("target"));};function go(){active=$(sel).find(".paging div.active").next();if(active.length===0){active=$(sel).find(".paging div:first");}
move();play();}
function play(){timeSet=setTimeout(go,options.timeout);}
function off(){clearTimeout(timeSet);}
moveSwitch=function(){$(sel).find(".play").removeClass("play").addClass("stop");stopped=false;play();};moveSwitch();$(sel).find(".paging div").click(function(){$(this).siblings().removeClass("active");$(this).addClass("active");active=$(this);off();move();moveSwitch();});$(sel).find(".stop").click(function(){if(stopped==false){stopped=true;$(this).removeClass("stop").addClass("play");off();}
else{stopped=false;moveSwitch();}});});};;
/*!
* Fine Uploader
*
* Copyright 2015, Widen Enterprises, Inc. info@fineuploader.com
*
* Version: 5.4.1
*
* Homepage: http://fineuploader.com
*
* Repository: git://github.com/FineUploader/fine-uploader.git
*
* Licensed only under the Widen Commercial License (http://fineuploader.com/licensing).
*/
var qq=function(element){"use strict";return{hide:function(){element.style.display="none";return this;},attach:function(type,fn){if(element.addEventListener){element.addEventListener(type,fn,false);}else if(element.attachEvent){element.attachEvent("on"+type,fn);}
return function(){qq(element).detach(type,fn);};},detach:function(type,fn){if(element.removeEventListener){element.removeEventListener(type,fn,false);}else if(element.attachEvent){element.detachEvent("on"+type,fn);}
return this;},contains:function(descendant){if(!descendant){return false;}
if(element===descendant){return true;}
if(element.contains){return element.contains(descendant);}else{return!!(descendant.compareDocumentPosition(element)&8);}},insertBefore:function(elementB){elementB.parentNode.insertBefore(element,elementB);return this;},remove:function(){element.parentNode.removeChild(element);return this;},css:function(styles){if(element.style==null){throw new qq.Error("Can't apply style to node as it is not on the HTMLElement prototype chain!");}
if(styles.opacity!=null){if(typeof element.style.opacity!=="string"&&typeof(element.filters)!=="undefined"){styles.filter="alpha(opacity="+Math.round(100*styles.opacity)+")";}}
qq.extend(element.style,styles);return this;},hasClass:function(name,considerParent){var re=new RegExp("(^| )"+name+"( |$)");return re.test(element.className)||!!(considerParent&&re.test(element.parentNode.className));},addClass:function(name){if(!qq(element).hasClass(name)){element.className+=" "+name;}
return this;},removeClass:function(name){var re=new RegExp("(^| )"+name+"( |$)");element.className=element.className.replace(re," ").replace(/^\s+|\s+$/g,"");return this;},getByClass:function(className,first){var candidates,result=[];if(first&&element.querySelector){return element.querySelector("."+className);}
else if(element.querySelectorAll){return element.querySelectorAll("."+className);}
candidates=element.getElementsByTagName("*");qq.each(candidates,function(idx,val){if(qq(val).hasClass(className)){result.push(val);}});return first?result[0]:result;},getFirstByClass:function(className){return qq(element).getByClass(className,true);},children:function(){var children=[],child=element.firstChild;while(child){if(child.nodeType===1){children.push(child);}
child=child.nextSibling;}
return children;},setText:function(text){element.innerText=text;element.textContent=text;return this;},clearText:function(){return qq(element).setText("");},hasAttribute:function(attrName){var attrVal;if(element.hasAttribute){if(!element.hasAttribute(attrName)){return false;}
return(/^false$/i).exec(element.getAttribute(attrName))==null;}
else{attrVal=element[attrName];if(attrVal===undefined){return false;}
return(/^false$/i).exec(attrVal)==null;}}};};(function(){"use strict";qq.canvasToBlob=function(canvas,mime,quality){return qq.dataUriToBlob(canvas.toDataURL(mime,quality));};qq.dataUriToBlob=function(dataUri){var arrayBuffer,byteString,createBlob=function(data,mime){var BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,blobBuilder=BlobBuilder&&new BlobBuilder();if(blobBuilder){blobBuilder.append(data);return blobBuilder.getBlob(mime);}
else{return new Blob([data],{type:mime});}},intArray,mimeString;if(dataUri.split(",")[0].indexOf("base64")>=0){byteString=atob(dataUri.split(",")[1]);}
else{byteString=decodeURI(dataUri.split(",")[1]);}
mimeString=dataUri.split(",")[0].split(":")[1].split(";")[0];arrayBuffer=new ArrayBuffer(byteString.length);intArray=new Uint8Array(arrayBuffer);qq.each(byteString,function(idx,character){intArray[idx]=character.charCodeAt(0);});return createBlob(arrayBuffer,mimeString);};qq.log=function(message,level){if(window.console){if(!level||level==="info"){window.console.log(message);}
else
{if(window.console[level]){window.console[level](message);}
else{window.console.log("<"+level+"> "+message);}}}};qq.isObject=function(variable){return variable&&!variable.nodeType&&Object.prototype.toString.call(variable)==="[object Object]";};qq.isFunction=function(variable){return typeof(variable)==="function";};qq.isArray=function(value){return Object.prototype.toString.call(value)==="[object Array]"||(value&&window.ArrayBuffer&&value.buffer&&value.buffer.constructor===ArrayBuffer);};qq.isItemList=function(maybeItemList){return Object.prototype.toString.call(maybeItemList)==="[object DataTransferItemList]";};qq.isNodeList=function(maybeNodeList){return Object.prototype.toString.call(maybeNodeList)==="[object NodeList]"||(maybeNodeList.item&&maybeNodeList.namedItem);};qq.isString=function(maybeString){return Object.prototype.toString.call(maybeString)==="[object String]";};qq.trimStr=function(string){if(String.prototype.trim){return string.trim();}
return string.replace(/^\s+|\s+$/g,"");};qq.format=function(str){var args=Array.prototype.slice.call(arguments,1),newStr=str,nextIdxToReplace=newStr.indexOf("{}");qq.each(args,function(idx,val){var strBefore=newStr.substring(0,nextIdxToReplace),strAfter=newStr.substring(nextIdxToReplace+2);newStr=strBefore+val+strAfter;nextIdxToReplace=newStr.indexOf("{}",nextIdxToReplace+val.length);if(nextIdxToReplace<0){return false;}});return newStr;};qq.isFile=function(maybeFile){return window.File&&Object.prototype.toString.call(maybeFile)==="[object File]";};qq.isFileList=function(maybeFileList){return window.FileList&&Object.prototype.toString.call(maybeFileList)==="[object FileList]";};qq.isFileOrInput=function(maybeFileOrInput){return qq.isFile(maybeFileOrInput)||qq.isInput(maybeFileOrInput);};qq.isInput=function(maybeInput,notFile){var evaluateType=function(type){var normalizedType=type.toLowerCase();if(notFile){return normalizedType!=="file";}
return normalizedType==="file";};if(window.HTMLInputElement){if(Object.prototype.toString.call(maybeInput)==="[object HTMLInputElement]"){if(maybeInput.type&&evaluateType(maybeInput.type)){return true;}}}
if(maybeInput.tagName){if(maybeInput.tagName.toLowerCase()==="input"){if(maybeInput.type&&evaluateType(maybeInput.type)){return true;}}}
return false;};qq.isBlob=function(maybeBlob){if(window.Blob&&Object.prototype.toString.call(maybeBlob)==="[object Blob]"){return true;}};qq.isXhrUploadSupported=function(){var input=document.createElement("input");input.type="file";return(input.multiple!==undefined&&typeof File!=="undefined"&&typeof FormData!=="undefined"&&typeof(qq.createXhrInstance()).upload!=="undefined");};qq.createXhrInstance=function(){if(window.XMLHttpRequest){return new XMLHttpRequest();}
try{return new ActiveXObject("MSXML2.XMLHTTP.3.0");}
catch(error){qq.log("Neither XHR or ActiveX are supported!","error");return null;}};qq.isFolderDropSupported=function(dataTransfer){return dataTransfer.items&&dataTransfer.items.length>0&&dataTransfer.items[0].webkitGetAsEntry;};qq.isFileChunkingSupported=function(){return!qq.androidStock()&&qq.isXhrUploadSupported()&&(File.prototype.slice!==undefined||File.prototype.webkitSlice!==undefined||File.prototype.mozSlice!==undefined);};qq.sliceBlob=function(fileOrBlob,start,end){var slicer=fileOrBlob.slice||fileOrBlob.mozSlice||fileOrBlob.webkitSlice;return slicer.call(fileOrBlob,start,end);};qq.arrayBufferToHex=function(buffer){var bytesAsHex="",bytes=new Uint8Array(buffer);qq.each(bytes,function(idx,byt){var byteAsHexStr=byt.toString(16);if(byteAsHexStr.length<2){byteAsHexStr="0"+byteAsHexStr;}
bytesAsHex+=byteAsHexStr;});return bytesAsHex;};qq.readBlobToHex=function(blob,startOffset,length){var initialBlob=qq.sliceBlob(blob,startOffset,startOffset+length),fileReader=new FileReader(),promise=new qq.Promise();fileReader.onload=function(){promise.success(qq.arrayBufferToHex(fileReader.result));};fileReader.onerror=promise.failure;fileReader.readAsArrayBuffer(initialBlob);return promise;};qq.extend=function(first,second,extendNested){qq.each(second,function(prop,val){if(extendNested&&qq.isObject(val)){if(first[prop]===undefined){first[prop]={};}
qq.extend(first[prop],val,true);}
else{first[prop]=val;}});return first;};qq.override=function(target,sourceFn){var super_={},source=sourceFn(super_);qq.each(source,function(srcPropName,srcPropVal){if(target[srcPropName]!==undefined){super_[srcPropName]=target[srcPropName];}
target[srcPropName]=srcPropVal;});return target;};qq.indexOf=function(arr,elt,from){if(arr.indexOf){return arr.indexOf(elt,from);}
from=from||0;var len=arr.length;if(from<0){from+=len;}
for(;from<len;from+=1){if(arr.hasOwnProperty(from)&&arr[from]===elt){return from;}}
return-1;};qq.getUniqueId=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=Math.random()*16|0,v=c=="x"?r:(r&0x3|0x8);return v.toString(16);});};qq.ie=function(){return navigator.userAgent.indexOf("MSIE")!==-1||navigator.userAgent.indexOf("Trident")!==-1;};qq.ie7=function(){return navigator.userAgent.indexOf("MSIE 7")!==-1;};qq.ie8=function(){return navigator.userAgent.indexOf("MSIE 8")!==-1;};qq.ie10=function(){return navigator.userAgent.indexOf("MSIE 10")!==-1;};qq.ie11=function(){return qq.ie()&&navigator.userAgent.indexOf("rv:11")!==-1;};qq.safari=function(){return navigator.vendor!==undefined&&navigator.vendor.indexOf("Apple")!==-1;};qq.chrome=function(){return navigator.vendor!==undefined&&navigator.vendor.indexOf("Google")!==-1;};qq.opera=function(){return navigator.vendor!==undefined&&navigator.vendor.indexOf("Opera")!==-1;};qq.firefox=function(){return(!qq.ie11()&&navigator.userAgent.indexOf("Mozilla")!==-1&&navigator.vendor!==undefined&&navigator.vendor==="");};qq.windows=function(){return navigator.platform==="Win32";};qq.android=function(){return navigator.userAgent.toLowerCase().indexOf("android")!==-1;};qq.androidStock=function(){return qq.android()&&navigator.userAgent.toLowerCase().indexOf("chrome")<0;};qq.ios6=function(){return qq.ios()&&navigator.userAgent.indexOf(" OS 6_")!==-1;};qq.ios7=function(){return qq.ios()&&navigator.userAgent.indexOf(" OS 7_")!==-1;};qq.ios8=function(){return qq.ios()&&navigator.userAgent.indexOf(" OS 8_")!==-1;};qq.ios800=function(){return qq.ios()&&navigator.userAgent.indexOf(" OS 8_0 ")!==-1;};qq.ios=function(){return navigator.userAgent.indexOf("iPad")!==-1||navigator.userAgent.indexOf("iPod")!==-1||navigator.userAgent.indexOf("iPhone")!==-1;};qq.iosChrome=function(){return qq.ios()&&navigator.userAgent.indexOf("CriOS")!==-1;};qq.iosSafari=function(){return qq.ios()&&!qq.iosChrome()&&navigator.userAgent.indexOf("Safari")!==-1;};qq.iosSafariWebView=function(){return qq.ios()&&!qq.iosChrome()&&!qq.iosSafari();};qq.preventDefault=function(e){if(e.preventDefault){e.preventDefault();}else{e.returnValue=false;}};qq.toElement=(function(){var div=document.createElement("div");return function(html){div.innerHTML=html;var element=div.firstChild;div.removeChild(element);return element;};}());qq.each=function(iterableItem,callback){var keyOrIndex,retVal;if(iterableItem){if(window.Storage&&iterableItem.constructor===window.Storage){for(keyOrIndex=0;keyOrIndex<iterableItem.length;keyOrIndex++){retVal=callback(iterableItem.key(keyOrIndex),iterableItem.getItem(iterableItem.key(keyOrIndex)));if(retVal===false){break;}}}
else if(qq.isArray(iterableItem)||qq.isItemList(iterableItem)||qq.isNodeList(iterableItem)){for(keyOrIndex=0;keyOrIndex<iterableItem.length;keyOrIndex++){retVal=callback(keyOrIndex,iterableItem[keyOrIndex]);if(retVal===false){break;}}}
else if(qq.isString(iterableItem)){for(keyOrIndex=0;keyOrIndex<iterableItem.length;keyOrIndex++){retVal=callback(keyOrIndex,iterableItem.charAt(keyOrIndex));if(retVal===false){break;}}}
else{for(keyOrIndex in iterableItem){if(Object.prototype.hasOwnProperty.call(iterableItem,keyOrIndex)){retVal=callback(keyOrIndex,iterableItem[keyOrIndex]);if(retVal===false){break;}}}}}};qq.bind=function(oldFunc,context){if(qq.isFunction(oldFunc)){var args=Array.prototype.slice.call(arguments,2);return function(){var newArgs=qq.extend([],args);if(arguments.length){newArgs=newArgs.concat(Array.prototype.slice.call(arguments));}
return oldFunc.apply(context,newArgs);};}
throw new Error("first parameter must be a function!");};qq.obj2url=function(obj,temp,prefixDone){var uristrings=[],prefix="&",add=function(nextObj,i){var nextTemp=temp?(/\[\]$/.test(temp))?temp:temp+"["+i+"]":i;if((nextTemp!=="undefined")&&(i!=="undefined")){uristrings.push((typeof nextObj==="object")?qq.obj2url(nextObj,nextTemp,true):(Object.prototype.toString.call(nextObj)==="[object Function]")?encodeURIComponent(nextTemp)+"="+encodeURIComponent(nextObj()):encodeURIComponent(nextTemp)+"="+encodeURIComponent(nextObj));}};if(!prefixDone&&temp){prefix=(/\?/.test(temp))?(/\?$/.test(temp))?"":"&":"?";uristrings.push(temp);uristrings.push(qq.obj2url(obj));}else if((Object.prototype.toString.call(obj)==="[object Array]")&&(typeof obj!=="undefined")){qq.each(obj,function(idx,val){add(val,idx);});}else if((typeof obj!=="undefined")&&(obj!==null)&&(typeof obj==="object")){qq.each(obj,function(prop,val){add(val,prop);});}else{uristrings.push(encodeURIComponent(temp)+"="+encodeURIComponent(obj));}
if(temp){return uristrings.join(prefix);}else{return uristrings.join(prefix).replace(/^&/,"").replace(/%20/g,"+");}};qq.obj2FormData=function(obj,formData,arrayKeyName){if(!formData){formData=new FormData();}
qq.each(obj,function(key,val){key=arrayKeyName?arrayKeyName+"["+key+"]":key;if(qq.isObject(val)){qq.obj2FormData(val,formData,key);}
else if(qq.isFunction(val)){formData.append(key,val());}
else{formData.append(key,val);}});return formData;};qq.obj2Inputs=function(obj,form){var input;if(!form){form=document.createElement("form");}
qq.obj2FormData(obj,{append:function(key,val){input=document.createElement("input");input.setAttribute("name",key);input.setAttribute("value",val);form.appendChild(input);}});return form;};qq.parseJson=function(json){if(window.JSON&&qq.isFunction(JSON.parse)){return JSON.parse(json);}else{return eval("("+json+")");}};qq.getExtension=function(filename){var extIdx=filename.lastIndexOf(".")+1;if(extIdx>0){return filename.substr(extIdx,filename.length-extIdx);}};qq.getFilename=function(blobOrFileInput){if(qq.isInput(blobOrFileInput)){return blobOrFileInput.value.replace(/.*(\/|\\)/,"");}
else if(qq.isFile(blobOrFileInput)){if(blobOrFileInput.fileName!==null&&blobOrFileInput.fileName!==undefined){return blobOrFileInput.fileName;}}
return blobOrFileInput.name;};qq.DisposeSupport=function(){var disposers=[];return{dispose:function(){var disposer;do{disposer=disposers.shift();if(disposer){disposer();}}
while(disposer);},attach:function(){var args=arguments;this.addDisposer(qq(args[0]).attach.apply(this,Array.prototype.slice.call(arguments,1)));},addDisposer:function(disposeFunction){disposers.push(disposeFunction);}};};}());(function(){"use strict";qq.Error=function(message){this.message="[Fine Uploader "+qq.version+"] "+message;};qq.Error.prototype=new Error();}());qq.version="5.4.1";qq.supportedFeatures=(function(){"use strict";var supportsUploading,supportsUploadingBlobs,supportsFileDrop,supportsAjaxFileUploading,supportsFolderDrop,supportsChunking,supportsResume,supportsUploadViaPaste,supportsUploadCors,supportsDeleteFileXdr,supportsDeleteFileCorsXhr,supportsDeleteFileCors,supportsFolderSelection,supportsImagePreviews,supportsUploadProgress;function testSupportsFileInputElement(){var supported=true,tempInput;try{tempInput=document.createElement("input");tempInput.type="file";qq(tempInput).hide();if(tempInput.disabled){supported=false;}}
catch(ex){supported=false;}
return supported;}
function isChrome21OrHigher(){return(qq.chrome()||qq.opera())&&navigator.userAgent.match(/Chrome\/[2][1-9]|Chrome\/[3-9][0-9]/)!==undefined;}
function isChrome14OrHigher(){return(qq.chrome()||qq.opera())&&navigator.userAgent.match(/Chrome\/[1][4-9]|Chrome\/[2-9][0-9]/)!==undefined;}
function isCrossOriginXhrSupported(){if(window.XMLHttpRequest){var xhr=qq.createXhrInstance();return xhr.withCredentials!==undefined;}
return false;}
function isXdrSupported(){return window.XDomainRequest!==undefined;}
function isCrossOriginAjaxSupported(){if(isCrossOriginXhrSupported()){return true;}
return isXdrSupported();}
function isFolderSelectionSupported(){return document.createElement("input").webkitdirectory!==undefined;}
function isLocalStorageSupported(){try{return!!window.localStorage&&qq.isFunction(window.localStorage.setItem);}
catch(error){return false;}}
function isDragAndDropSupported(){var span=document.createElement("span");return("draggable"in span||("ondragstart"in span&&"ondrop"in span))&&!qq.android()&&!qq.ios();}
supportsUploading=testSupportsFileInputElement();supportsAjaxFileUploading=supportsUploading&&qq.isXhrUploadSupported();supportsUploadingBlobs=supportsAjaxFileUploading&&!qq.androidStock();supportsFileDrop=supportsAjaxFileUploading&&isDragAndDropSupported();supportsFolderDrop=supportsFileDrop&&isChrome21OrHigher();supportsChunking=supportsAjaxFileUploading&&qq.isFileChunkingSupported();supportsResume=supportsAjaxFileUploading&&supportsChunking&&isLocalStorageSupported();supportsUploadViaPaste=supportsAjaxFileUploading&&isChrome14OrHigher();supportsUploadCors=supportsUploading&&(window.postMessage!==undefined||supportsAjaxFileUploading);supportsDeleteFileCorsXhr=isCrossOriginXhrSupported();supportsDeleteFileXdr=isXdrSupported();supportsDeleteFileCors=isCrossOriginAjaxSupported();supportsFolderSelection=isFolderSelectionSupported();supportsImagePreviews=supportsAjaxFileUploading&&window.FileReader!==undefined;supportsUploadProgress=(function(){if(supportsAjaxFileUploading){return!qq.androidStock()&&!qq.iosChrome();}
return false;}());return{ajaxUploading:supportsAjaxFileUploading,blobUploading:supportsUploadingBlobs,canDetermineSize:supportsAjaxFileUploading,chunking:supportsChunking,deleteFileCors:supportsDeleteFileCors,deleteFileCorsXdr:supportsDeleteFileXdr,deleteFileCorsXhr:supportsDeleteFileCorsXhr,dialogElement:!!window.HTMLDialogElement,fileDrop:supportsFileDrop,folderDrop:supportsFolderDrop,folderSelection:supportsFolderSelection,imagePreviews:supportsImagePreviews,imageValidation:supportsImagePreviews,itemSizeValidation:supportsAjaxFileUploading,pause:supportsChunking,progressBar:supportsUploadProgress,resume:supportsResume,scaling:supportsImagePreviews&&supportsUploadingBlobs,tiffPreviews:qq.safari(),unlimitedScaledImageSize:!qq.ios(),uploading:supportsUploading,uploadCors:supportsUploadCors,uploadCustomHeaders:supportsAjaxFileUploading,uploadNonMultipart:supportsAjaxFileUploading,uploadViaPaste:supportsUploadViaPaste};}());qq.isGenericPromise=function(maybePromise){"use strict";return!!(maybePromise&&maybePromise.then&&qq.isFunction(maybePromise.then));};qq.Promise=function(){"use strict";var successArgs,failureArgs,successCallbacks=[],failureCallbacks=[],doneCallbacks=[],state=0;qq.extend(this,{then:function(onSuccess,onFailure){if(state===0){if(onSuccess){successCallbacks.push(onSuccess);}
if(onFailure){failureCallbacks.push(onFailure);}}
else if(state===-1){onFailure&&onFailure.apply(null,failureArgs);}
else if(onSuccess){onSuccess.apply(null,successArgs);}
return this;},done:function(callback){if(state===0){doneCallbacks.push(callback);}
else{callback.apply(null,failureArgs===undefined?successArgs:failureArgs);}
return this;},success:function(){state=1;successArgs=arguments;if(successCallbacks.length){qq.each(successCallbacks,function(idx,callback){callback.apply(null,successArgs);});}
if(doneCallbacks.length){qq.each(doneCallbacks,function(idx,callback){callback.apply(null,successArgs);});}
return this;},failure:function(){state=-1;failureArgs=arguments;if(failureCallbacks.length){qq.each(failureCallbacks,function(idx,callback){callback.apply(null,failureArgs);});}
if(doneCallbacks.length){qq.each(doneCallbacks,function(idx,callback){callback.apply(null,failureArgs);});}
return this;}});};qq.BlobProxy=function(referenceBlob,onCreate){"use strict";qq.extend(this,{referenceBlob:referenceBlob,create:function(){return onCreate(referenceBlob);}});};qq.UploadButton=function(o){"use strict";var self=this,disposeSupport=new qq.DisposeSupport(),options={element:null,multiple:false,acceptFiles:null,folders:false,name:"qqfile",onChange:function(input){},ios8BrowserCrashWorkaround:false,hoverClass:"qq-upload-button-hover",focusClass:"qq-upload-button-focus"},input,buttonId;qq.extend(options,o);buttonId=qq.getUniqueId();function createInput(){var input=document.createElement("input");input.setAttribute(qq.UploadButton.BUTTON_ID_ATTR_NAME,buttonId);input.setAttribute("title","file input");self.setMultiple(options.multiple,input);if(options.folders&&qq.supportedFeatures.folderSelection){input.setAttribute("webkitdirectory","");}
if(options.acceptFiles){input.setAttribute("accept",options.acceptFiles);}
input.setAttribute("type","file");input.setAttribute("name",options.name);qq(input).css({position:"absolute",right:0,top:0,fontFamily:"Arial",fontSize:qq.ie()&&!qq.ie8()?"3500px":"118px",margin:0,padding:0,cursor:"pointer",opacity:0});!qq.ie7()&&qq(input).css({height:"100%"});options.element.appendChild(input);disposeSupport.attach(input,"change",function(){options.onChange(input);});disposeSupport.attach(input,"mouseover",function(){qq(options.element).addClass(options.hoverClass);});disposeSupport.attach(input,"mouseout",function(){qq(options.element).removeClass(options.hoverClass);});disposeSupport.attach(input,"focus",function(){qq(options.element).addClass(options.focusClass);});disposeSupport.attach(input,"blur",function(){qq(options.element).removeClass(options.focusClass);});return input;}
qq(options.element).css({position:"relative",overflow:"hidden",direction:"ltr"});qq.extend(this,{getInput:function(){return input;},getButtonId:function(){return buttonId;},setMultiple:function(isMultiple,optInput){var input=optInput||this.getInput();if(options.ios8BrowserCrashWorkaround&&qq.ios8()&&(qq.iosChrome()||qq.iosSafariWebView())){input.setAttribute("multiple","");}
else{if(isMultiple){input.setAttribute("multiple","");}
else{input.removeAttribute("multiple");}}},setAcceptFiles:function(acceptFiles){if(acceptFiles!==options.acceptFiles){input.setAttribute("accept",acceptFiles);}},reset:function(){if(input.parentNode){qq(input).remove();}
qq(options.element).removeClass(options.focusClass);input=null;input=createInput();}});input=createInput();};qq.UploadButton.BUTTON_ID_ATTR_NAME="qq-button-id";qq.UploadData=function(uploaderProxy){"use strict";var data=[],byUuid={},byStatus={},byProxyGroupId={},byBatchId={};function getDataByIds(idOrIds){if(qq.isArray(idOrIds)){var entries=[];qq.each(idOrIds,function(idx,id){entries.push(data[id]);});return entries;}
return data[idOrIds];}
function getDataByUuids(uuids){if(qq.isArray(uuids)){var entries=[];qq.each(uuids,function(idx,uuid){entries.push(data[byUuid[uuid]]);});return entries;}
return data[byUuid[uuids]];}
function getDataByStatus(status){var statusResults=[],statuses=[].concat(status);qq.each(statuses,function(index,statusEnum){var statusResultIndexes=byStatus[statusEnum];if(statusResultIndexes!==undefined){qq.each(statusResultIndexes,function(i,dataIndex){statusResults.push(data[dataIndex]);});}});return statusResults;}
qq.extend(this,{addFile:function(spec){var status=spec.status||qq.status.SUBMITTING,id=data.push({name:spec.name,originalName:spec.name,uuid:spec.uuid,size:spec.size==null?-1:spec.size,status:status})-1;if(spec.batchId){data[id].batchId=spec.batchId;if(byBatchId[spec.batchId]===undefined){byBatchId[spec.batchId]=[];}
byBatchId[spec.batchId].push(id);}
if(spec.proxyGroupId){data[id].proxyGroupId=spec.proxyGroupId;if(byProxyGroupId[spec.proxyGroupId]===undefined){byProxyGroupId[spec.proxyGroupId]=[];}
byProxyGroupId[spec.proxyGroupId].push(id);}
data[id].id=id;byUuid[spec.uuid]=id;if(byStatus[status]===undefined){byStatus[status]=[];}
byStatus[status].push(id);uploaderProxy.onStatusChange(id,null,status);return id;},retrieve:function(optionalFilter){if(qq.isObject(optionalFilter)&&data.length){if(optionalFilter.id!==undefined){return getDataByIds(optionalFilter.id);}
else if(optionalFilter.uuid!==undefined){return getDataByUuids(optionalFilter.uuid);}
else if(optionalFilter.status){return getDataByStatus(optionalFilter.status);}}
else{return qq.extend([],data,true);}},reset:function(){data=[];byUuid={};byStatus={};byBatchId={};},setStatus:function(id,newStatus){var oldStatus=data[id].status,byStatusOldStatusIndex=qq.indexOf(byStatus[oldStatus],id);byStatus[oldStatus].splice(byStatusOldStatusIndex,1);data[id].status=newStatus;if(byStatus[newStatus]===undefined){byStatus[newStatus]=[];}
byStatus[newStatus].push(id);uploaderProxy.onStatusChange(id,oldStatus,newStatus);},uuidChanged:function(id,newUuid){var oldUuid=data[id].uuid;data[id].uuid=newUuid;byUuid[newUuid]=id;delete byUuid[oldUuid];},updateName:function(id,newName){data[id].name=newName;},updateSize:function(id,newSize){data[id].size=newSize;},setParentId:function(targetId,parentId){data[targetId].parentId=parentId;},getIdsInProxyGroup:function(id){var proxyGroupId=data[id].proxyGroupId;if(proxyGroupId){return byProxyGroupId[proxyGroupId];}
return[];},getIdsInBatch:function(id){var batchId=data[id].batchId;return byBatchId[batchId];}});};qq.status={SUBMITTING:"submitting",SUBMITTED:"submitted",REJECTED:"rejected",QUEUED:"queued",CANCELED:"canceled",PAUSED:"paused",UPLOADING:"uploading",UPLOAD_RETRYING:"retrying upload",UPLOAD_SUCCESSFUL:"upload successful",UPLOAD_FAILED:"upload failed",DELETE_FAILED:"delete failed",DELETING:"deleting",DELETED:"deleted"};(function(){"use strict";qq.basePublicApi={addBlobs:function(blobDataOrArray,params,endpoint){this.addFiles(blobDataOrArray,params,endpoint);},addFiles:function(data,params,endpoint){this._maybeHandleIos8SafariWorkaround();var batchId=this._storedIds.length===0?qq.getUniqueId():this._currentBatchId,processBlob=qq.bind(function(blob){this._handleNewFile({blob:blob,name:this._options.blobs.defaultName},batchId,verifiedFiles);},this),processBlobData=qq.bind(function(blobData){this._handleNewFile(blobData,batchId,verifiedFiles);},this),processCanvas=qq.bind(function(canvas){var blob=qq.canvasToBlob(canvas);this._handleNewFile({blob:blob,name:this._options.blobs.defaultName+".png"},batchId,verifiedFiles);},this),processCanvasData=qq.bind(function(canvasData){var normalizedQuality=canvasData.quality&&canvasData.quality/100,blob=qq.canvasToBlob(canvasData.canvas,canvasData.type,normalizedQuality);this._handleNewFile({blob:blob,name:canvasData.name},batchId,verifiedFiles);},this),processFileOrInput=qq.bind(function(fileOrInput){if(qq.isInput(fileOrInput)&&qq.supportedFeatures.ajaxUploading){var files=Array.prototype.slice.call(fileOrInput.files),self=this;qq.each(files,function(idx,file){self._handleNewFile(file,batchId,verifiedFiles);});}
else{this._handleNewFile(fileOrInput,batchId,verifiedFiles);}},this),normalizeData=function(){if(qq.isFileList(data)){data=Array.prototype.slice.call(data);}
data=[].concat(data);},self=this,verifiedFiles=[];this._currentBatchId=batchId;if(data){normalizeData();qq.each(data,function(idx,fileContainer){if(qq.isFileOrInput(fileContainer)){processFileOrInput(fileContainer);}
else if(qq.isBlob(fileContainer)){processBlob(fileContainer);}
else if(qq.isObject(fileContainer)){if(fileContainer.blob&&fileContainer.name){processBlobData(fileContainer);}
else if(fileContainer.canvas&&fileContainer.name){processCanvasData(fileContainer);}}
else if(fileContainer.tagName&&fileContainer.tagName.toLowerCase()==="canvas"){processCanvas(fileContainer);}
else{self.log(fileContainer+" is not a valid file container!  Ignoring!","warn");}});this.log("Received "+verifiedFiles.length+" files.");this._prepareItemsForUpload(verifiedFiles,params,endpoint);}},cancel:function(id){this._handler.cancel(id);},cancelAll:function(){var storedIdsCopy=[],self=this;qq.extend(storedIdsCopy,this._storedIds);qq.each(storedIdsCopy,function(idx,storedFileId){self.cancel(storedFileId);});this._handler.cancelAll();},clearStoredFiles:function(){this._storedIds=[];},continueUpload:function(id){var uploadData=this._uploadData.retrieve({id:id});if(!qq.supportedFeatures.pause||!this._options.chunking.enabled){return false;}
if(uploadData.status===qq.status.PAUSED){this.log(qq.format("Paused file ID {} ({}) will be continued.  Not paused.",id,this.getName(id)));this._uploadFile(id);return true;}
else{this.log(qq.format("Ignoring continue for file ID {} ({}).  Not paused.",id,this.getName(id)),"error");}
return false;},deleteFile:function(id){return this._onSubmitDelete(id);},doesExist:function(fileOrBlobId){return this._handler.isValid(fileOrBlobId);},drawThumbnail:function(fileId,imgOrCanvas,maxSize,fromServer){var promiseToReturn=new qq.Promise(),fileOrUrl,options;if(this._imageGenerator){fileOrUrl=this._thumbnailUrls[fileId];options={scale:maxSize>0,maxSize:maxSize>0?maxSize:null};if(!fromServer&&qq.supportedFeatures.imagePreviews){fileOrUrl=this.getFile(fileId);}
if(fileOrUrl==null){promiseToReturn.failure({container:imgOrCanvas,error:"File or URL not found."});}
else{this._imageGenerator.generate(fileOrUrl,imgOrCanvas,options).then(function success(modifiedContainer){promiseToReturn.success(modifiedContainer);},function failure(container,reason){promiseToReturn.failure({container:container,error:reason||"Problem generating thumbnail"});});}}
else{promiseToReturn.failure({container:imgOrCanvas,error:"Missing image generator module"});}
return promiseToReturn;},getButton:function(fileId){return this._getButton(this._buttonIdsForFileIds[fileId]);},getEndpoint:function(fileId){return this._endpointStore.get(fileId);},getFile:function(fileOrBlobId){return this._handler.getFile(fileOrBlobId)||null;},getInProgress:function(){return this._uploadData.retrieve({status:[qq.status.UPLOADING,qq.status.UPLOAD_RETRYING,qq.status.QUEUED]}).length;},getName:function(id){return this._uploadData.retrieve({id:id}).name;},getParentId:function(id){var uploadDataEntry=this.getUploads({id:id}),parentId=null;if(uploadDataEntry){if(uploadDataEntry.parentId!==undefined){parentId=uploadDataEntry.parentId;}}
return parentId;},getResumableFilesData:function(){return this._handler.getResumableFilesData();},getSize:function(id){return this._uploadData.retrieve({id:id}).size;},getNetUploads:function(){return this._netUploaded;},getRemainingAllowedItems:function(){var allowedItems=this._currentItemLimit;if(allowedItems>0){return allowedItems-this._netUploadedOrQueued;}
return null;},getUploads:function(optionalFilter){return this._uploadData.retrieve(optionalFilter);},getUuid:function(id){return this._uploadData.retrieve({id:id}).uuid;},log:function(str,level){if(this._options.debug&&(!level||level==="info")){qq.log("[Fine Uploader "+qq.version+"] "+str);}
else if(level&&level!=="info"){qq.log("[Fine Uploader "+qq.version+"] "+str,level);}},pauseUpload:function(id){var uploadData=this._uploadData.retrieve({id:id});if(!qq.supportedFeatures.pause||!this._options.chunking.enabled){return false;}
if(qq.indexOf([qq.status.UPLOADING,qq.status.UPLOAD_RETRYING],uploadData.status)>=0){if(this._handler.pause(id)){this._uploadData.setStatus(id,qq.status.PAUSED);return true;}
else{this.log(qq.format("Unable to pause file ID {} ({}).",id,this.getName(id)),"error");}}
else{this.log(qq.format("Ignoring pause for file ID {} ({}).  Not in progress.",id,this.getName(id)),"error");}
return false;},reset:function(){this.log("Resetting uploader...");this._handler.reset();this._storedIds=[];this._autoRetries=[];this._retryTimeouts=[];this._preventRetries=[];this._thumbnailUrls=[];qq.each(this._buttons,function(idx,button){button.reset();});this._paramsStore.reset();this._endpointStore.reset();this._netUploadedOrQueued=0;this._netUploaded=0;this._uploadData.reset();this._buttonIdsForFileIds=[];this._pasteHandler&&this._pasteHandler.reset();this._options.session.refreshOnReset&&this._refreshSessionData();this._succeededSinceLastAllComplete=[];this._failedSinceLastAllComplete=[];this._totalProgress&&this._totalProgress.reset();},retry:function(id){return this._manualRetry(id);},scaleImage:function(id,specs){var self=this;return qq.Scaler.prototype.scaleImage(id,specs,{log:qq.bind(self.log,self),getFile:qq.bind(self.getFile,self),uploadData:self._uploadData});},setCustomHeaders:function(headers,id){this._customHeadersStore.set(headers,id);},setDeleteFileCustomHeaders:function(headers,id){this._deleteFileCustomHeadersStore.set(headers,id);},setDeleteFileEndpoint:function(endpoint,id){this._deleteFileEndpointStore.set(endpoint,id);},setDeleteFileParams:function(params,id){this._deleteFileParamsStore.set(params,id);},setEndpoint:function(endpoint,id){this._endpointStore.set(endpoint,id);},setForm:function(elementOrId){this._updateFormSupportAndParams(elementOrId);},setItemLimit:function(newItemLimit){this._currentItemLimit=newItemLimit;},setName:function(id,newName){this._uploadData.updateName(id,newName);},setParams:function(params,id){this._paramsStore.set(params,id);},setUuid:function(id,newUuid){return this._uploadData.uuidChanged(id,newUuid);},uploadStoredFiles:function(){if(this._storedIds.length===0){this._itemError("noFilesError");}
else{this._uploadStoredFiles();}}};qq.basePrivateApi={_addCannedFile:function(sessionData){var id=this._uploadData.addFile({uuid:sessionData.uuid,name:sessionData.name,size:sessionData.size,status:qq.status.UPLOAD_SUCCESSFUL});sessionData.deleteFileEndpoint&&this.setDeleteFileEndpoint(sessionData.deleteFileEndpoint,id);sessionData.deleteFileParams&&this.setDeleteFileParams(sessionData.deleteFileParams,id);if(sessionData.thumbnailUrl){this._thumbnailUrls[id]=sessionData.thumbnailUrl;}
this._netUploaded++;this._netUploadedOrQueued++;return id;},_annotateWithButtonId:function(file,associatedInput){if(qq.isFile(file)){file.qqButtonId=this._getButtonId(associatedInput);}},_batchError:function(message){this._options.callbacks.onError(null,null,message,undefined);},_createDeleteHandler:function(){var self=this;return new qq.DeleteFileAjaxRequester({method:this._options.deleteFile.method.toUpperCase(),maxConnections:this._options.maxConnections,uuidParamName:this._options.request.uuidName,customHeaders:this._deleteFileCustomHeadersStore,paramsStore:this._deleteFileParamsStore,endpointStore:this._deleteFileEndpointStore,cors:this._options.cors,log:qq.bind(self.log,self),onDelete:function(id){self._onDelete(id);self._options.callbacks.onDelete(id);},onDeleteComplete:function(id,xhrOrXdr,isError){self._onDeleteComplete(id,xhrOrXdr,isError);self._options.callbacks.onDeleteComplete(id,xhrOrXdr,isError);}});},_createPasteHandler:function(){var self=this;return new qq.PasteSupport({targetElement:this._options.paste.targetElement,callbacks:{log:qq.bind(self.log,self),pasteReceived:function(blob){self._handleCheckedCallback({name:"onPasteReceived",callback:qq.bind(self._options.callbacks.onPasteReceived,self,blob),onSuccess:qq.bind(self._handlePasteSuccess,self,blob),identifier:"pasted image"});}}});},_createStore:function(initialValue,_readOnlyValues_){var store={},catchall=initialValue,perIdReadOnlyValues={},readOnlyValues=_readOnlyValues_,copy=function(orig){if(qq.isObject(orig)){return qq.extend({},orig);}
return orig;},getReadOnlyValues=function(){if(qq.isFunction(readOnlyValues)){return readOnlyValues();}
return readOnlyValues;},includeReadOnlyValues=function(id,existing){if(readOnlyValues&&qq.isObject(existing)){qq.extend(existing,getReadOnlyValues());}
if(perIdReadOnlyValues[id]){qq.extend(existing,perIdReadOnlyValues[id]);}};return{set:function(val,id){if(id==null){store={};catchall=copy(val);}
else{store[id]=copy(val);}},get:function(id){var values;if(id!=null&&store[id]){values=store[id];}
else{values=copy(catchall);}
includeReadOnlyValues(id,values);return copy(values);},addReadOnly:function(id,values){if(qq.isObject(store)){if(id===null){if(qq.isFunction(values)){readOnlyValues=values;}
else{readOnlyValues=readOnlyValues||{};qq.extend(readOnlyValues,values);}}
else{perIdReadOnlyValues[id]=perIdReadOnlyValues[id]||{};qq.extend(perIdReadOnlyValues[id],values);}}},remove:function(fileId){return delete store[fileId];},reset:function(){store={};perIdReadOnlyValues={};catchall=initialValue;}};},_createUploadDataTracker:function(){var self=this;return new qq.UploadData({getName:function(id){return self.getName(id);},getUuid:function(id){return self.getUuid(id);},getSize:function(id){return self.getSize(id);},onStatusChange:function(id,oldStatus,newStatus){self._onUploadStatusChange(id,oldStatus,newStatus);self._options.callbacks.onStatusChange(id,oldStatus,newStatus);self._maybeAllComplete(id,newStatus);if(self._totalProgress){setTimeout(function(){self._totalProgress.onStatusChange(id,oldStatus,newStatus);},0);}}});},_createUploadButton:function(spec){var self=this,acceptFiles=spec.accept||this._options.validation.acceptFiles,allowedExtensions=spec.allowedExtensions||this._options.validation.allowedExtensions,button;function allowMultiple(){if(qq.supportedFeatures.ajaxUploading){if(self._options.workarounds.iosEmptyVideos&&qq.ios()&&!qq.ios6()&&self._isAllowedExtension(allowedExtensions,".mov")){return false;}
if(spec.multiple===undefined){return self._options.multiple;}
return spec.multiple;}
return false;}
button=new qq.UploadButton({element:spec.element,folders:spec.folders,name:this._options.request.inputName,multiple:allowMultiple(),acceptFiles:acceptFiles,onChange:function(input){self._onInputChange(input);},hoverClass:this._options.classes.buttonHover,focusClass:this._options.classes.buttonFocus,ios8BrowserCrashWorkaround:this._options.workarounds.ios8BrowserCrash});this._disposeSupport.addDisposer(function(){button.dispose();});self._buttons.push(button);return button;},_createUploadHandler:function(additionalOptions,namespace){var self=this,lastOnProgress={},options={debug:this._options.debug,maxConnections:this._options.maxConnections,cors:this._options.cors,paramsStore:this._paramsStore,endpointStore:this._endpointStore,chunking:this._options.chunking,resume:this._options.resume,blobs:this._options.blobs,log:qq.bind(self.log,self),preventRetryParam:this._options.retry.preventRetryResponseProperty,onProgress:function(id,name,loaded,total){if(loaded<0||total<0){return;}
if(lastOnProgress[id]){if(lastOnProgress[id].loaded!==loaded||lastOnProgress[id].total!==total){self._onProgress(id,name,loaded,total);self._options.callbacks.onProgress(id,name,loaded,total);}}
else{self._onProgress(id,name,loaded,total);self._options.callbacks.onProgress(id,name,loaded,total);}
lastOnProgress[id]={loaded:loaded,total:total};},onComplete:function(id,name,result,xhr){delete lastOnProgress[id];var status=self.getUploads({id:id}).status,retVal;if(status===qq.status.UPLOAD_SUCCESSFUL||status===qq.status.UPLOAD_FAILED){return;}
retVal=self._onComplete(id,name,result,xhr);if(retVal instanceof qq.Promise){retVal.done(function(){self._options.callbacks.onComplete(id,name,result,xhr);});}
else{self._options.callbacks.onComplete(id,name,result,xhr);}},onCancel:function(id,name,cancelFinalizationEffort){var promise=new qq.Promise();self._handleCheckedCallback({name:"onCancel",callback:qq.bind(self._options.callbacks.onCancel,self,id,name),onFailure:promise.failure,onSuccess:function(){cancelFinalizationEffort.then(function(){self._onCancel(id,name);});promise.success();},identifier:id});return promise;},onUploadPrep:qq.bind(this._onUploadPrep,this),onUpload:function(id,name){self._onUpload(id,name);self._options.callbacks.onUpload(id,name);},onUploadChunk:function(id,name,chunkData){self._onUploadChunk(id,chunkData);self._options.callbacks.onUploadChunk(id,name,chunkData);},onUploadChunkSuccess:function(id,chunkData,result,xhr){self._options.callbacks.onUploadChunkSuccess.apply(self,arguments);},onResume:function(id,name,chunkData){return self._options.callbacks.onResume(id,name,chunkData);},onAutoRetry:function(id,name,responseJSON,xhr){return self._onAutoRetry.apply(self,arguments);},onUuidChanged:function(id,newUuid){self.log("Server requested UUID change from '"+self.getUuid(id)+"' to '"+newUuid+"'");self.setUuid(id,newUuid);},getName:qq.bind(self.getName,self),getUuid:qq.bind(self.getUuid,self),getSize:qq.bind(self.getSize,self),setSize:qq.bind(self._setSize,self),getDataByUuid:function(uuid){return self.getUploads({uuid:uuid});},isQueued:function(id){var status=self.getUploads({id:id}).status;return status===qq.status.QUEUED||status===qq.status.SUBMITTED||status===qq.status.UPLOAD_RETRYING||status===qq.status.PAUSED;},getIdsInProxyGroup:self._uploadData.getIdsInProxyGroup,getIdsInBatch:self._uploadData.getIdsInBatch};qq.each(this._options.request,function(prop,val){options[prop]=val;});options.customHeaders=this._customHeadersStore;if(additionalOptions){qq.each(additionalOptions,function(key,val){options[key]=val;});}
return new qq.UploadHandlerController(options,namespace);},_fileOrBlobRejected:function(id){this._netUploadedOrQueued--;this._uploadData.setStatus(id,qq.status.REJECTED);},_formatSize:function(bytes){var i=-1;do{bytes=bytes/1000;i++;}while(bytes>999);return Math.max(bytes,0.1).toFixed(1)+this._options.text.sizeSymbols[i];},_generateExtraButtonSpecs:function(){var self=this;this._extraButtonSpecs={};qq.each(this._options.extraButtons,function(idx,extraButtonOptionEntry){var multiple=extraButtonOptionEntry.multiple,validation=qq.extend({},self._options.validation,true),extraButtonSpec=qq.extend({},extraButtonOptionEntry);if(multiple===undefined){multiple=self._options.multiple;}
if(extraButtonSpec.validation){qq.extend(validation,extraButtonOptionEntry.validation,true);}
qq.extend(extraButtonSpec,{multiple:multiple,validation:validation},true);self._initExtraButton(extraButtonSpec);});},_getButton:function(buttonId){var extraButtonsSpec=this._extraButtonSpecs[buttonId];if(extraButtonsSpec){return extraButtonsSpec.element;}
else if(buttonId===this._defaultButtonId){return this._options.button;}},_getButtonId:function(buttonOrFileInputOrFile){var inputs,fileInput,fileBlobOrInput=buttonOrFileInputOrFile;if(fileBlobOrInput instanceof qq.BlobProxy){fileBlobOrInput=fileBlobOrInput.referenceBlob;}
if(fileBlobOrInput&&!qq.isBlob(fileBlobOrInput)){if(qq.isFile(fileBlobOrInput)){return fileBlobOrInput.qqButtonId;}
else if(fileBlobOrInput.tagName.toLowerCase()==="input"&&fileBlobOrInput.type.toLowerCase()==="file"){return fileBlobOrInput.getAttribute(qq.UploadButton.BUTTON_ID_ATTR_NAME);}
inputs=fileBlobOrInput.getElementsByTagName("input");qq.each(inputs,function(idx,input){if(input.getAttribute("type")==="file"){fileInput=input;return false;}});if(fileInput){return fileInput.getAttribute(qq.UploadButton.BUTTON_ID_ATTR_NAME);}}},_getNotFinished:function(){return this._uploadData.retrieve({status:[qq.status.UPLOADING,qq.status.UPLOAD_RETRYING,qq.status.QUEUED,qq.status.SUBMITTING,qq.status.SUBMITTED,qq.status.PAUSED]}).length;},_getValidationBase:function(buttonId){var extraButtonSpec=this._extraButtonSpecs[buttonId];return extraButtonSpec?extraButtonSpec.validation:this._options.validation;},_getValidationDescriptor:function(fileWrapper){if(fileWrapper.file instanceof qq.BlobProxy){return{name:qq.getFilename(fileWrapper.file.referenceBlob),size:fileWrapper.file.referenceBlob.size};}
return{name:this.getUploads({id:fileWrapper.id}).name,size:this.getUploads({id:fileWrapper.id}).size};},_getValidationDescriptors:function(fileWrappers){var self=this,fileDescriptors=[];qq.each(fileWrappers,function(idx,fileWrapper){fileDescriptors.push(self._getValidationDescriptor(fileWrapper));});return fileDescriptors;},_handleCameraAccess:function(){if(this._options.camera.ios&&qq.ios()){var acceptIosCamera="image/*;capture=camera",button=this._options.camera.button,buttonId=button?this._getButtonId(button):this._defaultButtonId,optionRoot=this._options;if(buttonId&&buttonId!==this._defaultButtonId){optionRoot=this._extraButtonSpecs[buttonId];}
optionRoot.multiple=false;if(optionRoot.validation.acceptFiles===null){optionRoot.validation.acceptFiles=acceptIosCamera;}
else{optionRoot.validation.acceptFiles+=","+acceptIosCamera;}
qq.each(this._buttons,function(idx,button){if(button.getButtonId()===buttonId){button.setMultiple(optionRoot.multiple);button.setAcceptFiles(optionRoot.acceptFiles);return false;}});}},_handleCheckedCallback:function(details){var self=this,callbackRetVal=details.callback();if(qq.isGenericPromise(callbackRetVal)){this.log(details.name+" - waiting for "+details.name+" promise to be fulfilled for "+details.identifier);return callbackRetVal.then(function(successParam){self.log(details.name+" promise success for "+details.identifier);details.onSuccess(successParam);},function(){if(details.onFailure){self.log(details.name+" promise failure for "+details.identifier);details.onFailure();}
else{self.log(details.name+" promise failure for "+details.identifier);}});}
if(callbackRetVal!==false){details.onSuccess(callbackRetVal);}
else{if(details.onFailure){this.log(details.name+" - return value was 'false' for "+details.identifier+".  Invoking failure callback.");details.onFailure();}
else{this.log(details.name+" - return value was 'false' for "+details.identifier+".  Will not proceed.");}}
return callbackRetVal;},_handleNewFile:function(file,batchId,newFileWrapperList){var self=this,uuid=qq.getUniqueId(),size=-1,name=qq.getFilename(file),actualFile=file.blob||file,handler=this._customNewFileHandler?this._customNewFileHandler:qq.bind(self._handleNewFileGeneric,self);if(!qq.isInput(actualFile)&&actualFile.size>=0){size=actualFile.size;}
handler(actualFile,name,uuid,size,newFileWrapperList,batchId,this._options.request.uuidName,{uploadData:self._uploadData,paramsStore:self._paramsStore,addFileToHandler:function(id,file){self._handler.add(id,file);self._netUploadedOrQueued++;self._trackButton(id);}});},_handleNewFileGeneric:function(file,name,uuid,size,fileList,batchId){var id=this._uploadData.addFile({uuid:uuid,name:name,size:size,batchId:batchId});this._handler.add(id,file);this._trackButton(id);this._netUploadedOrQueued++;fileList.push({id:id,file:file});},_handlePasteSuccess:function(blob,extSuppliedName){var extension=blob.type.split("/")[1],name=extSuppliedName;if(name==null){name=this._options.paste.defaultName;}
name+="."+extension;this.addFiles({name:name,blob:blob});},_initExtraButton:function(spec){var button=this._createUploadButton({element:spec.element,multiple:spec.multiple,accept:spec.validation.acceptFiles,folders:spec.folders,allowedExtensions:spec.validation.allowedExtensions});this._extraButtonSpecs[button.getButtonId()]=spec;},_initFormSupportAndParams:function(){this._formSupport=qq.FormSupport&&new qq.FormSupport(this._options.form,qq.bind(this.uploadStoredFiles,this),qq.bind(this.log,this));if(this._formSupport&&this._formSupport.attachedToForm){this._paramsStore=this._createStore(this._options.request.params,this._formSupport.getFormInputsAsObject);this._options.autoUpload=this._formSupport.newAutoUpload;if(this._formSupport.newEndpoint){this._options.request.endpoint=this._formSupport.newEndpoint;}}
else{this._paramsStore=this._createStore(this._options.request.params);}},_isDeletePossible:function(){if(!qq.DeleteFileAjaxRequester||!this._options.deleteFile.enabled){return false;}
if(this._options.cors.expected){if(qq.supportedFeatures.deleteFileCorsXhr){return true;}
if(qq.supportedFeatures.deleteFileCorsXdr&&this._options.cors.allowXdr){return true;}
return false;}
return true;},_isAllowedExtension:function(allowed,fileName){var valid=false;if(!allowed.length){return true;}
qq.each(allowed,function(idx,allowedExt){if(qq.isString(allowedExt)){var extRegex=new RegExp("\\."+allowedExt+"$","i");if(fileName.match(extRegex)!=null){valid=true;return false;}}});return valid;},_itemError:function(code,maybeNameOrNames,item){var message=this._options.messages[code],allowedExtensions=[],names=[].concat(maybeNameOrNames),name=names[0],buttonId=this._getButtonId(item),validationBase=this._getValidationBase(buttonId),extensionsForMessage,placeholderMatch;function r(name,replacement){message=message.replace(name,replacement);}
qq.each(validationBase.allowedExtensions,function(idx,allowedExtension){if(qq.isString(allowedExtension)){allowedExtensions.push(allowedExtension);}});extensionsForMessage=allowedExtensions.join(", ").toLowerCase();r("{file}",this._options.formatFileName(name));r("{extensions}",extensionsForMessage);r("{sizeLimit}",this._formatSize(validationBase.sizeLimit));r("{minSizeLimit}",this._formatSize(validationBase.minSizeLimit));placeholderMatch=message.match(/(\{\w+\})/g);if(placeholderMatch!==null){qq.each(placeholderMatch,function(idx,placeholder){r(placeholder,names[idx]);});}
this._options.callbacks.onError(null,name,message,undefined);return message;},_manualRetry:function(id,callback){if(this._onBeforeManualRetry(id)){this._netUploadedOrQueued++;this._uploadData.setStatus(id,qq.status.UPLOAD_RETRYING);if(callback){callback(id);}
else{this._handler.retry(id);}
return true;}},_maybeAllComplete:function(id,status){var self=this,notFinished=this._getNotFinished();if(status===qq.status.UPLOAD_SUCCESSFUL){this._succeededSinceLastAllComplete.push(id);}
else if(status===qq.status.UPLOAD_FAILED){this._failedSinceLastAllComplete.push(id);}
if(notFinished===0&&(this._succeededSinceLastAllComplete.length||this._failedSinceLastAllComplete.length)){setTimeout(function(){self._onAllComplete(self._succeededSinceLastAllComplete,self._failedSinceLastAllComplete);},0);}},_maybeHandleIos8SafariWorkaround:function(){var self=this;if(this._options.workarounds.ios8SafariUploads&&qq.ios800()&&qq.iosSafari()){setTimeout(function(){window.alert(self._options.messages.unsupportedBrowserIos8Safari);},0);throw new qq.Error(this._options.messages.unsupportedBrowserIos8Safari);}},_maybeParseAndSendUploadError:function(id,name,response,xhr){if(!response.success){if(xhr&&xhr.status!==200&&!response.error){this._options.callbacks.onError(id,name,"XHR returned response code "+xhr.status,xhr);}
else{var errorReason=response.error?response.error:this._options.text.defaultResponseError;this._options.callbacks.onError(id,name,errorReason,xhr);}}},_maybeProcessNextItemAfterOnValidateCallback:function(validItem,items,index,params,endpoint){var self=this;if(items.length>index){if(validItem||!this._options.validation.stopOnFirstInvalidFile){setTimeout(function(){var validationDescriptor=self._getValidationDescriptor(items[index]),buttonId=self._getButtonId(items[index].file),button=self._getButton(buttonId);self._handleCheckedCallback({name:"onValidate",callback:qq.bind(self._options.callbacks.onValidate,self,validationDescriptor,button),onSuccess:qq.bind(self._onValidateCallbackSuccess,self,items,index,params,endpoint),onFailure:qq.bind(self._onValidateCallbackFailure,self,items,index,params,endpoint),identifier:"Item '"+validationDescriptor.name+"', size: "+validationDescriptor.size});},0);}
else if(!validItem){for(;index<items.length;index++){self._fileOrBlobRejected(items[index].id);}}}},_onAllComplete:function(successful,failed){this._totalProgress&&this._totalProgress.onAllComplete(successful,failed,this._preventRetries);this._options.callbacks.onAllComplete(qq.extend([],successful),qq.extend([],failed));this._succeededSinceLastAllComplete=[];this._failedSinceLastAllComplete=[];},_onAutoRetry:function(id,name,responseJSON,xhr,callback){var self=this;self._preventRetries[id]=responseJSON[self._options.retry.preventRetryResponseProperty];if(self._shouldAutoRetry(id,name,responseJSON)){self._maybeParseAndSendUploadError.apply(self,arguments);self._options.callbacks.onAutoRetry(id,name,self._autoRetries[id]);self._onBeforeAutoRetry(id,name);self._retryTimeouts[id]=setTimeout(function(){self.log("Retrying "+name+"...");self._uploadData.setStatus(id,qq.status.UPLOAD_RETRYING);if(callback){callback(id);}
else{self._handler.retry(id);}},self._options.retry.autoAttemptDelay*1000);return true;}},_onBeforeAutoRetry:function(id,name){this.log("Waiting "+this._options.retry.autoAttemptDelay+" seconds before retrying "+name+"...");},_onBeforeManualRetry:function(id){var itemLimit=this._currentItemLimit,fileName;if(this._preventRetries[id]){this.log("Retries are forbidden for id "+id,"warn");return false;}
else if(this._handler.isValid(id)){fileName=this.getName(id);if(this._options.callbacks.onManualRetry(id,fileName)===false){return false;}
if(itemLimit>0&&this._netUploadedOrQueued+1>itemLimit){this._itemError("retryFailTooManyItems");return false;}
this.log("Retrying upload for '"+fileName+"' (id: "+id+")...");return true;}
else{this.log("'"+id+"' is not a valid file ID","error");return false;}},_onCancel:function(id,name){this._netUploadedOrQueued--;clearTimeout(this._retryTimeouts[id]);var storedItemIndex=qq.indexOf(this._storedIds,id);if(!this._options.autoUpload&&storedItemIndex>=0){this._storedIds.splice(storedItemIndex,1);}
this._uploadData.setStatus(id,qq.status.CANCELED);},_onComplete:function(id,name,result,xhr){if(!result.success){this._netUploadedOrQueued--;this._uploadData.setStatus(id,qq.status.UPLOAD_FAILED);if(result[this._options.retry.preventRetryResponseProperty]===true){this._preventRetries[id]=true;}}
else{if(result.thumbnailUrl){this._thumbnailUrls[id]=result.thumbnailUrl;}
this._netUploaded++;this._uploadData.setStatus(id,qq.status.UPLOAD_SUCCESSFUL);}
this._maybeParseAndSendUploadError(id,name,result,xhr);return result.success?true:false;},_onDelete:function(id){this._uploadData.setStatus(id,qq.status.DELETING);},_onDeleteComplete:function(id,xhrOrXdr,isError){var name=this.getName(id);if(isError){this._uploadData.setStatus(id,qq.status.DELETE_FAILED);this.log("Delete request for '"+name+"' has failed.","error");if(xhrOrXdr.withCredentials===undefined){this._options.callbacks.onError(id,name,"Delete request failed",xhrOrXdr);}
else{this._options.callbacks.onError(id,name,"Delete request failed with response code "+xhrOrXdr.status,xhrOrXdr);}}
else{this._netUploadedOrQueued--;this._netUploaded--;this._handler.expunge(id);this._uploadData.setStatus(id,qq.status.DELETED);this.log("Delete request for '"+name+"' has succeeded.");}},_onInputChange:function(input){var fileIndex;if(qq.supportedFeatures.ajaxUploading){for(fileIndex=0;fileIndex<input.files.length;fileIndex++){this._annotateWithButtonId(input.files[fileIndex],input);}
this.addFiles(input.files);}
else if(input.value.length>0){this.addFiles(input);}
qq.each(this._buttons,function(idx,button){button.reset();});},_onProgress:function(id,name,loaded,total){this._totalProgress&&this._totalProgress.onIndividualProgress(id,loaded,total);},_onSubmit:function(id,name){},_onSubmitCallbackSuccess:function(id,name){this._onSubmit.apply(this,arguments);this._uploadData.setStatus(id,qq.status.SUBMITTED);this._onSubmitted.apply(this,arguments);if(this._options.autoUpload){this._options.callbacks.onSubmitted.apply(this,arguments);this._uploadFile(id);}
else{this._storeForLater(id);this._options.callbacks.onSubmitted.apply(this,arguments);}},_onSubmitDelete:function(id,onSuccessCallback,additionalMandatedParams){var uuid=this.getUuid(id),adjustedOnSuccessCallback;if(onSuccessCallback){adjustedOnSuccessCallback=qq.bind(onSuccessCallback,this,id,uuid,additionalMandatedParams);}
if(this._isDeletePossible()){this._handleCheckedCallback({name:"onSubmitDelete",callback:qq.bind(this._options.callbacks.onSubmitDelete,this,id),onSuccess:adjustedOnSuccessCallback||qq.bind(this._deleteHandler.sendDelete,this,id,uuid,additionalMandatedParams),identifier:id});return true;}
else{this.log("Delete request ignored for ID "+id+", delete feature is disabled or request not possible "+"due to CORS on a user agent that does not support pre-flighting.","warn");return false;}},_onSubmitted:function(id){},_onTotalProgress:function(loaded,total){this._options.callbacks.onTotalProgress(loaded,total);},_onUploadPrep:function(id){},_onUpload:function(id,name){this._uploadData.setStatus(id,qq.status.UPLOADING);},_onUploadChunk:function(id,chunkData){},_onUploadStatusChange:function(id,oldStatus,newStatus){if(newStatus===qq.status.PAUSED){clearTimeout(this._retryTimeouts[id]);}},_onValidateBatchCallbackFailure:function(fileWrappers){var self=this;qq.each(fileWrappers,function(idx,fileWrapper){self._fileOrBlobRejected(fileWrapper.id);});},_onValidateBatchCallbackSuccess:function(validationDescriptors,items,params,endpoint,button){var errorMessage,itemLimit=this._currentItemLimit,proposedNetFilesUploadedOrQueued=this._netUploadedOrQueued;if(itemLimit===0||proposedNetFilesUploadedOrQueued<=itemLimit){if(items.length>0){this._handleCheckedCallback({name:"onValidate",callback:qq.bind(this._options.callbacks.onValidate,this,validationDescriptors[0],button),onSuccess:qq.bind(this._onValidateCallbackSuccess,this,items,0,params,endpoint),onFailure:qq.bind(this._onValidateCallbackFailure,this,items,0,params,endpoint),identifier:"Item '"+items[0].file.name+"', size: "+items[0].file.size});}
else{this._itemError("noFilesError");}}
else{this._onValidateBatchCallbackFailure(items);errorMessage=this._options.messages.tooManyItemsError.replace(/\{netItems\}/g,proposedNetFilesUploadedOrQueued).replace(/\{itemLimit\}/g,itemLimit);this._batchError(errorMessage);}},_onValidateCallbackFailure:function(items,index,params,endpoint){var nextIndex=index+1;this._fileOrBlobRejected(items[index].id,items[index].file.name);this._maybeProcessNextItemAfterOnValidateCallback(false,items,nextIndex,params,endpoint);},_onValidateCallbackSuccess:function(items,index,params,endpoint){var self=this,nextIndex=index+1,validationDescriptor=this._getValidationDescriptor(items[index]);this._validateFileOrBlobData(items[index],validationDescriptor).then(function(){self._upload(items[index].id,params,endpoint);self._maybeProcessNextItemAfterOnValidateCallback(true,items,nextIndex,params,endpoint);},function(){self._maybeProcessNextItemAfterOnValidateCallback(false,items,nextIndex,params,endpoint);});},_prepareItemsForUpload:function(items,params,endpoint){if(items.length===0){this._itemError("noFilesError");return;}
var validationDescriptors=this._getValidationDescriptors(items),buttonId=this._getButtonId(items[0].file),button=this._getButton(buttonId);this._handleCheckedCallback({name:"onValidateBatch",callback:qq.bind(this._options.callbacks.onValidateBatch,this,validationDescriptors,button),onSuccess:qq.bind(this._onValidateBatchCallbackSuccess,this,validationDescriptors,items,params,endpoint,button),onFailure:qq.bind(this._onValidateBatchCallbackFailure,this,items),identifier:"batch validation"});},_preventLeaveInProgress:function(){var self=this;this._disposeSupport.attach(window,"beforeunload",function(e){if(self.getInProgress()){e=e||window.event;e.returnValue=self._options.messages.onLeave;return self._options.messages.onLeave;}});},_refreshSessionData:function(){var self=this,options=this._options.session;if(qq.Session&&this._options.session.endpoint!=null){if(!this._session){qq.extend(options,this._options.cors);options.log=qq.bind(this.log,this);options.addFileRecord=qq.bind(this._addCannedFile,this);this._session=new qq.Session(options);}
setTimeout(function(){self._session.refresh().then(function(response,xhrOrXdr){self._sessionRequestComplete();self._options.callbacks.onSessionRequestComplete(response,true,xhrOrXdr);},function(response,xhrOrXdr){self._options.callbacks.onSessionRequestComplete(response,false,xhrOrXdr);});},0);}},_sessionRequestComplete:function(){},_setSize:function(id,newSize){this._uploadData.updateSize(id,newSize);this._totalProgress&&this._totalProgress.onNewSize(id);},_shouldAutoRetry:function(id,name,responseJSON){var uploadData=this._uploadData.retrieve({id:id});if(!this._preventRetries[id]&&this._options.retry.enableAuto&&uploadData.status!==qq.status.PAUSED){if(this._autoRetries[id]===undefined){this._autoRetries[id]=0;}
if(this._autoRetries[id]<this._options.retry.maxAutoAttempts){this._autoRetries[id]+=1;return true;}}
return false;},_storeForLater:function(id){this._storedIds.push(id);},_trackButton:function(id){var buttonId;if(qq.supportedFeatures.ajaxUploading){buttonId=this._handler.getFile(id).qqButtonId;}
else{buttonId=this._getButtonId(this._handler.getInput(id));}
if(buttonId){this._buttonIdsForFileIds[id]=buttonId;}},_updateFormSupportAndParams:function(formElementOrId){this._options.form.element=formElementOrId;this._formSupport=qq.FormSupport&&new qq.FormSupport(this._options.form,qq.bind(this.uploadStoredFiles,this),qq.bind(this.log,this));if(this._formSupport&&this._formSupport.attachedToForm){this._paramsStore.addReadOnly(null,this._formSupport.getFormInputsAsObject);this._options.autoUpload=this._formSupport.newAutoUpload;if(this._formSupport.newEndpoint){this.setEndpoint(this._formSupport.newEndpoint);}}},_upload:function(id,params,endpoint){var name=this.getName(id);if(params){this.setParams(params,id);}
if(endpoint){this.setEndpoint(endpoint,id);}
this._handleCheckedCallback({name:"onSubmit",callback:qq.bind(this._options.callbacks.onSubmit,this,id,name),onSuccess:qq.bind(this._onSubmitCallbackSuccess,this,id,name),onFailure:qq.bind(this._fileOrBlobRejected,this,id,name),identifier:id});},_uploadFile:function(id){if(!this._handler.upload(id)){this._uploadData.setStatus(id,qq.status.QUEUED);}},_uploadStoredFiles:function(){var idToUpload,stillSubmitting,self=this;while(this._storedIds.length){idToUpload=this._storedIds.shift();this._uploadFile(idToUpload);}
stillSubmitting=this.getUploads({status:qq.status.SUBMITTING}).length;if(stillSubmitting){qq.log("Still waiting for "+stillSubmitting+" files to clear submit queue. Will re-parse stored IDs array shortly.");setTimeout(function(){self._uploadStoredFiles();},1000);}},_validateFileOrBlobData:function(fileWrapper,validationDescriptor){var self=this,file=(function(){if(fileWrapper.file instanceof qq.BlobProxy){return fileWrapper.file.referenceBlob;}
return fileWrapper.file;}()),name=validationDescriptor.name,size=validationDescriptor.size,buttonId=this._getButtonId(fileWrapper.file),validationBase=this._getValidationBase(buttonId),validityChecker=new qq.Promise();validityChecker.then(function(){},function(){self._fileOrBlobRejected(fileWrapper.id,name);});if(qq.isFileOrInput(file)&&!this._isAllowedExtension(validationBase.allowedExtensions,name)){this._itemError("typeError",name,file);return validityChecker.failure();}
if(size===0){this._itemError("emptyError",name,file);return validityChecker.failure();}
if(size>0&&validationBase.sizeLimit&&size>validationBase.sizeLimit){this._itemError("sizeError",name,file);return validityChecker.failure();}
if(size>0&&size<validationBase.minSizeLimit){this._itemError("minSizeError",name,file);return validityChecker.failure();}
if(qq.ImageValidation&&qq.supportedFeatures.imagePreviews&&qq.isFile(file)){new qq.ImageValidation(file,qq.bind(self.log,self)).validate(validationBase.image).then(validityChecker.success,function(errorCode){self._itemError(errorCode+"ImageError",name,file);validityChecker.failure();});}
else{validityChecker.success();}
return validityChecker;},_wrapCallbacks:function(){var self,safeCallback,prop;self=this;safeCallback=function(name,callback,args){var errorMsg;try{return callback.apply(self,args);}
catch(exception){errorMsg=exception.message||exception.toString();self.log("Caught exception in '"+name+"' callback - "+errorMsg,"error");}};for(prop in this._options.callbacks){(function(){var callbackName,callbackFunc;callbackName=prop;callbackFunc=self._options.callbacks[callbackName];self._options.callbacks[callbackName]=function(){return safeCallback(callbackName,callbackFunc,arguments);};}());}}};}());(function(){"use strict";qq.FineUploaderBasic=function(o){var self=this;this._options={debug:false,button:null,multiple:true,maxConnections:3,disableCancelForFormUploads:false,autoUpload:true,request:{customHeaders:{},endpoint:"/server/upload",filenameParam:"qqfilename",forceMultipart:true,inputName:"qqfile",method:"POST",params:{},paramsInBody:true,totalFileSizeName:"qqtotalfilesize",uuidName:"qquuid"},validation:{allowedExtensions:[],sizeLimit:0,minSizeLimit:0,itemLimit:0,stopOnFirstInvalidFile:true,acceptFiles:null,image:{maxHeight:0,maxWidth:0,minHeight:0,minWidth:0}},callbacks:{onSubmit:function(id,name){},onSubmitted:function(id,name){},onComplete:function(id,name,responseJSON,maybeXhr){},onAllComplete:function(successful,failed){},onCancel:function(id,name){},onUpload:function(id,name){},onUploadChunk:function(id,name,chunkData){},onUploadChunkSuccess:function(id,chunkData,responseJSON,xhr){},onResume:function(id,fileName,chunkData){},onProgress:function(id,name,loaded,total){},onTotalProgress:function(loaded,total){},onError:function(id,name,reason,maybeXhrOrXdr){},onAutoRetry:function(id,name,attemptNumber){},onManualRetry:function(id,name){},onValidateBatch:function(fileOrBlobData){},onValidate:function(fileOrBlobData){},onSubmitDelete:function(id){},onDelete:function(id){},onDeleteComplete:function(id,xhrOrXdr,isError){},onPasteReceived:function(blob){},onStatusChange:function(id,oldStatus,newStatus){},onSessionRequestComplete:function(response,success,xhrOrXdr){}},messages:{typeError:"{file} has an invalid extension. Valid extension(s): {extensions}.",sizeError:"{file} is too large, maximum file size is {sizeLimit}.",minSizeError:"{file} is too small, minimum file size is {minSizeLimit}.",emptyError:"{file} is empty, please select files again without it.",noFilesError:"No files to upload.",tooManyItemsError:"Too many items ({netItems}) would be uploaded.  Item limit is {itemLimit}.",maxHeightImageError:"Image is too tall.",maxWidthImageError:"Image is too wide.",minHeightImageError:"Image is not tall enough.",minWidthImageError:"Image is not wide enough.",retryFailTooManyItems:"Retry failed - you have reached your file limit.",onLeave:"The files are being uploaded, if you leave now the upload will be canceled.",unsupportedBrowserIos8Safari:"Unrecoverable error - this browser does not permit file uploading of any kind due to serious bugs in iOS8 Safari.  Please use iOS8 Chrome until Apple fixes these issues."},retry:{enableAuto:false,maxAutoAttempts:3,autoAttemptDelay:5,preventRetryResponseProperty:"preventRetry"},classes:{buttonHover:"qq-upload-button-hover",buttonFocus:"qq-upload-button-focus"},chunking:{enabled:false,concurrent:{enabled:false},mandatory:false,paramNames:{partIndex:"qqpartindex",partByteOffset:"qqpartbyteoffset",chunkSize:"qqchunksize",totalFileSize:"qqtotalfilesize",totalParts:"qqtotalparts"},partSize:2000000,success:{endpoint:null}},resume:{enabled:false,recordsExpireIn:7,paramNames:{resuming:"qqresume"}},formatFileName:function(fileOrBlobName){return fileOrBlobName;},text:{defaultResponseError:"Upload failure reason unknown",sizeSymbols:["kB","MB","GB","TB","PB","EB"]},deleteFile:{enabled:false,method:"DELETE",endpoint:"/server/upload",customHeaders:{},params:{}},cors:{expected:false,sendCredentials:false,allowXdr:false},blobs:{defaultName:"misc_data"},paste:{targetElement:null,defaultName:"pasted_image"},camera:{ios:false,button:null},extraButtons:[],session:{endpoint:null,params:{},customHeaders:{},refreshOnReset:true},form:{element:"qq-form",autoUpload:false,interceptSubmit:true},scaling:{sendOriginal:true,orient:true,defaultType:null,defaultQuality:80,failureText:"Failed to scale",includeExif:false,sizes:[]},workarounds:{iosEmptyVideos:true,ios8SafariUploads:true,ios8BrowserCrash:false}};qq.extend(this._options,o,true);this._buttons=[];this._extraButtonSpecs={};this._buttonIdsForFileIds=[];this._wrapCallbacks();this._disposeSupport=new qq.DisposeSupport();this._storedIds=[];this._autoRetries=[];this._retryTimeouts=[];this._preventRetries=[];this._thumbnailUrls=[];this._netUploadedOrQueued=0;this._netUploaded=0;this._uploadData=this._createUploadDataTracker();this._initFormSupportAndParams();this._customHeadersStore=this._createStore(this._options.request.customHeaders);this._deleteFileCustomHeadersStore=this._createStore(this._options.deleteFile.customHeaders);this._deleteFileParamsStore=this._createStore(this._options.deleteFile.params);this._endpointStore=this._createStore(this._options.request.endpoint);this._deleteFileEndpointStore=this._createStore(this._options.deleteFile.endpoint);this._handler=this._createUploadHandler();this._deleteHandler=qq.DeleteFileAjaxRequester&&this._createDeleteHandler();if(this._options.button){this._defaultButtonId=this._createUploadButton({element:this._options.button}).getButtonId();}
this._generateExtraButtonSpecs();this._handleCameraAccess();if(this._options.paste.targetElement){if(qq.PasteSupport){this._pasteHandler=this._createPasteHandler();}
else{this.log("Paste support module not found","error");}}
this._preventLeaveInProgress();this._imageGenerator=qq.ImageGenerator&&new qq.ImageGenerator(qq.bind(this.log,this));this._refreshSessionData();this._succeededSinceLastAllComplete=[];this._failedSinceLastAllComplete=[];this._scaler=(qq.Scaler&&new qq.Scaler(this._options.scaling,qq.bind(this.log,this)))||{};if(this._scaler.enabled){this._customNewFileHandler=qq.bind(this._scaler.handleNewFile,this._scaler);}
if(qq.TotalProgress&&qq.supportedFeatures.progressBar){this._totalProgress=new qq.TotalProgress(qq.bind(this._onTotalProgress,this),function(id){var entry=self._uploadData.retrieve({id:id});return(entry&&entry.size)||0;});}
this._currentItemLimit=this._options.validation.itemLimit;};qq.FineUploaderBasic.prototype=qq.basePublicApi;qq.extend(qq.FineUploaderBasic.prototype,qq.basePrivateApi);}());qq.AjaxRequester=function(o){"use strict";var log,shouldParamsBeInQueryString,queue=[],requestData={},options={acceptHeader:null,validMethods:["PATCH","POST","PUT"],method:"POST",contentType:"application/x-www-form-urlencoded",maxConnections:3,customHeaders:{},endpointStore:{},paramsStore:{},mandatedParams:{},allowXRequestedWithAndCacheControl:true,successfulResponseCodes:{DELETE:[200,202,204],PATCH:[200,201,202,203,204],POST:[200,201,202,203,204],PUT:[200,201,202,203,204],GET:[200]},cors:{expected:false,sendCredentials:false},log:function(str,level){},onSend:function(id){},onComplete:function(id,xhrOrXdr,isError){},onProgress:null};qq.extend(options,o);log=options.log;if(qq.indexOf(options.validMethods,options.method)<0){throw new Error("'"+options.method+"' is not a supported method for this type of request!");}
function isSimpleMethod(){return qq.indexOf(["GET","POST","HEAD"],options.method)>=0;}
function containsNonSimpleHeaders(headers){var containsNonSimple=false;qq.each(containsNonSimple,function(idx,header){if(qq.indexOf(["Accept","Accept-Language","Content-Language","Content-Type"],header)<0){containsNonSimple=true;return false;}});return containsNonSimple;}
function isXdr(xhr){return options.cors.expected&&xhr.withCredentials===undefined;}
function getCorsAjaxTransport(){var xhrOrXdr;if(window.XMLHttpRequest||window.ActiveXObject){xhrOrXdr=qq.createXhrInstance();if(xhrOrXdr.withCredentials===undefined){xhrOrXdr=new XDomainRequest();xhrOrXdr.onload=function(){};xhrOrXdr.onerror=function(){};xhrOrXdr.ontimeout=function(){};xhrOrXdr.onprogress=function(){};}}
return xhrOrXdr;}
function getXhrOrXdr(id,suppliedXhr){var xhrOrXdr=requestData[id].xhr;if(!xhrOrXdr){if(suppliedXhr){xhrOrXdr=suppliedXhr;}
else{if(options.cors.expected){xhrOrXdr=getCorsAjaxTransport();}
else{xhrOrXdr=qq.createXhrInstance();}}
requestData[id].xhr=xhrOrXdr;}
return xhrOrXdr;}
function dequeue(id){var i=qq.indexOf(queue,id),max=options.maxConnections,nextId;delete requestData[id];queue.splice(i,1);if(queue.length>=max&&i<max){nextId=queue[max-1];sendRequest(nextId);}}
function onComplete(id,xdrError){var xhr=getXhrOrXdr(id),method=options.method,isError=xdrError===true;dequeue(id);if(isError){log(method+" request for "+id+" has failed","error");}
else if(!isXdr(xhr)&&!isResponseSuccessful(xhr.status)){isError=true;log(method+" request for "+id+" has failed - response code "+xhr.status,"error");}
options.onComplete(id,xhr,isError);}
function getParams(id){var onDemandParams=requestData[id].additionalParams,mandatedParams=options.mandatedParams,params;if(options.paramsStore.get){params=options.paramsStore.get(id);}
if(onDemandParams){qq.each(onDemandParams,function(name,val){params=params||{};params[name]=val;});}
if(mandatedParams){qq.each(mandatedParams,function(name,val){params=params||{};params[name]=val;});}
return params;}
function sendRequest(id,optXhr){var xhr=getXhrOrXdr(id,optXhr),method=options.method,params=getParams(id),payload=requestData[id].payload,url;options.onSend(id);url=createUrl(id,params,requestData[id].additionalQueryParams);if(isXdr(xhr)){xhr.onload=getXdrLoadHandler(id);xhr.onerror=getXdrErrorHandler(id);}
else{xhr.onreadystatechange=getXhrReadyStateChangeHandler(id);}
registerForUploadProgress(id);xhr.open(method,url,true);if(options.cors.expected&&options.cors.sendCredentials&&!isXdr(xhr)){xhr.withCredentials=true;}
setHeaders(id);log("Sending "+method+" request for "+id);if(payload){xhr.send(payload);}
else if(shouldParamsBeInQueryString||!params){xhr.send();}
else if(params&&options.contentType&&options.contentType.toLowerCase().indexOf("application/x-www-form-urlencoded")>=0){xhr.send(qq.obj2url(params,""));}
else if(params&&options.contentType&&options.contentType.toLowerCase().indexOf("application/json")>=0){xhr.send(JSON.stringify(params));}
else{xhr.send(params);}
return xhr;}
function createUrl(id,params,additionalQueryParams){var endpoint=options.endpointStore.get(id),addToPath=requestData[id].addToPath;if(addToPath!=undefined){endpoint+="/"+addToPath;}
if(shouldParamsBeInQueryString&&params){endpoint=qq.obj2url(params,endpoint);}
if(additionalQueryParams){endpoint=qq.obj2url(additionalQueryParams,endpoint);}
return endpoint;}
function getXhrReadyStateChangeHandler(id){return function(){if(getXhrOrXdr(id).readyState===4){onComplete(id);}};}
function registerForUploadProgress(id){var onProgress=options.onProgress;if(onProgress){getXhrOrXdr(id).upload.onprogress=function(e){if(e.lengthComputable){onProgress(id,e.loaded,e.total);}};}}
function getXdrLoadHandler(id){return function(){onComplete(id);};}
function getXdrErrorHandler(id){return function(){onComplete(id,true);};}
function setHeaders(id){var xhr=getXhrOrXdr(id),customHeaders=options.customHeaders,onDemandHeaders=requestData[id].additionalHeaders||{},method=options.method,allHeaders={};if(!isXdr(xhr)){options.acceptHeader&&xhr.setRequestHeader("Accept",options.acceptHeader);if(options.allowXRequestedWithAndCacheControl){if(!options.cors.expected||(!isSimpleMethod()||containsNonSimpleHeaders(customHeaders))){xhr.setRequestHeader("X-Requested-With","XMLHttpRequest");xhr.setRequestHeader("Cache-Control","no-cache");}}
if(options.contentType&&(method==="POST"||method==="PUT")){xhr.setRequestHeader("Content-Type",options.contentType);}
qq.extend(allHeaders,qq.isFunction(customHeaders)?customHeaders(id):customHeaders);qq.extend(allHeaders,onDemandHeaders);qq.each(allHeaders,function(name,val){xhr.setRequestHeader(name,val);});}}
function isResponseSuccessful(responseCode){return qq.indexOf(options.successfulResponseCodes[options.method],responseCode)>=0;}
function prepareToSend(id,optXhr,addToPath,additionalParams,additionalQueryParams,additionalHeaders,payload){requestData[id]={addToPath:addToPath,additionalParams:additionalParams,additionalQueryParams:additionalQueryParams,additionalHeaders:additionalHeaders,payload:payload};var len=queue.push(id);if(len<=options.maxConnections){return sendRequest(id,optXhr);}}
shouldParamsBeInQueryString=options.method==="GET"||options.method==="DELETE";qq.extend(this,{initTransport:function(id){var path,params,headers,payload,cacheBuster,additionalQueryParams;return{withPath:function(appendToPath){path=appendToPath;return this;},withParams:function(additionalParams){params=additionalParams;return this;},withQueryParams:function(_additionalQueryParams_){additionalQueryParams=_additionalQueryParams_;return this;},withHeaders:function(additionalHeaders){headers=additionalHeaders;return this;},withPayload:function(thePayload){payload=thePayload;return this;},withCacheBuster:function(){cacheBuster=true;return this;},send:function(optXhr){if(cacheBuster&&qq.indexOf(["GET","DELETE"],options.method)>=0){params.qqtimestamp=new Date().getTime();}
return prepareToSend(id,optXhr,path,params,additionalQueryParams,headers,payload);}};},canceled:function(id){dequeue(id);}});};qq.UploadHandler=function(spec){"use strict";var proxy=spec.proxy,fileState={},onCancel=proxy.onCancel,getName=proxy.getName;qq.extend(this,{add:function(id,fileItem){fileState[id]=fileItem;fileState[id].temp={};},cancel:function(id){var self=this,cancelFinalizationEffort=new qq.Promise(),onCancelRetVal=onCancel(id,getName(id),cancelFinalizationEffort);onCancelRetVal.then(function(){if(self.isValid(id)){fileState[id].canceled=true;self.expunge(id);}
cancelFinalizationEffort.success();});},expunge:function(id){delete fileState[id];},getThirdPartyFileId:function(id){return fileState[id].key;},isValid:function(id){return fileState[id]!==undefined;},reset:function(){fileState={};},_getFileState:function(id){return fileState[id];},_setThirdPartyFileId:function(id,thirdPartyFileId){fileState[id].key=thirdPartyFileId;},_wasCanceled:function(id){return!!fileState[id].canceled;}});};qq.UploadHandlerController=function(o,namespace){"use strict";var controller=this,chunkingPossible=false,concurrentChunkingPossible=false,chunking,preventRetryResponse,log,handler,options={paramsStore:{},maxConnections:3,chunking:{enabled:false,multiple:{enabled:false}},log:function(str,level){},onProgress:function(id,fileName,loaded,total){},onComplete:function(id,fileName,response,xhr){},onCancel:function(id,fileName){},onUploadPrep:function(id){},onUpload:function(id,fileName){},onUploadChunk:function(id,fileName,chunkData){},onUploadChunkSuccess:function(id,chunkData,response,xhr){},onAutoRetry:function(id,fileName,response,xhr){},onResume:function(id,fileName,chunkData){},onUuidChanged:function(id,newUuid){},getName:function(id){},setSize:function(id,newSize){},isQueued:function(id){},getIdsInProxyGroup:function(id){},getIdsInBatch:function(id){}},chunked={done:function(id,chunkIdx,response,xhr){var chunkData=handler._getChunkData(id,chunkIdx);handler._getFileState(id).attemptingResume=false;delete handler._getFileState(id).temp.chunkProgress[chunkIdx];handler._getFileState(id).loaded+=chunkData.size;options.onUploadChunkSuccess(id,handler._getChunkDataForCallback(chunkData),response,xhr);},finalize:function(id){var size=options.getSize(id),name=options.getName(id);log("All chunks have been uploaded for "+id+" - finalizing....");handler.finalizeChunks(id).then(function(response,xhr){log("Finalize successful for "+id);var normaizedResponse=upload.normalizeResponse(response,true);options.onProgress(id,name,size,size);handler._maybeDeletePersistedChunkData(id);upload.cleanup(id,normaizedResponse,xhr);},function(response,xhr){var normaizedResponse=upload.normalizeResponse(response,false);log("Problem finalizing chunks for file ID "+id+" - "+normaizedResponse.error,"error");if(normaizedResponse.reset){chunked.reset(id);}
if(!options.onAutoRetry(id,name,normaizedResponse,xhr)){upload.cleanup(id,normaizedResponse,xhr);}});},hasMoreParts:function(id){return!!handler._getFileState(id).chunking.remaining.length;},nextPart:function(id){var nextIdx=handler._getFileState(id).chunking.remaining.shift();if(nextIdx>=handler._getTotalChunks(id)){nextIdx=null;}
return nextIdx;},reset:function(id){log("Server or callback has ordered chunking effort to be restarted on next attempt for item ID "+id,"error");handler._maybeDeletePersistedChunkData(id);handler.reevaluateChunking(id);handler._getFileState(id).loaded=0;},sendNext:function(id){var size=options.getSize(id),name=options.getName(id),chunkIdx=chunked.nextPart(id),chunkData=handler._getChunkData(id,chunkIdx),resuming=handler._getFileState(id).attemptingResume,inProgressChunks=handler._getFileState(id).chunking.inProgress||[];if(handler._getFileState(id).loaded==null){handler._getFileState(id).loaded=0;}
if(resuming&&options.onResume(id,name,chunkData)===false){chunked.reset(id);chunkIdx=chunked.nextPart(id);chunkData=handler._getChunkData(id,chunkIdx);resuming=false;}
if(chunkIdx==null&&inProgressChunks.length===0){chunked.finalize(id);}
else{log("Sending chunked upload request for item "+id+": bytes "+(chunkData.start+1)+"-"+chunkData.end+" of "+size);options.onUploadChunk(id,name,handler._getChunkDataForCallback(chunkData));inProgressChunks.push(chunkIdx);handler._getFileState(id).chunking.inProgress=inProgressChunks;if(concurrentChunkingPossible){connectionManager.open(id,chunkIdx);}
if(concurrentChunkingPossible&&connectionManager.available()&&handler._getFileState(id).chunking.remaining.length){chunked.sendNext(id);}
handler.uploadChunk(id,chunkIdx,resuming).then(function success(response,xhr){log("Chunked upload request succeeded for "+id+", chunk "+chunkIdx);handler.clearCachedChunk(id,chunkIdx);var inProgressChunks=handler._getFileState(id).chunking.inProgress||[],responseToReport=upload.normalizeResponse(response,true),inProgressChunkIdx=qq.indexOf(inProgressChunks,chunkIdx);log(qq.format("Chunk {} for file {} uploaded successfully.",chunkIdx,id));chunked.done(id,chunkIdx,responseToReport,xhr);if(inProgressChunkIdx>=0){inProgressChunks.splice(inProgressChunkIdx,1);}
handler._maybePersistChunkedState(id);if(!chunked.hasMoreParts(id)&&inProgressChunks.length===0){chunked.finalize(id);}
else if(chunked.hasMoreParts(id)){chunked.sendNext(id);}},function failure(response,xhr){log("Chunked upload request failed for "+id+", chunk "+chunkIdx);handler.clearCachedChunk(id,chunkIdx);var responseToReport=upload.normalizeResponse(response,false),inProgressIdx;if(responseToReport.reset){chunked.reset(id);}
else{inProgressIdx=qq.indexOf(handler._getFileState(id).chunking.inProgress,chunkIdx);if(inProgressIdx>=0){handler._getFileState(id).chunking.inProgress.splice(inProgressIdx,1);handler._getFileState(id).chunking.remaining.unshift(chunkIdx);}}
if(!handler._getFileState(id).temp.ignoreFailure){if(concurrentChunkingPossible){handler._getFileState(id).temp.ignoreFailure=true;qq.each(handler._getXhrs(id),function(ckid,ckXhr){ckXhr.abort();});handler.moveInProgressToRemaining(id);connectionManager.free(id,true);}
if(!options.onAutoRetry(id,name,responseToReport,xhr)){upload.cleanup(id,responseToReport,xhr);}}}).done(function(){handler.clearXhr(id,chunkIdx);});}}},connectionManager={_open:[],_openChunks:{},_waiting:[],available:function(){var max=options.maxConnections,openChunkEntriesCount=0,openChunksCount=0;qq.each(connectionManager._openChunks,function(fileId,openChunkIndexes){openChunkEntriesCount++;openChunksCount+=openChunkIndexes.length;});return max-(connectionManager._open.length-openChunkEntriesCount+openChunksCount);},free:function(id,dontAllowNext){var allowNext=!dontAllowNext,waitingIndex=qq.indexOf(connectionManager._waiting,id),connectionsIndex=qq.indexOf(connectionManager._open,id),nextId;delete connectionManager._openChunks[id];if(upload.getProxyOrBlob(id)instanceof qq.BlobProxy){log("Generated blob upload has ended for "+id+", disposing generated blob.");delete handler._getFileState(id).file;}
if(waitingIndex>=0){connectionManager._waiting.splice(waitingIndex,1);}
else if(allowNext&&connectionsIndex>=0){connectionManager._open.splice(connectionsIndex,1);nextId=connectionManager._waiting.shift();if(nextId>=0){connectionManager._open.push(nextId);upload.start(nextId);}}},getWaitingOrConnected:function(){var waitingOrConnected=[];qq.each(connectionManager._openChunks,function(fileId,chunks){if(chunks&&chunks.length){waitingOrConnected.push(parseInt(fileId));}});qq.each(connectionManager._open,function(idx,fileId){if(!connectionManager._openChunks[fileId]){waitingOrConnected.push(parseInt(fileId));}});waitingOrConnected=waitingOrConnected.concat(connectionManager._waiting);return waitingOrConnected;},isUsingConnection:function(id){return qq.indexOf(connectionManager._open,id)>=0;},open:function(id,chunkIdx){if(chunkIdx==null){connectionManager._waiting.push(id);}
if(connectionManager.available()){if(chunkIdx==null){connectionManager._waiting.pop();connectionManager._open.push(id);}
else{(function(){var openChunksEntry=connectionManager._openChunks[id]||[];openChunksEntry.push(chunkIdx);connectionManager._openChunks[id]=openChunksEntry;}());}
return true;}
return false;},reset:function(){connectionManager._waiting=[];connectionManager._open=[];}},simple={send:function(id,name){handler._getFileState(id).loaded=0;log("Sending simple upload request for "+id);handler.uploadFile(id).then(function(response,optXhr){log("Simple upload request succeeded for "+id);var responseToReport=upload.normalizeResponse(response,true),size=options.getSize(id);options.onProgress(id,name,size,size);upload.maybeNewUuid(id,responseToReport);upload.cleanup(id,responseToReport,optXhr);},function(response,optXhr){log("Simple upload request failed for "+id);var responseToReport=upload.normalizeResponse(response,false);if(!options.onAutoRetry(id,name,responseToReport,optXhr)){upload.cleanup(id,responseToReport,optXhr);}});}},upload={cancel:function(id){log("Cancelling "+id);options.paramsStore.remove(id);connectionManager.free(id);},cleanup:function(id,response,optXhr){var name=options.getName(id);options.onComplete(id,name,response,optXhr);if(handler._getFileState(id)){handler._clearXhrs&&handler._clearXhrs(id);}
connectionManager.free(id);},getProxyOrBlob:function(id){return(handler.getProxy&&handler.getProxy(id))||(handler.getFile&&handler.getFile(id));},initHandler:function(){var handlerType=namespace?qq[namespace]:qq.traditional,handlerModuleSubtype=qq.supportedFeatures.ajaxUploading?"Xhr":"Form";handler=new handlerType[handlerModuleSubtype+"UploadHandler"](options,{getDataByUuid:options.getDataByUuid,getName:options.getName,getSize:options.getSize,getUuid:options.getUuid,log:log,onCancel:options.onCancel,onProgress:options.onProgress,onUuidChanged:options.onUuidChanged});if(handler._removeExpiredChunkingRecords){handler._removeExpiredChunkingRecords();}},isDeferredEligibleForUpload:function(id){return options.isQueued(id);},maybeDefer:function(id,blob){if(blob&&!handler.getFile(id)&&blob instanceof qq.BlobProxy){options.onUploadPrep(id);log("Attempting to generate a blob on-demand for "+id);blob.create().then(function(generatedBlob){log("Generated an on-demand blob for "+id);handler.updateBlob(id,generatedBlob);options.setSize(id,generatedBlob.size);handler.reevaluateChunking(id);upload.maybeSendDeferredFiles(id);},function(errorMessage){var errorResponse={};if(errorMessage){errorResponse.error=errorMessage;}
log(qq.format("Failed to generate blob for ID {}.  Error message: {}.",id,errorMessage),"error");options.onComplete(id,options.getName(id),qq.extend(errorResponse,preventRetryResponse),null);upload.maybeSendDeferredFiles(id);connectionManager.free(id);});}
else{return upload.maybeSendDeferredFiles(id);}
return false;},maybeSendDeferredFiles:function(id){var idsInGroup=options.getIdsInProxyGroup(id),uploadedThisId=false;if(idsInGroup&&idsInGroup.length){log("Maybe ready to upload proxy group file "+id);qq.each(idsInGroup,function(idx,idInGroup){if(upload.isDeferredEligibleForUpload(idInGroup)&&!!handler.getFile(idInGroup)){uploadedThisId=idInGroup===id;upload.now(idInGroup);}
else if(upload.isDeferredEligibleForUpload(idInGroup)){return false;}});}
else{uploadedThisId=true;upload.now(id);}
return uploadedThisId;},maybeNewUuid:function(id,response){if(response.newUuid!==undefined){options.onUuidChanged(id,response.newUuid);}},normalizeResponse:function(originalResponse,successful){var response=originalResponse;if(!qq.isObject(originalResponse)){response={};if(qq.isString(originalResponse)&&!successful){response.error=originalResponse;}}
response.success=successful;return response;},now:function(id){var name=options.getName(id);if(!controller.isValid(id)){throw new qq.Error(id+" is not a valid file ID to upload!");}
options.onUpload(id,name);if(chunkingPossible&&handler._shouldChunkThisFile(id)){chunked.sendNext(id);}
else{simple.send(id,name);}},start:function(id){var blobToUpload=upload.getProxyOrBlob(id);if(blobToUpload){return upload.maybeDefer(id,blobToUpload);}
else{upload.now(id);return true;}}};qq.extend(this,{add:function(id,file){handler.add.apply(this,arguments);},upload:function(id){if(connectionManager.open(id)){return upload.start(id);}
return false;},retry:function(id){if(concurrentChunkingPossible){handler._getFileState(id).temp.ignoreFailure=false;}
if(connectionManager.isUsingConnection(id)){return upload.start(id);}
else{return controller.upload(id);}},cancel:function(id){var cancelRetVal=handler.cancel(id);if(qq.isGenericPromise(cancelRetVal)){cancelRetVal.then(function(){upload.cancel(id);});}
else if(cancelRetVal!==false){upload.cancel(id);}},cancelAll:function(){var waitingOrConnected=connectionManager.getWaitingOrConnected(),i;if(waitingOrConnected.length){for(i=waitingOrConnected.length-1;i>=0;i--){controller.cancel(waitingOrConnected[i]);}}
connectionManager.reset();},getFile:function(id){if(handler.getProxy&&handler.getProxy(id)){return handler.getProxy(id).referenceBlob;}
return handler.getFile&&handler.getFile(id);},isProxied:function(id){return!!(handler.getProxy&&handler.getProxy(id));},getInput:function(id){if(handler.getInput){return handler.getInput(id);}},reset:function(){log("Resetting upload handler");controller.cancelAll();connectionManager.reset();handler.reset();},expunge:function(id){if(controller.isValid(id)){return handler.expunge(id);}},isValid:function(id){return handler.isValid(id);},getResumableFilesData:function(){if(handler.getResumableFilesData){return handler.getResumableFilesData();}
return[];},getThirdPartyFileId:function(id){if(controller.isValid(id)){return handler.getThirdPartyFileId(id);}},pause:function(id){if(controller.isResumable(id)&&handler.pause&&controller.isValid(id)&&handler.pause(id)){connectionManager.free(id);handler.moveInProgressToRemaining(id);return true;}
return false;},isResumable:function(id){return!!handler.isResumable&&handler.isResumable(id);}});qq.extend(options,o);log=options.log;chunkingPossible=options.chunking.enabled&&qq.supportedFeatures.chunking;concurrentChunkingPossible=chunkingPossible&&options.chunking.concurrent.enabled;preventRetryResponse=(function(){var response={};response[options.preventRetryParam]=true;return response;}());upload.initHandler();};qq.FormUploadHandler=function(spec){"use strict";var options=spec.options,handler=this,proxy=spec.proxy,formHandlerInstanceId=qq.getUniqueId(),onloadCallbacks={},detachLoadEvents={},postMessageCallbackTimers={},isCors=options.isCors,inputName=options.inputName,getUuid=proxy.getUuid,log=proxy.log,corsMessageReceiver=new qq.WindowReceiveMessage({log:log});function expungeFile(id){delete detachLoadEvents[id];if(isCors){clearTimeout(postMessageCallbackTimers[id]);delete postMessageCallbackTimers[id];corsMessageReceiver.stopReceivingMessages(id);}
var iframe=document.getElementById(handler._getIframeName(id));if(iframe){iframe.setAttribute("src","javascript:false;");qq(iframe).remove();}}
function getFileIdForIframeName(iframeName){return iframeName.split("_")[0];}
function initIframeForUpload(name){var iframe=qq.toElement("<iframe src='javascript:false;' name='"+name+"' />");iframe.setAttribute("id",name);iframe.style.display="none";document.body.appendChild(iframe);return iframe;}
function registerPostMessageCallback(iframe,callback){var iframeName=iframe.id,fileId=getFileIdForIframeName(iframeName),uuid=getUuid(fileId);onloadCallbacks[uuid]=callback;detachLoadEvents[fileId]=qq(iframe).attach("load",function(){if(handler.getInput(fileId)){log("Received iframe load event for CORS upload request (iframe name "+iframeName+")");postMessageCallbackTimers[iframeName]=setTimeout(function(){var errorMessage="No valid message received from loaded iframe for iframe name "+iframeName;log(errorMessage,"error");callback({error:errorMessage});},1000);}});corsMessageReceiver.receiveMessage(iframeName,function(message){log("Received the following window message: '"+message+"'");var fileId=getFileIdForIframeName(iframeName),response=handler._parseJsonResponse(message),uuid=response.uuid,onloadCallback;if(uuid&&onloadCallbacks[uuid]){log("Handling response for iframe name "+iframeName);clearTimeout(postMessageCallbackTimers[iframeName]);delete postMessageCallbackTimers[iframeName];handler._detachLoadEvent(iframeName);onloadCallback=onloadCallbacks[uuid];delete onloadCallbacks[uuid];corsMessageReceiver.stopReceivingMessages(iframeName);onloadCallback(response);}
else if(!uuid){log("'"+message+"' does not contain a UUID - ignoring.");}});}
qq.extend(this,new qq.UploadHandler(spec));qq.override(this,function(super_){return{add:function(id,fileInput){super_.add(id,{input:fileInput});fileInput.setAttribute("name",inputName);if(fileInput.parentNode){qq(fileInput).remove();}},expunge:function(id){expungeFile(id);super_.expunge(id);},isValid:function(id){return super_.isValid(id)&&handler._getFileState(id).input!==undefined;}};});qq.extend(this,{getInput:function(id){return handler._getFileState(id).input;},_attachLoadEvent:function(iframe,callback){var responseDescriptor;if(isCors){registerPostMessageCallback(iframe,callback);}
else{detachLoadEvents[iframe.id]=qq(iframe).attach("load",function(){log("Received response for "+iframe.id);if(!iframe.parentNode){return;}
try{if(iframe.contentDocument&&iframe.contentDocument.body&&iframe.contentDocument.body.innerHTML=="false"){return;}}
catch(error){log("Error when attempting to access iframe during handling of upload response ("+error.message+")","error");responseDescriptor={success:false};}
callback(responseDescriptor);});}},_createIframe:function(id){var iframeName=handler._getIframeName(id);return initIframeForUpload(iframeName);},_detachLoadEvent:function(id){if(detachLoadEvents[id]!==undefined){detachLoadEvents[id]();delete detachLoadEvents[id];}},_getIframeName:function(fileId){return fileId+"_"+formHandlerInstanceId;},_initFormForUpload:function(spec){var method=spec.method,endpoint=spec.endpoint,params=spec.params,paramsInBody=spec.paramsInBody,targetName=spec.targetName,form=qq.toElement("<form method='"+method+"' enctype='multipart/form-data'></form>"),url=endpoint;if(paramsInBody){qq.obj2Inputs(params,form);}
else{url=qq.obj2url(params,endpoint);}
form.setAttribute("action",url);form.setAttribute("target",targetName);form.style.display="none";document.body.appendChild(form);return form;},_parseJsonResponse:function(innerHtmlOrMessage){var response={};try{response=qq.parseJson(innerHtmlOrMessage);}
catch(error){log("Error when attempting to parse iframe upload response ("+error.message+")","error");}
return response;}});};qq.XhrUploadHandler=function(spec){"use strict";var handler=this,namespace=spec.options.namespace,proxy=spec.proxy,chunking=spec.options.chunking,resume=spec.options.resume,chunkFiles=chunking&&spec.options.chunking.enabled&&qq.supportedFeatures.chunking,resumeEnabled=resume&&spec.options.resume.enabled&&chunkFiles&&qq.supportedFeatures.resume,getName=proxy.getName,getSize=proxy.getSize,getUuid=proxy.getUuid,getEndpoint=proxy.getEndpoint,getDataByUuid=proxy.getDataByUuid,onUuidChanged=proxy.onUuidChanged,onProgress=proxy.onProgress,log=proxy.log;function abort(id){qq.each(handler._getXhrs(id),function(xhrId,xhr){var ajaxRequester=handler._getAjaxRequester(id,xhrId);xhr.onreadystatechange=null;xhr.upload.onprogress=null;xhr.abort();ajaxRequester&&ajaxRequester.canceled&&ajaxRequester.canceled(id);});}
qq.extend(this,new qq.UploadHandler(spec));qq.override(this,function(super_){return{add:function(id,blobOrProxy){if(qq.isFile(blobOrProxy)||qq.isBlob(blobOrProxy)){super_.add(id,{file:blobOrProxy});}
else if(blobOrProxy instanceof qq.BlobProxy){super_.add(id,{proxy:blobOrProxy});}
else{throw new Error("Passed obj is not a File, Blob, or proxy");}
handler._initTempState(id);resumeEnabled&&handler._maybePrepareForResume(id);},expunge:function(id){abort(id);handler._maybeDeletePersistedChunkData(id);handler._clearXhrs(id);super_.expunge(id);}};});qq.extend(this,{clearCachedChunk:function(id,chunkIdx){delete handler._getFileState(id).temp.cachedChunks[chunkIdx];},clearXhr:function(id,chunkIdx){var tempState=handler._getFileState(id).temp;if(tempState.xhrs){delete tempState.xhrs[chunkIdx];}
if(tempState.ajaxRequesters){delete tempState.ajaxRequesters[chunkIdx];}},finalizeChunks:function(id,responseParser){var lastChunkIdx=handler._getTotalChunks(id)-1,xhr=handler._getXhr(id,lastChunkIdx);if(responseParser){return new qq.Promise().success(responseParser(xhr),xhr);}
return new qq.Promise().success({},xhr);},getFile:function(id){return handler.isValid(id)&&handler._getFileState(id).file;},getProxy:function(id){return handler.isValid(id)&&handler._getFileState(id).proxy;},getResumableFilesData:function(){var resumableFilesData=[];handler._iterateResumeRecords(function(key,uploadData){handler.moveInProgressToRemaining(null,uploadData.chunking.inProgress,uploadData.chunking.remaining);var data={name:uploadData.name,remaining:uploadData.chunking.remaining,size:uploadData.size,uuid:uploadData.uuid};if(uploadData.key){data.key=uploadData.key;}
resumableFilesData.push(data);});return resumableFilesData;},isResumable:function(id){return!!chunking&&handler.isValid(id)&&!handler._getFileState(id).notResumable;},moveInProgressToRemaining:function(id,optInProgress,optRemaining){var inProgress=optInProgress||handler._getFileState(id).chunking.inProgress,remaining=optRemaining||handler._getFileState(id).chunking.remaining;if(inProgress){inProgress.reverse();qq.each(inProgress,function(idx,chunkIdx){remaining.unshift(chunkIdx);});inProgress.length=0;}},pause:function(id){if(handler.isValid(id)){log(qq.format("Aborting XHR upload for {} '{}' due to pause instruction.",id,getName(id)));handler._getFileState(id).paused=true;abort(id);return true;}},reevaluateChunking:function(id){if(chunking&&handler.isValid(id)){var state=handler._getFileState(id),totalChunks,i;delete state.chunking;state.chunking={};totalChunks=handler._getTotalChunks(id);if(totalChunks>1||chunking.mandatory){state.chunking.enabled=true;state.chunking.parts=totalChunks;state.chunking.remaining=[];for(i=0;i<totalChunks;i++){state.chunking.remaining.push(i);}
handler._initTempState(id);}
else{state.chunking.enabled=false;}}},updateBlob:function(id,newBlob){if(handler.isValid(id)){handler._getFileState(id).file=newBlob;}},_clearXhrs:function(id){var tempState=handler._getFileState(id).temp;qq.each(tempState.ajaxRequesters,function(chunkId){delete tempState.ajaxRequesters[chunkId];});qq.each(tempState.xhrs,function(chunkId){delete tempState.xhrs[chunkId];});},_createXhr:function(id,optChunkIdx){return handler._registerXhr(id,optChunkIdx,qq.createXhrInstance());},_getAjaxRequester:function(id,optChunkIdx){var chunkIdx=optChunkIdx==null?-1:optChunkIdx;return handler._getFileState(id).temp.ajaxRequesters[chunkIdx];},_getChunkData:function(id,chunkIndex){var chunkSize=chunking.partSize,fileSize=getSize(id),fileOrBlob=handler.getFile(id),startBytes=chunkSize*chunkIndex,endBytes=startBytes+chunkSize>=fileSize?fileSize:startBytes+chunkSize,totalChunks=handler._getTotalChunks(id),cachedChunks=this._getFileState(id).temp.cachedChunks,blob=cachedChunks[chunkIndex]||qq.sliceBlob(fileOrBlob,startBytes,endBytes);cachedChunks[chunkIndex]=blob;return{part:chunkIndex,start:startBytes,end:endBytes,count:totalChunks,blob:blob,size:endBytes-startBytes};},_getChunkDataForCallback:function(chunkData){return{partIndex:chunkData.part,startByte:chunkData.start+1,endByte:chunkData.end,totalParts:chunkData.count};},_getLocalStorageId:function(id){var formatVersion="5.0",name=getName(id),size=getSize(id),chunkSize=chunking.partSize,endpoint=getEndpoint(id);return qq.format("qq{}resume{}-{}-{}-{}-{}",namespace,formatVersion,name,size,chunkSize,endpoint);},_getMimeType:function(id){return handler.getFile(id).type;},_getPersistableData:function(id){return handler._getFileState(id).chunking;},_getTotalChunks:function(id){if(chunking){var fileSize=getSize(id),chunkSize=chunking.partSize;return Math.ceil(fileSize/chunkSize);}},_getXhr:function(id,optChunkIdx){var chunkIdx=optChunkIdx==null?-1:optChunkIdx;return handler._getFileState(id).temp.xhrs[chunkIdx];},_getXhrs:function(id){return handler._getFileState(id).temp.xhrs;},_iterateResumeRecords:function(callback){if(resumeEnabled){qq.each(localStorage,function(key,item){if(key.indexOf(qq.format("qq{}resume",namespace))===0){var uploadData=JSON.parse(item);callback(key,uploadData);}});}},_initTempState:function(id){handler._getFileState(id).temp={ajaxRequesters:{},chunkProgress:{},xhrs:{},cachedChunks:{}};},_markNotResumable:function(id){handler._getFileState(id).notResumable=true;},_maybeDeletePersistedChunkData:function(id){var localStorageId;if(resumeEnabled&&handler.isResumable(id)){localStorageId=handler._getLocalStorageId(id);if(localStorageId&&localStorage.getItem(localStorageId)){localStorage.removeItem(localStorageId);return true;}}
return false;},_maybePrepareForResume:function(id){var state=handler._getFileState(id),localStorageId,persistedData;if(resumeEnabled&&state.key===undefined){localStorageId=handler._getLocalStorageId(id);persistedData=localStorage.getItem(localStorageId);if(persistedData){persistedData=JSON.parse(persistedData);if(getDataByUuid(persistedData.uuid)){handler._markNotResumable(id);}
else{log(qq.format("Identified file with ID {} and name of {} as resumable.",id,getName(id)));onUuidChanged(id,persistedData.uuid);state.key=persistedData.key;state.chunking=persistedData.chunking;state.loaded=persistedData.loaded;state.attemptingResume=true;handler.moveInProgressToRemaining(id);}}}},_maybePersistChunkedState:function(id){var state=handler._getFileState(id),localStorageId,persistedData;if(resumeEnabled&&handler.isResumable(id)){localStorageId=handler._getLocalStorageId(id);persistedData={name:getName(id),size:getSize(id),uuid:getUuid(id),key:state.key,chunking:state.chunking,loaded:state.loaded,lastUpdated:Date.now()};try{localStorage.setItem(localStorageId,JSON.stringify(persistedData));}
catch(error){log(qq.format("Unable to save resume data for '{}' due to error: '{}'.",id,error.toString()),"warn");}}},_registerProgressHandler:function(id,chunkIdx,chunkSize){var xhr=handler._getXhr(id,chunkIdx),name=getName(id),progressCalculator={simple:function(loaded,total){var fileSize=getSize(id);if(loaded===total){onProgress(id,name,fileSize,fileSize);}
else{onProgress(id,name,(loaded>=fileSize?fileSize-1:loaded),fileSize);}},chunked:function(loaded,total){var chunkProgress=handler._getFileState(id).temp.chunkProgress,totalSuccessfullyLoadedForFile=handler._getFileState(id).loaded,loadedForRequest=loaded,totalForRequest=total,totalFileSize=getSize(id),estActualChunkLoaded=loadedForRequest-(totalForRequest-chunkSize),totalLoadedForFile=totalSuccessfullyLoadedForFile;chunkProgress[chunkIdx]=estActualChunkLoaded;qq.each(chunkProgress,function(chunkIdx,chunkLoaded){totalLoadedForFile+=chunkLoaded;});onProgress(id,name,totalLoadedForFile,totalFileSize);}};xhr.upload.onprogress=function(e){if(e.lengthComputable){var type=chunkSize==null?"simple":"chunked";progressCalculator[type](e.loaded,e.total);}};},_registerXhr:function(id,optChunkIdx,xhr,optAjaxRequester){var xhrsId=optChunkIdx==null?-1:optChunkIdx,tempState=handler._getFileState(id).temp;tempState.xhrs=tempState.xhrs||{};tempState.ajaxRequesters=tempState.ajaxRequesters||{};tempState.xhrs[xhrsId]=xhr;if(optAjaxRequester){tempState.ajaxRequesters[xhrsId]=optAjaxRequester;}
return xhr;},_removeExpiredChunkingRecords:function(){var expirationDays=resume.recordsExpireIn;handler._iterateResumeRecords(function(key,uploadData){var expirationDate=new Date(uploadData.lastUpdated);expirationDate.setDate(expirationDate.getDate()+expirationDays);if(expirationDate.getTime()<=Date.now()){log("Removing expired resume record with key "+key);localStorage.removeItem(key);}});},_shouldChunkThisFile:function(id){var state=handler._getFileState(id);if(!state.chunking){handler.reevaluateChunking(id);}
return state.chunking.enabled;}});};qq.WindowReceiveMessage=function(o){"use strict";var options={log:function(message,level){}},callbackWrapperDetachers={};qq.extend(options,o);qq.extend(this,{receiveMessage:function(id,callback){var onMessageCallbackWrapper=function(event){callback(event.data);};if(window.postMessage){callbackWrapperDetachers[id]=qq(window).attach("message",onMessageCallbackWrapper);}
else{log("iframe message passing not supported in this browser!","error");}},stopReceivingMessages:function(id){if(window.postMessage){var detacher=callbackWrapperDetachers[id];if(detacher){detacher();}}}});};(function(){"use strict";qq.uiPublicApi={clearStoredFiles:function(){this._parent.prototype.clearStoredFiles.apply(this,arguments);this._templating.clearFiles();},addExtraDropzone:function(element){this._dnd&&this._dnd.setupExtraDropzone(element);},removeExtraDropzone:function(element){if(this._dnd){return this._dnd.removeDropzone(element);}},getItemByFileId:function(id){if(!this._templating.isHiddenForever(id)){return this._templating.getFileContainer(id);}},reset:function(){this._parent.prototype.reset.apply(this,arguments);this._templating.reset();if(!this._options.button&&this._templating.getButton()){this._defaultButtonId=this._createUploadButton({element:this._templating.getButton()}).getButtonId();}
if(this._dnd){this._dnd.dispose();this._dnd=this._setupDragAndDrop();}
this._totalFilesInBatch=0;this._filesInBatchAddedToUi=0;this._setupClickAndEditEventHandlers();},setName:function(id,newName){var formattedFilename=this._options.formatFileName(newName);this._parent.prototype.setName.apply(this,arguments);this._templating.updateFilename(id,formattedFilename);},pauseUpload:function(id){var paused=this._parent.prototype.pauseUpload.apply(this,arguments);paused&&this._templating.uploadPaused(id);return paused;},continueUpload:function(id){var continued=this._parent.prototype.continueUpload.apply(this,arguments);continued&&this._templating.uploadContinued(id);return continued;},getId:function(fileContainerOrChildEl){return this._templating.getFileId(fileContainerOrChildEl);},getDropTarget:function(fileId){var file=this.getFile(fileId);return file.qqDropTarget;}};qq.uiPrivateApi={_getButton:function(buttonId){var button=this._parent.prototype._getButton.apply(this,arguments);if(!button){if(buttonId===this._defaultButtonId){button=this._templating.getButton();}}
return button;},_removeFileItem:function(fileId){this._templating.removeFile(fileId);},_setupClickAndEditEventHandlers:function(){this._fileButtonsClickHandler=qq.FileButtonsClickHandler&&this._bindFileButtonsClickEvent();this._focusinEventSupported=!qq.firefox();if(this._isEditFilenameEnabled())
{this._filenameClickHandler=this._bindFilenameClickEvent();this._filenameInputFocusInHandler=this._bindFilenameInputFocusInEvent();this._filenameInputFocusHandler=this._bindFilenameInputFocusEvent();}},_setupDragAndDrop:function(){var self=this,dropZoneElements=this._options.dragAndDrop.extraDropzones,templating=this._templating,defaultDropZone=templating.getDropZone();defaultDropZone&&dropZoneElements.push(defaultDropZone);return new qq.DragAndDrop({dropZoneElements:dropZoneElements,allowMultipleItems:this._options.multiple,classes:{dropActive:this._options.classes.dropActive},callbacks:{processingDroppedFiles:function(){templating.showDropProcessing();},processingDroppedFilesComplete:function(files,targetEl){templating.hideDropProcessing();qq.each(files,function(idx,file){file.qqDropTarget=targetEl;});if(files.length){self.addFiles(files,null,null);}},dropError:function(code,errorData){self._itemError(code,errorData);},dropLog:function(message,level){self.log(message,level);}}});},_bindFileButtonsClickEvent:function(){var self=this;return new qq.FileButtonsClickHandler({templating:this._templating,log:function(message,lvl){self.log(message,lvl);},onDeleteFile:function(fileId){self.deleteFile(fileId);},onCancel:function(fileId){self.cancel(fileId);},onRetry:function(fileId){self.retry(fileId);},onPause:function(fileId){self.pauseUpload(fileId);},onContinue:function(fileId){self.continueUpload(fileId);},onGetName:function(fileId){return self.getName(fileId);}});},_isEditFilenameEnabled:function(){return this._templating.isEditFilenamePossible()&&!this._options.autoUpload&&qq.FilenameClickHandler&&qq.FilenameInputFocusHandler&&qq.FilenameInputFocusHandler;},_filenameEditHandler:function(){var self=this,templating=this._templating;return{templating:templating,log:function(message,lvl){self.log(message,lvl);},onGetUploadStatus:function(fileId){return self.getUploads({id:fileId}).status;},onGetName:function(fileId){return self.getName(fileId);},onSetName:function(id,newName){self.setName(id,newName);},onEditingStatusChange:function(id,isEditing){var qqInput=qq(templating.getEditInput(id)),qqFileContainer=qq(templating.getFileContainer(id));if(isEditing){qqInput.addClass("qq-editing");templating.hideFilename(id);templating.hideEditIcon(id);}
else{qqInput.removeClass("qq-editing");templating.showFilename(id);templating.showEditIcon(id);}
qqFileContainer.addClass("qq-temp").removeClass("qq-temp");}};},_onUploadStatusChange:function(id,oldStatus,newStatus){this._parent.prototype._onUploadStatusChange.apply(this,arguments);if(this._isEditFilenameEnabled()){if(this._templating.getFileContainer(id)&&newStatus!==qq.status.SUBMITTED){this._templating.markFilenameEditable(id);this._templating.hideEditIcon(id);}}
if(newStatus===qq.status.UPLOAD_RETRYING){this._templating.hideRetry(id);this._templating.setStatusText(id);qq(this._templating.getFileContainer(id)).removeClass(this._classes.retrying);}
else if(newStatus===qq.status.UPLOAD_FAILED){this._templating.hidePause(id);}},_bindFilenameInputFocusInEvent:function(){var spec=qq.extend({},this._filenameEditHandler());return new qq.FilenameInputFocusInHandler(spec);},_bindFilenameInputFocusEvent:function(){var spec=qq.extend({},this._filenameEditHandler());return new qq.FilenameInputFocusHandler(spec);},_bindFilenameClickEvent:function(){var spec=qq.extend({},this._filenameEditHandler());return new qq.FilenameClickHandler(spec);},_storeForLater:function(id){this._parent.prototype._storeForLater.apply(this,arguments);this._templating.hideSpinner(id);},_onAllComplete:function(successful,failed){this._parent.prototype._onAllComplete.apply(this,arguments);this._templating.resetTotalProgress();},_onSubmit:function(id,name){var file=this.getFile(id);if(file&&file.qqPath&&this._options.dragAndDrop.reportDirectoryPaths){this._paramsStore.addReadOnly(id,{qqpath:file.qqPath});}
this._parent.prototype._onSubmit.apply(this,arguments);this._addToList(id,name);},_onSubmitted:function(id){if(this._isEditFilenameEnabled()){this._templating.markFilenameEditable(id);this._templating.showEditIcon(id);if(!this._focusinEventSupported){this._filenameInputFocusHandler.addHandler(this._templating.getEditInput(id));}}},_onProgress:function(id,name,loaded,total){this._parent.prototype._onProgress.apply(this,arguments);this._templating.updateProgress(id,loaded,total);if(Math.round(loaded/total*100)===100){this._templating.hideCancel(id);this._templating.hidePause(id);this._templating.hideProgress(id);this._templating.setStatusText(id,this._options.text.waitingForResponse);this._displayFileSize(id);}
else{this._displayFileSize(id,loaded,total);}},_onTotalProgress:function(loaded,total){this._parent.prototype._onTotalProgress.apply(this,arguments);this._templating.updateTotalProgress(loaded,total);},_onComplete:function(id,name,result,xhr){var parentRetVal=this._parent.prototype._onComplete.apply(this,arguments),templating=this._templating,fileContainer=templating.getFileContainer(id),self=this;function completeUpload(result){if(!fileContainer){return;}
templating.setStatusText(id);qq(fileContainer).removeClass(self._classes.retrying);templating.hideProgress(id);if(self.getUploads({id:id}).status!==qq.status.UPLOAD_FAILED){templating.hideCancel(id);}
templating.hideSpinner(id);if(result.success){self._markFileAsSuccessful(id);}
else{qq(fileContainer).addClass(self._classes.fail);templating.showCancel(id);if(templating.isRetryPossible()&&!self._preventRetries[id]){qq(fileContainer).addClass(self._classes.retryable);templating.showRetry(id);}
self._controlFailureTextDisplay(id,result);}}
if(parentRetVal instanceof qq.Promise){parentRetVal.done(function(newResult){completeUpload(newResult);});}
else{completeUpload(result);}
return parentRetVal;},_markFileAsSuccessful:function(id){var templating=this._templating;if(this._isDeletePossible()){templating.showDeleteButton(id);}
qq(templating.getFileContainer(id)).addClass(this._classes.success);this._maybeUpdateThumbnail(id);},_onUploadPrep:function(id){this._parent.prototype._onUploadPrep.apply(this,arguments);this._templating.showSpinner(id);},_onUpload:function(id,name){var parentRetVal=this._parent.prototype._onUpload.apply(this,arguments);this._templating.showSpinner(id);return parentRetVal;},_onUploadChunk:function(id,chunkData){this._parent.prototype._onUploadChunk.apply(this,arguments);if(chunkData.partIndex>0&&this._handler.isResumable(id)){this._templating.allowPause(id);}},_onCancel:function(id,name){this._parent.prototype._onCancel.apply(this,arguments);this._removeFileItem(id);if(this._getNotFinished()===0){this._templating.resetTotalProgress();}},_onBeforeAutoRetry:function(id){var retryNumForDisplay,maxAuto,retryNote;this._parent.prototype._onBeforeAutoRetry.apply(this,arguments);this._showCancelLink(id);if(this._options.retry.showAutoRetryNote){retryNumForDisplay=this._autoRetries[id];maxAuto=this._options.retry.maxAutoAttempts;retryNote=this._options.retry.autoRetryNote.replace(/\{retryNum\}/g,retryNumForDisplay);retryNote=retryNote.replace(/\{maxAuto\}/g,maxAuto);this._templating.setStatusText(id,retryNote);qq(this._templating.getFileContainer(id)).addClass(this._classes.retrying);}},_onBeforeManualRetry:function(id){if(this._parent.prototype._onBeforeManualRetry.apply(this,arguments)){this._templating.resetProgress(id);qq(this._templating.getFileContainer(id)).removeClass(this._classes.fail);this._templating.setStatusText(id);this._templating.showSpinner(id);this._showCancelLink(id);return true;}
else{qq(this._templating.getFileContainer(id)).addClass(this._classes.retryable);this._templating.showRetry(id);return false;}},_onSubmitDelete:function(id){var onSuccessCallback=qq.bind(this._onSubmitDeleteSuccess,this);this._parent.prototype._onSubmitDelete.call(this,id,onSuccessCallback);},_onSubmitDeleteSuccess:function(id,uuid,additionalMandatedParams){if(this._options.deleteFile.forceConfirm){this._showDeleteConfirm.apply(this,arguments);}
else{this._sendDeleteRequest.apply(this,arguments);}},_onDeleteComplete:function(id,xhr,isError){this._parent.prototype._onDeleteComplete.apply(this,arguments);this._templating.hideSpinner(id);if(isError){this._templating.setStatusText(id,this._options.deleteFile.deletingFailedText);this._templating.showDeleteButton(id);}
else{this._removeFileItem(id);}},_sendDeleteRequest:function(id,uuid,additionalMandatedParams){this._templating.hideDeleteButton(id);this._templating.showSpinner(id);this._templating.setStatusText(id,this._options.deleteFile.deletingStatusText);this._deleteHandler.sendDelete.apply(this,arguments);},_showDeleteConfirm:function(id,uuid,mandatedParams){var fileName=this.getName(id),confirmMessage=this._options.deleteFile.confirmMessage.replace(/\{filename\}/g,fileName),uuid=this.getUuid(id),deleteRequestArgs=arguments,self=this,retVal;retVal=this._options.showConfirm(confirmMessage);if(qq.isGenericPromise(retVal)){retVal.then(function(){self._sendDeleteRequest.apply(self,deleteRequestArgs);});}
else if(retVal!==false){self._sendDeleteRequest.apply(self,deleteRequestArgs);}},_addToList:function(id,name,canned){var prependData,prependIndex=0,dontDisplay=this._handler.isProxied(id)&&this._options.scaling.hideScaled,record;if(this._options.display.prependFiles){if(this._totalFilesInBatch>1&&this._filesInBatchAddedToUi>0){prependIndex=this._filesInBatchAddedToUi-1;}
prependData={index:prependIndex};}
if(!canned){if(this._options.disableCancelForFormUploads&&!qq.supportedFeatures.ajaxUploading){this._templating.disableCancel();}
if(!this._options.multiple){record=this.getUploads({id:id});this._handledProxyGroup=this._handledProxyGroup||record.proxyGroupId;if(record.proxyGroupId!==this._handledProxyGroup||!record.proxyGroupId){this._handler.cancelAll();this._clearList();this._handledProxyGroup=null;}}}
if(canned){this._templating.addFileToCache(id,this._options.formatFileName(name),prependData,dontDisplay);this._thumbnailUrls[id]&&this._templating.updateThumbnail(id,this._thumbnailUrls[id],true);}
else{this._templating.addFile(id,this._options.formatFileName(name),prependData,dontDisplay);this._templating.generatePreview(id,this.getFile(id));}
this._filesInBatchAddedToUi+=1;if(canned||(this._options.display.fileSizeOnSubmit&&qq.supportedFeatures.ajaxUploading)){this._displayFileSize(id);}},_clearList:function(){this._templating.clearFiles();this.clearStoredFiles();},_displayFileSize:function(id,loadedSize,totalSize){var size=this.getSize(id),sizeForDisplay=this._formatSize(size);if(size>=0){if(loadedSize!==undefined&&totalSize!==undefined){sizeForDisplay=this._formatProgress(loadedSize,totalSize);}
this._templating.updateSize(id,sizeForDisplay);}},_formatProgress:function(uploadedSize,totalSize){var message=this._options.text.formatProgress;function r(name,replacement){message=message.replace(name,replacement);}
r("{percent}",Math.round(uploadedSize/totalSize*100));r("{total_size}",this._formatSize(totalSize));return message;},_controlFailureTextDisplay:function(id,response){var mode,responseProperty,failureReason;mode=this._options.failedUploadTextDisplay.mode;responseProperty=this._options.failedUploadTextDisplay.responseProperty;if(mode==="custom"){failureReason=response[responseProperty];if(!failureReason){failureReason=this._options.text.failUpload;}
this._templating.setStatusText(id,failureReason);if(this._options.failedUploadTextDisplay.enableTooltip){this._showTooltip(id,failureReason);}}
else if(mode==="default"){this._templating.setStatusText(id,this._options.text.failUpload);}
else if(mode!=="none"){this.log("failedUploadTextDisplay.mode value of '"+mode+"' is not valid","warn");}},_showTooltip:function(id,text){this._templating.getFileContainer(id).title=text;},_showCancelLink:function(id){if(!this._options.disableCancelForFormUploads||qq.supportedFeatures.ajaxUploading){this._templating.showCancel(id);}},_itemError:function(code,name,item){var message=this._parent.prototype._itemError.apply(this,arguments);this._options.showMessage(message);},_batchError:function(message){this._parent.prototype._batchError.apply(this,arguments);this._options.showMessage(message);},_setupPastePrompt:function(){var self=this;this._options.callbacks.onPasteReceived=function(){var message=self._options.paste.namePromptMessage,defaultVal=self._options.paste.defaultName;return self._options.showPrompt(message,defaultVal);};},_fileOrBlobRejected:function(id,name){this._totalFilesInBatch-=1;this._parent.prototype._fileOrBlobRejected.apply(this,arguments);},_prepareItemsForUpload:function(items,params,endpoint){this._totalFilesInBatch=items.length;this._filesInBatchAddedToUi=0;this._parent.prototype._prepareItemsForUpload.apply(this,arguments);},_maybeUpdateThumbnail:function(fileId){var thumbnailUrl=this._thumbnailUrls[fileId],fileStatus=this.getUploads({id:fileId}).status;if(fileStatus!==qq.status.DELETED&&(thumbnailUrl||this._options.thumbnails.placeholders.waitUntilResponse||!qq.supportedFeatures.imagePreviews)){this._templating.updateThumbnail(fileId,thumbnailUrl);}},_addCannedFile:function(sessionData){var id=this._parent.prototype._addCannedFile.apply(this,arguments);this._addToList(id,this.getName(id),true);this._templating.hideSpinner(id);this._templating.hideCancel(id);this._markFileAsSuccessful(id);return id;},_setSize:function(id,newSize){this._parent.prototype._setSize.apply(this,arguments);this._templating.updateSize(id,this._formatSize(newSize));},_sessionRequestComplete:function(){this._templating.addCacheToDom();this._parent.prototype._sessionRequestComplete.apply(this,arguments);}};}());qq.FineUploader=function(o,namespace){"use strict";var self=this;this._parent=namespace?qq[namespace].FineUploaderBasic:qq.FineUploaderBasic;this._parent.apply(this,arguments);qq.extend(this._options,{element:null,button:null,listElement:null,dragAndDrop:{extraDropzones:[],reportDirectoryPaths:false},text:{formatProgress:"{percent}% of {total_size}",failUpload:"Upload failed",waitingForResponse:"Processing...",paused:"Paused"},template:"qq-template",classes:{retrying:"qq-upload-retrying",retryable:"qq-upload-retryable",success:"qq-upload-success",fail:"qq-upload-fail",editable:"qq-editable",hide:"qq-hide",dropActive:"qq-upload-drop-area-active"},failedUploadTextDisplay:{mode:"default",responseProperty:"error",enableTooltip:true},messages:{tooManyFilesError:"You may only drop one file",unsupportedBrowser:"Unrecoverable error - this browser does not permit file uploading of any kind."},retry:{showAutoRetryNote:true,autoRetryNote:"Retrying {retryNum}/{maxAuto}..."},deleteFile:{forceConfirm:false,confirmMessage:"Are you sure you want to delete {filename}?",deletingStatusText:"Deleting...",deletingFailedText:"Delete failed"},display:{fileSizeOnSubmit:false,prependFiles:false},paste:{promptForName:false,namePromptMessage:"Please name this image"},thumbnails:{maxCount:0,placeholders:{waitUntilResponse:false,notAvailablePath:null,waitingPath:null},timeBetweenThumbs:750},scaling:{hideScaled:false},showMessage:function(message){if(self._templating.hasDialog("alert")){return self._templating.showDialog("alert",message);}
else{setTimeout(function(){window.alert(message);},0);}},showConfirm:function(message){if(self._templating.hasDialog("confirm")){return self._templating.showDialog("confirm",message);}
else{return window.confirm(message);}},showPrompt:function(message,defaultValue){if(self._templating.hasDialog("prompt")){return self._templating.showDialog("prompt",message,defaultValue);}
else{return window.prompt(message,defaultValue);}}},true);qq.extend(this._options,o,true);this._templating=new qq.Templating({log:qq.bind(this.log,this),templateIdOrEl:this._options.template,containerEl:this._options.element,fileContainerEl:this._options.listElement,button:this._options.button,imageGenerator:this._imageGenerator,classes:{hide:this._options.classes.hide,editable:this._options.classes.editable},limits:{maxThumbs:this._options.thumbnails.maxCount,timeBetweenThumbs:this._options.thumbnails.timeBetweenThumbs},placeholders:{waitUntilUpdate:this._options.thumbnails.placeholders.waitUntilResponse,thumbnailNotAvailable:this._options.thumbnails.placeholders.notAvailablePath,waitingForThumbnail:this._options.thumbnails.placeholders.waitingPath},text:this._options.text});if(this._options.workarounds.ios8SafariUploads&&qq.ios800()&&qq.iosSafari()){this._templating.renderFailure(this._options.messages.unsupportedBrowserIos8Safari);}
else if(!qq.supportedFeatures.uploading||(this._options.cors.expected&&!qq.supportedFeatures.uploadCors)){this._templating.renderFailure(this._options.messages.unsupportedBrowser);}
else{this._wrapCallbacks();this._templating.render();this._classes=this._options.classes;if(!this._options.button&&this._templating.getButton()){this._defaultButtonId=this._createUploadButton({element:this._templating.getButton()}).getButtonId();}
this._setupClickAndEditEventHandlers();if(qq.DragAndDrop&&qq.supportedFeatures.fileDrop){this._dnd=this._setupDragAndDrop();}
if(this._options.paste.targetElement&&this._options.paste.promptForName){if(qq.PasteSupport){this._setupPastePrompt();}
else{this.log("Paste support module not found.","error");}}
this._totalFilesInBatch=0;this._filesInBatchAddedToUi=0;}};qq.extend(qq.FineUploader.prototype,qq.basePublicApi);qq.extend(qq.FineUploader.prototype,qq.basePrivateApi);qq.extend(qq.FineUploader.prototype,qq.uiPublicApi);qq.extend(qq.FineUploader.prototype,qq.uiPrivateApi);qq.Templating=function(spec){"use strict";var FILE_ID_ATTR="qq-file-id",FILE_CLASS_PREFIX="qq-file-id-",THUMBNAIL_MAX_SIZE_ATTR="qq-max-size",THUMBNAIL_SERVER_SCALE_ATTR="qq-server-scale",HIDE_DROPZONE_ATTR="qq-hide-dropzone",DROPZPONE_TEXT_ATTR="qq-drop-area-text",IN_PROGRESS_CLASS="qq-in-progress",HIDDEN_FOREVER_CLASS="qq-hidden-forever",fileBatch={content:document.createDocumentFragment(),map:{}},isCancelDisabled=false,generatedThumbnails=0,thumbnailQueueMonitorRunning=false,thumbGenerationQueue=[],thumbnailMaxSize=-1,options={log:null,limits:{maxThumbs:0,timeBetweenThumbs:750},templateIdOrEl:"qq-template",containerEl:null,fileContainerEl:null,button:null,imageGenerator:null,classes:{hide:"qq-hide",editable:"qq-editable"},placeholders:{waitUntilUpdate:false,thumbnailNotAvailable:null,waitingForThumbnail:null},text:{paused:"Paused"}},selectorClasses={button:"qq-upload-button-selector",alertDialog:"qq-alert-dialog-selector",dialogCancelButton:"qq-cancel-button-selector",confirmDialog:"qq-confirm-dialog-selector",dialogMessage:"qq-dialog-message-selector",dialogOkButton:"qq-ok-button-selector",promptDialog:"qq-prompt-dialog-selector",uploader:"qq-uploader-selector",drop:"qq-upload-drop-area-selector",list:"qq-upload-list-selector",progressBarContainer:"qq-progress-bar-container-selector",progressBar:"qq-progress-bar-selector",totalProgressBarContainer:"qq-total-progress-bar-container-selector",totalProgressBar:"qq-total-progress-bar-selector",file:"qq-upload-file-selector",spinner:"qq-upload-spinner-selector",size:"qq-upload-size-selector",cancel:"qq-upload-cancel-selector",pause:"qq-upload-pause-selector",continueButton:"qq-upload-continue-selector",deleteButton:"qq-upload-delete-selector",retry:"qq-upload-retry-selector",statusText:"qq-upload-status-text-selector",editFilenameInput:"qq-edit-filename-selector",editNameIcon:"qq-edit-filename-icon-selector",dropText:"qq-upload-drop-area-text-selector",dropProcessing:"qq-drop-processing-selector",dropProcessingSpinner:"qq-drop-processing-spinner-selector",thumbnail:"qq-thumbnail-selector"},previewGeneration={},cachedThumbnailNotAvailableImg=new qq.Promise(),cachedWaitingForThumbnailImg=new qq.Promise(),log,isEditElementsExist,isRetryElementExist,templateHtml,container,fileList,showThumbnails,serverScale,cacheThumbnailPlaceholders=function(){var notAvailableUrl=options.placeholders.thumbnailNotAvailable,waitingUrl=options.placeholders.waitingForThumbnail,spec={maxSize:thumbnailMaxSize,scale:serverScale};if(showThumbnails){if(notAvailableUrl){options.imageGenerator.generate(notAvailableUrl,new Image(),spec).then(function(updatedImg){cachedThumbnailNotAvailableImg.success(updatedImg);},function(){cachedThumbnailNotAvailableImg.failure();log("Problem loading 'not available' placeholder image at "+notAvailableUrl,"error");});}
else{cachedThumbnailNotAvailableImg.failure();}
if(waitingUrl){options.imageGenerator.generate(waitingUrl,new Image(),spec).then(function(updatedImg){cachedWaitingForThumbnailImg.success(updatedImg);},function(){cachedWaitingForThumbnailImg.failure();log("Problem loading 'waiting for thumbnail' placeholder image at "+waitingUrl,"error");});}
else{cachedWaitingForThumbnailImg.failure();}}},displayWaitingImg=function(thumbnail){var waitingImgPlacement=new qq.Promise();cachedWaitingForThumbnailImg.then(function(img){maybeScalePlaceholderViaCss(img,thumbnail);if(!thumbnail.src){thumbnail.src=img.src;thumbnail.onload=function(){thumbnail.onload=null;show(thumbnail);waitingImgPlacement.success();};}
else{waitingImgPlacement.success();}},function(){hide(thumbnail);waitingImgPlacement.success();});return waitingImgPlacement;},generateNewPreview=function(id,blob,spec){var thumbnail=getThumbnail(id);log("Generating new thumbnail for "+id);blob.qqThumbnailId=id;return options.imageGenerator.generate(blob,thumbnail,spec).then(function(){generatedThumbnails++;show(thumbnail);previewGeneration[id].success();},function(){previewGeneration[id].failure();if(!options.placeholders.waitUntilUpdate){maybeSetDisplayNotAvailableImg(id,thumbnail);}});},generateNextQueuedPreview=function(){if(thumbGenerationQueue.length){thumbnailQueueMonitorRunning=true;var queuedThumbRequest=thumbGenerationQueue.shift();if(queuedThumbRequest.update){processUpdateQueuedPreviewRequest(queuedThumbRequest);}
else{processNewQueuedPreviewRequest(queuedThumbRequest);}}
else{thumbnailQueueMonitorRunning=false;}},getCancel=function(id){return getTemplateEl(getFile(id),selectorClasses.cancel);},getContinue=function(id){return getTemplateEl(getFile(id),selectorClasses.continueButton);},getDialog=function(type){return getTemplateEl(container,selectorClasses[type+"Dialog"]);},getDelete=function(id){return getTemplateEl(getFile(id),selectorClasses.deleteButton);},getDropProcessing=function(){return getTemplateEl(container,selectorClasses.dropProcessing);},getEditIcon=function(id){return getTemplateEl(getFile(id),selectorClasses.editNameIcon);},getFile=function(id){return fileBatch.map[id]||qq(fileList).getFirstByClass(FILE_CLASS_PREFIX+id);},getFilename=function(id){return getTemplateEl(getFile(id),selectorClasses.file);},getPause=function(id){return getTemplateEl(getFile(id),selectorClasses.pause);},getProgress=function(id){if(id==null){return getTemplateEl(container,selectorClasses.totalProgressBarContainer)||getTemplateEl(container,selectorClasses.totalProgressBar);}
return getTemplateEl(getFile(id),selectorClasses.progressBarContainer)||getTemplateEl(getFile(id),selectorClasses.progressBar);},getRetry=function(id){return getTemplateEl(getFile(id),selectorClasses.retry);},getSize=function(id){return getTemplateEl(getFile(id),selectorClasses.size);},getSpinner=function(id){return getTemplateEl(getFile(id),selectorClasses.spinner);},getTemplateEl=function(context,cssClass){return context&&qq(context).getFirstByClass(cssClass);},getThumbnail=function(id){return showThumbnails&&getTemplateEl(getFile(id),selectorClasses.thumbnail);},hide=function(el){el&&qq(el).addClass(options.classes.hide);},maybeScalePlaceholderViaCss=function(placeholder,thumbnail){var maxWidth=placeholder.style.maxWidth,maxHeight=placeholder.style.maxHeight;if(maxHeight&&maxWidth&&!thumbnail.style.maxWidth&&!thumbnail.style.maxHeight){qq(thumbnail).css({maxWidth:maxWidth,maxHeight:maxHeight});}},maybeSetDisplayNotAvailableImg=function(id,thumbnail){var previewing=previewGeneration[id]||new qq.Promise().failure(),notAvailableImgPlacement=new qq.Promise();cachedThumbnailNotAvailableImg.then(function(img){previewing.then(function(){notAvailableImgPlacement.success();},function(){maybeScalePlaceholderViaCss(img,thumbnail);thumbnail.onload=function(){thumbnail.onload=null;notAvailableImgPlacement.success();};thumbnail.src=img.src;show(thumbnail);});});return notAvailableImgPlacement;},parseAndGetTemplate=function(){var scriptEl,scriptHtml,fileListNode,tempTemplateEl,fileListHtml,defaultButton,dropArea,thumbnail,dropProcessing,dropTextEl,uploaderEl;log("Parsing template");if(options.templateIdOrEl==null){throw new Error("You MUST specify either a template element or ID!");}
if(qq.isString(options.templateIdOrEl)){scriptEl=document.getElementById(options.templateIdOrEl);if(scriptEl===null){throw new Error(qq.format("Cannot find template script at ID '{}'!",options.templateIdOrEl));}
scriptHtml=scriptEl.innerHTML;}
else{if(options.templateIdOrEl.innerHTML===undefined){throw new Error("You have specified an invalid value for the template option!  "+"It must be an ID or an Element.");}
scriptHtml=options.templateIdOrEl.innerHTML;}
scriptHtml=qq.trimStr(scriptHtml);tempTemplateEl=document.createElement("div");tempTemplateEl.appendChild(qq.toElement(scriptHtml));uploaderEl=qq(tempTemplateEl).getFirstByClass(selectorClasses.uploader);if(options.button){defaultButton=qq(tempTemplateEl).getFirstByClass(selectorClasses.button);if(defaultButton){qq(defaultButton).remove();}}
if(!qq.DragAndDrop||!qq.supportedFeatures.fileDrop){dropProcessing=qq(tempTemplateEl).getFirstByClass(selectorClasses.dropProcessing);if(dropProcessing){qq(dropProcessing).remove();}}
dropArea=qq(tempTemplateEl).getFirstByClass(selectorClasses.drop);if(dropArea&&!qq.DragAndDrop){log("DnD module unavailable.","info");qq(dropArea).remove();}
if(!qq.supportedFeatures.fileDrop){uploaderEl.removeAttribute(DROPZPONE_TEXT_ATTR);if(dropArea&&qq(dropArea).hasAttribute(HIDE_DROPZONE_ATTR)){qq(dropArea).css({display:"none"});}}
else if(qq(uploaderEl).hasAttribute(DROPZPONE_TEXT_ATTR)&&dropArea){dropTextEl=qq(dropArea).getFirstByClass(selectorClasses.dropText);dropTextEl&&qq(dropTextEl).remove();}
thumbnail=qq(tempTemplateEl).getFirstByClass(selectorClasses.thumbnail);if(!showThumbnails){thumbnail&&qq(thumbnail).remove();}
else if(thumbnail){thumbnailMaxSize=parseInt(thumbnail.getAttribute(THUMBNAIL_MAX_SIZE_ATTR));thumbnailMaxSize=thumbnailMaxSize>0?thumbnailMaxSize:null;serverScale=qq(thumbnail).hasAttribute(THUMBNAIL_SERVER_SCALE_ATTR);}
showThumbnails=showThumbnails&&thumbnail;isEditElementsExist=qq(tempTemplateEl).getByClass(selectorClasses.editFilenameInput).length>0;isRetryElementExist=qq(tempTemplateEl).getByClass(selectorClasses.retry).length>0;fileListNode=qq(tempTemplateEl).getFirstByClass(selectorClasses.list);if(fileListNode==null){throw new Error("Could not find the file list container in the template!");}
fileListHtml=fileListNode.innerHTML;fileListNode.innerHTML="";if(tempTemplateEl.getElementsByTagName("DIALOG").length){document.createElement("dialog");}
log("Template parsing complete");return{template:qq.trimStr(tempTemplateEl.innerHTML),fileTemplate:qq.trimStr(fileListHtml)};},prependFile=function(el,index,fileList){var parentEl=fileList,beforeEl=parentEl.firstChild;if(index>0){beforeEl=qq(parentEl).children()[index].nextSibling;}
parentEl.insertBefore(el,beforeEl);},processNewQueuedPreviewRequest=function(queuedThumbRequest){var id=queuedThumbRequest.id,optFileOrBlob=queuedThumbRequest.optFileOrBlob,relatedThumbnailId=optFileOrBlob&&optFileOrBlob.qqThumbnailId,thumbnail=getThumbnail(id),spec={maxSize:thumbnailMaxSize,scale:true,orient:true};if(qq.supportedFeatures.imagePreviews){if(thumbnail){if(options.limits.maxThumbs&&options.limits.maxThumbs<=generatedThumbnails){maybeSetDisplayNotAvailableImg(id,thumbnail);generateNextQueuedPreview();}
else{displayWaitingImg(thumbnail).done(function(){previewGeneration[id]=new qq.Promise();previewGeneration[id].done(function(){setTimeout(generateNextQueuedPreview,options.limits.timeBetweenThumbs);});if(relatedThumbnailId!=null){useCachedPreview(id,relatedThumbnailId);}
else{generateNewPreview(id,optFileOrBlob,spec);}});}}
else{generateNextQueuedPreview();}}
else if(thumbnail){displayWaitingImg(thumbnail);generateNextQueuedPreview();}},processUpdateQueuedPreviewRequest=function(queuedThumbRequest){var id=queuedThumbRequest.id,thumbnailUrl=queuedThumbRequest.thumbnailUrl,showWaitingImg=queuedThumbRequest.showWaitingImg,thumbnail=getThumbnail(id),spec={maxSize:thumbnailMaxSize,scale:serverScale};if(thumbnail){if(thumbnailUrl){if(options.limits.maxThumbs&&options.limits.maxThumbs<=generatedThumbnails){maybeSetDisplayNotAvailableImg(id,thumbnail);generateNextQueuedPreview();}
else{if(showWaitingImg){displayWaitingImg(thumbnail);}
return options.imageGenerator.generate(thumbnailUrl,thumbnail,spec).then(function(){show(thumbnail);generatedThumbnails++;setTimeout(generateNextQueuedPreview,options.limits.timeBetweenThumbs);},function(){maybeSetDisplayNotAvailableImg(id,thumbnail);setTimeout(generateNextQueuedPreview,options.limits.timeBetweenThumbs);});}}
else{maybeSetDisplayNotAvailableImg(id,thumbnail);generateNextQueuedPreview();}}},setProgressBarWidth=function(id,percent){var bar=getProgress(id),progressBarSelector=id==null?selectorClasses.totalProgressBar:selectorClasses.progressBar;if(bar&&!qq(bar).hasClass(progressBarSelector)){bar=qq(bar).getFirstByClass(progressBarSelector);}
if(bar){qq(bar).css({width:percent+"%"});bar.setAttribute("aria-valuenow",percent);}},show=function(el){el&&qq(el).removeClass(options.classes.hide);},useCachedPreview=function(targetThumbnailId,cachedThumbnailId){var targetThumnail=getThumbnail(targetThumbnailId),cachedThumbnail=getThumbnail(cachedThumbnailId);log(qq.format("ID {} is the same file as ID {}.  Will use generated thumbnail from ID {} instead.",targetThumbnailId,cachedThumbnailId,cachedThumbnailId));previewGeneration[cachedThumbnailId].then(function(){generatedThumbnails++;previewGeneration[targetThumbnailId].success();log(qq.format("Now using previously generated thumbnail created for ID {} on ID {}.",cachedThumbnailId,targetThumbnailId));targetThumnail.src=cachedThumbnail.src;show(targetThumnail);},function(){previewGeneration[targetThumbnailId].failure();if(!options.placeholders.waitUntilUpdate){maybeSetDisplayNotAvailableImg(targetThumbnailId,targetThumnail);}});};qq.extend(options,spec);log=options.log;if(!qq.supportedFeatures.imagePreviews){options.limits.timeBetweenThumbs=0;options.limits.maxThumbs=0;}
container=options.containerEl;showThumbnails=options.imageGenerator!==undefined;templateHtml=parseAndGetTemplate();cacheThumbnailPlaceholders();qq.extend(this,{render:function(){log("Rendering template in DOM.");generatedThumbnails=0;container.innerHTML=templateHtml.template;hide(getDropProcessing());this.hideTotalProgress();fileList=options.fileContainerEl||getTemplateEl(container,selectorClasses.list);log("Template rendering complete");},renderFailure:function(message){var cantRenderEl=qq.toElement(message);container.innerHTML="";container.appendChild(cantRenderEl);},reset:function(){this.render();},clearFiles:function(){fileList.innerHTML="";},disableCancel:function(){isCancelDisabled=true;},addFile:function(id,name,prependInfo,hideForever,batch){var fileEl=qq.toElement(templateHtml.fileTemplate),fileNameEl=getTemplateEl(fileEl,selectorClasses.file),uploaderEl=getTemplateEl(container,selectorClasses.uploader),fileContainer=batch?fileBatch.content:fileList,thumb;if(batch){fileBatch.map[id]=fileEl;}
qq(fileEl).addClass(FILE_CLASS_PREFIX+id);uploaderEl.removeAttribute(DROPZPONE_TEXT_ATTR);if(fileNameEl){qq(fileNameEl).setText(name);fileNameEl.setAttribute("title",name);}
fileEl.setAttribute(FILE_ID_ATTR,id);if(prependInfo){prependFile(fileEl,prependInfo.index,fileContainer);}
else{fileContainer.appendChild(fileEl);}
if(hideForever){fileEl.style.display="none";qq(fileEl).addClass(HIDDEN_FOREVER_CLASS);}
else{hide(getProgress(id));hide(getSize(id));hide(getDelete(id));hide(getRetry(id));hide(getPause(id));hide(getContinue(id));if(isCancelDisabled){this.hideCancel(id);}
thumb=getThumbnail(id);if(thumb&&!thumb.src){cachedWaitingForThumbnailImg.then(function(waitingImg){thumb.src=waitingImg.src;if(waitingImg.style.maxHeight&&waitingImg.style.maxWidth){qq(thumb).css({maxHeight:waitingImg.style.maxHeight,maxWidth:waitingImg.style.maxWidth});}
show(thumb);});}}},addFileToCache:function(id,name,prependInfo,hideForever){this.addFile(id,name,prependInfo,hideForever,true);},addCacheToDom:function(){fileList.appendChild(fileBatch.content);fileBatch.content=document.createDocumentFragment();fileBatch.map={};},removeFile:function(id){qq(getFile(id)).remove();},getFileId:function(el){var currentNode=el;if(currentNode){while(currentNode.getAttribute(FILE_ID_ATTR)==null){currentNode=currentNode.parentNode;}
return parseInt(currentNode.getAttribute(FILE_ID_ATTR));}},getFileList:function(){return fileList;},markFilenameEditable:function(id){var filename=getFilename(id);filename&&qq(filename).addClass(options.classes.editable);},updateFilename:function(id,name){var filenameEl=getFilename(id);if(filenameEl){qq(filenameEl).setText(name);filenameEl.setAttribute("title",name);}},hideFilename:function(id){hide(getFilename(id));},showFilename:function(id){show(getFilename(id));},isFileName:function(el){return qq(el).hasClass(selectorClasses.file);},getButton:function(){return options.button||getTemplateEl(container,selectorClasses.button);},hideDropProcessing:function(){hide(getDropProcessing());},showDropProcessing:function(){show(getDropProcessing());},getDropZone:function(){return getTemplateEl(container,selectorClasses.drop);},isEditFilenamePossible:function(){return isEditElementsExist;},hideRetry:function(id){hide(getRetry(id));},isRetryPossible:function(){return isRetryElementExist;},showRetry:function(id){show(getRetry(id));},getFileContainer:function(id){return getFile(id);},showEditIcon:function(id){var icon=getEditIcon(id);icon&&qq(icon).addClass(options.classes.editable);},isHiddenForever:function(id){return qq(getFile(id)).hasClass(HIDDEN_FOREVER_CLASS);},hideEditIcon:function(id){var icon=getEditIcon(id);icon&&qq(icon).removeClass(options.classes.editable);},isEditIcon:function(el){return qq(el).hasClass(selectorClasses.editNameIcon,true);},getEditInput:function(id){return getTemplateEl(getFile(id),selectorClasses.editFilenameInput);},isEditInput:function(el){return qq(el).hasClass(selectorClasses.editFilenameInput,true);},updateProgress:function(id,loaded,total){var bar=getProgress(id),percent;if(bar&&total>0){percent=Math.round(loaded/total*100);if(percent===100){hide(bar);}
else{show(bar);}
setProgressBarWidth(id,percent);}},updateTotalProgress:function(loaded,total){this.updateProgress(null,loaded,total);},hideProgress:function(id){var bar=getProgress(id);bar&&hide(bar);},hideTotalProgress:function(){this.hideProgress();},resetProgress:function(id){setProgressBarWidth(id,0);this.hideTotalProgress(id);},resetTotalProgress:function(){this.resetProgress();},showCancel:function(id){if(!isCancelDisabled){var cancel=getCancel(id);cancel&&qq(cancel).removeClass(options.classes.hide);}},hideCancel:function(id){hide(getCancel(id));},isCancel:function(el){return qq(el).hasClass(selectorClasses.cancel,true);},allowPause:function(id){show(getPause(id));hide(getContinue(id));},uploadPaused:function(id){this.setStatusText(id,options.text.paused);this.allowContinueButton(id);hide(getSpinner(id));},hidePause:function(id){hide(getPause(id));},isPause:function(el){return qq(el).hasClass(selectorClasses.pause,true);},isContinueButton:function(el){return qq(el).hasClass(selectorClasses.continueButton,true);},allowContinueButton:function(id){show(getContinue(id));hide(getPause(id));},uploadContinued:function(id){this.setStatusText(id,"");this.allowPause(id);show(getSpinner(id));},showDeleteButton:function(id){show(getDelete(id));},hideDeleteButton:function(id){hide(getDelete(id));},isDeleteButton:function(el){return qq(el).hasClass(selectorClasses.deleteButton,true);},isRetry:function(el){return qq(el).hasClass(selectorClasses.retry,true);},updateSize:function(id,text){var size=getSize(id);if(size){show(size);qq(size).setText(text);}},setStatusText:function(id,text){var textEl=getTemplateEl(getFile(id),selectorClasses.statusText);if(textEl){if(text==null){qq(textEl).clearText();}
else{qq(textEl).setText(text);}}},hideSpinner:function(id){qq(getFile(id)).removeClass(IN_PROGRESS_CLASS);hide(getSpinner(id));},showSpinner:function(id){qq(getFile(id)).addClass(IN_PROGRESS_CLASS);show(getSpinner(id));},generatePreview:function(id,optFileOrBlob){if(!this.isHiddenForever(id)){thumbGenerationQueue.push({id:id,optFileOrBlob:optFileOrBlob});!thumbnailQueueMonitorRunning&&generateNextQueuedPreview();}},updateThumbnail:function(id,thumbnailUrl,showWaitingImg){if(!this.isHiddenForever(id)){thumbGenerationQueue.push({update:true,id:id,thumbnailUrl:thumbnailUrl,showWaitingImg:showWaitingImg});!thumbnailQueueMonitorRunning&&generateNextQueuedPreview();}},hasDialog:function(type){return qq.supportedFeatures.dialogElement&&!!getDialog(type);},showDialog:function(type,message,defaultValue){var dialog=getDialog(type),messageEl=getTemplateEl(dialog,selectorClasses.dialogMessage),inputEl=dialog.getElementsByTagName("INPUT")[0],cancelBtn=getTemplateEl(dialog,selectorClasses.dialogCancelButton),okBtn=getTemplateEl(dialog,selectorClasses.dialogOkButton),promise=new qq.Promise(),closeHandler=function(){cancelBtn.removeEventListener("click",cancelClickHandler);okBtn&&okBtn.removeEventListener("click",okClickHandler);promise.failure();},cancelClickHandler=function(){cancelBtn.removeEventListener("click",cancelClickHandler);dialog.close();},okClickHandler=function(){dialog.removeEventListener("close",closeHandler);okBtn.removeEventListener("click",okClickHandler);dialog.close();promise.success(inputEl&&inputEl.value);};dialog.addEventListener("close",closeHandler);cancelBtn.addEventListener("click",cancelClickHandler);okBtn&&okBtn.addEventListener("click",okClickHandler);if(inputEl){inputEl.value=defaultValue;}
messageEl.textContent=message;dialog.showModal();return promise;}});};qq.traditional=qq.traditional||{};qq.traditional.FormUploadHandler=function(options,proxy){"use strict";var handler=this,getName=proxy.getName,getUuid=proxy.getUuid,log=proxy.log;function getIframeContentJson(id,iframe){var response,doc,innerHtml;try{doc=iframe.contentDocument||iframe.contentWindow.document;innerHtml=doc.body.innerHTML;log("converting iframe's innerHTML to JSON");log("innerHTML = "+innerHtml);if(innerHtml&&innerHtml.match(/^<pre/i)){innerHtml=doc.body.firstChild.firstChild.nodeValue;}
response=handler._parseJsonResponse(innerHtml);}
catch(error){log("Error when attempting to parse form upload response ("+error.message+")","error");response={success:false};}
return response;}
function createForm(id,iframe){var params=options.paramsStore.get(id),method=options.method.toLowerCase()==="get"?"GET":"POST",endpoint=options.endpointStore.get(id),name=getName(id);params[options.uuidName]=getUuid(id);params[options.filenameParam]=name;return handler._initFormForUpload({method:method,endpoint:endpoint,params:params,paramsInBody:options.paramsInBody,targetName:iframe.name});}
this.uploadFile=function(id){var input=handler.getInput(id),iframe=handler._createIframe(id),promise=new qq.Promise(),form;form=createForm(id,iframe);form.appendChild(input);handler._attachLoadEvent(iframe,function(responseFromMessage){log("iframe loaded");var response=responseFromMessage?responseFromMessage:getIframeContentJson(id,iframe);handler._detachLoadEvent(id);if(!options.cors.expected){qq(iframe).remove();}
if(response.success){promise.success(response);}
else{promise.failure(response);}});log("Sending upload request for "+id);form.submit();qq(form).remove();return promise;};qq.extend(this,new qq.FormUploadHandler({options:{isCors:options.cors.expected,inputName:options.inputName},proxy:{onCancel:options.onCancel,getName:getName,getUuid:getUuid,log:log}}));};qq.traditional=qq.traditional||{};qq.traditional.XhrUploadHandler=function(spec,proxy){"use strict";var handler=this,getName=proxy.getName,getSize=proxy.getSize,getUuid=proxy.getUuid,log=proxy.log,multipart=spec.forceMultipart||spec.paramsInBody,addChunkingSpecificParams=function(id,params,chunkData){var size=getSize(id),name=getName(id);params[spec.chunking.paramNames.partIndex]=chunkData.part;params[spec.chunking.paramNames.partByteOffset]=chunkData.start;params[spec.chunking.paramNames.chunkSize]=chunkData.size;params[spec.chunking.paramNames.totalParts]=chunkData.count;params[spec.totalFileSizeName]=size;if(multipart){params[spec.filenameParam]=name;}},allChunksDoneRequester=new qq.traditional.AllChunksDoneAjaxRequester({cors:spec.cors,endpoint:spec.chunking.success.endpoint,log:log}),createReadyStateChangedHandler=function(id,xhr){var promise=new qq.Promise();xhr.onreadystatechange=function(){if(xhr.readyState===4){var result=onUploadOrChunkComplete(id,xhr);if(result.success){promise.success(result.response,xhr);}
else{promise.failure(result.response,xhr);}}};return promise;},getChunksCompleteParams=function(id){var params=spec.paramsStore.get(id),name=getName(id),size=getSize(id);params[spec.uuidName]=getUuid(id);params[spec.filenameParam]=name;params[spec.totalFileSizeName]=size;params[spec.chunking.paramNames.totalParts]=handler._getTotalChunks(id);return params;},isErrorUploadResponse=function(xhr,response){return qq.indexOf([200,201,202,203,204],xhr.status)<0||!response.success||response.reset;},onUploadOrChunkComplete=function(id,xhr){var response;log("xhr - server response received for "+id);log("responseText = "+xhr.responseText);response=parseResponse(true,xhr);return{success:!isErrorUploadResponse(xhr,response),response:response};},parseResponse=function(upload,xhr){var response={};try{log(qq.format("Received response status {} with body: {}",xhr.status,xhr.responseText));response=qq.parseJson(xhr.responseText);}
catch(error){upload&&log("Error when attempting to parse xhr response text ("+error.message+")","error");}
return response;},sendChunksCompleteRequest=function(id){var promise=new qq.Promise();allChunksDoneRequester.complete(id,handler._createXhr(id),getChunksCompleteParams(id),spec.customHeaders.get(id)).then(function(xhr){promise.success(parseResponse(false,xhr),xhr);},function(xhr){promise.failure(parseResponse(false,xhr),xhr);});return promise;},setParamsAndGetEntityToSend=function(params,xhr,fileOrBlob,id){var formData=new FormData(),method=spec.method,endpoint=spec.endpointStore.get(id),name=getName(id),size=getSize(id);params[spec.uuidName]=getUuid(id);params[spec.filenameParam]=name;if(multipart){params[spec.totalFileSizeName]=size;}
if(!spec.paramsInBody){if(!multipart){params[spec.inputName]=name;}
endpoint=qq.obj2url(params,endpoint);}
xhr.open(method,endpoint,true);if(spec.cors.expected&&spec.cors.sendCredentials){xhr.withCredentials=true;}
if(multipart){if(spec.paramsInBody){qq.obj2FormData(params,formData);}
formData.append(spec.inputName,fileOrBlob);return formData;}
return fileOrBlob;},setUploadHeaders=function(id,xhr){var extraHeaders=spec.customHeaders.get(id),fileOrBlob=handler.getFile(id);xhr.setRequestHeader("Accept","application/json");xhr.setRequestHeader("X-Requested-With","XMLHttpRequest");xhr.setRequestHeader("Cache-Control","no-cache");if(!multipart){xhr.setRequestHeader("Content-Type","application/octet-stream");xhr.setRequestHeader("X-Mime-Type",fileOrBlob.type);}
qq.each(extraHeaders,function(name,val){xhr.setRequestHeader(name,val);});};qq.extend(this,{uploadChunk:function(id,chunkIdx,resuming){var chunkData=handler._getChunkData(id,chunkIdx),xhr=handler._createXhr(id,chunkIdx),size=getSize(id),promise,toSend,params;promise=createReadyStateChangedHandler(id,xhr);handler._registerProgressHandler(id,chunkIdx,chunkData.size);params=spec.paramsStore.get(id);addChunkingSpecificParams(id,params,chunkData);if(resuming){params[spec.resume.paramNames.resuming]=true;}
toSend=setParamsAndGetEntityToSend(params,xhr,chunkData.blob,id);setUploadHeaders(id,xhr);xhr.send(toSend);return promise;},uploadFile:function(id){var fileOrBlob=handler.getFile(id),promise,xhr,params,toSend;xhr=handler._createXhr(id);handler._registerProgressHandler(id);promise=createReadyStateChangedHandler(id,xhr);params=spec.paramsStore.get(id);toSend=setParamsAndGetEntityToSend(params,xhr,fileOrBlob,id);setUploadHeaders(id,xhr);xhr.send(toSend);return promise;}});qq.extend(this,new qq.XhrUploadHandler({options:qq.extend({namespace:"traditional"},spec),proxy:qq.extend({getEndpoint:spec.endpointStore.get},proxy)}));qq.override(this,function(super_){return{finalizeChunks:function(id){if(spec.chunking.success.endpoint){return sendChunksCompleteRequest(id);}
else{return super_.finalizeChunks(id,qq.bind(parseResponse,this,true));}}};});};qq.traditional.AllChunksDoneAjaxRequester=function(o){"use strict";var requester,method="POST",options={cors:{allowXdr:false,expected:false,sendCredentials:false},endpoint:null,log:function(str,level){}},promises={},endpointHandler={get:function(id){return options.endpoint;}};qq.extend(options,o);requester=qq.extend(this,new qq.AjaxRequester({acceptHeader:"application/json",validMethods:[method],method:method,endpointStore:endpointHandler,allowXRequestedWithAndCacheControl:false,cors:options.cors,log:options.log,onComplete:function(id,xhr,isError){var promise=promises[id];delete promises[id];if(isError){promise.failure(xhr);}
else{promise.success(xhr);}}}));qq.extend(this,{complete:function(id,xhr,params,headers){var promise=new qq.Promise();options.log("Submitting All Chunks Done request for "+id);promises[id]=promise;requester.initTransport(id).withParams(params).withHeaders(headers).send(xhr);return promise;}});};qq.PasteSupport=function(o){"use strict";var options,detachPasteHandler;options={targetElement:null,callbacks:{log:function(message,level){},pasteReceived:function(blob){}}};function isImage(item){return item.type&&item.type.indexOf("image/")===0;}
function registerPasteHandler(){detachPasteHandler=qq(options.targetElement).attach("paste",function(event){var clipboardData=event.clipboardData;if(clipboardData){qq.each(clipboardData.items,function(idx,item){if(isImage(item)){var blob=item.getAsFile();options.callbacks.pasteReceived(blob);}});}});}
function unregisterPasteHandler(){if(detachPasteHandler){detachPasteHandler();}}
qq.extend(options,o);registerPasteHandler();qq.extend(this,{reset:function(){unregisterPasteHandler();}});};qq.DragAndDrop=function(o){"use strict";var options,HIDE_ZONES_EVENT_NAME="qq-hidezones",HIDE_BEFORE_ENTER_ATTR="qq-hide-dropzone",uploadDropZones=[],droppedFiles=[],disposeSupport=new qq.DisposeSupport();options={dropZoneElements:[],allowMultipleItems:true,classes:{dropActive:null},callbacks:new qq.DragAndDrop.callbacks()};qq.extend(options,o,true);function uploadDroppedFiles(files,uploadDropZone){var filesAsArray=Array.prototype.slice.call(files);options.callbacks.dropLog("Grabbed "+files.length+" dropped files.");uploadDropZone.dropDisabled(false);options.callbacks.processingDroppedFilesComplete(filesAsArray,uploadDropZone.getElement());}
function traverseFileTree(entry){var parseEntryPromise=new qq.Promise();if(entry.isFile){entry.file(function(file){var name=entry.name,fullPath=entry.fullPath,indexOfNameInFullPath=fullPath.indexOf(name);fullPath=fullPath.substr(0,indexOfNameInFullPath);if(fullPath.charAt(0)==="/"){fullPath=fullPath.substr(1);}
file.qqPath=fullPath;droppedFiles.push(file);parseEntryPromise.success();},function(fileError){options.callbacks.dropLog("Problem parsing '"+entry.fullPath+"'.  FileError code "+fileError.code+".","error");parseEntryPromise.failure();});}
else if(entry.isDirectory){getFilesInDirectory(entry).then(function allEntriesRead(entries){var entriesLeft=entries.length;qq.each(entries,function(idx,entry){traverseFileTree(entry).done(function(){entriesLeft-=1;if(entriesLeft===0){parseEntryPromise.success();}});});if(!entries.length){parseEntryPromise.success();}},function readFailure(fileError){options.callbacks.dropLog("Problem parsing '"+entry.fullPath+"'.  FileError code "+fileError.code+".","error");parseEntryPromise.failure();});}
return parseEntryPromise;}
function getFilesInDirectory(entry,reader,accumEntries,existingPromise){var promise=existingPromise||new qq.Promise(),dirReader=reader||entry.createReader();dirReader.readEntries(function readSuccess(entries){var newEntries=accumEntries?accumEntries.concat(entries):entries;if(entries.length){setTimeout(function(){getFilesInDirectory(entry,dirReader,newEntries,promise);},0);}
else{promise.success(newEntries);}},promise.failure);return promise;}
function handleDataTransfer(dataTransfer,uploadDropZone){var pendingFolderPromises=[],handleDataTransferPromise=new qq.Promise();options.callbacks.processingDroppedFiles();uploadDropZone.dropDisabled(true);if(dataTransfer.files.length>1&&!options.allowMultipleItems){options.callbacks.processingDroppedFilesComplete([]);options.callbacks.dropError("tooManyFilesError","");uploadDropZone.dropDisabled(false);handleDataTransferPromise.failure();}
else{droppedFiles=[];if(qq.isFolderDropSupported(dataTransfer)){qq.each(dataTransfer.items,function(idx,item){var entry=item.webkitGetAsEntry();if(entry){if(entry.isFile){droppedFiles.push(item.getAsFile());}
else{pendingFolderPromises.push(traverseFileTree(entry).done(function(){pendingFolderPromises.pop();if(pendingFolderPromises.length===0){handleDataTransferPromise.success();}}));}}});}
else{droppedFiles=dataTransfer.files;}
if(pendingFolderPromises.length===0){handleDataTransferPromise.success();}}
return handleDataTransferPromise;}
function setupDropzone(dropArea){var dropZone=new qq.UploadDropZone({HIDE_ZONES_EVENT_NAME:HIDE_ZONES_EVENT_NAME,element:dropArea,onEnter:function(e){qq(dropArea).addClass(options.classes.dropActive);e.stopPropagation();},onLeaveNotDescendants:function(e){qq(dropArea).removeClass(options.classes.dropActive);},onDrop:function(e){handleDataTransfer(e.dataTransfer,dropZone).then(function(){uploadDroppedFiles(droppedFiles,dropZone);},function(){options.callbacks.dropLog("Drop event DataTransfer parsing failed.  No files will be uploaded.","error");});}});disposeSupport.addDisposer(function(){dropZone.dispose();});qq(dropArea).hasAttribute(HIDE_BEFORE_ENTER_ATTR)&&qq(dropArea).hide();uploadDropZones.push(dropZone);return dropZone;}
function isFileDrag(dragEvent){var fileDrag;qq.each(dragEvent.dataTransfer.types,function(key,val){if(val==="Files"){fileDrag=true;return false;}});return fileDrag;}
function leavingDocumentOut(e){if(qq.firefox()){return!e.relatedTarget;}
if(qq.safari()){return e.x<0||e.y<0;}
return e.x===0&&e.y===0;}
function setupDragDrop(){var dropZones=options.dropZoneElements,maybeHideDropZones=function(){setTimeout(function(){qq.each(dropZones,function(idx,dropZone){qq(dropZone).hasAttribute(HIDE_BEFORE_ENTER_ATTR)&&qq(dropZone).hide();qq(dropZone).removeClass(options.classes.dropActive);});},10);};qq.each(dropZones,function(idx,dropZone){var uploadDropZone=setupDropzone(dropZone);if(dropZones.length&&qq.supportedFeatures.fileDrop){disposeSupport.attach(document,"dragenter",function(e){if(!uploadDropZone.dropDisabled()&&isFileDrag(e)){qq.each(dropZones,function(idx,dropZone){if(dropZone instanceof HTMLElement&&qq(dropZone).hasAttribute(HIDE_BEFORE_ENTER_ATTR)){qq(dropZone).css({display:"block"});}});}});}});disposeSupport.attach(document,"dragleave",function(e){if(leavingDocumentOut(e)){maybeHideDropZones();}});disposeSupport.attach(qq(document).children()[0],"mouseenter",function(e){maybeHideDropZones();});disposeSupport.attach(document,"drop",function(e){e.preventDefault();maybeHideDropZones();});disposeSupport.attach(document,HIDE_ZONES_EVENT_NAME,maybeHideDropZones);}
setupDragDrop();qq.extend(this,{setupExtraDropzone:function(element){options.dropZoneElements.push(element);setupDropzone(element);},removeDropzone:function(element){var i,dzs=options.dropZoneElements;for(i in dzs){if(dzs[i]===element){return dzs.splice(i,1);}}},dispose:function(){disposeSupport.dispose();qq.each(uploadDropZones,function(idx,dropZone){dropZone.dispose();});}});};qq.DragAndDrop.callbacks=function(){"use strict";return{processingDroppedFiles:function(){},processingDroppedFilesComplete:function(files,targetEl){},dropError:function(code,errorSpecifics){qq.log("Drag & drop error code '"+code+" with these specifics: '"+errorSpecifics+"'","error");},dropLog:function(message,level){qq.log(message,level);}};};qq.UploadDropZone=function(o){"use strict";var disposeSupport=new qq.DisposeSupport(),options,element,preventDrop,dropOutsideDisabled;options={element:null,onEnter:function(e){},onLeave:function(e){},onLeaveNotDescendants:function(e){},onDrop:function(e){}};qq.extend(options,o);element=options.element;function dragoverShouldBeCanceled(){return qq.safari()||(qq.firefox()&&qq.windows());}
function disableDropOutside(e){if(!dropOutsideDisabled){if(dragoverShouldBeCanceled){disposeSupport.attach(document,"dragover",function(e){e.preventDefault();});}else{disposeSupport.attach(document,"dragover",function(e){if(e.dataTransfer){e.dataTransfer.dropEffect="none";e.preventDefault();}});}
dropOutsideDisabled=true;}}
function isValidFileDrag(e){if(!qq.supportedFeatures.fileDrop){return false;}
var effectTest,dt=e.dataTransfer,isSafari=qq.safari();effectTest=qq.ie()&&qq.supportedFeatures.fileDrop?true:dt.effectAllowed!=="none";return dt&&effectTest&&(dt.files||(!isSafari&&dt.types.contains&&dt.types.contains("Files")));}
function isOrSetDropDisabled(isDisabled){if(isDisabled!==undefined){preventDrop=isDisabled;}
return preventDrop;}
function triggerHidezonesEvent(){var hideZonesEvent;function triggerUsingOldApi(){hideZonesEvent=document.createEvent("Event");hideZonesEvent.initEvent(options.HIDE_ZONES_EVENT_NAME,true,true);}
if(window.CustomEvent){try{hideZonesEvent=new CustomEvent(options.HIDE_ZONES_EVENT_NAME);}
catch(err){triggerUsingOldApi();}}
else{triggerUsingOldApi();}
document.dispatchEvent(hideZonesEvent);}
function attachEvents(){disposeSupport.attach(element,"dragover",function(e){if(!isValidFileDrag(e)){return;}
var effect=qq.ie()&&qq.supportedFeatures.fileDrop?null:e.dataTransfer.effectAllowed;if(effect==="move"||effect==="linkMove"){e.dataTransfer.dropEffect="move";}else{e.dataTransfer.dropEffect="copy";}
e.stopPropagation();e.preventDefault();});disposeSupport.attach(element,"dragenter",function(e){if(!isOrSetDropDisabled()){if(!isValidFileDrag(e)){return;}
options.onEnter(e);}});disposeSupport.attach(element,"dragleave",function(e){if(!isValidFileDrag(e)){return;}
options.onLeave(e);var relatedTarget=document.elementFromPoint(e.clientX,e.clientY);if(qq(this).contains(relatedTarget)){return;}
options.onLeaveNotDescendants(e);});disposeSupport.attach(element,"drop",function(e){if(!isOrSetDropDisabled()){if(!isValidFileDrag(e)){return;}
e.preventDefault();e.stopPropagation();options.onDrop(e);triggerHidezonesEvent();}});}
disableDropOutside();attachEvents();qq.extend(this,{dropDisabled:function(isDisabled){return isOrSetDropDisabled(isDisabled);},dispose:function(){disposeSupport.dispose();},getElement:function(){return element;}});};qq.DeleteFileAjaxRequester=function(o){"use strict";var requester,options={method:"DELETE",uuidParamName:"qquuid",endpointStore:{},maxConnections:3,customHeaders:function(id){return{};},paramsStore:{},cors:{expected:false,sendCredentials:false},log:function(str,level){},onDelete:function(id){},onDeleteComplete:function(id,xhrOrXdr,isError){}};qq.extend(options,o);function getMandatedParams(){if(options.method.toUpperCase()==="POST"){return{_method:"DELETE"};}
return{};}
requester=qq.extend(this,new qq.AjaxRequester({acceptHeader:"application/json",validMethods:["POST","DELETE"],method:options.method,endpointStore:options.endpointStore,paramsStore:options.paramsStore,mandatedParams:getMandatedParams(),maxConnections:options.maxConnections,customHeaders:function(id){return options.customHeaders.get(id);},log:options.log,onSend:options.onDelete,onComplete:options.onDeleteComplete,cors:options.cors}));qq.extend(this,{sendDelete:function(id,uuid,additionalMandatedParams){var additionalOptions=additionalMandatedParams||{};options.log("Submitting delete file request for "+id);if(options.method==="DELETE"){requester.initTransport(id).withPath(uuid).withParams(additionalOptions).send();}
else{additionalOptions[options.uuidParamName]=uuid;requester.initTransport(id).withParams(additionalOptions).send();}}});};(function(){function detectSubsampling(img){var iw=img.naturalWidth,ih=img.naturalHeight,canvas=document.createElement("canvas"),ctx;if(iw*ih>1024*1024){canvas.width=canvas.height=1;ctx=canvas.getContext("2d");ctx.drawImage(img,-iw+1,0);return ctx.getImageData(0,0,1,1).data[3]===0;}else{return false;}}
function detectVerticalSquash(img,iw,ih){var canvas=document.createElement("canvas"),sy=0,ey=ih,py=ih,ctx,data,alpha,ratio;canvas.width=1;canvas.height=ih;ctx=canvas.getContext("2d");ctx.drawImage(img,0,0);data=ctx.getImageData(0,0,1,ih).data;while(py>sy){alpha=data[(py-1)*4+3];if(alpha===0){ey=py;}else{sy=py;}
py=(ey+sy)>>1;}
ratio=(py/ih);return(ratio===0)?1:ratio;}
function renderImageToDataURL(img,options,doSquash){var canvas=document.createElement("canvas"),mime=options.mime||"image/jpeg";renderImageToCanvas(img,canvas,options,doSquash);return canvas.toDataURL(mime,options.quality||0.8);}
function maybeCalculateDownsampledDimensions(spec){var maxPixels=5241000;if(!qq.ios()){throw new qq.Error("Downsampled dimensions can only be reliably calculated for iOS!");}
if(spec.origHeight*spec.origWidth>maxPixels){return{newHeight:Math.round(Math.sqrt(maxPixels*(spec.origHeight/spec.origWidth))),newWidth:Math.round(Math.sqrt(maxPixels*(spec.origWidth/spec.origHeight)))}}}
function renderImageToCanvas(img,canvas,options,doSquash){var iw=img.naturalWidth,ih=img.naturalHeight,width=options.width,height=options.height,ctx=canvas.getContext("2d"),modifiedDimensions;ctx.save();if(!qq.supportedFeatures.unlimitedScaledImageSize){modifiedDimensions=maybeCalculateDownsampledDimensions({origWidth:width,origHeight:height});if(modifiedDimensions){qq.log(qq.format("Had to reduce dimensions due to device limitations from {}w / {}h to {}w / {}h",width,height,modifiedDimensions.newWidth,modifiedDimensions.newHeight),"warn");width=modifiedDimensions.newWidth;height=modifiedDimensions.newHeight;}}
transformCoordinate(canvas,width,height,options.orientation);if(qq.ios()){(function(){if(detectSubsampling(img)){iw/=2;ih/=2;}
var d=1024,tmpCanvas=document.createElement("canvas"),vertSquashRatio=doSquash?detectVerticalSquash(img,iw,ih):1,dw=Math.ceil(d*width/iw),dh=Math.ceil(d*height/ih/vertSquashRatio),sy=0,dy=0,tmpCtx,sx,dx;tmpCanvas.width=tmpCanvas.height=d;tmpCtx=tmpCanvas.getContext("2d");while(sy<ih){sx=0,dx=0;while(sx<iw){tmpCtx.clearRect(0,0,d,d);tmpCtx.drawImage(img,-sx,-sy);ctx.drawImage(tmpCanvas,0,0,d,d,dx,dy,dw,dh);sx+=d;dx+=dw;}
sy+=d;dy+=dh;}
ctx.restore();tmpCanvas=tmpCtx=null;}())}
else{ctx.drawImage(img,0,0,width,height);}
canvas.qqImageRendered&&canvas.qqImageRendered();}
function transformCoordinate(canvas,width,height,orientation){switch(orientation){case 5:case 6:case 7:case 8:canvas.width=height;canvas.height=width;break;default:canvas.width=width;canvas.height=height;}
var ctx=canvas.getContext("2d");switch(orientation){case 2:ctx.translate(width,0);ctx.scale(-1,1);break;case 3:ctx.translate(width,height);ctx.rotate(Math.PI);break;case 4:ctx.translate(0,height);ctx.scale(1,-1);break;case 5:ctx.rotate(0.5*Math.PI);ctx.scale(1,-1);break;case 6:ctx.rotate(0.5*Math.PI);ctx.translate(0,-height);break;case 7:ctx.rotate(0.5*Math.PI);ctx.translate(width,-height);ctx.scale(-1,1);break;case 8:ctx.rotate(-0.5*Math.PI);ctx.translate(-width,0);break;default:break;}}
function MegaPixImage(srcImage,errorCallback){var self=this;if(window.Blob&&srcImage instanceof Blob){(function(){var img=new Image(),URL=window.URL&&window.URL.createObjectURL?window.URL:window.webkitURL&&window.webkitURL.createObjectURL?window.webkitURL:null;if(!URL){throw Error("No createObjectURL function found to create blob url");}
img.src=URL.createObjectURL(srcImage);self.blob=srcImage;srcImage=img;}());}
if(!srcImage.naturalWidth&&!srcImage.naturalHeight){srcImage.onload=function(){var listeners=self.imageLoadListeners;if(listeners){self.imageLoadListeners=null;setTimeout(function(){for(var i=0,len=listeners.length;i<len;i++){listeners[i]();}},0);}};srcImage.onerror=errorCallback;this.imageLoadListeners=[];}
this.srcImage=srcImage;}
MegaPixImage.prototype.render=function(target,options){options=options||{};var self=this,imgWidth=this.srcImage.naturalWidth,imgHeight=this.srcImage.naturalHeight,width=options.width,height=options.height,maxWidth=options.maxWidth,maxHeight=options.maxHeight,doSquash=!this.blob||this.blob.type==="image/jpeg",tagName=target.tagName.toLowerCase(),opt;if(this.imageLoadListeners){this.imageLoadListeners.push(function(){self.render(target,options)});return;}
if(width&&!height){height=(imgHeight*width/imgWidth)<<0;}else if(height&&!width){width=(imgWidth*height/imgHeight)<<0;}else{width=imgWidth;height=imgHeight;}
if(maxWidth&&width>maxWidth){width=maxWidth;height=(imgHeight*width/imgWidth)<<0;}
if(maxHeight&&height>maxHeight){height=maxHeight;width=(imgWidth*height/imgHeight)<<0;}
opt={width:width,height:height},qq.each(options,function(optionsKey,optionsValue){opt[optionsKey]=optionsValue;});if(tagName==="img"){(function(){var oldTargetSrc=target.src;target.src=renderImageToDataURL(self.srcImage,opt,doSquash);oldTargetSrc===target.src&&target.onload();}())}else if(tagName==="canvas"){renderImageToCanvas(this.srcImage,target,opt,doSquash);}
if(typeof this.onrender==="function"){this.onrender(target);}};qq.MegaPixImage=MegaPixImage;})();qq.ImageGenerator=function(log){"use strict";function isImg(el){return el.tagName.toLowerCase()==="img";}
function isCanvas(el){return el.tagName.toLowerCase()==="canvas";}
function isImgCorsSupported(){return new Image().crossOrigin!==undefined;}
function isCanvasSupported(){var canvas=document.createElement("canvas");return canvas.getContext&&canvas.getContext("2d");}
function determineMimeOfFileName(nameWithPath){var pathSegments=nameWithPath.split("/"),name=pathSegments[pathSegments.length-1],extension=qq.getExtension(name);extension=extension&&extension.toLowerCase();switch(extension){case"jpeg":case"jpg":return"image/jpeg";case"png":return"image/png";case"bmp":return"image/bmp";case"gif":return"image/gif";case"tiff":case"tif":return"image/tiff";}}
function isCrossOrigin(url){var targetAnchor=document.createElement("a"),targetProtocol,targetHostname,targetPort;targetAnchor.href=url;targetProtocol=targetAnchor.protocol;targetPort=targetAnchor.port;targetHostname=targetAnchor.hostname;if(targetProtocol.toLowerCase()!==window.location.protocol.toLowerCase()){return true;}
if(targetHostname.toLowerCase()!==window.location.hostname.toLowerCase()){return true;}
if(targetPort!==window.location.port&&!qq.ie()){return true;}
return false;}
function registerImgLoadListeners(img,promise){img.onload=function(){img.onload=null;img.onerror=null;promise.success(img);};img.onerror=function(){img.onload=null;img.onerror=null;log("Problem drawing thumbnail!","error");promise.failure(img,"Problem drawing thumbnail!");};}
function registerCanvasDrawImageListener(canvas,promise){canvas.qqImageRendered=function(){promise.success(canvas);};}
function registerThumbnailRenderedListener(imgOrCanvas,promise){var registered=isImg(imgOrCanvas)||isCanvas(imgOrCanvas);if(isImg(imgOrCanvas)){registerImgLoadListeners(imgOrCanvas,promise);}
else if(isCanvas(imgOrCanvas)){registerCanvasDrawImageListener(imgOrCanvas,promise);}
else{promise.failure(imgOrCanvas);log(qq.format("Element container of type {} is not supported!",imgOrCanvas.tagName),"error");}
return registered;}
function draw(fileOrBlob,container,options){var drawPreview=new qq.Promise(),identifier=new qq.Identify(fileOrBlob,log),maxSize=options.maxSize,orient=options.orient==null?true:options.orient,megapixErrorHandler=function(){container.onerror=null;container.onload=null;log("Could not render preview, file may be too large!","error");drawPreview.failure(container,"Browser cannot render image!");};identifier.isPreviewable().then(function(mime){var dummyExif={parse:function(){return new qq.Promise().success();}},exif=orient?new qq.Exif(fileOrBlob,log):dummyExif,mpImg=new qq.MegaPixImage(fileOrBlob,megapixErrorHandler);if(registerThumbnailRenderedListener(container,drawPreview)){exif.parse().then(function(exif){var orientation=exif&&exif.Orientation;mpImg.render(container,{maxWidth:maxSize,maxHeight:maxSize,orientation:orientation,mime:mime});},function(failureMsg){log(qq.format("EXIF data could not be parsed ({}).  Assuming orientation = 1.",failureMsg));mpImg.render(container,{maxWidth:maxSize,maxHeight:maxSize,mime:mime});});}},function(){log("Not previewable");drawPreview.failure(container,"Not previewable");});return drawPreview;}
function drawOnCanvasOrImgFromUrl(url,canvasOrImg,draw,maxSize){var tempImg=new Image(),tempImgRender=new qq.Promise();registerThumbnailRenderedListener(tempImg,tempImgRender);if(isCrossOrigin(url)){tempImg.crossOrigin="anonymous";}
tempImg.src=url;tempImgRender.then(function rendered(){registerThumbnailRenderedListener(canvasOrImg,draw);var mpImg=new qq.MegaPixImage(tempImg);mpImg.render(canvasOrImg,{maxWidth:maxSize,maxHeight:maxSize,mime:determineMimeOfFileName(url)});},draw.failure);}
function drawOnImgFromUrlWithCssScaling(url,img,draw,maxSize){registerThumbnailRenderedListener(img,draw);qq(img).css({maxWidth:maxSize+"px",maxHeight:maxSize+"px"});img.src=url;}
function drawFromUrl(url,container,options){var draw=new qq.Promise(),scale=options.scale,maxSize=scale?options.maxSize:null;if(scale&&isImg(container)){if(isCanvasSupported()){if(isCrossOrigin(url)&&!isImgCorsSupported()){drawOnImgFromUrlWithCssScaling(url,container,draw,maxSize);}
else{drawOnCanvasOrImgFromUrl(url,container,draw,maxSize);}}
else{drawOnImgFromUrlWithCssScaling(url,container,draw,maxSize);}}
else if(isCanvas(container)){drawOnCanvasOrImgFromUrl(url,container,draw,maxSize);}
else if(registerThumbnailRenderedListener(container,draw)){container.src=url;}
return draw;}
qq.extend(this,{generate:function(fileBlobOrUrl,container,options){if(qq.isString(fileBlobOrUrl)){log("Attempting to update thumbnail based on server response.");return drawFromUrl(fileBlobOrUrl,container,options||{});}
else{log("Attempting to draw client-side image preview.");return draw(fileBlobOrUrl,container,options||{});}}});};qq.Exif=function(fileOrBlob,log){"use strict";var TAG_IDS=[274],TAG_INFO={274:{name:"Orientation",bytes:2}};function parseLittleEndian(hex){var result=0,pow=0;while(hex.length>0){result+=parseInt(hex.substring(0,2),16)*Math.pow(2,pow);hex=hex.substring(2,hex.length);pow+=8;}
return result;}
function seekToApp1(offset,promise){var theOffset=offset,thePromise=promise;if(theOffset===undefined){theOffset=2;thePromise=new qq.Promise();}
qq.readBlobToHex(fileOrBlob,theOffset,4).then(function(hex){var match=/^ffe([0-9])/.exec(hex),segmentLength;if(match){if(match[1]!=="1"){segmentLength=parseInt(hex.slice(4,8),16);seekToApp1(theOffset+segmentLength+2,thePromise);}
else{thePromise.success(theOffset);}}
else{thePromise.failure("No EXIF header to be found!");}});return thePromise;}
function getApp1Offset(){var promise=new qq.Promise();qq.readBlobToHex(fileOrBlob,0,6).then(function(hex){if(hex.indexOf("ffd8")!==0){promise.failure("Not a valid JPEG!");}
else{seekToApp1().then(function(offset){promise.success(offset);},function(error){promise.failure(error);});}});return promise;}
function isLittleEndian(app1Start){var promise=new qq.Promise();qq.readBlobToHex(fileOrBlob,app1Start+10,2).then(function(hex){promise.success(hex==="4949");});return promise;}
function getDirEntryCount(app1Start,littleEndian){var promise=new qq.Promise();qq.readBlobToHex(fileOrBlob,app1Start+18,2).then(function(hex){if(littleEndian){return promise.success(parseLittleEndian(hex));}
else{promise.success(parseInt(hex,16));}});return promise;}
function getIfd(app1Start,dirEntries){var offset=app1Start+20,bytes=dirEntries*12;return qq.readBlobToHex(fileOrBlob,offset,bytes);}
function getDirEntries(ifdHex){var entries=[],offset=0;while(offset+24<=ifdHex.length){entries.push(ifdHex.slice(offset,offset+24));offset+=24;}
return entries;}
function getTagValues(littleEndian,dirEntries){var TAG_VAL_OFFSET=16,tagsToFind=qq.extend([],TAG_IDS),vals={};qq.each(dirEntries,function(idx,entry){var idHex=entry.slice(0,4),id=littleEndian?parseLittleEndian(idHex):parseInt(idHex,16),tagsToFindIdx=tagsToFind.indexOf(id),tagValHex,tagName,tagValLength;if(tagsToFindIdx>=0){tagName=TAG_INFO[id].name;tagValLength=TAG_INFO[id].bytes;tagValHex=entry.slice(TAG_VAL_OFFSET,TAG_VAL_OFFSET+(tagValLength*2));vals[tagName]=littleEndian?parseLittleEndian(tagValHex):parseInt(tagValHex,16);tagsToFind.splice(tagsToFindIdx,1);}
if(tagsToFind.length===0){return false;}});return vals;}
qq.extend(this,{parse:function(){var parser=new qq.Promise(),onParseFailure=function(message){log(qq.format("EXIF header parse failed: '{}' ",message));parser.failure(message);};getApp1Offset().then(function(app1Offset){log(qq.format("Moving forward with EXIF header parsing for '{}'",fileOrBlob.name===undefined?"blob":fileOrBlob.name));isLittleEndian(app1Offset).then(function(littleEndian){log(qq.format("EXIF Byte order is {} endian",littleEndian?"little":"big"));getDirEntryCount(app1Offset,littleEndian).then(function(dirEntryCount){log(qq.format("Found {} APP1 directory entries",dirEntryCount));getIfd(app1Offset,dirEntryCount).then(function(ifdHex){var dirEntries=getDirEntries(ifdHex),tagValues=getTagValues(littleEndian,dirEntries);log("Successfully parsed some EXIF tags");parser.success(tagValues);},onParseFailure);},onParseFailure);},onParseFailure);},onParseFailure);return parser;}});};qq.Identify=function(fileOrBlob,log){"use strict";function isIdentifiable(magicBytes,questionableBytes){var identifiable=false,magicBytesEntries=[].concat(magicBytes);qq.each(magicBytesEntries,function(idx,magicBytesArrayEntry){if(questionableBytes.indexOf(magicBytesArrayEntry)===0){identifiable=true;return false;}});return identifiable;}
qq.extend(this,{isPreviewable:function(){var self=this,idenitifer=new qq.Promise(),previewable=false,name=fileOrBlob.name===undefined?"blob":fileOrBlob.name;log(qq.format("Attempting to determine if {} can be rendered in this browser",name));log("First pass: check type attribute of blob object.");if(this.isPreviewableSync()){log("Second pass: check for magic bytes in file header.");qq.readBlobToHex(fileOrBlob,0,4).then(function(hex){qq.each(self.PREVIEWABLE_MIME_TYPES,function(mime,bytes){if(isIdentifiable(bytes,hex)){if(mime!=="image/tiff"||qq.supportedFeatures.tiffPreviews){previewable=true;idenitifer.success(mime);}
return false;}});log(qq.format("'{}' is {} able to be rendered in this browser",name,previewable?"":"NOT"));if(!previewable){idenitifer.failure();}},function(){log("Error reading file w/ name '"+name+"'.  Not able to be rendered in this browser.");idenitifer.failure();});}
else{idenitifer.failure();}
return idenitifer;},isPreviewableSync:function(){var fileMime=fileOrBlob.type,isRecognizedImage=qq.indexOf(Object.keys(this.PREVIEWABLE_MIME_TYPES),fileMime)>=0,previewable=false,name=fileOrBlob.name===undefined?"blob":fileOrBlob.name;if(isRecognizedImage){if(fileMime==="image/tiff"){previewable=qq.supportedFeatures.tiffPreviews;}
else{previewable=true;}}
!previewable&&log(name+" is not previewable in this browser per the blob's type attr");return previewable;}});};qq.Identify.prototype.PREVIEWABLE_MIME_TYPES={"image/jpeg":"ffd8ff","image/gif":"474946","image/png":"89504e","image/bmp":"424d","image/tiff":["49492a00","4d4d002a"]};qq.ImageValidation=function(blob,log){"use strict";function hasNonZeroLimits(limits){var atLeastOne=false;qq.each(limits,function(limit,value){if(value>0){atLeastOne=true;return false;}});return atLeastOne;}
function getWidthHeight(){var sizeDetermination=new qq.Promise();new qq.Identify(blob,log).isPreviewable().then(function(){var image=new Image(),url=window.URL&&window.URL.createObjectURL?window.URL:window.webkitURL&&window.webkitURL.createObjectURL?window.webkitURL:null;if(url){image.onerror=function(){log("Cannot determine dimensions for image.  May be too large.","error");sizeDetermination.failure();};image.onload=function(){sizeDetermination.success({width:this.width,height:this.height});};image.src=url.createObjectURL(blob);}
else{log("No createObjectURL function available to generate image URL!","error");sizeDetermination.failure();}},sizeDetermination.failure);return sizeDetermination;}
function getFailingLimit(limits,dimensions){var failingLimit;qq.each(limits,function(limitName,limitValue){if(limitValue>0){var limitMatcher=/(max|min)(Width|Height)/.exec(limitName),dimensionPropName=limitMatcher[2].charAt(0).toLowerCase()+limitMatcher[2].slice(1),actualValue=dimensions[dimensionPropName];switch(limitMatcher[1]){case"min":if(actualValue<limitValue){failingLimit=limitName;return false;}
break;case"max":if(actualValue>limitValue){failingLimit=limitName;return false;}
break;}}});return failingLimit;}
this.validate=function(limits){var validationEffort=new qq.Promise();log("Attempting to validate image.");if(hasNonZeroLimits(limits)){getWidthHeight().then(function(dimensions){var failingLimit=getFailingLimit(limits,dimensions);if(failingLimit){validationEffort.failure(failingLimit);}
else{validationEffort.success();}},validationEffort.success);}
else{validationEffort.success();}
return validationEffort;};};qq.Session=function(spec){"use strict";var options={endpoint:null,params:{},customHeaders:{},cors:{},addFileRecord:function(sessionData){},log:function(message,level){}};qq.extend(options,spec,true);function isJsonResponseValid(response){if(qq.isArray(response)){return true;}
options.log("Session response is not an array.","error");}
function handleFileItems(fileItems,success,xhrOrXdr,promise){var someItemsIgnored=false;success=success&&isJsonResponseValid(fileItems);if(success){qq.each(fileItems,function(idx,fileItem){if(fileItem.uuid==null){someItemsIgnored=true;options.log(qq.format("Session response item {} did not include a valid UUID - ignoring.",idx),"error");}
else if(fileItem.name==null){someItemsIgnored=true;options.log(qq.format("Session response item {} did not include a valid name - ignoring.",idx),"error");}
else{try{options.addFileRecord(fileItem);return true;}
catch(err){someItemsIgnored=true;options.log(err.message,"error");}}
return false;});}
promise[success&&!someItemsIgnored?"success":"failure"](fileItems,xhrOrXdr);}
this.refresh=function(){var refreshEffort=new qq.Promise(),refreshCompleteCallback=function(response,success,xhrOrXdr){handleFileItems(response,success,xhrOrXdr,refreshEffort);},requsterOptions=qq.extend({},options),requester=new qq.SessionAjaxRequester(qq.extend(requsterOptions,{onComplete:refreshCompleteCallback}));requester.queryServer();return refreshEffort;};};qq.SessionAjaxRequester=function(spec){"use strict";var requester,options={endpoint:null,customHeaders:{},params:{},cors:{expected:false,sendCredentials:false},onComplete:function(response,success,xhrOrXdr){},log:function(str,level){}};qq.extend(options,spec);function onComplete(id,xhrOrXdr,isError){var response=null;if(xhrOrXdr.responseText!=null){try{response=qq.parseJson(xhrOrXdr.responseText);}
catch(err){options.log("Problem parsing session response: "+err.message,"error");isError=true;}}
options.onComplete(response,!isError,xhrOrXdr);}
requester=qq.extend(this,new qq.AjaxRequester({acceptHeader:"application/json",validMethods:["GET"],method:"GET",endpointStore:{get:function(){return options.endpoint;}},customHeaders:options.customHeaders,log:options.log,onComplete:onComplete,cors:options.cors}));qq.extend(this,{queryServer:function(){var params=qq.extend({},options.params);options.log("Session query request.");requester.initTransport("sessionRefresh").withParams(params).withCacheBuster().send();}});};qq.FormSupport=function(options,startUpload,log){"use strict";var self=this,interceptSubmit=options.interceptSubmit,formEl=options.element,autoUpload=options.autoUpload;qq.extend(this,{newEndpoint:null,newAutoUpload:autoUpload,attachedToForm:false,getFormInputsAsObject:function(){if(formEl==null){return null;}
return self._form2Obj(formEl);}});function determineNewEndpoint(formEl){if(formEl.getAttribute("action")){self.newEndpoint=formEl.getAttribute("action");}}
function validateForm(formEl,nativeSubmit){if(formEl.checkValidity&&!formEl.checkValidity()){log("Form did not pass validation checks - will not upload.","error");nativeSubmit();}
else{return true;}}
function maybeUploadOnSubmit(formEl){var nativeSubmit=formEl.submit;qq(formEl).attach("submit",function(event){event=event||window.event;if(event.preventDefault){event.preventDefault();}
else{event.returnValue=false;}
validateForm(formEl,nativeSubmit)&&startUpload();});formEl.submit=function(){validateForm(formEl,nativeSubmit)&&startUpload();};}
function determineFormEl(formEl){if(formEl){if(qq.isString(formEl)){formEl=document.getElementById(formEl);}
if(formEl){log("Attaching to form element.");determineNewEndpoint(formEl);interceptSubmit&&maybeUploadOnSubmit(formEl);}}
return formEl;}
formEl=determineFormEl(formEl);this.attachedToForm=!!formEl;};qq.extend(qq.FormSupport.prototype,{_form2Obj:function(form){"use strict";var obj={},notIrrelevantType=function(type){var irrelevantTypes=["button","image","reset","submit"];return qq.indexOf(irrelevantTypes,type.toLowerCase())<0;},radioOrCheckbox=function(type){return qq.indexOf(["checkbox","radio"],type.toLowerCase())>=0;},ignoreValue=function(el){if(radioOrCheckbox(el.type)&&!el.checked){return true;}
return el.disabled&&el.type.toLowerCase()!=="hidden";},selectValue=function(select){var value=null;qq.each(qq(select).children(),function(idx,child){if(child.tagName.toLowerCase()==="option"&&child.selected){value=child.value;return false;}});return value;};qq.each(form.elements,function(idx,el){if((qq.isInput(el,true)||el.tagName.toLowerCase()==="textarea")&&notIrrelevantType(el.type)&&!ignoreValue(el)){obj[el.name]=el.value;}
else if(el.tagName.toLowerCase()==="select"&&!ignoreValue(el)){var value=selectValue(el);if(value!==null){obj[el.name]=value;}}});return obj;}});qq.Scaler=function(spec,log){"use strict";var self=this,includeOriginal=spec.sendOriginal,orient=spec.orient,defaultType=spec.defaultType,defaultQuality=spec.defaultQuality/100,failedToScaleText=spec.failureText,includeExif=spec.includeExif,sizes=this._getSortedSizes(spec.sizes);qq.extend(this,{enabled:qq.supportedFeatures.scaling&&sizes.length>0,getFileRecords:function(originalFileUuid,originalFileName,originalBlobOrBlobData){var self=this,records=[],originalBlob=originalBlobOrBlobData.blob?originalBlobOrBlobData.blob:originalBlobOrBlobData,idenitifier=new qq.Identify(originalBlob,log);if(idenitifier.isPreviewableSync()){qq.each(sizes,function(idx,sizeRecord){var outputType=self._determineOutputType({defaultType:defaultType,requestedType:sizeRecord.type,refType:originalBlob.type});records.push({uuid:qq.getUniqueId(),name:self._getName(originalFileName,{name:sizeRecord.name,type:outputType,refType:originalBlob.type}),blob:new qq.BlobProxy(originalBlob,qq.bind(self._generateScaledImage,self,{maxSize:sizeRecord.maxSize,orient:orient,type:outputType,quality:defaultQuality,failedText:failedToScaleText,includeExif:includeExif,log:log}))});});records.push({uuid:originalFileUuid,name:originalFileName,size:originalBlob.size,blob:includeOriginal?originalBlob:null});}
else{records.push({uuid:originalFileUuid,name:originalFileName,size:originalBlob.size,blob:originalBlob});}
return records;},handleNewFile:function(file,name,uuid,size,fileList,batchId,uuidParamName,api){var self=this,buttonId=file.qqButtonId||(file.blob&&file.blob.qqButtonId),scaledIds=[],originalId=null,addFileToHandler=api.addFileToHandler,uploadData=api.uploadData,paramsStore=api.paramsStore,proxyGroupId=qq.getUniqueId();qq.each(self.getFileRecords(uuid,name,file),function(idx,record){var blobSize=record.size,id;if(record.blob instanceof qq.BlobProxy){blobSize=-1;}
id=uploadData.addFile({uuid:record.uuid,name:record.name,size:blobSize,batchId:batchId,proxyGroupId:proxyGroupId});if(record.blob instanceof qq.BlobProxy){scaledIds.push(id);}
else{originalId=id;}
if(record.blob){addFileToHandler(id,record.blob);fileList.push({id:id,file:record.blob});}
else{uploadData.setStatus(id,qq.status.REJECTED);}});if(originalId!==null){qq.each(scaledIds,function(idx,scaledId){var params={qqparentuuid:uploadData.retrieve({id:originalId}).uuid,qqparentsize:uploadData.retrieve({id:originalId}).size};params[uuidParamName]=uploadData.retrieve({id:scaledId}).uuid;uploadData.setParentId(scaledId,originalId);paramsStore.addReadOnly(scaledId,params);});if(scaledIds.length){(function(){var param={};param[uuidParamName]=uploadData.retrieve({id:originalId}).uuid;paramsStore.addReadOnly(originalId,param);}());}}}});};qq.extend(qq.Scaler.prototype,{scaleImage:function(id,specs,api){"use strict";if(!qq.supportedFeatures.scaling){throw new qq.Error("Scaling is not supported in this browser!");}
var scalingEffort=new qq.Promise(),log=api.log,file=api.getFile(id),uploadData=api.uploadData.retrieve({id:id}),name=uploadData&&uploadData.name,uuid=uploadData&&uploadData.uuid,scalingOptions={sendOriginal:false,orient:specs.orient,defaultType:specs.type||null,defaultQuality:specs.quality,failedToScaleText:"Unable to scale",sizes:[{name:"",maxSize:specs.maxSize}]},scaler=new qq.Scaler(scalingOptions,log);if(!qq.Scaler||!qq.supportedFeatures.imagePreviews||!file){scalingEffort.failure();log("Could not generate requested scaled image for "+id+".  "+"Scaling is either not possible in this browser, or the file could not be located.","error");}
else{(qq.bind(function(){var record=scaler.getFileRecords(uuid,name,file)[0];if(record&&record.blob instanceof qq.BlobProxy){record.blob.create().then(scalingEffort.success,scalingEffort.failure);}
else{log(id+" is not a scalable image!","error");scalingEffort.failure();}},this)());}
return scalingEffort;},_determineOutputType:function(spec){"use strict";var requestedType=spec.requestedType,defaultType=spec.defaultType,referenceType=spec.refType;if(!defaultType&&!requestedType){if(referenceType!=="image/jpeg"){return"image/png";}
return referenceType;}
if(!requestedType){return defaultType;}
if(qq.indexOf(Object.keys(qq.Identify.prototype.PREVIEWABLE_MIME_TYPES),requestedType)>=0){if(requestedType==="image/tiff"){return qq.supportedFeatures.tiffPreviews?requestedType:defaultType;}
return requestedType;}
return defaultType;},_getName:function(originalName,scaledVersionProperties){"use strict";var startOfExt=originalName.lastIndexOf("."),versionType=scaledVersionProperties.type||"image/png",referenceType=scaledVersionProperties.refType,scaledName="",scaledExt=qq.getExtension(originalName),nameAppendage="";if(scaledVersionProperties.name&&scaledVersionProperties.name.trim().length){nameAppendage=" ("+scaledVersionProperties.name+")";}
if(startOfExt>=0){scaledName=originalName.substr(0,startOfExt);if(referenceType!==versionType){scaledExt=versionType.split("/")[1];}
scaledName+=nameAppendage+"."+scaledExt;}
else{scaledName=originalName+nameAppendage;}
return scaledName;},_getSortedSizes:function(sizes){"use strict";sizes=qq.extend([],sizes);return sizes.sort(function(a,b){if(a.maxSize>b.maxSize){return 1;}
if(a.maxSize<b.maxSize){return-1;}
return 0;});},_generateScaledImage:function(spec,sourceFile){"use strict";var self=this,log=spec.log,maxSize=spec.maxSize,orient=spec.orient,type=spec.type,quality=spec.quality,failedText=spec.failedText,includeExif=spec.includeExif&&sourceFile.type==="image/jpeg"&&type==="image/jpeg",scalingEffort=new qq.Promise(),imageGenerator=new qq.ImageGenerator(log),canvas=document.createElement("canvas");log("Attempting to generate scaled version for "+sourceFile.name);imageGenerator.generate(sourceFile,canvas,{maxSize:maxSize,orient:orient}).then(function(){var scaledImageDataUri=canvas.toDataURL(type,quality),signalSuccess=function(){log("Success generating scaled version for "+sourceFile.name);var blob=qq.dataUriToBlob(scaledImageDataUri);scalingEffort.success(blob);};if(includeExif){self._insertExifHeader(sourceFile,scaledImageDataUri,log).then(function(scaledImageDataUriWithExif){scaledImageDataUri=scaledImageDataUriWithExif;signalSuccess();},function(){log("Problem inserting EXIF header into scaled image.  Using scaled image w/out EXIF data.","error");signalSuccess();});}
else{signalSuccess();}},function(){log("Failed attempt to generate scaled version for "+sourceFile.name,"error");scalingEffort.failure(failedText);});return scalingEffort;},_insertExifHeader:function(originalImage,scaledImageDataUri,log){"use strict";var reader=new FileReader(),insertionEffort=new qq.Promise(),originalImageDataUri="";reader.onload=function(){originalImageDataUri=reader.result;insertionEffort.success(ExifRestorer.restore(originalImageDataUri,scaledImageDataUri));};reader.onerror=function(){log("Problem reading "+originalImage.name+" during attempt to transfer EXIF data to scaled version.","error");insertionEffort.failure();};reader.readAsDataURL(originalImage);return insertionEffort;},_dataUriToBlob:function(dataUri){"use strict";var byteString,mimeString,arrayBuffer,intArray;if(dataUri.split(",")[0].indexOf("base64")>=0){byteString=atob(dataUri.split(",")[1]);}
else{byteString=decodeURI(dataUri.split(",")[1]);}
mimeString=dataUri.split(",")[0].split(":")[1].split(";")[0];arrayBuffer=new ArrayBuffer(byteString.length);intArray=new Uint8Array(arrayBuffer);qq.each(byteString,function(idx,character){intArray[idx]=character.charCodeAt(0);});return this._createBlob(arrayBuffer,mimeString);},_createBlob:function(data,mime){"use strict";var BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,blobBuilder=BlobBuilder&&new BlobBuilder();if(blobBuilder){blobBuilder.append(data);return blobBuilder.getBlob(mime);}
else{return new Blob([data],{type:mime});}}});var ExifRestorer=(function()
{var ExifRestorer={};ExifRestorer.KEY_STR="ABCDEFGHIJKLMNOP"+"QRSTUVWXYZabcdef"+"ghijklmnopqrstuv"+"wxyz0123456789+/"+"=";ExifRestorer.encode64=function(input)
{var output="",chr1,chr2,chr3="",enc1,enc2,enc3,enc4="",i=0;do{chr1=input[i++];chr2=input[i++];chr3=input[i++];enc1=chr1>>2;enc2=((chr1&3)<<4)|(chr2>>4);enc3=((chr2&15)<<2)|(chr3>>6);enc4=chr3&63;if(isNaN(chr2)){enc3=enc4=64;}else if(isNaN(chr3)){enc4=64;}
output=output+
this.KEY_STR.charAt(enc1)+
this.KEY_STR.charAt(enc2)+
this.KEY_STR.charAt(enc3)+
this.KEY_STR.charAt(enc4);chr1=chr2=chr3="";enc1=enc2=enc3=enc4="";}while(i<input.length);return output;};ExifRestorer.restore=function(origFileBase64,resizedFileBase64)
{var expectedBase64Header="data:image/jpeg;base64,";if(!origFileBase64.match(expectedBase64Header))
{return resizedFileBase64;}
var rawImage=this.decode64(origFileBase64.replace(expectedBase64Header,""));var segments=this.slice2Segments(rawImage);var image=this.exifManipulation(resizedFileBase64,segments);return expectedBase64Header+this.encode64(image);};ExifRestorer.exifManipulation=function(resizedFileBase64,segments)
{var exifArray=this.getExifArray(segments),newImageArray=this.insertExif(resizedFileBase64,exifArray),aBuffer=new Uint8Array(newImageArray);return aBuffer;};ExifRestorer.getExifArray=function(segments)
{var seg;for(var x=0;x<segments.length;x++)
{seg=segments[x];if(seg[0]==255&seg[1]==225)
{return seg;}}
return[];};ExifRestorer.insertExif=function(resizedFileBase64,exifArray)
{var imageData=resizedFileBase64.replace("data:image/jpeg;base64,",""),buf=this.decode64(imageData),separatePoint=buf.indexOf(255,3),mae=buf.slice(0,separatePoint),ato=buf.slice(separatePoint),array=mae;array=array.concat(exifArray);array=array.concat(ato);return array;};ExifRestorer.slice2Segments=function(rawImageArray)
{var head=0,segments=[];while(1)
{if(rawImageArray[head]==255&rawImageArray[head+1]==218){break;}
if(rawImageArray[head]==255&rawImageArray[head+1]==216)
{head+=2;}
else
{var length=rawImageArray[head+2]*256+rawImageArray[head+3],endPoint=head+length+2,seg=rawImageArray.slice(head,endPoint);segments.push(seg);head=endPoint;}
if(head>rawImageArray.length){break;}}
return segments;};ExifRestorer.decode64=function(input)
{var output="",chr1,chr2,chr3="",enc1,enc2,enc3,enc4="",i=0,buf=[];var base64test=/[^A-Za-z0-9\+\/\=]/g;if(base64test.exec(input)){throw new Error("There were invalid base64 characters in the input text.  "+"Valid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='");}
input=input.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{enc1=this.KEY_STR.indexOf(input.charAt(i++));enc2=this.KEY_STR.indexOf(input.charAt(i++));enc3=this.KEY_STR.indexOf(input.charAt(i++));enc4=this.KEY_STR.indexOf(input.charAt(i++));chr1=(enc1<<2)|(enc2>>4);chr2=((enc2&15)<<4)|(enc3>>2);chr3=((enc3&3)<<6)|enc4;buf.push(chr1);if(enc3!=64){buf.push(chr2);}
if(enc4!=64){buf.push(chr3);}
chr1=chr2=chr3="";enc1=enc2=enc3=enc4="";}while(i<input.length);return buf;};return ExifRestorer;})();qq.TotalProgress=function(callback,getSize){"use strict";var perFileProgress={},totalLoaded=0,totalSize=0,lastLoadedSent=-1,lastTotalSent=-1,callbackProxy=function(loaded,total){if(loaded!==lastLoadedSent||total!==lastTotalSent){callback(loaded,total);}
lastLoadedSent=loaded;lastTotalSent=total;},noRetryableFiles=function(failed,retryable){var none=true;qq.each(failed,function(idx,failedId){if(qq.indexOf(retryable,failedId)>=0){none=false;return false;}});return none;},onCancel=function(id){updateTotalProgress(id,-1,-1);delete perFileProgress[id];},onAllComplete=function(successful,failed,retryable){if(failed.length===0||noRetryableFiles(failed,retryable)){callbackProxy(totalSize,totalSize);this.reset();}},onNew=function(id){var size=getSize(id);if(size>0){updateTotalProgress(id,0,size);perFileProgress[id]={loaded:0,total:size};}},updateTotalProgress=function(id,newLoaded,newTotal){var oldLoaded=perFileProgress[id]?perFileProgress[id].loaded:0,oldTotal=perFileProgress[id]?perFileProgress[id].total:0;if(newLoaded===-1&&newTotal===-1){totalLoaded-=oldLoaded;totalSize-=oldTotal;}
else{if(newLoaded){totalLoaded+=newLoaded-oldLoaded;}
if(newTotal){totalSize+=newTotal-oldTotal;}}
callbackProxy(totalLoaded,totalSize);};qq.extend(this,{onAllComplete:onAllComplete,onStatusChange:function(id,oldStatus,newStatus){if(newStatus===qq.status.CANCELED||newStatus===qq.status.REJECTED){onCancel(id);}
else if(newStatus===qq.status.SUBMITTING){onNew(id);}},onIndividualProgress:function(id,loaded,total){updateTotalProgress(id,loaded,total);perFileProgress[id]={loaded:loaded,total:total};},onNewSize:function(id){onNew(id);},reset:function(){perFileProgress={};totalLoaded=0;totalSize=0;}});};qq.UiEventHandler=function(s,protectedApi){"use strict";var disposer=new qq.DisposeSupport(),spec={eventType:"click",attachTo:null,onHandled:function(target,event){}};qq.extend(this,{addHandler:function(element){addHandler(element);},dispose:function(){disposer.dispose();}});function addHandler(element){disposer.attach(element,spec.eventType,function(event){event=event||window.event;var target=event.target||event.srcElement;spec.onHandled(target,event);});}
qq.extend(protectedApi,{getFileIdFromItem:function(item){return item.qqFileId;},getDisposeSupport:function(){return disposer;}});qq.extend(spec,s);if(spec.attachTo){addHandler(spec.attachTo);}};qq.FileButtonsClickHandler=function(s){"use strict";var inheritedInternalApi={},spec={templating:null,log:function(message,lvl){},onDeleteFile:function(fileId){},onCancel:function(fileId){},onRetry:function(fileId){},onPause:function(fileId){},onContinue:function(fileId){},onGetName:function(fileId){}},buttonHandlers={cancel:function(id){spec.onCancel(id);},retry:function(id){spec.onRetry(id);},deleteButton:function(id){spec.onDeleteFile(id);},pause:function(id){spec.onPause(id);},continueButton:function(id){spec.onContinue(id);}};function examineEvent(target,event){qq.each(buttonHandlers,function(buttonType,handler){var firstLetterCapButtonType=buttonType.charAt(0).toUpperCase()+buttonType.slice(1),fileId;if(spec.templating["is"+firstLetterCapButtonType](target)){fileId=spec.templating.getFileId(target);qq.preventDefault(event);spec.log(qq.format("Detected valid file button click event on file '{}', ID: {}.",spec.onGetName(fileId),fileId));handler(fileId);return false;}});}
qq.extend(spec,s);spec.eventType="click";spec.onHandled=examineEvent;spec.attachTo=spec.templating.getFileList();qq.extend(this,new qq.UiEventHandler(spec,inheritedInternalApi));};qq.FilenameClickHandler=function(s){"use strict";var inheritedInternalApi={},spec={templating:null,log:function(message,lvl){},classes:{file:"qq-upload-file",editNameIcon:"qq-edit-filename-icon"},onGetUploadStatus:function(fileId){},onGetName:function(fileId){}};qq.extend(spec,s);function examineEvent(target,event){if(spec.templating.isFileName(target)||spec.templating.isEditIcon(target)){var fileId=spec.templating.getFileId(target),status=spec.onGetUploadStatus(fileId);if(status===qq.status.SUBMITTED){spec.log(qq.format("Detected valid filename click event on file '{}', ID: {}.",spec.onGetName(fileId),fileId));qq.preventDefault(event);inheritedInternalApi.handleFilenameEdit(fileId,target,true);}}}
spec.eventType="click";spec.onHandled=examineEvent;qq.extend(this,new qq.FilenameEditHandler(spec,inheritedInternalApi));};qq.FilenameInputFocusInHandler=function(s,inheritedInternalApi){"use strict";var spec={templating:null,onGetUploadStatus:function(fileId){},log:function(message,lvl){}};if(!inheritedInternalApi){inheritedInternalApi={};}
function handleInputFocus(target,event){if(spec.templating.isEditInput(target)){var fileId=spec.templating.getFileId(target),status=spec.onGetUploadStatus(fileId);if(status===qq.status.SUBMITTED){spec.log(qq.format("Detected valid filename input focus event on file '{}', ID: {}.",spec.onGetName(fileId),fileId));inheritedInternalApi.handleFilenameEdit(fileId,target);}}}
spec.eventType="focusin";spec.onHandled=handleInputFocus;qq.extend(spec,s);qq.extend(this,new qq.FilenameEditHandler(spec,inheritedInternalApi));};qq.FilenameInputFocusHandler=function(spec){"use strict";spec.eventType="focus";spec.attachTo=null;qq.extend(this,new qq.FilenameInputFocusInHandler(spec,{}));};qq.FilenameEditHandler=function(s,inheritedInternalApi){"use strict";var spec={templating:null,log:function(message,lvl){},onGetUploadStatus:function(fileId){},onGetName:function(fileId){},onSetName:function(fileId,newName){},onEditingStatusChange:function(fileId,isEditing){}};function getFilenameSansExtension(fileId){var filenameSansExt=spec.onGetName(fileId),extIdx=filenameSansExt.lastIndexOf(".");if(extIdx>0){filenameSansExt=filenameSansExt.substr(0,extIdx);}
return filenameSansExt;}
function getOriginalExtension(fileId){var origName=spec.onGetName(fileId);return qq.getExtension(origName);}
function handleNameUpdate(newFilenameInputEl,fileId){var newName=newFilenameInputEl.value,origExtension;if(newName!==undefined&&qq.trimStr(newName).length>0){origExtension=getOriginalExtension(fileId);if(origExtension!==undefined){newName=newName+"."+origExtension;}
spec.onSetName(fileId,newName);}
spec.onEditingStatusChange(fileId,false);}
function registerInputBlurHandler(inputEl,fileId){inheritedInternalApi.getDisposeSupport().attach(inputEl,"blur",function(){handleNameUpdate(inputEl,fileId);});}
function registerInputEnterKeyHandler(inputEl,fileId){inheritedInternalApi.getDisposeSupport().attach(inputEl,"keyup",function(event){var code=event.keyCode||event.which;if(code===13){handleNameUpdate(inputEl,fileId);}});}
qq.extend(spec,s);spec.attachTo=spec.templating.getFileList();qq.extend(this,new qq.UiEventHandler(spec,inheritedInternalApi));qq.extend(inheritedInternalApi,{handleFilenameEdit:function(id,target,focusInput){var newFilenameInputEl=spec.templating.getEditInput(id);spec.onEditingStatusChange(id,true);newFilenameInputEl.value=getFilenameSansExtension(id);if(focusInput){newFilenameInputEl.focus();}
registerInputBlurHandler(newFilenameInputEl,id);registerInputEnterKeyHandler(newFilenameInputEl,id);}});};(function($){"use strict";var $el,pluginOptions=["uploaderType","endpointType"];function init(options){var xformedOpts=transformVariables(options||{}),newUploaderInstance=getNewUploaderInstance(xformedOpts);uploader(newUploaderInstance);addCallbacks(xformedOpts,newUploaderInstance);return $el;}
function getNewUploaderInstance(params){var uploaderType=pluginOption("uploaderType"),namespace=pluginOption("endpointType");if(uploaderType){uploaderType=uploaderType.charAt(0).toUpperCase()+uploaderType.slice(1).toLowerCase();if(namespace){return new qq[namespace]["FineUploader"+uploaderType](params);}
return new qq["FineUploader"+uploaderType](params);}
else{if(namespace){return new qq[namespace].FineUploader(params);}
return new qq.FineUploader(params);}}
function dataStore(key,val){var data=$el.data("fineuploader");if(val){if(data===undefined){data={};}
data[key]=val;$el.data("fineuploader",data);}
else{if(data===undefined){return null;}
return data[key];}}
function uploader(instanceToStore){return dataStore("uploader",instanceToStore);}
function pluginOption(option,optionVal){return dataStore(option,optionVal);}
function addCallbacks(transformedOpts,newUploaderInstance){var callbacks=transformedOpts.callbacks={};$.each(newUploaderInstance._options.callbacks,function(prop,nonJqueryCallback){var name,callbackEventTarget;name=/^on(\w+)/.exec(prop)[1];name=name.substring(0,1).toLowerCase()+name.substring(1);callbackEventTarget=$el;callbacks[prop]=function(){var originalArgs=Array.prototype.slice.call(arguments),transformedArgs=[],nonJqueryCallbackRetVal,jqueryEventCallbackRetVal;$.each(originalArgs,function(idx,arg){transformedArgs.push(maybeWrapInJquery(arg));});nonJqueryCallbackRetVal=nonJqueryCallback.apply(this,originalArgs);try{jqueryEventCallbackRetVal=callbackEventTarget.triggerHandler(name,transformedArgs);}
catch(error){qq.log("Caught error in Fine Uploader jQuery event handler: "+error.message,"error");}
if(nonJqueryCallbackRetVal!=null){return nonJqueryCallbackRetVal;}
return jqueryEventCallbackRetVal;};});newUploaderInstance._options.callbacks=callbacks;}
function transformVariables(source,dest){var xformed,arrayVals;if(dest===undefined){if(source.uploaderType!=="basic"){xformed={element:$el[0]};}
else{xformed={};}}
else{xformed=dest;}
$.each(source,function(prop,val){if($.inArray(prop,pluginOptions)>=0){pluginOption(prop,val);}
else if(val instanceof $){xformed[prop]=val[0];}
else if($.isPlainObject(val)){xformed[prop]={};transformVariables(val,xformed[prop]);}
else if($.isArray(val)){arrayVals=[];$.each(val,function(idx,arrayVal){var arrayObjDest={};if(arrayVal instanceof $){$.merge(arrayVals,arrayVal);}
else if($.isPlainObject(arrayVal)){transformVariables(arrayVal,arrayObjDest);arrayVals.push(arrayObjDest);}
else{arrayVals.push(arrayVal);}});xformed[prop]=arrayVals;}
else{xformed[prop]=val;}});if(dest===undefined){return xformed;}}
function isValidCommand(command){return $.type(command)==="string"&&!command.match(/^_/)&&uploader()[command]!==undefined;}
function delegateCommand(command){var xformedArgs=[],origArgs=Array.prototype.slice.call(arguments,1),retVal;transformVariables(origArgs,xformedArgs);retVal=uploader()[command].apply(uploader(),xformedArgs);return maybeWrapInJquery(retVal);}
function maybeWrapInJquery(val){var transformedVal=val;if(val!=null&&typeof val==="object"&&(val.nodeType===1||val.nodeType===9)&&val.cloneNode){transformedVal=$(val);}
return transformedVal;}
$.fn.fineUploader=function(optionsOrCommand){var self=this,selfArgs=arguments,retVals=[];this.each(function(index,el){$el=$(el);if(uploader()&&isValidCommand(optionsOrCommand)){retVals.push(delegateCommand.apply(self,selfArgs));if(self.length===1){return false;}}
else if(typeof optionsOrCommand==="object"||!optionsOrCommand){init.apply(self,selfArgs);}
else{$.error("Method "+optionsOrCommand+" does not exist on jQuery.fineUploader");}});if(retVals.length===1){return retVals[0];}
else if(retVals.length>1){return retVals;}
return this;};}(jQuery));(function($){"use strict";var rootDataKey="fineUploaderDnd",$el;function init(options){if(!options){options={};}
options.dropZoneElements=[$el];var xformedOpts=transformVariables(options);addCallbacks(xformedOpts);dnd(new qq.DragAndDrop(xformedOpts));return $el;}
function dataStore(key,val){var data=$el.data(rootDataKey);if(val){if(data===undefined){data={};}
data[key]=val;$el.data(rootDataKey,data);}
else{if(data===undefined){return null;}
return data[key];}}
function dnd(instanceToStore){return dataStore("dndInstance",instanceToStore);}
function addCallbacks(transformedOpts){var callbacks=transformedOpts.callbacks={};$.each(new qq.DragAndDrop.callbacks(),function(prop,func){var name=prop,$callbackEl;$callbackEl=$el;callbacks[prop]=function(){var args=Array.prototype.slice.call(arguments),jqueryHandlerResult=$callbackEl.triggerHandler(name,args);return jqueryHandlerResult;};});}
function transformVariables(source,dest){var xformed,arrayVals;if(dest===undefined){xformed={};}
else{xformed=dest;}
$.each(source,function(prop,val){if(val instanceof $){xformed[prop]=val[0];}
else if($.isPlainObject(val)){xformed[prop]={};transformVariables(val,xformed[prop]);}
else if($.isArray(val)){arrayVals=[];$.each(val,function(idx,arrayVal){if(arrayVal instanceof $){$.merge(arrayVals,arrayVal);}
else{arrayVals.push(arrayVal);}});xformed[prop]=arrayVals;}
else{xformed[prop]=val;}});if(dest===undefined){return xformed;}}
function isValidCommand(command){return $.type(command)==="string"&&command==="dispose"&&dnd()[command]!==undefined;}
function delegateCommand(command){var xformedArgs=[],origArgs=Array.prototype.slice.call(arguments,1);transformVariables(origArgs,xformedArgs);return dnd()[command].apply(dnd(),xformedArgs);}
$.fn.fineUploaderDnd=function(optionsOrCommand){var self=this,selfArgs=arguments,retVals=[];this.each(function(index,el){$el=$(el);if(dnd()&&isValidCommand(optionsOrCommand)){retVals.push(delegateCommand.apply(self,selfArgs));if(self.length===1){return false;}}
else if(typeof optionsOrCommand==="object"||!optionsOrCommand){init.apply(self,selfArgs);}
else{$.error("Method "+optionsOrCommand+" does not exist in Fine Uploader's DnD module.");}});if(retVals.length===1){return retVals[0];}
else if(retVals.length>1){return retVals;}
return this;};}(jQuery));
/*! 2015-12-15 */
;/*
    jQuery Masked Input Plugin
    Copyright (c) 2007 - 2015 Josh Bush (digitalbush.com)
    Licensed under the MIT license (http://digitalbush.com/projects/masked-input-plugin/#license)
    Version: 1.4.1
*/
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof exports?require("jquery"):jQuery)}(function(a){var b,c=navigator.userAgent,d=/iphone/i.test(c),e=/chrome/i.test(c),f=/android/i.test(c);a.mask={definitions:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},autoclear:!0,dataName:"rawMaskFn",placeholder:"_"},a.fn.extend({caret:function(a,b){var c;if(0!==this.length&&!this.is(":hidden"))return"number"==typeof a?(b="number"==typeof b?b:a,this.each(function(){this.setSelectionRange?this.setSelectionRange(a,b):this.createTextRange&&(c=this.createTextRange(),c.collapse(!0),c.moveEnd("character",b),c.moveStart("character",a),c.select())})):(this[0].setSelectionRange?(a=this[0].selectionStart,b=this[0].selectionEnd):document.selection&&document.selection.createRange&&(c=document.selection.createRange(),a=0-c.duplicate().moveStart("character",-1e5),b=a+c.text.length),{begin:a,end:b})},unmask:function(){return this.trigger("unmask")},mask:function(c,g){var h,i,j,k,l,m,n,o;if(!c&&this.length>0){h=a(this[0]);var p=h.data(a.mask.dataName);return p?p():void 0}return g=a.extend({autoclear:a.mask.autoclear,placeholder:a.mask.placeholder,completed:null},g),i=a.mask.definitions,j=[],k=n=c.length,l=null,a.each(c.split(""),function(a,b){"?"==b?(n--,k=a):i[b]?(j.push(new RegExp(i[b])),null===l&&(l=j.length-1),k>a&&(m=j.length-1)):j.push(null)}),this.trigger("unmask").each(function(){function h(){if(g.completed){for(var a=l;m>=a;a++)if(j[a]&&C[a]===p(a))return;g.completed.call(B)}}function p(a){return g.placeholder.charAt(a<g.placeholder.length?a:0)}function q(a){for(;++a<n&&!j[a];);return a}function r(a){for(;--a>=0&&!j[a];);return a}function s(a,b){var c,d;if(!(0>a)){for(c=a,d=q(b);n>c;c++)if(j[c]){if(!(n>d&&j[c].test(C[d])))break;C[c]=C[d],C[d]=p(d),d=q(d)}z(),B.caret(Math.max(l,a))}}function t(a){var b,c,d,e;for(b=a,c=p(a);n>b;b++)if(j[b]){if(d=q(b),e=C[b],C[b]=c,!(n>d&&j[d].test(e)))break;c=e}}function u(){var a=B.val(),b=B.caret();if(o&&o.length&&o.length>a.length){for(A(!0);b.begin>0&&!j[b.begin-1];)b.begin--;if(0===b.begin)for(;b.begin<l&&!j[b.begin];)b.begin++;B.caret(b.begin,b.begin)}else{for(A(!0);b.begin<n&&!j[b.begin];)b.begin++;B.caret(b.begin,b.begin)}h()}function v(){A(),B.val()!=E&&B.change()}function w(a){if(!B.prop("readonly")){var b,c,e,f=a.which||a.keyCode;o=B.val(),8===f||46===f||d&&127===f?(b=B.caret(),c=b.begin,e=b.end,e-c===0&&(c=46!==f?r(c):e=q(c-1),e=46===f?q(e):e),y(c,e),s(c,e-1),a.preventDefault()):13===f?v.call(this,a):27===f&&(B.val(E),B.caret(0,A()),a.preventDefault())}}function x(b){if(!B.prop("readonly")){var c,d,e,g=b.which||b.keyCode,i=B.caret();if(!(b.ctrlKey||b.altKey||b.metaKey||32>g)&&g&&13!==g){if(i.end-i.begin!==0&&(y(i.begin,i.end),s(i.begin,i.end-1)),c=q(i.begin-1),n>c&&(d=String.fromCharCode(g),j[c].test(d))){if(t(c),C[c]=d,z(),e=q(c),f){var k=function(){a.proxy(a.fn.caret,B,e)()};setTimeout(k,0)}else B.caret(e);i.begin<=m&&h()}b.preventDefault()}}}function y(a,b){var c;for(c=a;b>c&&n>c;c++)j[c]&&(C[c]=p(c))}function z(){B.val(C.join(""))}function A(a){var b,c,d,e=B.val(),f=-1;for(b=0,d=0;n>b;b++)if(j[b]){for(C[b]=p(b);d++<e.length;)if(c=e.charAt(d-1),j[b].test(c)){C[b]=c,f=b;break}if(d>e.length){y(b+1,n);break}}else C[b]===e.charAt(d)&&d++,k>b&&(f=b);return a?z():k>f+1?g.autoclear||C.join("")===D?(B.val()&&B.val(""),y(0,n)):z():(z(),B.val(B.val().substring(0,f+1))),k?b:l}var B=a(this),C=a.map(c.split(""),function(a,b){return"?"!=a?i[a]?p(b):a:void 0}),D=C.join(""),E=B.val();B.data(a.mask.dataName,function(){return a.map(C,function(a,b){return j[b]&&a!=p(b)?a:null}).join("")}),B.one("unmask",function(){B.off(".mask").removeData(a.mask.dataName)}).on("focus.mask",function(){if(!B.prop("readonly")){clearTimeout(b);var a;E=B.val(),a=A(),b=setTimeout(function(){B.get(0)===document.activeElement&&(z(),a==c.replace("?","").length?B.caret(0,a):B.caret(a))},10)}}).on("blur.mask",v).on("keydown.mask",w).on("keypress.mask",x).on("input.mask paste.mask",function(){B.prop("readonly")||setTimeout(function(){var a=A(!0);B.caret(a),h()},0)}),e&&f&&B.off("input.mask").on("input.mask",u),A()})}})});
;var popUpWin=0;var APP_MAIN={};jQuery.browser={};(function(){jQuery.browser.msie=false;jQuery.browser.version=0;if(navigator.userAgent.match(/MSIE ([0-9]+)\./)){jQuery.browser.msie=true;jQuery.browser.version=RegExp.$1;}})();function popUpWindow(URLStr,left,top,width,height)
{if(popUpWin)
{if(!popUpWin.closed)popUpWin.close();}
popUpWin=open(URLStr,'popUpWinS','toolbar=no,location=no,directories=no,titlebar=no,status=no,menubar=no,scrollbars=no,resizable=no,copyhistory=yes,width='+width+',height='+height+',left='+left+', top='+top+',screenX='+left+',screenY='+top+'');popUpWin.focus();}
var abv="vkladka-otziv";function vkladki(x,y){var mostrar=document.getElementById(x);var actual=document.getElementById(abv);if(mostrar==actual){return false;}
actual.className="skryt";mostrar.className="vid";abv=x;document.getElementById('ttl-tab1').style.borderBottomColor='#e1e1e1';if(self.ramka)ramka.style.borderBottomColor='#e1e1e1';y.style.borderBottomColor='#fff';ramka=y;}
function showCoupon(obj){if(obj.checked)document.getElementById("couponMoreInfo").style.display="";else document.getElementById("couponMoreInfo").style.display="none";}
$(function(){$("#gotomap").click(function(){$('.nav-tabs li a:first').trigger('click');$('html, body').animate({scrollTop:$("#map_canvas").offset().top},500);});$('.image_primer_rabot_carousel .jcarousel').each(function(){$(this).jcarousel().on('jcarousel:visiblein','li',function(){var img=$(this).find('img');if(img.data('src')&&!img.data('loaded')){img.attr('src',img.data('src')).data('loaded',true);}}).jcarousel('visible').each(function(){$(this).trigger('jcarousel:visiblein');});});$(".listener").autolist();$(document).on("click",'.answer_here a',function(){console.log('answer here');var $thisForm=$("#convert_form");var typeform=$thisForm.find('input[name="fromformtype"]').val();$thisForm.find('input[name="form-type"]').val(typeform);$thisForm.find('input[name="phone"]').removeClass("verified").val('');$("#convert_form").find(".site-form").submit();});if($('.tbs').length){var clicked_tab=$('.tbs  .tab_names[tab_id]')[0];$('.naits td:first').css('opacity','1');$('.naits td img:first-child').css('outline','1px solid #ff00ff');$('.tbs .tab_names').each(function(i,td){var block_id=$.trim($(td).attr('tab_id'));if(block_id==''){return;}
$(td).click(function(){$(clicked_tab).removeClass('selected');var prev_block_id=$.trim($(clicked_tab).attr('tab_id'));d(prev_block_id);d(block_id);$('#'+prev_block_id).slideToggle(0);$('#'+block_id).slideToggle(0);clicked_tab=td;$(this).addClass('selected');}).attr('title',$('span',td).text());});$(document).on("click",'.naits img',function(){var cur_img=this;$(".med_txt").html($(cur_img).prev().text());$('.naits').find('td').fadeTo(100,0.5);$('.naits').find('td img').css('outline','medium none');$(this).parents().fadeTo(100,1);$(this).css('outline','1px solid #ff00ff');var objImagePreloader=new Image();objImagePreloader.onload=function(){$('.big_img').animate({},100,"linear",function(){$('.big_img').attr('src',$(cur_img).attr('bigimg'));});objImagePreloader.onload=function(){};};objImagePreloader.src=$(cur_img).attr('bigimg');});}
$('#clin_fotos td.address_way td img').click(function(){$('#clin_fotos td.address_way td img').css('outline','');$(this).css('outline','1px solid #ff00ff');});$(".show_full_list_clinics").click(function(){var speed=1000;var a_lnk=this;if($('#other_clinics').css('display')=='block'){speed=100;$(a_lnk).html($(a_lnk).attr("alt_txt2"));$('#other_clinics').css('display','none');}else{$(a_lnk).attr("alt_txt2",$(a_lnk).html());$(a_lnk).html($(a_lnk).attr("alt_txt"));$('#other_clinics').css('display','block');}
return false;}).focus(function(){this.blur();});$('.banner3days').click(function(event){if(($('.banner-block_open').css("display")=="none")){$('.banner-block').show();$('.banner-block_open').hide();}
else{$('.banner-block_open').hide();$('.banner-block').show();}});var fix_block='.zub_slider.zub_slider_fix';$.lockfixed(fix_block,{forcemargin:true,offset:{top:0,bottom:150}});var options={beforeSubmit:showRequest,error:showError,success:showResponse,url:GetTemlatePath('includes/form_handler.php'),timeout:10000};var options_convert={beforeSubmit:showRequest,error:showError,success:showResponse,url:GetTemlatePath('includes/form_convert.php'),timeout:10000};$(document).ready(function(){if($('input[name="checkpage"]').length&&$('input[name="checkpage"]').val()=='services'){var urlsection=$('input[name="url-section"]').val();var urlpage=$('input[name="url-page"]').val();var data='ajaxservice=loadblock&Type=akcii_trans&urlsection='+urlsection+'&urlpage='+urlpage;var param={timeout:''};var responser=AjaxService(data,param);if(responser&&$('.motivation-block').length){$('.motivation-block').after(responser).hide().fadeIn('fast');}}
var isMac=navigator.platform.toUpperCase().indexOf('MAC')!==-1;if($.browser.mozilla&&isMac)
$('.akcii-discount').css('font-weight','normal');if($("div").is('.akcii-biletik')){$('.akcii-biletik-text-name, .biletik-anons, .akcii-biletik-price-big').each(function(){if($(this).hasClass('akcii-biletik-price-big'))
return false;var htext=$(this).parent().find('.akcii-biletik-text-name').height();var hcost=$(this).parent().find('.biletik-anons').height();var hwrap=98;var hall=(hwrap-(htext+hcost+5))/2;$(this).parent().css('margin',hall+'px 0 0 17px')});}
var path=GetPage();var faqpath=path.substr(0,5);var zabpath=path.substr(0,14);if(faqpath=='/faq/'||zabpath=='/zabolevaniya/'||$('.transqure-block .price-serv').length){$('a[href^="#"]').bind("click",function(e){if($(this).hasClass('next')||$(this).hasClass('prev')||$(this).hasClass('next2')||$(this).hasClass('prev2')||$(this).hasClass('prev3'))
return false;var anchor=$(this);var anchorname=anchor.attr('href');var anchorname=anchorname.replace('#','');$('html, body').stop().animate({scrollTop:$('a[name="'+anchorname+'"]').offset().top},500);});return false;}
$(function(){if($('.zub_container').length){var zub_items_txt='.zub_container .zub_item';var zub_slides='.zub_slider .zub_slide';var zub_titles='.zub_slider p';var fix_block='.zub_slider';$(zub_items_txt).hover(function(){var slide_id=$(this).attr('id').substring(5);$(zub_items_txt).removeClass('active');$(zub_titles).removeClass('active');$(zub_slides).hide();$(this).addClass('active');$('#title_'+slide_id).addClass('active');$('#'+slide_id).show();},function(){});$(zub_titles).click(function(){var slide_id=$(this).attr('id').substring(6);$(zub_items_txt).removeClass('active');$(zub_titles).removeClass('active');$(zub_slides).hide();$(this).addClass('active');$('#link_'+slide_id).addClass('active');$('#'+slide_id).show();jQuery.scrollTo('#link_'+slide_id,600);});}})});$('.title').each(function(){var ArType=$(this).attr('class').split(' ');var type='';var position='';var positionex='';for(var i=0;i<=ArType.length-1;i++){if(ArType[i]=='title'){type=ArType[i+1];position=ArType[i+2];positionex=ArType[i+3];}}
type=type.split('-');type=type[0];if(type){if(position=='right'&&!positionex){$(this).css('float','right');$(this).before('<div style="float:right; margin:4px 0 0 10px;"><img src="'+GetTemlatePath("images/"+type+".png")+'"></div>');}
else if(position=='right'&&positionex=='left'){$(this).css('float','right');$(this).after('<div style="float:right; margin:4px 10px 0 0;"><img src="'+GetTemlatePath("images/"+type+".png")+'"></div>');}
else if(position=='left'&&positionex=='left'){$(this).before('<div style="float:left; margin:2px 0 0 20px;"><img src="'+GetTemlatePath("images/"+type+".png")+'"></div>');}
else{var margin='16px 0px 0px 0px';if($.browser.msie&&$.browser.version=='7.0')
margin='2px 0px 16px 10px';$(this).after('<div style="margin:'+margin+'; display: inline-block;"><img src="'+GetTemlatePath("images/"+type+".png")+'"></div><div class="clearl"></div>');}}});window.onload=function(){var elms=[GetTemlatePath('images/bgcity-drop.png')];var imgs=[];for(var i=0;i<elms.length;i++){imgs.push(new Image());imgs[i].src=elms[i];}}
$(window).scroll(function(){if($('.content').height()>1000&&$(window).scrollTop()>1000){$('#toTop').show();}else{$('#toTop').hide();}});function getCookie(name){var matches=document.cookie.match(new RegExp("(?:^|; )"+name.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,'\\$1')+"=([^;]*)"));return matches?decodeURIComponent(matches[1]):undefined;}
$('body').activity({'achieveTime':15,'testPeriod':15,useMultiMode:1,loop:0,callBack:function(e){if(!getCookie('banner_show')){$('.banner-block').hide();$('.banner-block_open').show();}
document.cookie="banner_show=yes; path=/;";}});$(document).ready(function(){$(window).scroll(function(){var top=$(document).scrollTop();if(document.body.clientWidth<992){$('.banner_head_top').removeClass('fixed');}
else{$('.call_link').css("height","0");if(top>38&&!$('.banner_head_top').hasClass("fixed")){}
else if(top<=38){}}});$(document).on('click','.banner_head_top',function(event){if(event.target.tagName.toUpperCase()=='INPUT')return;if(($('.banner-block_open').css("display")=="none")){$('.banner-block').hide();$('.banner-block_open').show();}
else{$('.banner-block_open').hide();$('.banner-block').show();}});});$(document).on('click','.show_menu',function(){$(this).parent().next('ul').show();$(this).removeClass('show_menu').addClass('hide_menu');return false;});$(document).on('click','.hide_menu',function(){$(this).parent().next('ul').hide();$(this).removeClass('hide_menu').addClass('show_menu');return false;});if(!$('.ill-quest-block').find('.ill-quest-item').exists())
$('.ill-quest-block').prev('h2').remove();$(".ontop").click(function(){$("html,body").animate({"scrollTop":0},"slow");});$('.cntrblk img, .cntrblk p img').each(function(){if($(this).attr('align')=="left"||$(this).attr('align')=="right")
$(this).css('float','left').css({'border':'1px solid #E1E1E1','float':'left','margin':'0 25px 25px 0','padding':'3px'});else if($(this).attr('style')=='float:right;'||$(this).attr('style')=='float:right')
{$(this).css({'border':'1px solid #E1E1E1','float':'right','margin':'0 25px 25px 25px','padding':'3px'});}});$(".doc-filter-select").chosen();$('.otziv-vopros-form  #ttl-tab1').click(function(){$(this).addClass("active-tab");$(this).parent().addClass('tab1-active').removeClass('tab2-active');$(".otziv-vopros-form .form-tab #ttl-tab2").removeClass("active-tab");});$('.otziv-vopros-form  #ttl-tab2').click(function(){$(this).addClass("active-tab");$(this).parent().addClass('tab2-active').removeClass('tab1-active');;$(".otziv-vopros-form .form-tab #ttl-tab1").removeClass("active-tab");});$('body').click(function(event){if(!($(event.target).parents('.g2-select').length)){$('.g2-select').removeClass('g2-select_active');}});$('.g2-select').each(function(){var current=$(this);$(this).children('.g2-select-name, .g2-select-marker').click(function(){$('.g2-select, g2-select2').not(current).removeClass('g2-select_active');$(this).parent('.g2-select, g2-select2').toggleClass('g2-select_active');});$(this).find('.g2-select-level-3-name').click(function(){$('.g2-select, g2-select2').removeClass('g2-select_active');if($(this).attr("gotourl"))
document.location.href=$(this).attr("gotourl");});$(this).find('.g2-select-level-2-name').click(function(){$('.g2-select, g2-select2').removeClass('g2-select_active');if($(this).attr("gotourl"))
document.location.href=$(this).attr("gotourl");});});$('a[rel=baner_kids]').fancybox({helpers:{arrows:true,overlay:{showEarly:false}},padding:0,beforeShow:function(){}});$().fancybox({hideScrollbar:true,selector:'a[rel=zoom]',arrows:true,afterClose:function(){$('.jcarousel ul').css('width','1');setTimeout(function(){$('.jcarousel ul').css('width','20000em');},100);}});$().fancybox({hideScrollbar:true,selector:'.doc-video-yout',arrows:true,afterClose:function(){$('.jcarousel ul').css('width','1');setTimeout(function(){$('.jcarousel ul').css('width','20000em');},100);}});$().fancybox({hideScrollbar:true,selector:'.video-review-item',arrows:true,afterClose:function(){$('.jcarousel ul').css('width','1');setTimeout(function(){$('.jcarousel ul').css('width','20000em');},100);}});$('[data-fancybox="group"]').fancybox({clickSlide:'close',clickOutside:'close',autoFocus:false,hideScrollbar:true,touch:false,clickContent:false,animationEffect:false,arrows:true,wheel:false,keyboard:true,loop:true,baseClass:"resfancy",beforeShow:function(){loading('show');$('.fancybox-inner').hide();},afterShow:function(instance,current){var ELEM_ID=current.opts.$orig.attr('id');$.ajax({type:"POST",url:GetTemlatePath('includes/result_element.php'),data:"ELEM_ID="+ELEM_ID,timeout:20000,error:function(er){alert('  ,    .   .');loading('hideall');},success:function(data){if(data){var dataform=$(data);$('.fancybox-content').html(data);loading('hideall');$('.fancybox-inner').show();}
else if(!data){alert('  ,    .   .');loading('hideall');}}});loading('hideall');},afterClose:function(){$('.jcarousel ul').css('width','1');setTimeout(function(){$('.jcarousel ul').css('width','20000em');},100);}});$(".inwhereicity").click(function(){if($(".rightchanger-area .rc-bg-act").attr("id")=="rc-msc"||$(".rightchanger-area .rc-bg-act").attr("id")=="rc-kiev"){$(".rightchanger-area div").removeClass("rc-bg-act");$("#rc-spb").addClass("rc-bg-act");$(".inwherecity2").text("  :");$(".frommapdiv .inwhereicity").text('  ');$("#topphone-msc").css("display","none");$("#topphone-kiev").css("display","none");$("#topphone-spb").fadeIn(500);$("#phone-msc").css("display","none");$("#phone-spb").fadeIn(500);$("#intermap-msc").css("display","none");$("#intermap-spb").slideDown(400);$(".maptitle").html('<strong></strong>  ');$("input[name=pc_phone_code]").attr("value","812");$("a[href=/adresa-stomatologiy/]").attr("href","/spb/adresa-stomatologiy/");$("a[href=/o-klinikah/akcii-v-stomatologii/]").attr("href","/spb/o-klinikah/akcii-v-stomatologii/");}
else if($(".rightchanger-area .rc-bg-act").attr("id")=="rc-spb"){$(".rightchanger-area div").removeClass("rc-bg-act");$("#rc-msc").addClass("rc-bg-act");$(".inwherecity2").text("  :");$(".frommapdiv .inwhereicity").text('  ');$("#topphone-spb").css("display","none");$("#topphone-kiev").css("display","none");$("#topphone-msc").fadeIn(500);$("#phone-spb").css("display","none");$("#phone-msc").fadeIn(500);$("#intermap-spb").css("display","none");$("#intermap-msc").slideDown(400);$(".maptitle").html('<strong></strong>  ');$("input[name=pc_phone_code]").attr("value","495");$("a[href=/spb/adresa-stomatologiy/]").attr("href","/adresa-stomatologiy/");$("a[href=/spb/o-klinikah/akcii-v-stomatologii/]").attr("href","/o-klinikah/akcii-v-stomatologii/");}});$('body').click(function(event){if(!($(event.target).parents('.g-select').length)){$('.g-select').removeClass('g-select_active');}});$('.doc-work-all').click(function(){$('.result-block .hidden-block').fadeIn();$('.result-block .doc-work-all').slideUp('fast')
$('.result-block .hide-work-all').slideDown('fast');});$('.hide-work-all').click(function(){$('.result-block .hidden-block').fadeOut();$('.result-block .doc-work-all').slideDown('fast')
$('.result-block .hide-work-all').slideUp('fast');});$('.doc-review-all').click(function(){$('.doc-reviews .doc-review-hidden').fadeIn();$('.doc-reviews .doc-review-all').slideUp('fast')
$('.doc-reviews .hide-review-all').slideDown('fast');});$('.hide-review-all').click(function(){$('.doc-reviews .doc-review-hidden').fadeOut();$('.doc-reviews .doc-review-all').slideDown('fast');$('.doc-reviews .hide-review-all').slideUp('fast');});$('.doc-question-all').click(function(){$('.doc-questions .doc-question-hidden').fadeIn();$('.doc-questions .doc-question-all').slideUp('fast')
$('.doc-questions .hide-question-all').slideDown('fast');});$('.hide-question-all').click(function(){$('.doc-questions .doc-question-hidden').fadeOut();$('.doc-questions .doc-question-all').slideDown('fast');$('.doc-questions .hide-question-all').slideUp('fast');});$(document).on("click",'.faq-block .faq-item .faq-user-button',function(){$(this).parents('.faq-item').find('.faq-linked').fadeIn();$(this).removeClass('faq-user-button').addClass('hide-faq-user-button');$(this).html('<div class="minus"></div><span>   </span>');});$(document).on("click",'.faq-block .faq-item .hide-faq-user-button',function(){$(this).parents('.faq-item').find('.faq-linked').hide();$(this).removeClass('hide-faq-user-button').addClass('faq-user-button');$(this).html('<div class="plus"></div><span>  </span>');});$(".button-show-form").click(function(){var $form=$(".container-show-form");if($form.hasClass("closed")){$form.slideDown("slow");$form.removeClass("closed");}else{$form.slideUp("slow");$form.addClass("closed");}});$(".call_back_btn, .top-btn, .top-btn-apadtive, .write-call-btn, .bilet-popup, .transqure-block-pop-up, .block-name a.zapisatca, .call_for_your, .popinfo").click(function(){$price_ar='';if($(this).hasClass('popinfo')){$service=$(this).parents('tr').find('.nazvanual').text();$price=$(this).text();$price_type=$(this).data('type');if($service&&$price&&$price_type){$price_ar=$service+'|'+$price+'|'+$price_type;}}
var banner_may="";if($(this).attr("data-banner-may")=="Y"){banner_may="&BANNER_MAY=Y";}
loading('show');var button=$(this);var type='body';if($(this).hasClass('transqure-block-pop-up'))
type='zapis';if($(this).hasClass('head'))
type='head';$.ajax({type:"POST",url:GetTemlatePath('includes/form_tmpl.php'),data:"TYPE_FORM=ZAPIS_POPUP&ZAPIS_TYPE="+type+"&CURR_PAGE="+GetPage()+banner_may+"&PRICE_INFO="+$price_ar,timeout:20000,error:function(er){alert('  ,    .   .');loading('hideall');},success:function(data){var form=$("#prison .zapis-form-inner").length;if(data){$.fancybox.open(data,{clickSlide:'close',clickOutside:'close',autoFocus:false,hideScrollbar:true,touch:false,});if(type=='head'){if(typeof yaCounter7436560!='undefined'){}}
else if(type=='body'){if(typeof yaCounter7436560!='undefined'){}}
loading('hideall');}
else if(!data){alert('  ,    .   .');loading('hideall');}}});});$(document).on("click",'.doc-list-block .doc-ask-quest, .doc-list-block .doc-ask-otziv.push-me, .ask-dok, .add-doc-review',function(){loading('show');var namedoc=$(this).parents('.vrach-item').find('.vrach-h2 a').html();var docid=$(this).parents('.vrach-item').find('input[name="docid"]').val();var namedoc=namedoc.replace('<br>',' ');var button=$(this);if($(this).hasClass('doc-ask-otziv')||$(this).hasClass('add-doc-review'))
var typeform='docreview';$.ajax({type:"POST",url:GetTemlatePath('includes/form_tmpl.php'),data:"TYPE_FORM=DOC_LIST_ASK&CURR_PAGE="+GetPage(),timeout:20000,error:function(er){alert('  ,    .   .');loading('hideall');},success:function(data){if(data){var dataform=$(data);if(typeform=='docreview'){dataform.find('p span.doc-text').text('  : ');dataform.find('input[name="form-type"]').val('doc-review-popup');dataform.find('textarea').parent().find('label').text('');dataform.find('.loading-layer.success div').text('  ');}
dataform.find('p span.doc-name').text(namedoc);dataform.find('input[name="docid"]').val(docid);dataform.find('input[name="namedoc"]').val(namedoc);$.fancybox.open(dataform,{clickSlide:'close',clickOutside:'close',autoFocus:false,hideScrollbar:true,touch:false,});loading('hideall');}
else if(!data){alert('  ,    .   .');loading('hideall');}}});});$(document).on("submit",'.site-form',function(){var typeform=$(this).find('input[name="form-type"]').val();var isGoToConvert=false;if($(this).find('input[name="convert_form"]').val()===undefined){isGoToConvert=true;}
if((typeform=='question-page'||typeform=='faq-ask-question')&&isGoToConvert){$(this).ajaxSubmit(options_convert);console.log('go to convert');}else{$(this).ajaxSubmit(options);}
return false;});$(document).on("submit",'.overlay',function(){var type=$(this).attr('type');var form=$('.'+type).length;if(form){var check=0;$('.'+type+' input[type="text"], .'+type+' input[type="tel"], .'+type+' textarea').each(function(){if($(this).val()!='')
check=$(this).val();});if(check==0){if(type=='zapis-form')
var type=type+'-inner';$('.'+type).fadeOut('fast').remove();overlay('hide');loading('hideall');}}});$('.doc-filter-item, .doc-filter-select').change(function(){var clinicid=$('.doc-filter-select').val();if(clinicid=='showall')
var data='Type=FindDoc&SearchText=showall';else
var data='Type=GetDocsCl&ClinicID='+clinicid+'';$('.doc-list-overlay, .doc-list-loading').show();$.ajax({type:"POST",url:GetTemlatePath('includes/ajax_handler.php'),data:data,dataType:"json",jsonp:"jsoncallback",error:function(er){alert(er.responseText);$('.doc-list-overlay, .doc-list-loading').hide();},success:DocListNew});});$(document).on("keyup",'.doc-search-form',function(){var text=$('.doc-search-input').val();if(text.length<3&&text.length!=0)
return false;else if(text.length==0)
var text='showall';var text=encodeURIComponent(text);$('.doc-list-overlay, .doc-list-loading').show();$.ajax({type:"POST",url:GetTemlatePath('includes/ajax_handler.php'),data:'Type=FindDoc&SearchText='+text+'',dataType:"json",jsonp:"jsoncallback",error:function(er){alert(er.responseText);$('.doc-list-overlay, .doc-list-loading').hide();},success:DocListNew});return false;});$('.doc-search-form').submit(function(){var text=$(this).find('input').val();if(text.length<3)
return false;var text=encodeURIComponent(text);$('.doc-list-overlay, .doc-list-loading').show();$.ajax({type:"POST",url:GetTemlatePath('includes/ajax_handler.php'),data:'Type=FindDoc&SearchText='+text+'',dataType:"json",jsonp:"jsoncallback",error:function(er){alert(er.responseText);$('.doc-list-overlay, .doc-list-loading').hide();},success:DocListNew});return false;});$('.doc-form .write-review, .doc-form .write-question').click(function(event){$('.doc-form .write-review, .doc-form .write-question').css('background','none');$(event.target).css('background','gray');});$('.ill-location .g-select').each(function(){var current=$(this);$(this).children('.g-select-name, .g-select-marker').click(function(){$('.g-select, g-select2').not(current).removeClass('g-select_active');$(this).parent('.g-select, g-select2').toggleClass('g-select_active');});$(this).find('.g-select-level-3-name').click(function(){$('.g-select, g-select2').removeClass('g-select_active');if($(this).attr("gotourl"))
document.location.href=$(this).attr("gotourl");});$(this).find('.g-select-level-2-name').click(function(){$('.g-select, g-select2').removeClass('g-select_active');if($(this).attr("gotourl"))
document.location.href=$(this).attr("gotourl");});});$(".rightchanger-area div").hover(function(){$(this).css("backgroundPosition","-26px 0");},function(){$(this).css("backgroundPosition","0 0");});$('.form-edu .educhange-fiz').click(function(){$('.form-edu').find('label.educhange').text('');$('.form-edu').find('input.educhange').prop('name','spec');});$('.form-edu .educhange-yur').click(function(){$('.form-edu').find('label.educhange').text('');$('.form-edu').find('input.educhange').prop('name','company');});$(document).on("click",'#toTopLink',function(){event.preventDefault();$("html, body").animate({scrollTop:0},"fast");return false;});$(document).on("click",'.city-item',function(){if(!$(this).hasClass('selected')){var cur=$('.city-item.selected');var city=cur.attr('rel');cur.removeClass('selected');$('.sitemap-for-'+city).removeClass('selected');$(this).addClass('selected');$('.sitemap-for-'+$(this).attr('rel')).addClass('selected');}});$(document).on("click",'.communication_email',function(){$('.communication_method').hide();$('.label-email').show();$('.input-email').show();$('.input-email').addClass("verified");});$(document).on("click",'.communication_call',function(){$('.communication_method').hide();$('.label-call').show();$('.input-call').show();$('.input-call').addClass("verified");});$(document).on("click",'.communication_whatsapp',function(){$('.communication_method').hide();$('.label-whatsapp').show();$('.input-whatsapp').show();$('.input-whatsapp').addClass("verified");});$(document).on("click",'.communication_viber',function(){$('.communication_method').hide();$('.label-viber').show();$('.input-viber').show();$('.input-whatsapp').addClass("input-viber");});$('.faq_list_item .faq_read_more a').click(function(){$(this).parent().hide();$(this).parent().siblings(".faq_trim_ans").hide();$(this).parent().siblings(".faq_full_ans").show();});$(".write-call-btn.body").click(function(){if(typeof yaCounter7436560!='undefined'){yaCounter7436560.reachGoal('ya_zvonok_niz');}});$("#banner_may").click(function(){if(typeof yaCounter7436560!='undefined'){yaCounter7436560.reachGoal('banner_may');}});});function AjaxService(data,param){if(!data)
return false;var newdata='';var timevalue='5000';if(param&&param.timeout)
timevalue=param.timeout;$.ajax({type:"POST",url:GetTemlatePath('includes/ajax_handler.php'),data:data,async:false,timeout:timevalue,error:function(er){alert(',    .   .');return false;},success:function(data){if(data){newdata=data;}
else
return false;}});return newdata;}
function DocListNew(data){if(null){alert('   ,   ');$('.doc-list-overlay, .doc-list-loading').hide();return false;}
else if(data.error){alert(data.error);$('.doc-list-overlay, .doc-list-loading').hide();return false;}
else if(data.type=='GetDocs'&&data.success=='GetDocsOk'){$('.doc-list-block .doc-list-wrap').empty();$('.doc-list-block .pager').remove();if(data.ArDocs){jQuery.each(data.ArDocs,function(i,val){if(val.specgroup&&val.PROPERTY_DEGREE_VALUE)
var comma=', ';else
var comma='';var degree=val.PROPERTY_DEGREE_VALUE;var ArSpecialty=val.specgroup;var specialty='';for(var i=0;i<=ArSpecialty.length-1;i++){specialty=specialty+ArSpecialty[i]+(ArSpecialty[i+1]?', ':'');}
var auxtempl1=('<div class="doc-ask-otziv"><a href="'+val.DETAIL_PAGE_URL+'"><span class="inner-1"><span class="inner-2"> </span></span></a></div>');var auxtempl2=('<div class="doc-ask-otziv push-me"><span class="inner-1"><span class="inner-2"> </span></span></div>');$('.doc-list-block .doc-list-wrap').append('<div class="vrach-item">'+'<input type="hidden" name="docid" value="'+val.ID+'">'+'<div class="doc-photo">'+'<a href="'+val.DETAIL_PAGE_URL+'">'+(val.pic?'<img class="floatTL" border="0" src="'+val.pic+'"></a>':'<div class="nophoto"><div> </div></div>')+'</div>'+'<div class="vrach-h2"><a href="'+val.DETAIL_PAGE_URL+'">'+val.NAME+'</a></div>'+'<div class="doc-from-clinic"><a href="'+data.ClDetailURL+'"> . '+data.ClMetro+'</a><br></div>'+'<div class="doc-desc">'+degree+comma+specialty+'</div>'+'<div class="doc-button">'+'<div class="doc-ask-quest"><span class="inner-1"><span class="inner-2"> </span></span></div>'+
(val.REVIEWS?auxtempl1:auxtempl2)+'</div>'+'<div class="clearl"></div>'+'</div>').hide().fadeIn('fast');});$('.doc-list-overlay, .doc-list-loading').hide();}
else{$('.doc-list-overlay, .doc-list-loading').hide();}}
else if(data.type=='FindDoc'&&data.success=='FindDocsOk'){$('.doc-list-block .doc-list-wrap').empty();$('.doc-list-block .pager').remove();if(data.ArDocs){jQuery.each(data.ArDocs,function(i,val){if(val.specgroup&&val.PROPERTY_DEGREE_VALUE)
var comma=', ';else
var comma='';var degree=val.PROPERTY_DEGREE_VALUE.toLowerCase();var ArSpecialty=val.specgroup;var specialty='';for(var i=0;i<=ArSpecialty.length-1;i++){specialty=specialty+ArSpecialty[i].toLowerCase()+(ArSpecialty[i+1]?', ':'');}
var auxtempl1=('<div class="doc-ask-otziv"><a href="'+val.DETAIL_PAGE_URL+'"><span class="inner-1"><span class="inner-2"> </span></span></a></div>');var auxtempl2=('<div class="doc-ask-otziv push-me"><span class="inner-1"><span class="inner-2"> </span></span></div>');$('.doc-list-block .doc-list-wrap').append('<div class="vrach-item">'+'<input type="hidden" name="docid" value="'+val.ID+'">'+'<div class="doc-photo">'+'<a href="'+val.DETAIL_PAGE_URL+'">'+(val.pic?'<img class="floatTL" border="0" src="'+val.pic+'"></a>':'<div class="nophoto"><div> </div></div>')+'</div>'+'<div class="vrach-h2"><a href="'+val.DETAIL_PAGE_URL+'">'+val.NAME+'</a></div>'+'<div class="doc-from-clinic"><a href="'+val.clurl[0]+'"> . '+val.clmetro[0]+'</a><br></div>'+
(val.clurl[1]?'<div class="doc-from-clinic"><a href="'+val.clurl[1]+'"> . '+val.clmetro[1]+'</a><br></div>':'')+
(val.clurl[2]?'<div class="doc-from-clinic"><a href="'+val.clurl[2]+'"> . '+val.clmetro[2]+'</a><br></div>':'')+
(val.clurl[3]?'<div class="doc-from-clinic"><a href="'+val.clurl[3]+'"> . '+val.clmetro[3]+'</a><br></div>':'')+
(val.clurl[4]?'<div class="doc-from-clinic"><a href="'+val.clurl[4]+'"> . '+val.clmetro[4]+'</a><br></div>':'')+'<div class="doc-desc">'+degree+comma+specialty+'</div>'+'<div class="doc-button">'+'<div class="doc-ask-quest"><span class="inner-1"><span class="inner-2"> </span></span></div>'+
(val.REVIEWS?auxtempl1:auxtempl2)+'</div>'+'<div class="clearl"></div>'+'</div>').hide().fadeIn('fast');});if(data.pagination)
$('.doc-list-block').append(data.pagination).hide().fadeIn('fast');$('.doc-list-overlay, .doc-list-loading').hide();}
else{$('.doc-list-overlay, .doc-list-loading').hide();$('.doc-list-block .doc-list-wrap').append('<div class="vrach-nofound">  </div>').hide().fadeIn('fast');}}}
function showRequest(formData,jqForm,options){if(formData&&formData[1].value){var obj={'name':'curr-pageEX','value':GetPage()};formData.push(obj);YaClientID='null';if(typeof yaCounter7436560!='undefined'){YaClientID=yaCounter7436560.getClientID();}
var obj={'name':'YaClientID','value':YaClientID};formData.push(obj);var error='';var checkbox='';var checkboxcnt=0;var typeform=formData[1].value;var currform=jqForm;$(currform).find('input[type="text"],input[type="tel"],input[type="checkbox"],textarea').each(function(){if($(this).hasClass("verified")){var checkphone='';var checkemail='';var checkage='';if($(this).attr('name')=='phone'){var phone=$(this).parent().find('input[name="phone"]').val();checkphone=1;}
if($(this).attr('name')=='age'){var person_age=$(this).parent().find('input[name="age"]').val();checkage=1;}
if($(this).attr('name')=='email'){var email=$(this).parent().find('input[name="email"]').val();checkemail=1;}
if($(this).attr('type')=='checkbox'){checkboxcnt++;if($(this).is(':checked')){checkbox=1;$(this).css('outline','');}
else{$(this).css('outline','2px solid #c00');}}
if((jQuery.trim($(this).val())==''&&!checkphone&&!checkemail)||(checkphone&&!phonevalid(phone))||(checkemail&&!emailvalid(email))||(checkage&&!agevalid(person_age)))
{$(this).css('border-color','red');error=1;}
else
$(this).css('border-color','#CCCCCC');}else if($(this).attr('name')=='email'){var email=$(this).parent().find('input[name="email"]').val();if(email!=''&&!emailvalid(email)){$(this).css('border-color','red');error=1;}else{$(this).css('border-color','#CCCCCC');}}});if($(currform).find('input[name="communication_email"]').val()==''&&$(currform).find('input[name="communication_call"]').val()==''&&$(currform).find('input[name="communication_whatsapp"]').val()==''&&$(currform).find('input[name="communication_viber"]').val()=='')
{console.log('ssss');$('.communication_method').css('color','red');error=1;}
if(typeform=="spec_form_inline"){$block_attach=$(currform).find("#attach_block_inline");if($(".qq-upload-list li",$block_attach).length==0){$block_attach.addClass("error");error=1;}else{$block_attach.removeClass("error");}}
if(checkboxcnt>0&&!checkbox){var timeout=0;$(currform).find('input[type="checkbox"]').each(function(){if($(this).parent().find('input[type="checkbox"]').hasClass("verified")){timeout+=100;$(this).doTimeout(timeout,function(){$(this).next('label').css('color','red');});fade_time=checkboxcnt*200+timeout;$(this).doTimeout(fade_time,function(){$(this).next('label').css('color','black');});}});}
if(!error&&!checkbox&&checkboxcnt>0)error=1;if(!error){submitForm(currform);var banner=currform[0].className.split(' ');if(banner[1]=='banner-form'){if(typeof yaCounter7436560!='undefined'){ga('send','event','form','lead','zapis_banner');yaCounter7436560.reachGoal('zapis_banner');}}
var banner_may=$("#bmay").val();if(banner_may=="Y"){if(typeof yaCounter7436560!='undefined'){yaCounter7436560.reachGoal('form_banner_may');console.log("send: form_banner_may");}}
switch(typeform){case'zapis-popup':d(formData);if(formData[3].value=='head'){if(typeof yaCounter7436560!='undefined'){yaCounter7436560.reachGoal('obratnyj_zvonok');}
ga('send','event','form','lead','obratnyj_zvonok');}
else{if(typeof yaCounter7436560!='undefined'){yaCounter7436560.reachGoal('zapis_na_priem');}
ga('send','event','form','lead','zapis_na_priem');}
break;case'spec_form_inline':if(typeof yaCounter7436560!='undefined'){yaCounter7436560.reachGoal('zapis_po_karmanu_akcia');ga('send','event','form','lead','zapis_po_karmanu_akcia');}
break;case'spec_form_banner':if(typeof yaCounter7436560!='undefined'){ga('send','event','form','lead','zapis_banner');yaCounter7436560.reachGoal('zapis_banner');}
break;case'calc-right':var checkcoupon='';for(var i=0;i<formData.length;i++){if(formData[i].name=='coupon_email'&&formData[i].value)
checkcoupon='Y';}
ga('send','event','form','lead','raschet_stoimosti');if(checkcoupon){if(typeof yaCounter7436560!='undefined'){yaCounter7436560.reachGoal('ya_raschet_kupon');}}
else{if(typeof yaCounter7436560!='undefined'){yaCounter7436560.reachGoal('ya_raschet');}}
break;case'callback-bottom':if(typeof yaCounter7436560!='undefined'){yaCounter7436560.reachGoal('ya_zvonok');}
ga('send','event','lead','g_zvonok');break;case'form-education':if(typeof yaCounter7436560!='undefined'){yaCounter7436560.reachGoal('ya_zapis_kurs');}
ga('send','event','lead','g_zapis_kurs');break;case'faq-left':if(typeof yaCounter7436560!='undefined'){yaCounter7436560.reachGoal('ya_vopros_faq');}
ga('send','event','info','g_vopros_faq');break;case'question-page':if(typeof yaCounter7436560!='undefined'){yaCounter7436560.reachGoal('zadat_vopros');}
ga('send','event','form','other','zadat_vopros');var checkSend;for(var i=0;i<formData.length;i++){if(formData[i].name=='phone'&&formData[i].value)
checkSend='Y';}
if(typeof yaCounter7436560!='undefined'){if(checkSend=='Y'){yaCounter7436560.reachGoal('quest_call_ok');}else{yaCounter7436560.reachGoal('quest_call_wrong');}}
break;case'convert-form':if(typeof yaCounter7436560!='undefined'){yaCounter7436560.reachGoal('quest_call_ok');}
break;case'faq-ask-question':if(typeof yaCounter7436560!='undefined'){yaCounter7436560.reachGoal('zadat_vopros');}
ga('send','event','form','other','zadat_vopros');break;case'doc-quest-popup':if(typeof yaCounter7436560!='undefined'){yaCounter7436560.reachGoal('zadat_vopros');}
ga('send','event','form','other','zadat_vopros');break;case'doc-quest':if(typeof yaCounter7436560!='undefined'){yaCounter7436560.reachGoal('zadat_vopros');}
ga('send','event','form','other','zadat_vopros');break;case'review-fullpage':if(typeof yaCounter7436560!='undefined'){yaCounter7436560.reachGoal('ostavit_otzyv');}
ga('send','event','form','other','ostavit_otzyv');break;case'review-page':if(typeof yaCounter7436560!='undefined'){yaCounter7436560.reachGoal('ostavit_otzyv');}
ga('send','event','form','other','ostavit_otzyv');break;case'doc-review-popup':if(typeof yaCounter7436560!='undefined'){yaCounter7436560.reachGoal('ostavit_otzyv');}
ga('send','event','form','other','ostavit_otzyv');break;case'doc-review':if(typeof yaCounter7436560!='undefined'){yaCounter7436560.reachGoal('ostavit_otzyv');}
ga('send','event','form','other','ostavit_otzyv');break;case'question-page':}
if(typeform!='doc-quest-popup'&&typeform!='doc-quest'&&typeform!='doc-review'&&typeform!='question-page'&&typeform!='faq-left'&&typeform!='review-fullpage'&&typeform!='faq-ask-question'&&typeform!='doc-review-popup'){if(typeof yaCounter7436560!='undefined')yaCounter7436560.reachGoal('dmt_ws');if($(currform).find('input[name="curr-region"]').val()=='msk'){if(typeof yaCounter51240028!='undefined')yaCounter51240028.reachGoal('dmt_ws');}
else if($(currform).find('input[name="curr-region"]').val()=='spb'){if(typeof yaCounter51240061!='undefined')yaCounter51240061.reachGoal('dmt_ws');}
else if($(currform).find('input[name="curr-region"]').val()=='nn'){if(typeof yaCounter51240070!='undefined')yaCounter51240070.reachGoal('dmt_ws');}}}
else
return false;}
else
return false;}
function showResponse(data){if(data){var ArData=eval('('+data+')');var typeform=ArData.typeform;var subtypeform=ArData.subtype;var status=ArData.status;switch(status){case'SendOk':SuccessShow(subtypeform);$('.banner-block_open').slideUp("normal");$('.banner-block').fadeIn("normal");if(typeform=='question-page'||subtypeform=='question-page'||subtypeform=='faq-ask-question'){getConvertForm(data);}
if(subtypeform=="spec_form_inline"){$("#attach_block_inline").parents("form").find(".qq-upload-list li").remove();}
if(subtypeform=="spec_form_banner"){$("#attach_block_banner").parents("form").find(".qq-upload-list li").remove();}
break;case'SendTimeError':alert('       2 ');hideFormLoad(subtypeform);break;case'SendError':alert('   ');hideFormLoad(subtypeform);break;default:alert('Fatal error. Type:'+typeform+'. Subtype:'+subtypeform);hideFormLoad(subtypeform);break;}
console.log(ArData);if(ArData['form-type']=='zapis-popup'&&ArData['curr-region']=='msk'){obj={name:ArData.name,phone:ArData.phone,message:'   '+ArData.stats_id+' | '+ArData['form-type']};Comagic.addOfflineRequest(obj);}}
else{alert('   ,    .    .');hideFormLoad();}}
function showError(XMLHttpRequest,textStatus,errorThrown){alert('   ,    .    .');hideFormLoad();return false;}
function SuccessShow(typeform){var currform=$('form input[value="'+typeform+'"]').parent();$(currform).find('.loading .loading-layer.add').hide();var isConvertForm=false;if($(currform).find('input[name="convert_form"]').val()!==undefined){isConvertForm=true;}
var formheight=$(currform).outerHeight(true);var loadheight=$(currform).find('.loading-layer.success').height();var marginload=formheight/2-loadheight/2;if(isConvertForm){$(currform).find('.loading-layer.success').css({'margin':marginload+'px auto 0 auto','display':'block'});setTimeout(function(){$.fancybox.close();},1000);}else{$(currform).find('.loading-layer.success').css({'margin':marginload+'px auto 0 auto','display':'block'}).doTimeout(2000,function(){if(typeform.substr(-5)=='popup'){$.fancybox.close();}else{$(currform).find('.loading-layer.success').hide();$(currform).find('.loading').hide();$(currform).find('input[type="text"], input[type="tel"], textarea').not(':button, :submit, :reset, :hidden').val('');}
if(typeform=='doc-quest-popup'){}});}}
function hideFormLoad(typeform){if(typeform)
$('form input[value="'+typeform+'"]').parent().find('.loading').hide();else
$('form .loading').hide();}
function removeForm(typeform){$('form input[value="'+typeform+'"]').parent().parent().fadeOut('fast').remove();overlay('hide');loading();}
function submitForm(type){$(type).find('.loading').show();var formheight=$(type).outerHeight(true);var loadheight=$(type).find('.loading-layer.add').height();var marginload=formheight/2-loadheight/2;$(type).find('.loading-layer.add').css({'margin':marginload+'px auto 0 auto','display':'block'});}
function loading(event){if(event=='show'){$('.loading-inner').fadeIn('fast');$('.content').css('opacity','0.5');}
else if(event=='hide'){$('.loading-inner').hide();}
else if(event=='hideall'){$('.loading-inner').hide();$('.content').css('opacity','1');}
else{$('.content').css('opacity','1');}}
function overlay(event,type){if(event=='show'){$('.overlay').fadeIn('fast');$('.overlay').attr('type',type);}
else if(event=='hide'){$('.overlay').fadeOut('fast');$('.overlay').attr('type','');}}
function phonevalid(phone){var phone=jQuery.trim(phone);var phone=phone.replace(/\s*/g,'');var arSpamPhone=["1234567","7654321","1111111","2222222","3333333","4444444","5555555","6666666","7777777","8888888","9999999","0000000"];var reg=new RegExp("^[-\s)(0-9-+]+$");if(phone.length>7&&reg.test(phone)&&jQuery.inArray(phone,arSpamPhone))
return true;else
return false;}
function emailvalid(email){var pattern=/^[\.a-z0-9_-]+@[a-z0-9-]+\.([a-z]{1,6}\.)?[a-z]{2,6}$/i;if(pattern.test(jQuery.trim(email)))
return true;else
return false;}
function agevalid(age){var num=parseInt(age,10);if(num>4&&num<=120){return true;}else{return false;}}
function GetTemlatePath(currfile){return"/bitrix/templates/stomatology18/"+currfile;}
function ResizeBLock(el,width,timeout){var transEndEventNames={'WebkitTransition':'-webkit-','MozTransition':'-moz-','OTransition':'-o-','msTransition':'-ms-','transition':''};transEndEventName=transEndEventNames[Modernizr.prefixed('transition')];$(el).css(transEndEventName+'transition','all 500ms ease 0s').doTimeout(el,timeout,function(){$(el).css('width',width);});}
function GetPage(){return window.location.pathname;}
function GetURL(){var arURL=GetPage().split('/');var obj={'sec':arURL[1],'level1':arURL[2],'level3':arURL[3],'level4':arURL[4]};return obj;}
function GetHost(){return window.location.hostname;}
function htmlspecialfind(text){var chars=Array("<",">","&","http","www");for(var i=0;i<chars.length;i++){var re=new RegExp(chars[i],"gi");if(re.test(text)){var matches=text.match(re);if(text.match(re))
return'stop';}}}
function htmlspecialchars(text){var chars=Array("&","<",">",'"',"'");var replacements=Array("&amp;","&lt;","&gt;","&quot;","'");for(var i=0;i<chars.length;i++){var re=new RegExp(chars[i],"gi");if(re.test(text)){text=text.replace(re,replacements[i]);}}
return text;}
function d(text){return console.log(text);}
function setConvertData(convertData){APP_MAIN['CONVERT_DATA']=convertData;}
function getConvertForm(convertData){loading('show');var ArData=eval('('+convertData+')');$.ajax({type:"POST",url:GetTemlatePath('includes/form_tmpl.php'),data:"TYPE_FORM=CONVERT_FORM",timeout:20000,error:function(er){alert('  ,    .   .');loading('hideall');},success:function(data){if(data){var dataform=$(data);$.fancybox.open(dataform,{closeClick:false,padding:0,helpers:{overlay:{closeClick:false}},afterLoad:function(){if(ArData['convert']){loadDataInputs(ArData);}}});loading('hideall');}
else if(!data){alert('  ,    .   .');loading('hideall');}}});}
function loadDataInputs(ArData){setTimeout(function(){var $thisForm=$("#convert_form");var dataInputs=ArData['convert']['DATA'];$thisForm.find('input[name="name"]').val(dataInputs['name']);$thisForm.find('input[name="email"]').val(dataInputs['email']);$thisForm.find('input[name="communication_email"]').val(dataInputs['communication_email']);$thisForm.find('input[name="communication_call"]').val(dataInputs['communication_call']);$thisForm.find('input[name="communication_whatsapp"]').val(dataInputs['communication_whatsapp']);$thisForm.find('input[name="communication_viber"]').val(dataInputs['communication_viber']);$thisForm.find('input[name="age"]').val(dataInputs['age']);$thisForm.find('input[name="text"]').val(dataInputs['text']);$thisForm.find('input[name="docid"]').val(dataInputs['docid']);$thisForm.find('input[name="namedoc"]').val(dataInputs['namedoc']);$thisForm.find('input[name="fromformtype"]').val(dataInputs['form-type']);},1000);}
jQuery.fn.exists=function(){return $(this).length;};(function($){$.fn.placeholder=function(){$("input:text,textarea",this).each(function(){var placeholder=$(this).attr("placeholder");if(placeholder){$(this).data("placeholder",placeholder).focus(function(){if($(this).val()==placeholder)
$(this).val("");$(this).removeClass("placeholder");}).blur(function(){var v=$(this).val();if(v==""||v==" "||v==placeholder)
$(this).addClass("placeholder").val(placeholder);}).trigger("blur");}});$(this).each(function(){if(this.tagName=="FORM")
var f=this;else
var f=$(this).closest("FORM");if(f&&f.tagName=="FORM"){$(f).submit(function(){$(".placeholder",this).each(function(){var placeholder=$(this).data("placeholder");if($(this).val()==placeholder)
$(this).val("");});});}});return this;};})(jQuery);$(document).ready(function(){if($("#slider_zub_chronology").length>0){$("#slider_zub_chronology").slider({orientation:"vertical",min:1,max:10,range:"min",value:10,slide:function(event,ui){var slide_id='zub_adult_hronolog_'+ui.value;var zub_slides='.zub_slide_hronolog';$(zub_slides).hide();$('#'+slide_id).show();}}).each(function(){console.log($(this));var opt=$(this).data().uiSlider.options;var vals=opt.max-opt.min;var goda=['<span class="age_timeline">6-7 </span> <span class="text_about_age">  ,  </span>','<span class="age_timeline">7-8 </span> <span class="text_about_age">  ,   </span>','<span class="age_timeline">8-9 </span> <span class="text_about_age">  </span>','<span class="age_timeline">9-10 </span> <span class="text_about_age"> </span>','<span class="age_timeline">10-11 </span> <span class="text_about_age">  </span>','<span class="age_timeline">10-12 </span> <span class="text_about_age">  ,   </span>','<span class="age_timeline">11-12 </span> <span class="text_about_age"> ,   </span>','<span class="age_timeline">11-13 </span> <span class="text_about_age">  </span>','<span class="age_timeline">12-13 </span> <span class="text_about_age">  </span>','<span class="age_timeline">17-21 </span> <span class="text_about_age">     ( )</span>'];for(var i=0;i<=vals;i++){var el=$("<div class='timeline_risk_age'>"+goda[i]+"</div>").css('top',(i/vals*100)+'%');$("#slider_zub_chronology").append(el);}});$("#minbeds").change(function(){slider.slider("value",this.selectedIndex+1);});}});;(function($){$('#attach_block_inline').fineUploader({template:'qq-template-inline',request:{endpoint:GetTemlatePath("uploader/server/endpoint.php"),forceMultipart:true,},thumbnails:{placeholders:{waitingPath:GetTemlatePath("uploader/client/placeholders/waiting-generic.png"),notAvailablePath:GetTemlatePath("uploader/client/placeholders/not_available-generic.png")}},validation:{allowedExtensions:['docx','doc','pdf','txt','xls','xlsx','rar','zip','png','jpg','jpeg'],itemLimit:3,sizeLimit:10194304,},callbacks:{onComplete:function(id,name,response,xhr){setInputFile(id,response.uuid);}},deleteFile:{enabled:true,method:"POST",endpoint:GetTemlatePath("uploader/server/endpoint.php")},messages:{typeError:" {file}    .       : {extensions}.",sizeError:"{file}  ,    {sizeLimit}.",minSizeError:"{file}  ,    {minSizeLimit}.",emptyError:"{file} , ,     .",noFilesError:"   .",tooManyItemsError:"   ({netItems}).   : {itemLimit}.",},});$('#attach_block_banner').fineUploader({template:'qq-template-banner',request:{endpoint:GetTemlatePath("uploader/server/endpoint.php"),forceMultipart:true,},thumbnails:{placeholders:{waitingPath:GetTemlatePath("uploader/client/placeholders/waiting-generic.png"),notAvailablePath:GetTemlatePath("uploader/client/placeholders/not_available-generic.png")}},validation:{allowedExtensions:['docx','doc','pdf','txt','xls','xlsx','rar','zip','png','jpg','jpeg'],itemLimit:3,sizeLimit:10194304,},callbacks:{onComplete:function(id,name,response,xhr){setInputFile(id,response.uuid);}},deleteFile:{enabled:true,method:"POST",endpoint:GetTemlatePath("uploader/server/endpoint.php")},messages:{typeError:" {file}    .       : {extensions}.",sizeError:"{file}  ,    {sizeLimit}.",minSizeError:"{file}  ,    {minSizeLimit}.",emptyError:"{file} , ,     .",noFilesError:"   .",tooManyItemsError:"   ({netItems}).   : {itemLimit}.",},});function setInputFile(id,fileID){var $itemFile=$('.qq-upload-list .qq-file-id-'+id);$itemFile.find('input[type="hidden"]').attr("name","file[]");$itemFile.find('input[type="hidden"]').val(fileID);}
$('#attach_block_banner').click(function(event){event.stopPropagation();});if($(".card_clinic_vrezka").length>0){$('.card_clinic_vrezka').insertAfter($('.area_description_text p').eq(0));}
jQuery(document).ready(function($){$('#myCarousel').carousel({interval:5000});$('[id^=carousel-selector-]').click(function(){var id_selector=$(this).attr("id");try{var id=/-(\d+)$/.exec(id_selector)[1];console.log(id_selector,id);jQuery('#myCarousel').carousel(parseInt(id));}catch(e){console.log('Regex failed!',e);}});$('#myCarousel').on('slid.bs.carousel',function(e){var id=$('.item.active').data('slide-number');$('#carousel-text').html($('#slide-content-'+id).html());});});$(function(){$(".youtube-video").each(function(){$(this).css('background-image','url(https://i.ytimg.com/vi/'+this.id+'/hqdefault.jpg)');$(this).append($('<div/>',{'class':'play'}));$(document).on('click touchstart','#'+this.id,function(){var iframe_url="https://www.youtube.com/embed/"+this.id+"?autoplay=1&autohide=1&enablejsapi=1";if($(this).data('params'))iframe_url+='&'+$(this).data('params');var iframe=$('<iframe/>',{'frameborder':'0','src':iframe_url,'width':$(this).width(),'height':$(this).height()})
$(this).replaceWith(iframe);$('.carousel-inner').find('iframe').each(function(){});});});});document.addEventListener('DOMContentLoaded',function(){$('#myCarousel2').carousel({interval:0}).on('slide.bs.carousel',function(e){$(this).find('iframe').each(function(){this.contentWindow.postMessage('{"event":"command","func":"'+'stopVideo'+'","args":""}','*')});});});$(function(){var script=document.createElement("script");script.src="//yandex.st/share/share.js";script.charset="utf-8";document.getElementsByTagName("head")[0].appendChild(script);});})(jQuery);;$(function(){$('.a1pay_fancybox').fancybox({helpers:{arrows:true,overlay:{showEarly:false}},padding:0,beforeShow:function(){console.log('ddd');},type:'iframe'});$('.content-center .wrapper img').addClass("img-responsive");(function($){var $side_menu=$(".sidebar_menu"),$side_menu_items=$("#sidebar_menu_items"),$open_btn=$(".header .header-menu .sidebar_handler"),$close_btn=$("#close_sidebar_menu"),$left_menu=$("#left_menu"),min_Width=1170;$open_btn.click(openSidebar);$close_btn.click(closeSidebar);function openSidebar(){$('body').css('position','fixed');$('body').css('overflow','hidden');$side_menu.addClass("active");setTimeout(function(){$('.sidebar_menu').css('width','319px');},500);}
function closeSidebar(){$('.sidebar_menu').css('width','320px');$side_menu.removeClass("active");$('body').css('position','relative');$('body').css('overflow','auto');$('.toothbrush').css('display','block');}}(jQuery));$(document).ready(function(){$('.jcarousel-rev').jcarousel({animation:{duration:800,easing:'linear',complete:function(){}}});$(function(){var jcarousel=$('.jcarousel');jcarousel.on('jcarousel:reload jcarousel:create',function(){if($(this).jcarousel('visible')){$(this).css('width','auto');var carousel=$(this)
width=carousel.width();width_li=carousel.find('li div').width();newwidth=Math.floor(width/width_li)*width_li;$(this).css('width',newwidth);width=width_li;carousel.jcarousel('items').css('width',Math.ceil(width)+'px');}
carousel.touchwipe({wipeLeft:function(){carousel.jcarousel('scroll','+=1');},wipeRight:function(){carousel.jcarousel('scroll','-=1');},preventDefaultEvents:false});});jcarousel.on('jcarousel:createend jcarousel:reloadend',function(){if($(this).jcarousel('visible').length<$(this).jcarousel('items').length){$(this).parents('.jcarousel-wrapper').find('.jcarousel-control-prev').show();$(this).parents('.jcarousel-wrapper').find('.jcarousel-control-next').show();$(this).parents('.jcarousel-wrapper').find('.jcarousel-control-prev').jcarouselControl({target:'-=1'});$(this).parents('.jcarousel-wrapper').find('.jcarousel-control-next').jcarouselControl({target:'+=1'});}
else{$(this).parents('.jcarousel-wrapper').find('.jcarousel-control-prev').hide();$(this).parents('.jcarousel-wrapper').find('.jcarousel-control-next').hide();}});jcarousel.jcarousel({wrap:'circular',animation:'fast',});});$('.jcarousel-review-slide18').on('jcarousel:create jcarousel:reload jcarousel:scrollend',function(){var element=$(this),width=element.innerWidth();element.jcarousel('items').css('width',width+'px');}).jcarousel({});$('.jcarousel-review-slide18').on('jcarousel:reload jcarousel:animate',function(event,carousel){var element=$(this);element.jcarousel('items').css('height','auto');height=carousel._target.innerHeight();element.jcarousel('items').css('height',height+'px');});});});;function MM_preloadImages(){var d=document;if(d.images){if(!d.MM_p)d.MM_p=new Array();var i,j=d.MM_p.length,a=MM_preloadImages.arguments;for(i=0;i<a.length;i++)
if(a[i].indexOf("#")!=0){d.MM_p[j]=new Image;d.MM_p[j++].src=a[i];}}};(function(){var event=jQuery.event,findHelper=function(events,types,callback,selector){var t,type,typeHandlers,all,h,handle,namespaces,namespace,match;for(t=0;t<types.length;t++){type=types[t];all=type.indexOf(".")<0;if(!all){namespaces=type.split(".");type=namespaces.shift();namespace=new RegExp("(^|\\.)"+namespaces.slice(0).sort().join("\\.(?:.*\\.)?")+"(\\.|$)");}
typeHandlers=(events[type]||[]).slice(0);for(h=0;h<typeHandlers.length;h++){handle=typeHandlers[h];match=(all||namespace.test(handle.namespace));if(match){if(selector){if(handle.selector===selector){callback(type,handle.origHandler||handle.handler);}}else if(selector===null){callback(type,handle.origHandler||handle.handler,handle.selector);}
else if(!handle.selector){callback(type,handle.origHandler||handle.handler);}}}}};event.find=function(el,types,selector){var events=($._data(el)||{}).events,handlers=[],t,liver,live;if(!events){return handlers;}
findHelper(events,types,function(type,handler){handlers.push(handler);},selector);return handlers;};event.findBySelector=function(el,types){var events=$._data(el).events,selectors={},add=function(selector,event,handler){var select=selectors[selector]||(selectors[selector]={}),events=select[event]||(select[event]=[]);events.push(handler);};if(!events){return selectors;}
findHelper(events,types,function(type,handler,selector){add(selector||"",type,handler);},null);return selectors;};event.supportTouch="ontouchend"in document;$.fn.respondsTo=function(events){if(!this.length){return false;}else{return event.find(this[0],$.isArray(events)?events:[events]).length>0;}};$.fn.triggerHandled=function(event,data){event=(typeof event=="string"?$.Event(event):event);this.trigger(event,data);return event.handled;};event.setupHelper=function(types,startingEvent,onFirst){if(!onFirst){onFirst=startingEvent;startingEvent=null;}
var add=function(handleObj){var bySelector,selector=handleObj.selector||"";if(selector){bySelector=event.find(this,types,selector);if(!bySelector.length){$(this).delegate(selector,startingEvent,onFirst);}}
else{if(!event.find(this,types,selector).length){event.add(this,startingEvent,onFirst,{selector:selector,delegate:this});}}},remove=function(handleObj){var bySelector,selector=handleObj.selector||"";if(selector){bySelector=event.find(this,types,selector);if(!bySelector.length){$(this).undelegate(selector,startingEvent,onFirst);}}
else{if(!event.find(this,types,selector).length){event.remove(this,startingEvent,onFirst,{selector:selector,delegate:this});}}};$.each(types,function(){event.special[this]={add:add,remove:remove,setup:function(){},teardown:function(){}};});};})(jQuery);(function($){var isPhantom=/Phantom/.test(navigator.userAgent),supportTouch=!isPhantom&&"ontouchend"in document,scrollEvent="touchmove scroll",touchStartEvent=supportTouch?"touchstart":"mousedown",touchStopEvent=supportTouch?"touchend":"mouseup",touchMoveEvent=supportTouch?"touchmove":"mousemove",data=function(event){var d=event.originalEvent.touches?event.originalEvent.touches[0]:event;return{time:(new Date).getTime(),coords:[d.pageX,d.pageY],origin:$(event.target)};};var swipe=$.event.swipe={delay:500,max:75,min:30};$.event.setupHelper(["swipe",'swipeleft','swiperight','swipeup','swipedown'],touchStartEvent,function(ev){var
start=data(ev),stop,delegate=ev.delegateTarget||ev.currentTarget,selector=ev.handleObj.selector,entered=this;function moveHandler(event){if(!start){return;}
stop=data(event);if(Math.abs(start.coords[0]-stop.coords[0])>10){event.preventDefault();}};$(document.documentElement).bind(touchMoveEvent,moveHandler).one(touchStopEvent,function(event){$(this).unbind(touchMoveEvent,moveHandler);if(start&&stop){var deltaX=Math.abs(start.coords[0]-stop.coords[0]),deltaY=Math.abs(start.coords[1]-stop.coords[1]),distance=Math.sqrt(deltaX*deltaX+deltaY*deltaY);if(stop.time-start.time<swipe.delay&&distance>=swipe.min){var events=['swipe'];if(deltaX>=swipe.min&&deltaY<swipe.min){events.push(start.coords[0]>stop.coords[0]?"swipeleft":"swiperight");}else
if(deltaY>=swipe.min&&deltaX<swipe.min){events.push(start.coords[1]<stop.coords[1]?"swipedown":"swipeup");}
$.each($.event.find(delegate,events,selector),function(){this.call(entered,ev,{start:start,end:stop})})}}
start=stop=undefined;})});})(jQuery);(function($){var timerHand=0,data={},eventFlag=0,methods={init:function(settings){return this.each(function(){data=jQuery.extend({achieveTime:60,loop:0,eventList:'blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error',testPeriod:10,useMultiMode:1,callBack:function(e){console.log('Achieved!')},watchEvery:1,counter:{'test':0,'achiev':0}},settings);data.watchEvery*=1000;if(data.useMultiMode){methods.loadMultiData();}
if(data.counter.achiev!=-1){$(this).bind(data.eventList,methods.eventTrigger);methods.process();}})},process:function(){data.counter.test+=1;if(data.counter.test==data.testPeriod){if(eventFlag){eventFlag=0;data.counter.achiev+=data.testPeriod;}
data.counter.test=0;}
timerHand=setTimeout(methods.process,data.watchEvery);if(data.counter.achiev>=data.achieveTime){if(!data.loop)clearTimeout(timerHand);data.counter.achiev=data.loop?0:-1;data.callBack.call(this,data);}
if(data.useMultiMode)document.cookie='activity='+data.counter.test+'|'+data.counter.achiev+'; path=/;';},eventTrigger:function(){eventFlag=1;},loadMultiData:function(){var search=' activity=';var cookie=' '+document.cookie;if(cookie.length>0){if(cookie.indexOf(search)!=-1){offset=cookie.indexOf(search)+search.length;var m=unescape(cookie.substring(offset,cookie.indexOf(";",offset)==-1?cookie.length:cookie.indexOf(";",offset))).split('|');data.counter.test=m[0];data.counter.achiev=m[1];}}
data.counter.test=data.counter.achiev=0;}};$.fn.activity=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1));}else{if(typeof method==="object"||!method){return methods.init.apply(this,arguments);}else{$.error("Method "+method+" does not exist on jQuery.activity");}}}})(jQuery);;
/*! jCarousel - v0.3.3 - 2015-04-07
* http://sorgalla.com/jcarousel/
* Copyright (c) 2006-2015 Jan Sorgalla; Licensed MIT */
!function(a){"use strict";var b=a.jCarousel={};b.version="0.3.3";var c=/^([+\-]=)?(.+)$/;b.parseTarget=function(a){var b=!1,d="object"!=typeof a?c.exec(a):null;return d?(a=parseInt(d[2],10)||0,d[1]&&(b=!0,"-="===d[1]&&(a*=-1))):"object"!=typeof a&&(a=parseInt(a,10)||0),{target:a,relative:b}},b.detectCarousel=function(a){for(var b;a.length>0;){if(b=a.filter("[data-jcarousel]"),b.length>0)return b;if(b=a.find("[data-jcarousel]"),b.length>0)return b;a=a.parent()}return null},b.base=function(c){return{version:b.version,_options:{},_element:null,_carousel:null,_init:a.noop,_create:a.noop,_destroy:a.noop,_reload:a.noop,create:function(){return this._element.attr("data-"+c.toLowerCase(),!0).data(c,this),!1===this._trigger("create")?this:(this._create(),this._trigger("createend"),this)},destroy:function(){return!1===this._trigger("destroy")?this:(this._destroy(),this._trigger("destroyend"),this._element.removeData(c).removeAttr("data-"+c.toLowerCase()),this)},reload:function(a){return!1===this._trigger("reload")?this:(a&&this.options(a),this._reload(),this._trigger("reloadend"),this)},element:function(){return this._element},options:function(b,c){if(0===arguments.length)return a.extend({},this._options);if("string"==typeof b){if("undefined"==typeof c)return"undefined"==typeof this._options[b]?null:this._options[b];this._options[b]=c}else this._options=a.extend({},this._options,b);return this},carousel:function(){return this._carousel||(this._carousel=b.detectCarousel(this.options("carousel")||this._element),this._carousel||a.error('Could not detect carousel for plugin "'+c+'"')),this._carousel},_trigger:function(b,d,e){var f,g=!1;return e=[this].concat(e||[]),(d||this._element).each(function(){f=a.Event((c+":"+b).toLowerCase()),a(this).trigger(f,e),f.isDefaultPrevented()&&(g=!0)}),!g}}},b.plugin=function(c,d){var e=a[c]=function(b,c){this._element=a(b),this.options(c),this._init(),this.create()};return e.fn=e.prototype=a.extend({},b.base(c),d),a.fn[c]=function(b){var d=Array.prototype.slice.call(arguments,1),f=this;return this.each("string"==typeof b?function(){var e=a(this).data(c);if(!e)return a.error("Cannot call methods on "+c+' prior to initialization; attempted to call method "'+b+'"');if(!a.isFunction(e[b])||"_"===b.charAt(0))return a.error('No such method "'+b+'" for '+c+" instance");var g=e[b].apply(e,d);return g!==e&&"undefined"!=typeof g?(f=g,!1):void 0}:function(){var d=a(this).data(c);d instanceof e?d.reload(b):new e(this,b)}),f},e}}(jQuery),function(a,b){"use strict";var c=function(a){return parseFloat(a)||0};a.jCarousel.plugin("jcarousel",{animating:!1,tail:0,inTail:!1,resizeTimer:null,lt:null,vertical:!1,rtl:!1,circular:!1,underflow:!1,relative:!1,_options:{list:function(){return this.element().children().eq(0)},items:function(){return this.list().children()},animation:400,transitions:!1,wrap:null,vertical:null,rtl:null,center:!1},_list:null,_items:null,_target:a(),_first:a(),_last:a(),_visible:a(),_fullyvisible:a(),_init:function(){var a=this;return this.onWindowResize=function(){a.resizeTimer&&clearTimeout(a.resizeTimer),a.resizeTimer=setTimeout(function(){a.reload()},100)},this},_create:function(){this._reload(),a(b).on("resize.jcarousel",this.onWindowResize)},_destroy:function(){a(b).off("resize.jcarousel",this.onWindowResize)},_reload:function(){this.vertical=this.options("vertical"),null==this.vertical&&(this.vertical=this.list().height()>this.list().width()),this.rtl=this.options("rtl"),null==this.rtl&&(this.rtl=function(b){if("rtl"===(""+b.attr("dir")).toLowerCase())return!0;var c=!1;return b.parents("[dir]").each(function(){return/rtl/i.test(a(this).attr("dir"))?(c=!0,!1):void 0}),c}(this._element)),this.lt=this.vertical?"top":"left",this.relative="relative"===this.list().css("position"),this._list=null,this._items=null;var b=this.index(this._target)>=0?this._target:this.closest();this.circular="circular"===this.options("wrap"),this.underflow=!1;var c={left:0,top:0};return b.length>0&&(this._prepare(b),this.list().find("[data-jcarousel-clone]").remove(),this._items=null,this.underflow=this._fullyvisible.length>=this.items().length,this.circular=this.circular&&!this.underflow,c[this.lt]=this._position(b)+"px"),this.move(c),this},list:function(){if(null===this._list){var b=this.options("list");this._list=a.isFunction(b)?b.call(this):this._element.find(b)}return this._list},items:function(){if(null===this._items){var b=this.options("items");this._items=(a.isFunction(b)?b.call(this):this.list().find(b)).not("[data-jcarousel-clone]")}return this._items},index:function(a){return this.items().index(a)},closest:function(){var b,d=this,e=this.list().position()[this.lt],f=a(),g=!1,h=this.vertical?"bottom":this.rtl&&!this.relative?"left":"right";return this.rtl&&this.relative&&!this.vertical&&(e+=this.list().width()-this.clipping()),this.items().each(function(){if(f=a(this),g)return!1;var i=d.dimension(f);if(e+=i,e>=0){if(b=i-c(f.css("margin-"+h)),!(Math.abs(e)-i+b/2<=0))return!1;g=!0}}),f},target:function(){return this._target},first:function(){return this._first},last:function(){return this._last},visible:function(){return this._visible},fullyvisible:function(){return this._fullyvisible},hasNext:function(){if(!1===this._trigger("hasnext"))return!0;var a=this.options("wrap"),b=this.items().length-1,c=this.options("center")?this._target:this._last;return b>=0&&!this.underflow&&(a&&"first"!==a||this.index(c)<b||this.tail&&!this.inTail)?!0:!1},hasPrev:function(){if(!1===this._trigger("hasprev"))return!0;var a=this.options("wrap");return this.items().length>0&&!this.underflow&&(a&&"last"!==a||this.index(this._first)>0||this.tail&&this.inTail)?!0:!1},clipping:function(){return this._element["inner"+(this.vertical?"Height":"Width")]()},dimension:function(a){return a["outer"+(this.vertical?"Height":"Width")](!0)},scroll:function(b,c,d){if(this.animating)return this;if(!1===this._trigger("scroll",null,[b,c]))return this;a.isFunction(c)&&(d=c,c=!0);var e=a.jCarousel.parseTarget(b);if(e.relative){var f,g,h,i,j,k,l,m,n=this.items().length-1,o=Math.abs(e.target),p=this.options("wrap");if(e.target>0){var q=this.index(this._last);if(q>=n&&this.tail)this.inTail?"both"===p||"last"===p?this._scroll(0,c,d):a.isFunction(d)&&d.call(this,!1):this._scrollTail(c,d);else if(f=this.index(this._target),this.underflow&&f===n&&("circular"===p||"both"===p||"last"===p)||!this.underflow&&q===n&&("both"===p||"last"===p))this._scroll(0,c,d);else if(h=f+o,this.circular&&h>n){for(m=n,j=this.items().get(-1);m++<h;)j=this.items().eq(0),k=this._visible.index(j)>=0,k&&j.after(j.clone(!0).attr("data-jcarousel-clone",!0)),this.list().append(j),k||(l={},l[this.lt]=this.dimension(j),this.moveBy(l)),this._items=null;this._scroll(j,c,d)}else this._scroll(Math.min(h,n),c,d)}else if(this.inTail)this._scroll(Math.max(this.index(this._first)-o+1,0),c,d);else if(g=this.index(this._first),f=this.index(this._target),i=this.underflow?f:g,h=i-o,0>=i&&(this.underflow&&"circular"===p||"both"===p||"first"===p))this._scroll(n,c,d);else if(this.circular&&0>h){for(m=h,j=this.items().get(0);m++<0;){j=this.items().eq(-1),k=this._visible.index(j)>=0,k&&j.after(j.clone(!0).attr("data-jcarousel-clone",!0)),this.list().prepend(j),this._items=null;var r=this.dimension(j);l={},l[this.lt]=-r,this.moveBy(l)}this._scroll(j,c,d)}else this._scroll(Math.max(h,0),c,d)}else this._scroll(e.target,c,d);return this._trigger("scrollend"),this},moveBy:function(a,b){var d=this.list().position(),e=1,f=0;return this.rtl&&!this.vertical&&(e=-1,this.relative&&(f=this.list().width()-this.clipping())),a.left&&(a.left=d.left+f+c(a.left)*e+"px"),a.top&&(a.top=d.top+f+c(a.top)*e+"px"),this.move(a,b)},move:function(b,c){c=c||{};var d=this.options("transitions"),e=!!d,f=!!d.transforms,g=!!d.transforms3d,h=c.duration||0,i=this.list();if(!e&&h>0)return void i.animate(b,c);var j=c.complete||a.noop,k={};if(e){var l={transitionDuration:i.css("transitionDuration"),transitionTimingFunction:i.css("transitionTimingFunction"),transitionProperty:i.css("transitionProperty")},m=j;j=function(){a(this).css(l),m.call(this)},k={transitionDuration:(h>0?h/1e3:0)+"s",transitionTimingFunction:d.easing||c.easing,transitionProperty:h>0?function(){return f||g?"all":b.left?"left":"top"}():"none",transform:"none"}}g?k.transform="translate3d("+(b.left||0)+","+(b.top||0)+",0)":f?k.transform="translate("+(b.left||0)+","+(b.top||0)+")":a.extend(k,b),e&&h>0&&i.one("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",j),i.css(k),0>=h&&i.each(function(){j.call(this)})},_scroll:function(b,c,d){if(this.animating)return a.isFunction(d)&&d.call(this,!1),this;if("object"!=typeof b?b=this.items().eq(b):"undefined"==typeof b.jquery&&(b=a(b)),0===b.length)return a.isFunction(d)&&d.call(this,!1),this;this.inTail=!1,this._prepare(b);var e=this._position(b),f=this.list().position()[this.lt];if(e===f)return a.isFunction(d)&&d.call(this,!1),this;var g={};return g[this.lt]=e+"px",this._animate(g,c,d),this},_scrollTail:function(b,c){if(this.animating||!this.tail)return a.isFunction(c)&&c.call(this,!1),this;var d=this.list().position()[this.lt];this.rtl&&this.relative&&!this.vertical&&(d+=this.list().width()-this.clipping()),this.rtl&&!this.vertical?d+=this.tail:d-=this.tail,this.inTail=!0;var e={};return e[this.lt]=d+"px",this._update({target:this._target.next(),fullyvisible:this._fullyvisible.slice(1).add(this._visible.last())}),this._animate(e,b,c),this},_animate:function(b,c,d){if(d=d||a.noop,!1===this._trigger("animate"))return d.call(this,!1),this;this.animating=!0;var e=this.options("animation"),f=a.proxy(function(){this.animating=!1;var a=this.list().find("[data-jcarousel-clone]");a.length>0&&(a.remove(),this._reload()),this._trigger("animateend"),d.call(this,!0)},this),g="object"==typeof e?a.extend({},e):{duration:e},h=g.complete||a.noop;return c===!1?g.duration=0:"undefined"!=typeof a.fx.speeds[g.duration]&&(g.duration=a.fx.speeds[g.duration]),g.complete=function(){f(),h.call(this)},this.move(b,g),this},_prepare:function(b){var d,e,f,g,h=this.index(b),i=h,j=this.dimension(b),k=this.clipping(),l=this.vertical?"bottom":this.rtl?"left":"right",m=this.options("center"),n={target:b,first:b,last:b,visible:b,fullyvisible:k>=j?b:a()};if(m&&(j/=2,k/=2),k>j)for(;;){if(d=this.items().eq(++i),0===d.length){if(!this.circular)break;if(d=this.items().eq(0),b.get(0)===d.get(0))break;if(e=this._visible.index(d)>=0,e&&d.after(d.clone(!0).attr("data-jcarousel-clone",!0)),this.list().append(d),!e){var o={};o[this.lt]=this.dimension(d),this.moveBy(o)}this._items=null}if(g=this.dimension(d),0===g)break;if(j+=g,n.last=d,n.visible=n.visible.add(d),f=c(d.css("margin-"+l)),k>=j-f&&(n.fullyvisible=n.fullyvisible.add(d)),j>=k)break}if(!this.circular&&!m&&k>j)for(i=h;;){if(--i<0)break;if(d=this.items().eq(i),0===d.length)break;if(g=this.dimension(d),0===g)break;if(j+=g,n.first=d,n.visible=n.visible.add(d),f=c(d.css("margin-"+l)),k>=j-f&&(n.fullyvisible=n.fullyvisible.add(d)),j>=k)break}return this._update(n),this.tail=0,m||"circular"===this.options("wrap")||"custom"===this.options("wrap")||this.index(n.last)!==this.items().length-1||(j-=c(n.last.css("margin-"+l)),j>k&&(this.tail=j-k)),this},_position:function(a){var b=this._first,c=b.position()[this.lt],d=this.options("center"),e=d?this.clipping()/2-this.dimension(b)/2:0;return this.rtl&&!this.vertical?(c-=this.relative?this.list().width()-this.dimension(b):this.clipping()-this.dimension(b),c+=e):c-=e,!d&&(this.index(a)>this.index(b)||this.inTail)&&this.tail?(c=this.rtl&&!this.vertical?c-this.tail:c+this.tail,this.inTail=!0):this.inTail=!1,-c},_update:function(b){var c,d=this,e={target:this._target,first:this._first,last:this._last,visible:this._visible,fullyvisible:this._fullyvisible},f=this.index(b.first||e.first)<this.index(e.first),g=function(c){var g=[],h=[];b[c].each(function(){e[c].index(this)<0&&g.push(this)}),e[c].each(function(){b[c].index(this)<0&&h.push(this)}),f?g=g.reverse():h=h.reverse(),d._trigger(c+"in",a(g)),d._trigger(c+"out",a(h)),d["_"+c]=b[c]};for(c in b)g(c);return this}})}(jQuery,window),function(a){"use strict";a.jcarousel.fn.scrollIntoView=function(b,c,d){var e,f=a.jCarousel.parseTarget(b),g=this.index(this._fullyvisible.first()),h=this.index(this._fullyvisible.last());if(e=f.relative?f.target<0?Math.max(0,g+f.target):h+f.target:"object"!=typeof f.target?f.target:this.index(f.target),g>e)return this.scroll(e,c,d);if(e>=g&&h>=e)return a.isFunction(d)&&d.call(this,!1),this;for(var i,j=this.items(),k=this.clipping(),l=this.vertical?"bottom":this.rtl?"left":"right",m=0;;){if(i=j.eq(e),0===i.length)break;if(m+=this.dimension(i),m>=k){var n=parseFloat(i.css("margin-"+l))||0;m-n!==k&&e++;break}if(0>=e)break;e--}return this.scroll(e,c,d)}}(jQuery),function(a){"use strict";a.jCarousel.plugin("jcarouselControl",{_options:{target:"+=1",event:"click",method:"scroll"},_active:null,_init:function(){this.onDestroy=a.proxy(function(){this._destroy(),this.carousel().one("jcarousel:createend",a.proxy(this._create,this))},this),this.onReload=a.proxy(this._reload,this),this.onEvent=a.proxy(function(b){b.preventDefault();var c=this.options("method");a.isFunction(c)?c.call(this):this.carousel().jcarousel(this.options("method"),this.options("target"))},this)},_create:function(){this.carousel().one("jcarousel:destroy",this.onDestroy).on("jcarousel:reloadend jcarousel:scrollend",this.onReload),this._element.on(this.options("event")+".jcarouselcontrol",this.onEvent),this._reload()},_destroy:function(){this._element.off(".jcarouselcontrol",this.onEvent),this.carousel().off("jcarousel:destroy",this.onDestroy).off("jcarousel:reloadend jcarousel:scrollend",this.onReload)},_reload:function(){var b,c=a.jCarousel.parseTarget(this.options("target")),d=this.carousel();if(c.relative)b=d.jcarousel(c.target>0?"hasNext":"hasPrev");else{var e="object"!=typeof c.target?d.jcarousel("items").eq(c.target):c.target;b=d.jcarousel("target").index(e)>=0}return this._active!==b&&(this._trigger(b?"active":"inactive"),this._active=b),this}})}(jQuery),function(a){"use strict";a.jCarousel.plugin("jcarouselPagination",{_options:{perPage:null,item:function(a){return'<a href="#'+a+'">'+a+"</a>"},event:"click",method:"scroll"},_carouselItems:null,_pages:{},_items:{},_currentPage:null,_init:function(){this.onDestroy=a.proxy(function(){this._destroy(),this.carousel().one("jcarousel:createend",a.proxy(this._create,this))},this),this.onReload=a.proxy(this._reload,this),this.onScroll=a.proxy(this._update,this)},_create:function(){this.carousel().one("jcarousel:destroy",this.onDestroy).on("jcarousel:reloadend",this.onReload).on("jcarousel:scrollend",this.onScroll),this._reload()},_destroy:function(){this._clear(),this.carousel().off("jcarousel:destroy",this.onDestroy).off("jcarousel:reloadend",this.onReload).off("jcarousel:scrollend",this.onScroll),this._carouselItems=null},_reload:function(){var b=this.options("perPage");if(this._pages={},this._items={},a.isFunction(b)&&(b=b.call(this)),null==b)this._pages=this._calculatePages();else for(var c,d=parseInt(b,10)||0,e=this._getCarouselItems(),f=1,g=0;;){if(c=e.eq(g++),0===c.length)break;this._pages[f]=this._pages[f]?this._pages[f].add(c):c,g%d===0&&f++}this._clear();var h=this,i=this.carousel().data("jcarousel"),j=this._element,k=this.options("item"),l=this._getCarouselItems().length;a.each(this._pages,function(b,c){var d=h._items[b]=a(k.call(h,b,c));d.on(h.options("event")+".jcarouselpagination",a.proxy(function(){var a=c.eq(0);if(i.circular){var d=i.index(i.target()),e=i.index(a);parseFloat(b)>parseFloat(h._currentPage)?d>e&&(a="+="+(l-d+e)):e>d&&(a="-="+(d+(l-e)))}i[this.options("method")](a)},h)),j.append(d)}),this._update()},_update:function(){var b,c=this.carousel().jcarousel("target");a.each(this._pages,function(a,d){return d.each(function(){return c.is(this)?(b=a,!1):void 0}),b?!1:void 0}),this._currentPage!==b&&(this._trigger("inactive",this._items[this._currentPage]),this._trigger("active",this._items[b])),this._currentPage=b},items:function(){return this._items},reloadCarouselItems:function(){return this._carouselItems=null,this},_clear:function(){this._element.empty(),this._currentPage=null},_calculatePages:function(){for(var a,b,c=this.carousel().data("jcarousel"),d=this._getCarouselItems(),e=c.clipping(),f=0,g=0,h=1,i={};;){if(a=d.eq(g++),0===a.length)break;b=c.dimension(a),f+b>e&&(h++,f=0),f+=b,i[h]=i[h]?i[h].add(a):a}return i},_getCarouselItems:function(){return this._carouselItems||(this._carouselItems=this.carousel().jcarousel("items")),this._carouselItems}})}(jQuery),function(a,b){"use strict";var c,d,e={hidden:"visibilitychange",mozHidden:"mozvisibilitychange",msHidden:"msvisibilitychange",webkitHidden:"webkitvisibilitychange"};a.each(e,function(a,e){return"undefined"!=typeof b[a]?(c=a,d=e,!1):void 0}),a.jCarousel.plugin("jcarouselAutoscroll",{_options:{target:"+=1",interval:3e3,autostart:!0},_timer:null,_started:!1,_init:function(){this.onDestroy=a.proxy(function(){this._destroy(),this.carousel().one("jcarousel:createend",a.proxy(this._create,this))},this),this.onAnimateEnd=a.proxy(this._start,this),this.onVisibilityChange=a.proxy(function(){b[c]?this._stop():this._start()},this)},_create:function(){this.carousel().one("jcarousel:destroy",this.onDestroy),a(b).on(d,this.onVisibilityChange),this.options("autostart")&&this.start()},_destroy:function(){this._stop(),this.carousel().off("jcarousel:destroy",this.onDestroy),a(b).off(d,this.onVisibilityChange)},_start:function(){return this._stop(),this._started?(this.carousel().one("jcarousel:animateend",this.onAnimateEnd),this._timer=setTimeout(a.proxy(function(){this.carousel().jcarousel("scroll",this.options("target"))},this),this.options("interval")),this):void 0},_stop:function(){return this._timer&&(this._timer=clearTimeout(this._timer)),this.carousel().off("jcarousel:animateend",this.onAnimateEnd),this},start:function(){return this._started=!0,this._start(),this},stop:function(){return this._started=!1,this._stop(),this}})}(jQuery,document);(function($){$.fn.touchwipe=function(settings){var config={min_move_x:20,min_move_y:20,wipeLeft:function(){},wipeRight:function(){},wipeUp:function(){},wipeDown:function(){},preventDefaultEvents:true};if(settings)$.extend(config,settings);this.each(function(){var startX;var startY;var isMoving=false;function cancelTouch(){this.removeEventListener('touchmove',onTouchMove);startX=null;isMoving=false}function onTouchMove(e){if(config.preventDefaultEvents){e.preventDefault()}if(isMoving){var x=e.touches[0].pageX;var y=e.touches[0].pageY;var dx=startX-x;var dy=startY-y;if(Math.abs(dx)>=config.min_move_x){cancelTouch();if(dx>0){config.wipeLeft()}else{config.wipeRight()}}else if(Math.abs(dy)>=config.min_move_y){cancelTouch();if(dy>0){config.wipeDown()}else{config.wipeUp()}}}}function onTouchStart(e){if(e.touches.length==1){startX=e.touches[0].pageX;startY=e.touches[0].pageY;isMoving=true;this.addEventListener('touchmove',onTouchMove,false)}}if('ontouchstart'in document.documentElement){this.addEventListener('touchstart',onTouchStart,false)}});return this}})(jQuery);;(function($,global){"use strict";$.fn.imagezoomsl=function(options){options=options||{};return this.each(function(){if(!$(this).is("img"))return true;var that=this;setTimeout(function(){$(new Image()).on('load',function(){sergelandimagezoomer.init($(that),options);}).attr('src',$(that).attr('src'));},30);});};var sergelandimagezoomer={};$.extend(sergelandimagezoomer,{dsetting:{loadinggif:'',loadopacity:0.1,loadbackground:'#878787',cursorshade:true,magnifycursor:'crosshair',cursorshadecolor:'#fff',cursorshadeopacity:0.3,cursorshadeborder:'1px solid black',zindex:'',stepzoom:0.5,zoomrange:[2,2],zoomstart:2,disablewheel:true,showstatus:true,showstatustime:2000,statusdivborder:'1px solid black',statusdivbackground:'#C0C0C0',statusdivpadding:'4px',statusdivfont:'bold 13px Arial',statusdivopacity:0.8,magnifierpos:'right',magnifiersize:[0,0],magnifiereffectanimate:'showIn',innerzoom:false,innerzoommagnifier:false,descarea:false,leftoffset:15,rightoffset:15,switchsides:true,magnifierborder:'1px solid black',textdnbackground:'#fff',textdnpadding:'10px',textdnfont:'13px/20px cursive',scrollspeedanimate:5,zoomspeedanimate:7,loopspeedanimate:2.5,magnifierspeedanimate:350,classmagnifier:"magnifier",classcursorshade:"cursorshade",classstatusdiv:"statusdiv",classtextdn:"textdn",classtracker:"tracker"},isie:(function(){var nAgt=navigator.userAgent;if(nAgt.indexOf("MSIE")!=-1)return true;else return false;})(),highestzindex:function($img){var z=0,$els=$img.parents().add($img),elz;$els.each(function(){elz=$(this).css('zIndex');elz=isNaN(elz)?0:+elz;z=Math.max(z,elz);});return z;},getboundary:function(b,val,specs){if(b=="left"){var rb=-specs.img.w*specs.newpower+specs.magnifier.w;return(val>0)?0:(val<rb)?rb:val;}
else{var tb=-specs.img.h*specs.newpower+specs.magnifier.h;return(val>0)?0:(val<tb)?tb:val;}},controlLoop:function($tracker){var self=this,specs=$tracker.data('specs');if(!specs)return;var coords=specs.$img.offsetsl(),pageX=self.cld.pageX999-coords.left,pageY=self.cld.pageY999-coords.top;self.cld.destU+=(self.cld.pageX999-self.cld.destU)/2.45342;self.cld.destV+=(self.cld.pageY999-self.cld.destV)/2.45342;specs.$statusdiv.css({left:self.cld.destU-10,top:self.cld.destV+20});var csw=Math.round(specs.magnifier.w/specs.newpower),csh=Math.round(specs.magnifier.h/specs.newpower);self.cld.destK+=(pageX-self.cld.destK)/specs.setting.loopspeedanimate;self.cld.destL+=(pageY-self.cld.destL)/specs.setting.loopspeedanimate;specs.$cursorshade.css({left:specs.img.w>csw?Math.min(specs.img.w-csw,Math.max(0,self.cld.destK-csw/2))+coords.left-specs.cursorshade999.border999.left999:coords.left-specs.cursorshade999.border999.left999,top:specs.img.h>csh?Math.min(specs.img.h-csh,Math.max(0,self.cld.destL-csh/2))+coords.top-specs.cursorshade999.border999.top999:coords.top-specs.cursorshade999.border999.top999});if(specs.setting.innerzoommagnifier){self.cld.destM+=(self.cld.pageX999-self.cld.destM)/specs.setting.loopspeedanimate;self.cld.destN+=(self.cld.pageY999-self.cld.destN)/specs.setting.loopspeedanimate;specs.$magnifier.css({left:self.cld.destM-Math.round(specs.magnifier.w/2),top:self.cld.destN-Math.round(specs.magnifier.h/2)});specs.$textdn.css({left:self.cld.destM-Math.round(specs.magnifier.w/2),top:self.cld.destN+specs.magnifier.h/2});}
self.cld.currU+=(pageX-self.cld.currU)/specs.setting.scrollspeedanimate;self.cld.currV+=(pageY-self.cld.currV)/specs.setting.scrollspeedanimate;var newx=-self.cld.currU*specs.newpower+specs.magnifier.w/2;var newy=-self.cld.currV*specs.newpower+specs.magnifier.h/2;specs.$bigimage.css({left:self.getboundary('left',newx,specs),top:self.getboundary('top',newy,specs)});self.cld.controlTimer=setTimeout(function(){self.controlLoop($tracker);},30);},controlLoop2:function($tracker){var self=this,specs=$tracker.data('specs');if(!specs)return;specs.currM+=(specs.newpower-specs.currM)/specs.setting.zoomspeedanimate;specs.currM=Math.round(specs.currM*1000)/1000;specs.$cursorshade.css({width:specs.img.w>Math.round(specs.magnifier.w/specs.currM)?Math.round(specs.magnifier.w/specs.currM):specs.img.w,height:specs.img.h>Math.round(specs.magnifier.h/specs.currM)?Math.round(specs.magnifier.h/specs.currM):specs.img.h});specs.$bigimage.css({width:Math.round(specs.currM*specs.bigimage.w*(specs.img.w/specs.bigimage.w)),height:Math.round(specs.currM*specs.bigimage.h*(specs.img.h/specs.bigimage.h))});self.cld.controlTimer2=setTimeout(function(){self.controlLoop2($tracker);},30);},cld:{},showimage:function($tracker){var self=this,specs=$tracker.data('specs'),width=specs.setting.magnifiersize[0],height=specs.setting.magnifiersize[1],magcoords={},coords=specs.$img.offsetsl(),func=function(){},left1=0,top1=0;magcoords.left=coords.left+(specs.setting.magnifierpos==='left'?-specs.magnifier.w-specs.setting.leftoffset:specs.img.w+specs.setting.rightoffset);if(specs.setting.switchsides&&!specs.setting.innerzoom){if(specs.setting.magnifierpos!=='left'&&magcoords.left+specs.magnifier.w+specs.setting.leftoffset>=$(window).width()&&coords.left-specs.magnifier.w>=specs.setting.leftoffset)
magcoords.left=coords.left-specs.magnifier.w-specs.setting.leftoffset;else if(specs.setting.magnifierpos==='left'&&magcoords.left<0)
magcoords.left=coords.left+specs.img.w+specs.setting.rightoffset;}
left1=magcoords.left;top1=coords.top;specs.$magnifier.css({visibility:"visible",display:"none"});if(specs.setting.descarea){left1=$(specs.setting.descarea).offsetsl().left;top1=$(specs.setting.descarea).offsetsl().top;}
if(specs.setting.innerzoommagnifier){left1=self.cld.pageX999-Math.round(specs.magnifier.w/2);top1=self.cld.pageY999-Math.round(specs.magnifier.h/2);}
func=function(){specs.$textdn.stop(true,true).fadeIn(specs.setting.magnifierspeedanimate);if(!specs.setting.innerzoommagnifier)
specs.$textdn.css({left:left1,top:top1+height});}
if(specs.setting.innerzoom){left1=coords.left;top1=coords.top;func=function(){specs.$img.css({visibility:"hidden"});specs.$textdn.css({left:left1,top:top1+height}).stop(true,true).fadeIn(specs.setting.magnifierspeedanimate);};}
switch(specs.setting.magnifiereffectanimate){case'slideIn':specs.$magnifier.css({left:left1,top:top1-height/3,width:width,height:height}).stop(true,true).show().animate({top:top1},specs.setting.magnifierspeedanimate,"easeOutBounceSL",func);break;case'showIn':specs.$magnifier.css({left:coords.left+Math.round(specs.img.w/2),top:coords.top+Math.round(specs.img.h/2),width:Math.round(specs.magnifier.w/5),height:Math.round(specs.magnifier.h/5)}).stop(true,true).show().css({opacity:"0.1"}).animate({left:left1,top:top1,opacity:"1",width:width,height:height},specs.setting.magnifierspeedanimate,func);break;default:specs.$magnifier.css({left:left1,top:top1,width:width,height:height}).stop(true,true).fadeIn(specs.setting.magnifierspeedanimate,func);}
if(specs.setting.showstatus&&(specs.title999||specs.help))
specs.$statusdiv.html(specs.title999+'<div style="font-size:80%">'+specs.help+'</div>').stop(true,true).fadeIn().delay(specs.setting.showstatustime).fadeOut("slow");else specs.$statusdiv.hide();},hideimage:function($tracker){var self=this,specs=$tracker.data('specs'),coords=specs.$img.offsetsl();switch(specs.setting.magnifiereffectanimate){case'showIn':specs.$magnifier.stop(true,true).animate({left:coords.left+Math.round(specs.img.w/2),top:coords.top+Math.round(specs.img.h/2),opacity:"0.1",width:Math.round(specs.magnifier.w/5),height:Math.round(specs.magnifier.h/5)},specs.setting.magnifierspeedanimate,function(){specs.$magnifier.hide();});break;default:specs.$magnifier.stop(true,true).fadeOut(specs.setting.magnifierspeedanimate);}},init:function($img,options,gallery){var setting=$.extend({},this.dsetting,options),basezindex=setting.zindex||this.highestzindex($img),img={w:$img.width(),h:$img.height()},cld=new cld(),title=$img.attr("data-title")?$img.attr("data-title"):'',help=$img.attr("data-help")?$img.attr("data-help"):'',textdn=$img.attr("data-text-bottom")?$img.attr("data-text-bottom"):'',self=this,newpower,key,$magnifier,$cursorshade,$statusdiv,$tracker,$textdn;if(img.h===0||img.w===0){$(new Image()).on('load',function(){self.init($img,options);}).attr("src",$img.attr("src"));return;}
$img.css({visibility:"visible"});setting.largeimage=$img.attr("data-large")||$img.attr("src");for(key in setting)
if(setting[key]==='')setting[key]=this.dsetting[key];if(setting.zoomrange[0]<setting.zoomstart)
newpower=setting.zoomstart;else newpower=setting.zoomrange[0];if(setting.magnifiersize.toString()==='0,0'||setting.magnifiersize.toString()==='')
if(setting.innerzoommagnifier)
setting.magnifiersize=[img.w/2,img.h/2];else setting.magnifiersize=[img.w,img.h];if(setting.descarea&&$(setting.descarea).length){if($(setting.descarea).width()===0||$(setting.descarea).height()===0)
setting.descarea=false;else setting.magnifiersize=[$(setting.descarea).width(),$(setting.descarea).height()];}
else setting.descarea=false;if(setting.innerzoom){setting.magnifiersize=[img.w,img.h];if(!options.cursorshade)
setting.cursorshade=false;if(!options.scrollspeedanimate)
setting.scrollspeedanimate=10;}
if(setting.innerzoommagnifier){if(!options.magnifycursor)
if(window.chrome||window.sidebar)
setting.magnifycursor="none";setting.cursorshade=false;setting.magnifiereffectanimate="fadeIn";}
function cld(){this.pageX999=0;this.pageY999=0;}
function getspecs($bigimage){$tracker.data("specs",{setting:setting,title999:title,help:help,$img:$img,$magnifier:$magnifier,$bigimage:$bigimage,$statusdiv:$statusdiv,$cursorshade:$cursorshade,$textdn:$textdn,img:img,bigimage:{w:$bigimage.width(),h:$bigimage.height()},magnifier:{w:$magnifier.width(),h:$magnifier.height()},cursorshade999:{w:$cursorshade.width(),h:$cursorshade.height(),border999:{left999:parseInt($cursorshade.css("border-left-width"))||0,top999:parseInt($cursorshade.css("border-top-width"))||0}},currM:newpower,newpower:newpower});}
function isImageLoaded(img){if(!img.complete)
return false;if(typeof img.naturalWidth!=="undefined"&&img.naturalWidth===0)
return false;return true;}
var toFix=['wheel','mousewheel','DOMMouseScroll','MozMousePixelScroll'];var toBind='onwheel'in document||document.documentMode>=9?['wheel']:['mousewheel','DomMouseScroll','MozMousePixelScroll'];var lowestDelta,lowestDeltaXY;if($.event.fixHooks){for(var i=toFix.length;i;){$.event.fixHooks[toFix[--i]]=$.event.mouseHooks;}}
$.event.special.mousewheel={setup:function(){if(this.addEventListener){for(var i=toBind.length;i;){this.addEventListener(toBind[--i],handler,false);}}else{this.onmousewheel=handler;}},teardown:function(){if(this.removeEventListener){for(var i=toBind.length;i;){this.removeEventListener(toBind[--i],handler,false);}}else{this.onmousewheel=null;}}};function handler(event){var orgEvent=event||window.event,args=[].slice.call(arguments,1),delta=0,deltaX=0,deltaY=0,absDelta=0,absDeltaXY=0,fn;event=$.event.fix(orgEvent);event.type="mousewheel";if(orgEvent.wheelDelta){delta=orgEvent.wheelDelta;}
if(orgEvent.detail){delta=orgEvent.detail*-1;}
if(orgEvent.deltaY){deltaY=orgEvent.deltaY*-1;delta=deltaY;}
if(orgEvent.deltaX){deltaX=orgEvent.deltaX;delta=deltaX*-1;}
if(orgEvent.wheelDeltaY!==undefined){deltaY=orgEvent.wheelDeltaY;}
if(orgEvent.wheelDeltaX!==undefined){deltaX=orgEvent.wheelDeltaX*-1;}
absDelta=Math.abs(delta);if(!lowestDelta||absDelta<lowestDelta){lowestDelta=absDelta;}
absDeltaXY=Math.max(Math.abs(deltaY),Math.abs(deltaX));if(!lowestDeltaXY||absDeltaXY<lowestDeltaXY){lowestDeltaXY=absDeltaXY;}
fn=delta>0?"floor":"ceil";delta=Math[fn](delta/lowestDelta);deltaX=Math[fn](deltaX/lowestDeltaXY);deltaY=Math[fn](deltaY/lowestDeltaXY);args.unshift(event,delta,deltaX,deltaY);return($.event.dispatch||$.event.handle).apply(this,args);}
$.fn.offsetsl=function(){var elem=this.get(0);function getOffsetSum(elem){var top999=0,left999=0;while(elem){top999=top999+parseInt(elem.offsetTop);left999=left999+parseInt(elem.offsetLeft);elem=elem.offsetParent;}
return{top:top999,left:left999}}
if(elem.getBoundingClientRect)
return this.offset();else return getOffsetSum(elem)}
$.easing.easeOutBounceSL=function(x,t,b,c,d){if((t/=d)<(1/2.75)){return c*(7.5625*t*t)+b;}else if(t<(2/2.75)){return c*(7.5625*(t-=(1.5/2.75))*t+.75)+b;}else if(t<(2.5/2.75)){return c*(7.5625*(t-=(2.25/2.75))*t+.9375)+b;}else{return c*(7.5625*(t-=(2.625/2.75))*t+.984375)+b;}}
$magnifier=$("<div />").attr({"class":setting.classmagnifier}).css({position:"absolute",zIndex:basezindex,width:setting.magnifiersize[0],height:setting.magnifiersize[1],left:-10000,top:-10000,visibility:"hidden",overflow:"hidden"}).appendTo(document.body);if(!options.classmagnifier)
$magnifier.css({border:setting.magnifierborder});$cursorshade=$("<div />");if(setting.cursorshade){$cursorshade.attr({"class":setting.classcursorshade}).css({zIndex:basezindex,display:"none",position:"absolute",width:Math.round(setting.magnifiersize[0]/setting.zoomstart),height:Math.round(setting.magnifiersize[1]/setting.zoomstart),top:0,left:0}).appendTo(document.body);if(!options.classcursorshade)
$cursorshade.css({border:setting.cursorshadeborder,opacity:setting.cursorshadeopacity,backgroundColor:setting.cursorshadecolor});}
if(!setting.loadinggif)
setting.loadinggif="data:image/gif;base64,R0lGODlhQABAAKEAAPz6/Pz+/Pr6+gAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQJBgACACwAAAAAQABAAAACVJSPqcvtD6OctNqLs968+w+G4kiW5omm6sq27gvH8kzX9o3n+s73/g8MCofEovGITCqXzKbzCY1Kp9Sq9YqFBbaBH5cL4H2/4vG2bEaPe+YwmysqAAAh+QQJBgACACwAAAAAQABAAAACVZSPqcvtD6OctNqLs968+w+G4kiW5omm6sq27gvH8kzX9o3n+s73/g8MCofEovGITCqXzKbzqQpIAT+pNdC7XnlaK7eL3YHDOrAPsIWq1+y2+w2PnwoAIfkECQYAAgAsAAAAAEAAQAAAAleUj6nL7Q+jnLTai7PevPsPhuJIluaJpurKtu4Lx/JM1/aN5/rO9/4PDI4AgQDgV0wGekolr5l8Qpe7KVVHhDKbQKPwCw6Lx+Sy+YxOq9fstvsNj8vn4AIAIfkECQYAAgAsAAAAAEAAQAAAAmiUj6nL7Q+jnLTai7PevPsPhuJIluaJpurKtu4Lx/JM1/aNk0DAB3nSC/4OwR5guCvyhsreUNA8MpVPQ7GKzWq33K73Cw6Lx+Sy+YxOq9fsttsWlD6bz+R1qpTjmgH9zS40R1UV95ZQAAAh+QQJBgACACwAAAAAQABAAAACapSPqcvtD6OctNqLs968+w+G4kiW5omm6sq2bRAAbgXAtjxH9p5D9W7rOYA8IeMHxBkXxMByWHwOpdSq9YrNarfcrvcLDovH5LL5jE6r1+y2+/JTZonaphNrnzf1dCzyVgfUFfNWaHgoVQAAIfkECQYAAgAsAAAAAEAAQAAAAm2Uj6nL7Q+jnLTai7PevPsPhuJIluZ5AQDKBe7LYsD7rnFF0zeeuzvV8/0kwcBw0jtSZgGb8gmNSqfUqvWKzWq33K73Cw6Lx4uZc5s7X4NaZhJbNGaLWjaapoY3yfy+/w8YKDhIWGh4iJioWFIAACH5BAkGAAIALAAAAABAAEAAAAJ3lI+py+0Po5y02ouz3rz7D4YcEACAGAbqinrrG7QczMoardo3rmf42cPQgpsS8YhMKpfMpvMJjUqn1Kr1+iSZsIchFhe7gr88cdlKggHNL2537Y7L5/S6/Y7P6/f8vt+nAsdWM9hWSFg1dphD9iJIlYb4N0nZVAAAIfkECQYAAgAsAAAAAEAAQAAAAnqUj6nL7Q+jnLTai7O+YHsZhOFHLuJZpgJwip36tSjsyeFLb3b+sSfO042CxKLxiEwql8ym85mcQR2yacMWsJp22gS26+WCDeKxwTc0q9fstvsNj8vn9Lr9js/r9/y+/w8YWCOlVgaGRgiGBdS1qIYowmY4hsYoeIlQAAAh+QQJBgACACwAAAAAQABAAAACepSPqcvtD6OctNp7QQC4Wx2Em0dC4lmmC3iO6iu0KKyyJ0ercpDDbU8L4YDEovGITCqXzJho2IzsotIp9bFzXRlZ6DZhE30dMu848Tur1+y2+w2Py+f0uv2Oz+v3/H5yFicTaOWWBWf4hpiYNhji9wgZKTlJWWl5SVkAACH5BAkGAAIALAAAAABAAEAAAAKJlI+py+0Po5z0BRCq3ir4z4XURwLiaZEgyiaY6rXyAcezXN+3aup77wsKh8RGqSiCAZGUl4qpqV2go9qS+nCSsNUnd3L8isfksvmMTqvX7Lb7DY/L5zPMla3NvHNtqVt6d+b3B/OWJ+cRSLfISKW4xrOnRFjYx8c2iHmpuQX38dgYKjpKWmqKVAAAIfkECQYAAgAsAAAAAEAAQAAAAoiUj6nL7Q9ZALHaa4LeuPuzhcFHWiJXps6pqe7Cju+csfR93t60yvqV+7lYFGEqZjzakiQk8+N87kTSEqBVzWq33K73Cw6Lx+SyuXMFFM+IIFsQPcfN83KdfBWt2e53Zu8XKDhIWGh4iJiouMjY6PgIGSlpSBW4xJan9xbjQ0fkd8mnGZgJSFMAACH5BAkGAAIALAAAAABAAEAAAAKLlI+py+0PW5gz2oupxrwnvXliBk7AiEJAGZzpu7ABTCulW5MUs1Y5x/rlZEJYr1R8yWbJFAvXFB13UaWpis1qt9yu9wsOi8dCDZRsA53RBiL783wjZGv0lCo/3PJwPP8PGCg4SFhoeIiYqLjI2Oj4+LMCUCeHBOjGh5mnWRn0F3cJQtgCWWp6inpYAAAh+QQJBgACACwAAAAAQABAAAACnpSPqQgBC6Oc9ISLq94b+8eFIuJ54xmWGcpS6tWyzQWSaoy+Slnj6a1o9HycF4xInAGROOOQydJBiaWp9YrNarfcrpcDeH411XFnaZYY066XmG2RwiFK0zyCvi+U+r7/DxgoOEhYaHiImKi4yMhVFqH0hiW3k5dVt7JAqeWk6dbVGbTGhXlUaZmlIrm59Qjh2hgrO0tba3uLm6u721IAACH5BAkGAAIALAAAAABAAEAAAAKalI+pCeELo5zUuBuq3rvhx4Ui8l3jGQFLCaKu8CVs9qKsXNan96lHrhvNaIygjeUzGm9KJc+RbC5b0qr1ig0BotnjhdvlIMNCJllsPmtmanSv7TbBOR7w/I7P6/f8vv8PGCg4SLiwVWgRM/gkF8gm+OiY9hcpiYFYh6i5ydnp+QkaKjpK6mJnCUU4SbnaV8kKhPqlqkgbcCpSAAAh+QQJBgACACwAAAAAQABAAAACnJSPqQrhsKKctIrmst2c5w91otWEB/Y54xqhz5F+7IzEQW3TtJuZuT6zqU4y4Iz3MipxqaUTVnw+k9KqlRUAmK66GFeHvH2xv/FIaF6h06Iw+9x8q8Xyuv2Oz+v3/L7/D8iCEpjgRXhRBrgWuKiY6BhHyHNYs0V5iZmpucnZ6fkJGio62oFhyRiJaqia+tfo+uiHdOq3SplFmutUAAAh+QQJBgACACwAAAAAQABAAAACmJSPqSvhwaKcNL5Xs9b37l91SYeB5kJCR6qersEeQPrW8doB9Xvjzm6jAYcjEfHo0yFPAYBySZx5oEMhlZd6Xk1S0tbF0n4/1jGo+zNjxeq2+w2Py+f0un2HZt99D/29t8c3FShYQghTduh1WJTG+AgZKTlJWWl5iZmpucnoR4jW8pgYCEhYSjq6B+rIuBg5yBkrO0tbO1sAACH5BAkGAAIALAAAAABAAEAAAAKalI+paxAfmJy0Moit3gkChXncWIXR4ZgnyXYqqq7tHCPqN+f18eZ6D4P4hsChDucSGn+ZpZNnQj6Nuym1aGWGslcTt6v8DlPisvmMTqvXFIeUrdnC4955+2afxGT5RCr01mdTJ3iBEVg4iJjI2Oj4CBkpOUlZaXn5lbLISPhY5fjZGMqJRQoo2RkZsInZ6voKGys7S1trextZAAAh+QQJBgACACwAAAAAQABAAAACmpSPqYvhwaKcFLD3qN4XJ+xxogY6TQmNKgOgloGm63zEckznQoueoU7rfR4v4ASE4BGNOWHNxGw6o0Ylksq0YaOuLdMK9WYdRbH5jE6r1+wgub0qwUW4OWlqj9Tzkj1fD1L215ExaHiImKi4yNjo+AgZKdECIMgo5+inqJnIieh5CBZg2XkFOSqZqrrK2ur6ChsrO0tba3vbWgAAIfkECQYAAgAsAAAAAEAAQAAAApiUj6mbEA+YnHS+ENPdtfu1PVoYfKZHioaTnq6UlkYsv/YRH2yY3XeOI/lQHJ1wdBl2WsFLT2kDQqcrKXVqvSpTT+2Q6aU6w+Sy+YxONzZdtWeXdJ+ycgq9DgPj7fq9JeT3URRIWGh4iJiouMjY+DLmKACn0sjVOBm3SON4d9inORgpOkpaanqKmqq6ytrq+gobKztLW9tYAAAh+QQJBgACACwAAAAAQABAAAACn5SPqbsQAJicdIZ7Fca1+7VxhxMG39mV2aGa6Mu0kdHCdkKGs1DfXe4yAEW00s4nGQZ5ukQJWekJiQoHNKW6ap3ZrVfq1T7D4Q35jIZC0tsm26c6vlHg+alu9+DzUSP/NfaHQiInaHiImKi4yNhIBlToWLQR2bhn2SXJkqnJFNjpSQUaOlpqeoqaqrrK2ur6ChsrO0tba3uLm6u7y7tYAAAh+QQJBgACACwAAAAAQABAAAACo5SPqQgBex6ctNKAs8rY+r9wmWSIHYh65ik0Zgpf67E6McoldbSSd/WiBYWin2pGxPgEpqUxhOQ5S5qnZWfNbqLaLrPoDX9Z4ptjWv4N00YXmK3mwmHYeaxuT7lz+fu77wcoOEhYaHiImNcAgJaIsOaoIxdJBUk59neJyadpsKfU+ZgZytRIeoqaqrrK2ur6ChsrO0tba3uLm6u7y9vr+wusUAAAIfkECQYAAgAsAAAAAEAAQAAAAp6Uj6kJ4QujnNS4G2ADtXvUYE8iZt8pleOhcqgXmqxK0m9VuoIq7/xNiWEQtlkJOPkZL4oiEsLTsSIi6bPp9ASs10W2C7YMw88Ll9w9osPK9bXtRsLjtzkd9b3jMWe9/w8YKDhIWPjBZ9iRk5iUx7g09ujlKCnEJAlVhUkVuen5CRoqOkpaanqKmqq6ytrq+gobKztLW2t7i5uru/tUAAAh+QQJBgACACwAAAAAQABAAAACopSPqQrhsKKctIrmst2c5w8xWkcaTXhgn6OsQcmpz+GOaQ1bOL3zbk6RZVA93wo4qbFuNoQSKRHOYi4UtPUjZa+RI/DFvXwSp/BVak4balY1Urp0Q5Vg+bxoz+HzORn/DxgoOJhWRgjjdeixpRjE1lhBB+lYNUmxZ4k1lBkZ0MYJGio6SlpqeoqaqrrK2ur6ChsrO0tba3uLm6u7y9vr+0taAAAh+QQJBgACACwAAAAAQABAAAACnJSPqSvhwaKcNL5Xs9b37l91SYctgAOAHImQzsKqlAsZZ4zcoizRbZcauXi94e8FcwWJCt9G52EycBsjb3d4LD9UlVV6OIGV4HLOaS7Tamk1adtmQpFxd6mOz+v3qwCcD9IF2Ic1SBhleHiXGPLFOAP0WIUoWWl5iZmpucnZ6fkJGio6SlpqeoqaqrrK2ur6ChsrO0tba3uLmytTAAAh+QQJBgACACwAAAAAQABAAAACnpSPqXsQH5ictDKIrd4IgoV53EiFEeKYJ8l2KqquCUC3VZyo3xzaE+7qKV4+EDH4MJqKl+UoFdqxhAcqJyYdHZmGrdaUZTpZUCtX8Ah/vWeurg0XlJPxuKiOz+v3LTOfxPanMZcmCAhkuEFIl7gR2PgzBulYOGl5iZmpucnZ6fkJGio6SlpqeoqaqrrK2ur6ChsrO0tba3uLm6u7e1kAACH5BAkGAAIALAAAAABAAEAAAAKklI+pqxDPopwSyIcD3Vxl7X1QR04iiJxoySKOaKVnSx/qKqh1/YpJj4ntWrNQpvIQsj6ujzIReBoxRJ8Mt4RlrUNosQM8dr1czm1MZpZO0u6XFMainbUgOiK/61sOQHs/VAYY+DZYV2hYJZi4pcZIE5f3aOY4Wfdnmam5ydnp+QkaKjpKWmp6ipqqusra6voKGys7S1tre4ubq7vL2+v7CxxcWwAAIfkECQYAAgAsAAAAAEAAQAAAAp6Uj6nLBg2jTKG+VvPc3GS9fGBHhmKlAGdQttSqrMHltnK80jV54+Ie+R1UQl9GB3wVBSIk4pOE9KJUx7SKUDknVyxzyT1to7kOzHvohmfo57kNVGehcEaZQaTXjSiMeG8yNiQHuHZS6HKHyHO42JLH4ig5SVlpeYmZqbnJ2en5CRoqOkpaanqKmqq6ytrq+gobKztLW2t7i5uru7tXAAAh+QQJBgACACwAAAAAQABAAAACopSPqQiwD6OcB4R7o3W0e4OFT5h95kiWSRpw5wuy7sEG8F0rtX1DFpb4kRa53kIIRKRQQyORpWtFSDMnDQqTWp/LrTfW/XrD4nGyjE5HL9WVSA1JtcFveBDrJtvpoXZtrvangIQBmFaU17SnpHfVt7imcnQGWWl5iZmpucnZ6fkJGio6SlpqeoqaqrrK2ur6ChsrO0tba3uLm6u7y9vr+4taAAAh+QQJBgACACwAAAAAQABAAAACm5SPqRoNC6OcVICGQ92cZ/x04nhcXyNl5GqcGGSqLCQnrrbcM/PxPe3aIXS2Wi4obCFJxGRztHRGRzFc8nC6an3W7SwACHm32fG1+jILn+oVuw2dwkVo1JxVvn+7+n775yciF5gySAhkeJhQB6ZI8eZ4lCEWKRFTiZmpucnZ6fkJGio6SlpqeoqaqrrK2ur6ChsrO0tba3uL+1kAACH5BAkGAAIALAAAAABAAEAAAAKYlI+pK+HBopw0vlez1vfuDyYdFpYIQCqjY7YjoK5UgLYJOi7v1MF2I9OlLLnfiuY6GoOmI2TZseF6P0MU6gE9fFXG9VPsLlDcjVKMPqO76jU2636z4uxLmY7P6/f8vv8PGCg4SFhoeIgINpQo8sV40PYYyTiZWIk4tfgIpLnp+QkaKjpKWmp6ipqqusra6voKGys7S1urVwAAIfkECQYAAgAsAAAAAEAAQAAAApqUj6l7EB+YnLQyiK3eG0PAhRMGKo73iGqCRsmJrjKcKW0pi22AH22+2vV8NaCIBjESeUrBTxmDfpq7Da05elaQLqxNS7l5v1EKNzVGiCu7btpQZoPfhqFlTp8V8/y+/w8YKDhIWGh4iJiouMjY6PgIGSk5SVlpeYmZqbnJ2dkxNYnHWBUpVLr2eBbqYefo4QkbKztLW2t7m1kAACH5BAkGAAIALAAAAABAAEAAAAKYlI+pywLQopw0hYurpgCH2HkBtJWKeDVoarbGSp6r24Yos350meuK7dmZYCqRcHiLYGLHDbApNEKniBmVSrw2gUHtsedtZsOJp4TrIx+syq66yn4jk/K5tM6L4yv6fcXsFyg4SFhoeIiYqLjI2Oj4CBkpOUlZaXmJmam5ydnp+QkaKjo66gaJwsSYc9qnuPr4CiuS2mgKVQAAIfkECQYAAgAsAAAAAEAAQAAAApeUj6nL7Q9ZmCDai8XcIfKahQfHPWQAitk5OQCrhmzXzPEK1/lt7ZLPg7w2Kd0nOCohlUjNqQlFsIpR3vBZXdqyWhKVq7puwFAi+YxOq9fstvsNj1dJcg+2zhCb8YsZjZ/gB9h3N4ig92VoMKbY6PgIGSk5SVlpeYmZqRmzF1nYuOUYCgpkOKpYqii2ydrq+gobKztL61YAACH5BAkGAAIALAAAAABAAEAAAAKZlI+pCLAPo5wHhHup3hx7DoaJ94lmR16OZGHrqaXZlL4wK9P5LXj2kaLIArzaQxXbnVokXk9pGv6izZvU+ZzdmCWs1wD9YqvisvmMTqvX7Lb7DY/L5/S6/Y7P6/fr1pQfxAcUpjckCEaYZ3jIhXGI2PXY80fXIDkYCWh0uCjYqRnomahI9uh3iZqqusra6voKGys7S1trO1cAACH5BAkGAAIALAAAAABAAEAAAAKalI+pC+Gxopy0ioet3hs/wIUi0njOiHLmk7YNtYKtWLLROo94VEN5uPL9hoegjHjJ6HZIJqdna5qOKg/SAI2KHFRiUHjNxcJDJ3nWO6vX7Lb7DY8zlPKOqW73dPFzM1/x9QczJTjhV5hghbjI2Oj4CBkpOUlZaXmJmam5ydnp+QkaKjpKKoix53i4mAWWOgZpFMk6qcp4WkpRAAAh+QQJBgACACwAAAAAQABAAAACmZSPqZvhwKKcNLobqt4bYw6GjeeIpgBcFFmeIAlZrMul5ATT3SzdusYKxH5EQ7CINPqSRQ/zCY1KQ4+pznYZWqnLLcKpwIK9yvEhmCGjeAhxVi04Kthk+fwDj9Pn+a9H24ejEkhYaHiImKi4yNjo+AgZKTlJWWl5iZmpucnZ6elpA9jYxWhXuqdouqiq6CYESer4+klba0tbAAAh+QQJBgACACwAAAAAQABAAAACmZSPqcvtD6MLNACJc6xc+8NdEMBVn1dSUEqJZ0SmI+u+D2vdrC3hNbPjzWSbyk/YCCJ5gGNoySNCp7HnFIq7YpXaKLf7yoKF0jGzZU6r1+y2+w2Py+f0uv2Oz+v3DNKRX/KHR8NnILZXVVIocCjgd3cYaCf1JWdykNgB2KjHmVfZabXImDNqeoqaqrrK2ur6ChsrO0tba3tVAAAh+QQJBgACACwAAAAAQABAAAACm5SPqcvtD1kIINqLBZi85g8a3BiW1zh610aZEIsGWOw68aRCt+xuQC64zYQmGgKV2RWJCKBFWYLWbs6hsRZELq/YYPVD7YqP2rHZe06r1+y2+w2Py+f0uv2Oz+v3fLvv28fVJ8I0mCUYWDgoZQjTYUhGApnQMml5iZmpucnZ6fkJGio6KvqIiZiIuse4qJhaBhkDqOfIQ3qLa1kAACH5BAkGAAIALAAAAABAAEAAAAKclI+pGQGwopy0moaD3ZxnDHXiiHwYiUphaTbpe3xMC790bNYp0K6CrEO1XAleMDX0HQXK0W3Jy+w+zdqTdFperlrYsBv8gmtR4NhrPqOJ6rb7Dbdl48403SK+47l6Sb4/8QcYwTe4UKZhqLjI2Oj4CBkpOUlZaXmJmam5ydnp+QkaKjpK6idFWciIOAeZJOkaucoWmdpYVlWaW1EAACH5BAkGAAIALAAAAABAAEAAAAKclI+pa+EBmJy0svei3dxi3IUVAF2fI6YKiWnIiaqyACtwMKvs5x5nn+PccDZQULRrHZeJGvPZMEKhDuD0is1qt9yu9ytSgkPOsadsptys6eKvTUk+4JU3XS2ls9h3hJzYtwDD13cTuGJ42ISmSHPS6BYDOUlZaXmJmam5ydnpaSJZ+SjKqJg4eQqZqvqBmfcJGys7S1tre4uby1UAACH5BAkGAAIALAAAAABAAEAAAAKZlI+py+0P4wOhygsDvbRWgIWJ50EdGYgq+j1sq2Jv6sxgLJ3o9OJy72L5LsAMafjz3CQ0ZEjjjEqn1GoQZnWyllmcrtT12cK4MVn1tZxjxbWIxHXL5/S6/Y7P6/f8vv8PGCg4SFiYQBEX+FXY9jczaAb4CCk0uGiIZai5CZgoiOLZ9xK6NxloKtnoh5p6xJjJGSs7S1trG1sAACH5BAkGAAIALAAAAABAAEAAAAKZlI+py+0PWQCx2muC3rj7s4XBR1oiV6bOqXWi2rDjxcKLjOF2cmKA/pmsZq6ap7fLnChFEXP3ex2NSUGIBKyqstoSt4uVgmHRsfmMTqvX7Lb7DY/L53T5D/Cs38R6xFf/VxdINzgXFZLXp3SleJPYCBkpOUlZaXmJmam5ydnp+QkaKirHB0nVeIgYKUOkKPMIiLTqRHkIa1MAACH5BAkGAAIALAAAAABAAEAAAAKYlI+py+0PW5gz2oupxrwnvXliBk7AiEJAGZzpu7ABTCulW5MUs1Y5x/rlZEJYr1R8yWbJFAvXFB13UaWpis1qndetB+nVgcIXIjliPj/Sagn4oIGqx4hbex28u+362LO/MEUFaAMiRwgXgrjI2Oj4CBkpOUlZaXmJmam5yXmxAnDI+NbItliKeEqYCvj3OOoa2ik7S1ubWQAAIfkECQYAAgAsAAAAAEAAQAAAAp6Uj6kIAQujnPSEi6veG/vHhSLieeMZlhnKUurVss0FkmqMvkpZ4+mtaPR8nBeMSJwBkTjjkMnSQYmlqfWKzWq33K6XA3h+NdVxZ2mWGNOul5htkcIhStM8gr4vlPq+/w8YKDhIWGh4iJiouMjIVRah9IYlt5OXVbeyQKnlpOnW1Rm0xoV5VGmZpSK5ufUI4doYKztLW2t7i5uru9tSAAAh+QQJBgACACwAAAAAQABAAAACmpSPqQnhC6Oc1Lgbqt674ceFIvJd4xkBSwmirvAlbPairFzWp/epR64bzWiMoI3lMxpvSiXPkWwuW9Kq9YoNAaLZ44Xb5SDDQiZZbD5rZmp0r+02wTke8PyOz+v3/L7/DxgoOEi4sFVoETP4JBfIJvjomPYXKYmBWIeoucnZ6fkJGio6SupiZwlFOEm52lfJCoT6papIG3AqUgAAIfkECQYAAgAsAAAAAEAAQAAAApyUj6kK4bCinLSK5rLdnOcPdaLVhAf2OeMaoc+RfuyMxEFt07Sbmbk+s6lOMuCM9zIqcamlE1Z8PpPSqpUVAJiuuhhXh7x9sb/xSGheodOiMPvcfKvF8rr9js/r9/y+/w/IghKY4EV4UQa4FriomOgYR8hzWLNFeYmZqbnJ2en5CRoqOtqBYckYiWqomvrX6Proh3Tqt0qZRZrrVAAAIfkECQYAAgAsAAAAAEAAQAAAApiUj6kr4cGinDS+V7PW9+5fdUmHgeZCQkeqnq7BHkD61vHaAfV7485uowGHIxHx6NMhTwGAckmceaBDIZWXel5NUtLWxdJ+P9YxqPszY8XqtvsNj8vn9Lp9h2bffQ/9vbfHNxUoWEIIU3bodViUxvgIGSk5SVlpeYmZqbnJ6EeI1vKYGAhIWEo6ugfqyLgYOcgZKztLWztbAAAh+QQJBgACACwAAAAAQABAAAACmpSPqWsQH5ictDKIrd4JAoV53FiF0eGYJ8l2Kqqu7Rwj6jfn9fHmeg+D+IbAoQ7nEhp/maWTZ0I+jbsptWhlhrJXE7er/A5T4rL5jE6r1xSHlK3ZwuPeeftmn8Rk+UQq9NZnUyd4gRFYOIiYyNjo+AgZKTlJWWl5+ZWyyEj4WOX42RjKiUUKKNkZGbCJ2er6ChsrO0tba3sbWQAAIfkECQYAAgAsAAAAAEAAQAAAApqUj6mL4cGinBSw96jeFyfscaIGOk0JjSoDoJaBput8xHJM50KLnqFO630eL+AEhOARjTlhzcRsOqNGJZLKtGGjri3TCvVmHUWx+YxOq9fsILm9KsFFuDlpao/U85I9Xw9S9teRMWh4iJiouMjY6PgIGSnRAiDIKOfop6iZyInoeQgWYNl5BTkqmaq6ytrq+gobKztLW2t721oAACH5BAkGAAIALAAAAABAAEAAAAKYlI+pmxAPmJx0vhDT3bX7tT1aGHymR4qGk56ulJZGLL/2ER9smN13jiP5UBydcHQZdlrBS09pA0KnKyl1ar0qU0/tkOmlOsPksvmMTjc2XbVnl3SfsnIKvQ4D4+36vSXk91EUSFhoeIiYqLjI2Pgy5igAp9LI1TgZt0jjeHfYpzkYKTpKWmp6ipqqusra6voKGys7S1vbWAAAIfkECQYAAgAsAAAAAEAAQAAAAp+Uj6m7EACYnHSGexXGtfu1cYcTBt/ZldmhmujLtJHRwnZChrNQ313uMgBFtNLOJxkGebpECVnpCYkKBzSlumqd2a1X6tU+w+EN+YyGQtLbJtunOr5R4Pmpbvfg81Ej/zX2h0IiJ2h4iJiouMjYSAZU6Fi0Edm4Z9klyZKpyRTY6UkFGjpaanqKmqq6ytrq+gobKztLW2t7i5uru8u7WAAAIfkECQYAAgAsAAAAAEAAQAAAAqOUj6kIAXsenLTSgLPK2Pq/cJlkiB2IeuYpNGYKX+uxOjHKJXW0knf1ogWFop9qRsT4BKalMYTkOUuap2VnzW6i2i6z6A1/WeKbY1r+DdNGF5it5sJh2Hmsbk+5c/n7u+8HKDhIWGh4iJjXAICWiLDmqCMXSQVJOfZ3icmnabCn1PmYGcrUSHqKmqq6ytrq+gobKztLW2t7i5uru8vb6/sLrFAAACH5BAkGAAIALAAAAABAAEAAAAKelI+pCeELo5zUuBtgA7V71GBPImbfKZXjoXKoF5qsStJvVbqCKu/8TYlhELZZCTj5GS+KIhLC07EiIumz6fQErNdFtgu2DMPPC5fcPaLDyvW17UbC47c5HfW94zFnvf8PGCg4SFj4wWfYkZOYlMe4NPbo5SgpxCQJVYVJFbnp+QkaKjpKWmp6ipqqusra6voKGys7S1tre4ubq7v7VAAAIfkECQYAAgAsAAAAAEAAQAAAAqKUj6kK4bCinLSK5rLdnOcPMVpHGk14YJ+jrEHJqc/hjmkNWzi9825OkWVQPd8KOKmxbjaEEikRzmIuFLT1I2WvkSPwxb18EqfwVWpOG2pWNVK6dEOVYPm8aM/h8zkZ/w8YKDiYVkYI43XosaUYxNZYQQfpWDVJsWeJNZQZGdDGCRoqOkpaanqKmqq6ytrq+gobKztLW2t7i5uru8vb6/tLWgAAIfkECQYAAgAsAAAAAEAAQAAAApyUj6kr4cGinDS+V7PW9+5fdUmHLYADgByJkM7CqpQLGWeM3KIs0W2XGrl4veHvBXMFiQrfRudhMnAbI293eCw/VJVVejiBleByzmku02ppNWnbZkKRcXepjs/r96sAnA/SBdiHNUgYZXh4lxjyxTgD9FiFKFlpeYmZqbnJ2en5CRoqOkpaanqKmqq6ytrq+gobKztLW2t7i5srUwAAIfkECQYAAgAsAAAAAEAAQAAAAp6Uj6l7EB+YnLQyiK3eCIKFedxIhRHimCfJdiqqrglAt1WcqN8c2hPu6ilePhAx+DCaipflKBXasYQHKicmHR2Zhq3WlGU6WVArV/AIf71nrq4NF5ST8biojs/r9y0zn8T2pzGXJggIZLhBSJe4Edj4MwbpWDhpeYmZqbnJ2en5CRoqOkpaanqKmqq6ytrq+gobKztLW2t7i5uru3tZAAAh+QQJBgACACwAAAAAQABAAAACpJSPqasQz6KcEsiHA91cZe19UEdOIoicaMkijmilZ0sf6iqodf2KSY+J7VqzUKbyELI+ro8yEXgaMUSfDLeEZa1DaLEDPHa9XM5tTGaWTtLulxTGop21IDoiv+tbDkB7P1QGGPg2WFdoWCWYuKXGSBOX92jmOFn3Z5mpucnZ6fkJGio6SlpqeoqaqrrK2ur6ChsrO0tba3uLm6u7y9vr+wscXFsAACH5BAkGAAIALAAAAABAAEAAAAKelI+pywYNo0yhvlbz3NxkvXxgR4ZipQBnULbUqqzB5bZyvNI1eePiHvkdVEJfRgd8FQUiJOKThPSiVMe0ilA5J1csc8k9baO5Dsx76IZn6Oe5DVRnoXBGmUGk140ojHhvMjYkB7h2Uuhyh8hzuNiSx+IoOUlZaXmJmam5ydnp+QkaKjpKWmp6ipqqusra6voKGys7S1tre4ubq7u7VwAAIfkECQYAAgAsAAAAAEAAQAAAAqKUj6kIsA+jnAeEe6N1tHuDhU+YfeZIlkkacOcLsu7BBvBdK7V9QxaW+JEWud5CCESkUEMjkaVrRUgzJw0Kk1qfy6031v16w+JxsoxORy/VlUgNSbXBb3gQ6ybb6aF2ba72p4CEAZhWlNe0p6R31be4pnJ0BllpeYmZqbnJ2en5CRoqOkpaanqKmqq6ytrq+gobKztLW2t7i5uru8vb6/uLWgAAIfkECQYAAgAsAAAAAEAAQAAAApuUj6kaDQujnFSAhkPdnGf8dOJ4XF8jZeRqnBhkqiwkJ6623DPz8T3t2iF0tlouKGwhScRkc7R0RkcxXPJwump91u0sAAh5t9nxtfoyC5/qFbsNncJFaNScVb5/u/p+++cnIheYMkgIZHiYUAemSPHmeJQhFikRU4mZqbnJ2en5CRoqOkpaanqKmqq6ytrq+gobKztLW2t7i/tZAAAh+QQJBgACACwAAAAAQABAAAACmJSPqSvhwaKcNL5Xs9b37g8mHRaWCEAqo2O2I6CuVIC2CTou79TBdiPTpSy534rmOhqDpiNk2bHhej9DFOoBPXxVxvVT7C5Q3I1SjD6ju+o1Nut+s+LsS5mOz+v3/L7/DxgoOEhYaHiICDaUKPLFeND2GMk4mViJOLX4CKS56fkJGio6SlpqeoqaqrrK2ur6ChsrO0tbq1cAACH5BAkGAAIALAAAAABAAEAAAAKalI+pexAfmJy0Moit3htDwIUTBiqO94hqgkbJia4ynCltKYttgB9tvtr1fDWgiAYxEnlKwU8Zg36auw2tOXpWkC6sTUu5eb9RCjc1Rogru27aUGaD34ahZU6fFfP8vv8PGCg4SFhoeIiYqLjI2Oj4CBkpOUlZaXmJmam5ydnZMTWJx1gVKVS69ngW6mHn6OEJGys7S1tre5tZAAAh+QQJBgACACwAAAAAQABAAAACmJSPqcsC0KKcNIWLq6YAh9h5AbSVing1aGq2xkqeq9uGKLN+dJnriu3ZmWAqkXB4i2Bixw2wKTRCp4gZlUq8NoFB7bHnbWbDiaeE6yMfrMquusp+I5PyubTOi+Mr+n3F7BcoOEhYaHiImKi4yNjo+AgZKTlJWWl5iZmpucnZ6fkJGio6OuoGicLEmHPap7j6+AorktpoClUAACH5BAkGAAIALAAAAABAAEAAAAKNlI+py+0PWZgg2ovF3CHymoUHxz1kAIrZOTkAq4Zs18zxCtf5be2Sz4O8NindJzgqIZVIzakJRbCKUd7wWV3asloSlau6bsBQIvmMTqvX7Lb7DY9XSXIPts4Qm/GLGY2f4AfYdzeIoPdlaDCm2Oj4CBkpOUlZaXmJmam5ydnp+QkaKjpKWmp6ipqqqlYAACH5BAkGAAIALAAAAABAAEAAAAKLlI+pCLAPo5wHhHup3hx7DoaJ94lmR16OZGHrqaXZlL4wK9P5LXj2kaLIArzaQxXbnVokXk9pGv6izZvU+ZzdmCWs1wD9YqvisvmMTqvX7Lb7DY/L5/S6/Y7P6/f8vv8PGCg4SFj41TAY9CczlTe0GKb36DdJSfbX0mi4ydnp+QkaKjpKWmp6iqpWAAAh+QQJBgACACwAAAAAQABAAAACi5SPqQvhsaKctIqHrd4bP8CFItJ4zohy5pO2DbWCrViy0TqPeFRDebjy/YaHoIx4yeh2SCanZ2uajioP0gCNihxUYlB4zcXCQyd51jur1+y2+w2Py+f0uv2Oz+v3/L7/DxgoOEhYaHiImKi4yNjo+AgZKTlJWZmH0eVnxpcF1mcECPrXKbj5+WEpUQAAIfkECQYAAgAsAAAAAEAAQAAAAnmUj6mb4cCinDS6G6reG2MOho3niKYAXBRZniAJWazLpeQE090s3brGCsR+REOwiDT6kkUP8wmNSqfUqvXa+2Bfy+2K5/12w7IxeWFznnGe4bqcecvn9Lr9js/r9/y+/w8YKDhIWGh4iJiouMjY6PgIGSk5SVlp2VgAACH5BAkGAAIALAAAAABAAEAAAAJ7lI+py+0Pows0AIlzrFz7w10QwFWfV1JQSolnRKYj674Pa92sLeE1s+PNZJvKT9gIIpeJEPMJjUqn1Kr1is1qt9yu9wsOi8fksvmMTqvX7PaJdEyX4mXaGqeOEeVKNP5e4mbiRlhoeIiYqLjI2Oj4CBkpOUlZaXmJ2VAAACH5BAkGAAIALAAAAABAAEAAAAJ6lI+py+0PWQgg2osFmLzmDxrcGJbXOHrXRpkQiwZY7DrxpEK3XEv0ees1UJmd0AYyHpewzvL5e0Jz0qr1is1qt9yu9wsOi8fksvmMTqvX7Lb7DY/L5/S6/Y7P6/f8vv8PGCg45wQXxaaEGNSWuNboiEKl1sQzaHmZVQAAIfkECQYAAgAsAAAAAEAAQAAAAm2Uj6kZAbCinLSahoPdnGcMdeKIfBiJdoDZpK7Fau8csfS9fPiuOPzPCwFxq8zwZju6YsplskliQklF3TRqvWJb2q73Cw6Lx+Sy+YxOq9fstvsNj8vn9Lr9js/r9/y+/w8YKDhIWGh4iJioeFUAACH5BAkGAAIALAAAAABAAEAAAAJnlI+pa+EBmJy0svei3dxi3IVi8j3jGZYOynpqC0+lFtckaOf6zvf+DwwKh8Si8YhMKpfMpvMJjUp3mSkCULI2ZlpVwIp9Wb3drFbwOavX7Lb7DY/L5/S6/Y7P6/f8vv8PGCg4SMhXAAAh+QQJBgACACwAAAAAQABAAAACapSPqcvtD+MDocqLZd0B5A8aFGeFpkZW3sk2qdrGyhvINvLeukDufu0LCofEovGITCqXzKbzCY1Kp9Sq9YrNarfcrvcLDovH5LL5jE6r1+zsikt6X1/yKi17x+bnOXxvu1HXNkhYaHj4VAAAIfkECQYAAgAsAAAAAEAAQAAAAleUj6nL7Q+jnLTai7PevHsZhOFHHuJZkieacsAqth08yhsN2Desz3EPDAqHxKLxiEwql8ym8wmNSqfUqvWKzWq33K73Cw6Lx+Sy+YxOq9fstvsNj8vnyAIAIfkECQYAAgAsAAAAAEAAQAAAAlmUj6nL7Q+jnLTai7PevPsPhuJIluaJpurKtu4Lx/JMBTZAP/Ye5AzP8ymAO2GCaDMikD2lAelEAILRqvWKzWq33K73Cw6Lx+Sy+YxOq9fstvsNj8vn9Hq4AAAh+QQJBgACACwAAAAAQABAAAACVpSPqcvtD6OctNqLs968+w+G4kiW5omm6sq27gvH8kzX9o3n+s73/g8MCofEovGITCqXzGYrAIX6olQetbq7RgFZbYCrA3h7WrAV60yr1+y2+w2Py0UFADs=";$statusdiv=$("<div />").attr({"class":setting.classstatusdiv+" preloadevt"}).css({position:"absolute",display:"none",zIndex:basezindex,top:0,left:0}).html('<img src="'+setting.loadinggif+'" />').appendTo(document.body);$tracker=$("<div />").attr({"class":setting.classtracker}).css({zIndex:basezindex,backgroundImage:self.isie?"url(cannotbe)":"none",position:"absolute",width:img.w,height:img.h,left:gallery?$img.offsetsl().left:-10000,top:gallery?$img.offsetsl().top:-10000}).appendTo(document.body);$textdn=$("<div />");if(textdn){$textdn.attr({"class":setting.classtextdn}).css({position:"absolute",zIndex:basezindex,left:0,top:0,display:"none"}).html(textdn).appendTo(document.body);if(!options.classtextdn)
$textdn.css({border:setting.magnifierborder,background:setting.textdnbackground,padding:setting.textdnpadding,font:setting.textdnfont});$textdn.css({width:setting.magnifiersize[0]-parseInt($textdn.css("padding-left"))-parseInt($textdn.css("padding-right"))});}
$tracker.data("largeimage",setting.largeimage);$(window).bind("resize",function(){var o=$img.offsetsl();if($tracker.data("loadimgevt"))
$tracker.css({left:o.left,top:o.top});$statusdiv.filter(".preloadevt").css({left:o.left+img.w/2-$statusdiv.width()/2,top:o.top+img.h/2-$statusdiv.height()/2,visibility:'visible'});});$(document).mousemove(function(e){self.cld.docX=e.pageX;if(self.cld.pageX999!==self.cld.docX){clearTimeout(self.cld.controlTimer);clearTimeout(self.cld.controlTimer2);$img.css({visibility:"visible"});}});$img.mouseover(function(e){var o=$img.offsetsl();$tracker.css({left:o.left,top:o.top}).show();});$tracker.mouseover(function(e){self.cld.pageX999=e.pageX;self.cld.pageY999=e.pageY;cld.pageX999=e.pageX;cld.pageY999=e.pageY;self.cld.docX=e.pageX;var o=$img.offsetsl(),pageX=self.cld.pageX999-o.left,pageY=self.cld.pageY999-o.top;self.cld.destK=pageX;self.cld.destL=pageY;self.cld.currU=pageX;self.cld.currV=pageY;self.cld.destM=self.cld.pageX999;self.cld.destN=self.cld.pageY999;self.cld.destU=self.cld.pageX999-10;self.cld.destV=self.cld.pageY999+20;$tracker.css({cursor:setting.magnifycursor});setting.largeimage=$img.attr("data-large")||$img.attr("src");$statusdiv.show();clearTimeout(self.cld.controlTimer);clearTimeout(self.cld.controlTimer2);if(setting.largeimage!==$tracker.data('largeimage')){$(new Image()).on('load',function(){}).attr("src",setting.largeimage);$($tracker).unbind();$($statusdiv).remove();$($cursorshade).remove();$($magnifier).remove();$($tracker).remove();$($textdn).remove();self.init($img,options,true);}
if($tracker.data("loadevt")){$cursorshade.fadeIn();self.showimage($tracker);self.controlLoop($tracker);self.controlLoop2($tracker);}});$tracker.mousemove(function(e){setting.largeimage=$img.attr("data-large")||$img.attr("src");if(setting.largeimage!==$tracker.data("largeimage")){$(new Image()).on('load',function(){}).attr("src",setting.largeimage);$($tracker).unbind();$($statusdiv).remove();$($cursorshade).remove();$($magnifier).remove();$($tracker).remove();$($textdn).remove();self.init($img,options,true);}
self.cld.pageX999=e.pageX;self.cld.pageY999=e.pageY;cld.pageX999=e.pageX;cld.pageY999=e.pageY;self.cld.docX=e.pageX;});$tracker.mouseout(function(e){clearTimeout(self.cld.controlTimer);clearTimeout(self.cld.controlTimer2);$img.css({visibility:"visible"});$textdn.hide();$cursorshade.add($statusdiv.not(".preloadevt")).stop(true,true).hide();});$tracker.one("mouseover",function(e){var imgcoords=$img.offsetsl();var $bigimage=$('<img src="'+setting.largeimage+'"/>').css({position:"relative",maxWidth:"none"}).appendTo($magnifier);if(!self.loaded999[setting.largeimage]){$tracker.css({opacity:setting.loadopacity,background:setting.loadbackground});$tracker.data("loadimgevt",true);$statusdiv.css({left:imgcoords.left+img.w/2-$statusdiv.width()/2,top:imgcoords.top+img.h/2-$statusdiv.height()/2,visibility:'visible'});}
$bigimage.bind("loadevt",function(event,e){if(e.type==="error")return;$tracker.mouseout(function(e){self.hideimage($tracker);clearTimeout(self.cld.controlTimer);clearTimeout(self.cld.controlTimer2);$img.css({visibility:"visible"});$textdn.hide();$tracker.hide().css({left:-10000,top:-10000});});$tracker.mouseover(function(e){specs.currM=specs.newpower;});$tracker.data("loadimgevt",false);$tracker.css({opacity:0,cursor:setting.magnifycursor});$statusdiv.empty();if(!options.classstatusdiv)
$statusdiv.css({border:setting.statusdivborder,background:setting.statusdivbackground,padding:setting.statusdivpadding,font:setting.statusdivfont,opacity:setting.statusdivopacity});$statusdiv.hide().removeClass("preloadevt");self.loaded999[setting.largeimage]=true;getspecs($bigimage);if(cld.pageX999==self.cld.docX){$cursorshade.fadeIn();self.showimage($tracker);clearTimeout(self.cld.controlTimer);clearTimeout(self.cld.controlTimer2);self.controlLoop($tracker);self.controlLoop2($tracker);}
var specs=$tracker.data("specs");$bigimage.css({width:setting.zoomstart*specs.bigimage.w*(img.w/specs.bigimage.w),height:setting.zoomstart*specs.bigimage.h*(img.h/specs.bigimage.h)});$tracker.data("loadevt",true);if(setting.zoomrange&&setting.zoomrange[1]>setting.zoomrange[0]){$tracker.bind("mousewheel",function(e,delta){var zoomdir=delta<0?"out":"in",power=specs.newpower,newpower=(zoomdir=="in")?Math.min(power+setting.stepzoom,setting.zoomrange[1]):Math.max(power-setting.stepzoom,setting.zoomrange[0]);specs.newpower=newpower;specs.delta=delta;e.preventDefault();});}else if(setting.disablewheel){$tracker.bind("mousewheel",function(e){e.preventDefault();});}});if(isImageLoaded($bigimage.get(0)))
$bigimage.trigger("loadevt",{type:"load"});else $bigimage.bind("load error",function(e){$bigimage.trigger("loadevt",e)});});},loaded999:{}});})(jQuery,window);
;/*!
 * Bootstrap v3.3.4 (http://getbootstrap.com)
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 */

/*!
 * Generated using the Bootstrap Customizer (http://bootstrap-3.ru/customize.php?id=2efbb18a3100fe27fb8a)
 * Config saved to config.json and https://gist.github.com/2efbb18a3100fe27fb8a
 */
if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(t){"use strict";var e=t.fn.jquery.split(" ")[0].split(".");if(e[0]<2&&e[1]<9||1==e[0]&&9==e[1]&&e[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),n=i.data("bs.alert");n||i.data("bs.alert",n=new o(this)),"string"==typeof e&&n[e].call(i)})}var i='[data-dismiss="alert"]',o=function(e){t(e).on("click",i,this.close)};o.VERSION="3.3.2",o.TRANSITION_DURATION=150,o.prototype.close=function(e){function i(){a.detach().trigger("closed.bs.alert").remove()}var n=t(this),s=n.attr("data-target");s||(s=n.attr("href"),s=s&&s.replace(/.*(?=#[^\s]*$)/,""));var a=t(s);e&&e.preventDefault(),a.length||(a=n.closest(".alert")),a.trigger(e=t.Event("close.bs.alert")),e.isDefaultPrevented()||(a.removeClass("in"),t.support.transition&&a.hasClass("fade")?a.one("bsTransitionEnd",i).emulateTransitionEnd(o.TRANSITION_DURATION):i())};var n=t.fn.alert;t.fn.alert=e,t.fn.alert.Constructor=o,t.fn.alert.noConflict=function(){return t.fn.alert=n,this},t(document).on("click.bs.alert.data-api",i,o.prototype.close)}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var o=t(this),n=o.data("bs.button"),s="object"==typeof e&&e;n||o.data("bs.button",n=new i(this,s)),"toggle"==e?n.toggle():e&&n.setState(e)})}var i=function(e,o){this.$element=t(e),this.options=t.extend({},i.DEFAULTS,o),this.isLoading=!1};i.VERSION="3.3.2",i.DEFAULTS={loadingText:"loading..."},i.prototype.setState=function(e){var i="disabled",o=this.$element,n=o.is("input")?"val":"html",s=o.data();e+="Text",null==s.resetText&&o.data("resetText",o[n]()),setTimeout(t.proxy(function(){o[n](null==s[e]?this.options[e]:s[e]),"loadingText"==e?(this.isLoading=!0,o.addClass(i).attr(i,i)):this.isLoading&&(this.isLoading=!1,o.removeClass(i).removeAttr(i))},this),0)},i.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var i=this.$element.find("input");"radio"==i.prop("type")&&(i.prop("checked")&&this.$element.hasClass("active")?t=!1:e.find(".active").removeClass("active")),t&&i.prop("checked",!this.$element.hasClass("active")).trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active"));t&&this.$element.toggleClass("active")};var o=t.fn.button;t.fn.button=e,t.fn.button.Constructor=i,t.fn.button.noConflict=function(){return t.fn.button=o,this},t(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(i){var o=t(i.target);o.hasClass("btn")||(o=o.closest(".btn")),e.call(o,"toggle"),i.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(e){t(e.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(e.type))})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var o=t(this),n=o.data("bs.carousel"),s=t.extend({},i.DEFAULTS,o.data(),"object"==typeof e&&e),a="string"==typeof e?e:s.slide;n||o.data("bs.carousel",n=new i(this,s)),"number"==typeof e?n.to(e):a?n[a]():s.interval&&n.pause().cycle()})}var i=function(e,i){this.$element=t(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=i,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",t.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",t.proxy(this.pause,this)).on("mouseleave.bs.carousel",t.proxy(this.cycle,this))};i.VERSION="3.3.2",i.TRANSITION_DURATION=600,i.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},i.prototype.keydown=function(t){if(!/input|textarea/i.test(t.target.tagName)){switch(t.which){case 37:this.prev();break;case 39:this.next();break;default:return}t.preventDefault()}},i.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},i.prototype.getItemIndex=function(t){return this.$items=t.parent().children(".item"),this.$items.index(t||this.$active)},i.prototype.getItemForDirection=function(t,e){var i=this.getItemIndex(e),o="prev"==t&&0===i||"next"==t&&i==this.$items.length-1;if(o&&!this.options.wrap)return e;var n="prev"==t?-1:1,s=(i+n)%this.$items.length;return this.$items.eq(s)},i.prototype.to=function(t){var e=this,i=this.getItemIndex(this.$active=this.$element.find(".item.active"));return t>this.$items.length-1||0>t?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){e.to(t)}):i==t?this.pause().cycle():this.slide(t>i?"next":"prev",this.$items.eq(t))},i.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition&&(this.$element.trigger(t.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},i.prototype.next=function(){return this.sliding?void 0:this.slide("next")},i.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},i.prototype.slide=function(e,o){var n=this.$element.find(".item.active"),s=o||this.getItemForDirection(e,n),a=this.interval,r="next"==e?"left":"right",l=this;if(s.hasClass("active"))return this.sliding=!1;var h=s[0],d=t.Event("slide.bs.carousel",{relatedTarget:h,direction:r});if(this.$element.trigger(d),!d.isDefaultPrevented()){if(this.sliding=!0,a&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var p=t(this.$indicators.children()[this.getItemIndex(s)]);p&&p.addClass("active")}var c=t.Event("slid.bs.carousel",{relatedTarget:h,direction:r});return t.support.transition&&this.$element.hasClass("slide")?(s.addClass(e),s[0].offsetWidth,n.addClass(r),s.addClass(r),n.one("bsTransitionEnd",function(){s.removeClass([e,r].join(" ")).addClass("active"),n.removeClass(["active",r].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger(c)},0)}).emulateTransitionEnd(i.TRANSITION_DURATION)):(n.removeClass("active"),s.addClass("active"),this.sliding=!1,this.$element.trigger(c)),a&&this.cycle(),this}};var o=t.fn.carousel;t.fn.carousel=e,t.fn.carousel.Constructor=i,t.fn.carousel.noConflict=function(){return t.fn.carousel=o,this};var n=function(i){var o,n=t(this),s=t(n.attr("data-target")||(o=n.attr("href"))&&o.replace(/.*(?=#[^\s]+$)/,""));if(s.hasClass("carousel")){var a=t.extend({},s.data(),n.data()),r=n.attr("data-slide-to");r&&(a.interval=!1),e.call(s,a),r&&s.data("bs.carousel").to(r),i.preventDefault()}};t(document).on("click.bs.carousel.data-api","[data-slide]",n).on("click.bs.carousel.data-api","[data-slide-to]",n),t(window).on("load",function(){t('[data-ride="carousel"]').each(function(){var i=t(this);e.call(i,i.data())})})}(jQuery),+function(t){"use strict";function e(e){e&&3===e.which||(t(n).remove(),t(s).each(function(){var o=t(this),n=i(o),s={relatedTarget:this};n.hasClass("open")&&(n.trigger(e=t.Event("hide.bs.dropdown",s)),e.isDefaultPrevented()||(o.attr("aria-expanded","false"),n.removeClass("open").trigger("hidden.bs.dropdown",s)))}))}function i(e){var i=e.attr("data-target");i||(i=e.attr("href"),i=i&&/#[A-Za-z]/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,""));var o=i&&t(i);return o&&o.length?o:e.parent()}function o(e){return this.each(function(){var i=t(this),o=i.data("bs.dropdown");o||i.data("bs.dropdown",o=new a(this)),"string"==typeof e&&o[e].call(i)})}var n=".dropdown-backdrop",s='[data-toggle="dropdown"]',a=function(e){t(e).on("click.bs.dropdown",this.toggle)};a.VERSION="3.3.2",a.prototype.toggle=function(o){var n=t(this);if(!n.is(".disabled, :disabled")){var s=i(n),a=s.hasClass("open");if(e(),!a){"ontouchstart"in document.documentElement&&!s.closest(".navbar-nav").length&&t('<div class="dropdown-backdrop"/>').insertAfter(t(this)).on("click",e);var r={relatedTarget:this};if(s.trigger(o=t.Event("show.bs.dropdown",r)),o.isDefaultPrevented())return;n.trigger("focus").attr("aria-expanded","true"),s.toggleClass("open").trigger("shown.bs.dropdown",r)}return!1}},a.prototype.keydown=function(e){if(/(38|40|27|32)/.test(e.which)&&!/input|textarea/i.test(e.target.tagName)){var o=t(this);if(e.preventDefault(),e.stopPropagation(),!o.is(".disabled, :disabled")){var n=i(o),a=n.hasClass("open");if(!a&&27!=e.which||a&&27==e.which)return 27==e.which&&n.find(s).trigger("focus"),o.trigger("click");var r=" li:not(.disabled):visible a",l=n.find('[role="menu"]'+r+', [role="listbox"]'+r);if(l.length){var h=l.index(e.target);38==e.which&&h>0&&h--,40==e.which&&h<l.length-1&&h++,~h||(h=0),l.eq(h).trigger("focus")}}}};var r=t.fn.dropdown;t.fn.dropdown=o,t.fn.dropdown.Constructor=a,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=r,this},t(document).on("click.bs.dropdown.data-api",e).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",s,a.prototype.toggle).on("keydown.bs.dropdown.data-api",s,a.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="menu"]',a.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="listbox"]',a.prototype.keydown)}(jQuery),+function(t){"use strict";function e(e,o){return this.each(function(){var n=t(this),s=n.data("bs.modal"),a=t.extend({},i.DEFAULTS,n.data(),"object"==typeof e&&e);s||n.data("bs.modal",s=new i(this,a)),"string"==typeof e?s[e](o):a.show&&s.show(o)})}var i=function(e,i){this.options=i,this.$body=t(document.body),this.$element=t(e),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};i.VERSION="3.3.2",i.TRANSITION_DURATION=300,i.BACKDROP_TRANSITION_DURATION=150,i.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},i.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},i.prototype.show=function(e){var o=this,n=t.Event("show.bs.modal",{relatedTarget:e});this.$element.trigger(n),this.isShown||n.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){o.$element.one("mouseup.dismiss.bs.modal",function(e){t(e.target).is(o.$element)&&(o.ignoreBackdropClick=!0)})}),this.backdrop(function(){var n=t.support.transition&&o.$element.hasClass("fade");o.$element.parent().length||o.$element.appendTo(o.$body),o.$element.show().scrollTop(0),o.adjustDialog(),n&&o.$element[0].offsetWidth,o.$element.addClass("in").attr("aria-hidden",!1),o.enforceFocus();var s=t.Event("shown.bs.modal",{relatedTarget:e});n?o.$dialog.one("bsTransitionEnd",function(){o.$element.trigger("focus").trigger(s)}).emulateTransitionEnd(i.TRANSITION_DURATION):o.$element.trigger("focus").trigger(s)}))},i.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(i.TRANSITION_DURATION):this.hideModal())},i.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},i.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},i.prototype.resize=function(){this.isShown?t(window).on("resize.bs.modal",t.proxy(this.handleUpdate,this)):t(window).off("resize.bs.modal")},i.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$body.removeClass("modal-open"),t.resetAdjustments(),t.resetScrollbar(),t.$element.trigger("hidden.bs.modal")})},i.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},i.prototype.backdrop=function(e){var o=this,n=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var s=t.support.transition&&n;if(this.$backdrop=t('<div class="modal-backdrop '+n+'" />').appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",t.proxy(function(t){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),s&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;s?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var a=function(){o.removeBackdrop(),e&&e()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",a).emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION):a()}else e&&e()},i.prototype.handleUpdate=function(){this.adjustDialog()},i.prototype.adjustDialog=function(){var t=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&t?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!t?this.scrollbarWidth:""})},i.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},i.prototype.checkScrollbar=function(){var t=window.innerWidth;if(!t){var e=document.documentElement.getBoundingClientRect();t=e.right-Math.abs(e.left)}this.bodyIsOverflowing=document.body.clientWidth<t,this.scrollbarWidth=this.measureScrollbar()},i.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",t+this.scrollbarWidth)},i.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},i.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var o=t.fn.modal;t.fn.modal=e,t.fn.modal.Constructor=i,t.fn.modal.noConflict=function(){return t.fn.modal=o,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(i){var o=t(this),n=o.attr("href"),s=t(o.attr("data-target")||n&&n.replace(/.*(?=#[^\s]+$)/,"")),a=s.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(n)&&n},s.data(),o.data());o.is("a")&&i.preventDefault(),s.one("show.bs.modal",function(t){t.isDefaultPrevented()||s.one("hidden.bs.modal",function(){o.is(":visible")&&o.trigger("focus")})}),e.call(s,a,this)})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var o=t(this),n=o.data("bs.tooltip"),s="object"==typeof e&&e;(n||!/destroy|hide/.test(e))&&(n||o.data("bs.tooltip",n=new i(this,s)),"string"==typeof e&&n[e]())})}var i=function(t,e){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.init("tooltip",t,e)};i.VERSION="3.3.2",i.TRANSITION_DURATION=150,i.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},i.prototype.init=function(e,i,o){if(this.enabled=!0,this.type=e,this.$element=t(i),this.options=this.getOptions(o),this.$viewport=this.options.viewport&&t(this.options.viewport.selector||this.options.viewport),this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var n=this.options.trigger.split(" "),s=n.length;s--;){var a=n[s];if("click"==a)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=a){var r="hover"==a?"mouseenter":"focusin",l="hover"==a?"mouseleave":"focusout";this.$element.on(r+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.getOptions=function(e){return e=t.extend({},this.getDefaults(),this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},i.prototype.getDelegateOptions=function(){var e={},i=this.getDefaults();return this._options&&t.each(this._options,function(t,o){i[t]!=o&&(e[t]=o)}),e},i.prototype.enter=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return i&&i.$tip&&i.$tip.is(":visible")?void(i.hoverState="in"):(i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),clearTimeout(i.timeout),i.hoverState="in",i.options.delay&&i.options.delay.show?void(i.timeout=setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show)):i.show())},i.prototype.leave=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),clearTimeout(i.timeout),i.hoverState="out",i.options.delay&&i.options.delay.hide?void(i.timeout=setTimeout(function(){"out"==i.hoverState&&i.hide()},i.options.delay.hide)):i.hide()},i.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var o=t.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!o)return;var n=this,s=this.tip(),a=this.getUID(this.type);this.setContent(),s.attr("id",a),this.$element.attr("aria-describedby",a),this.options.animation&&s.addClass("fade");var r="function"==typeof this.options.placement?this.options.placement.call(this,s[0],this.$element[0]):this.options.placement,l=/\s?auto?\s?/i,h=l.test(r);h&&(r=r.replace(l,"")||"top"),s.detach().css({top:0,left:0,display:"block"}).addClass(r).data("bs."+this.type,this),this.options.container?s.appendTo(this.options.container):s.insertAfter(this.$element);var d=this.getPosition(),p=s[0].offsetWidth,c=s[0].offsetHeight;if(h){var f=r,u=this.options.container?t(this.options.container):this.$element.parent(),g=this.getPosition(u);r="bottom"==r&&d.bottom+c>g.bottom?"top":"top"==r&&d.top-c<g.top?"bottom":"right"==r&&d.right+p>g.width?"left":"left"==r&&d.left-p<g.left?"right":r,s.removeClass(f).addClass(r)}var m=this.getCalculatedOffset(r,d,p,c);this.applyPlacement(m,r);var v=function(){var t=n.hoverState;n.$element.trigger("shown.bs."+n.type),n.hoverState=null,"out"==t&&n.leave(n)};t.support.transition&&this.$tip.hasClass("fade")?s.one("bsTransitionEnd",v).emulateTransitionEnd(i.TRANSITION_DURATION):v()}},i.prototype.applyPlacement=function(e,i){var o=this.tip(),n=o[0].offsetWidth,s=o[0].offsetHeight,a=parseInt(o.css("margin-top"),10),r=parseInt(o.css("margin-left"),10);isNaN(a)&&(a=0),isNaN(r)&&(r=0),e.top=e.top+a,e.left=e.left+r,t.offset.setOffset(o[0],t.extend({using:function(t){o.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),o.addClass("in");var l=o[0].offsetWidth,h=o[0].offsetHeight;"top"==i&&h!=s&&(e.top=e.top+s-h);var d=this.getViewportAdjustedDelta(i,e,l,h);d.left?e.left+=d.left:e.top+=d.top;var p=/top|bottom/.test(i),c=p?2*d.left-n+l:2*d.top-s+h,f=p?"offsetWidth":"offsetHeight";o.offset(e),this.replaceArrow(c,o[0][f],p)},i.prototype.replaceArrow=function(t,e,i){this.arrow().css(i?"left":"top",50*(1-t/e)+"%").css(i?"top":"left","")},i.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},i.prototype.hide=function(e){function o(){"in"!=n.hoverState&&s.detach(),n.$element.removeAttr("aria-describedby").trigger("hidden.bs."+n.type),e&&e()}var n=this,s=t(this.$tip),a=t.Event("hide.bs."+this.type);return this.$element.trigger(a),a.isDefaultPrevented()?void 0:(s.removeClass("in"),t.support.transition&&s.hasClass("fade")?s.one("bsTransitionEnd",o).emulateTransitionEnd(i.TRANSITION_DURATION):o(),this.hoverState=null,this)},i.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},i.prototype.hasContent=function(){return this.getTitle()},i.prototype.getPosition=function(e){e=e||this.$element;var i=e[0],o="BODY"==i.tagName,n=i.getBoundingClientRect();null==n.width&&(n=t.extend({},n,{width:n.right-n.left,height:n.bottom-n.top}));var s=o?{top:0,left:0}:e.offset(),a={scroll:o?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()},r=o?{width:t(window).width(),height:t(window).height()}:null;return t.extend({},n,a,r,s)},i.prototype.getCalculatedOffset=function(t,e,i,o){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-i/2}:"top"==t?{top:e.top-o,left:e.left+e.width/2-i/2}:"left"==t?{top:e.top+e.height/2-o/2,left:e.left-i}:{top:e.top+e.height/2-o/2,left:e.left+e.width}},i.prototype.getViewportAdjustedDelta=function(t,e,i,o){var n={top:0,left:0};if(!this.$viewport)return n;var s=this.options.viewport&&this.options.viewport.padding||0,a=this.getPosition(this.$viewport);if(/right|left/.test(t)){var r=e.top-s-a.scroll,l=e.top+s-a.scroll+o;r<a.top?n.top=a.top-r:l>a.top+a.height&&(n.top=a.top+a.height-l)}else{var h=e.left-s,d=e.left+s+i;h<a.left?n.left=a.left-h:d>a.width&&(n.left=a.left+a.width-d)}return n},i.prototype.getTitle=function(){var t,e=this.$element,i=this.options;return t=e.attr("data-original-title")||("function"==typeof i.title?i.title.call(e[0]):i.title)},i.prototype.getUID=function(t){do t+=~~(1e6*Math.random());while(document.getElementById(t));return t},i.prototype.tip=function(){return this.$tip=this.$tip||t(this.options.template)},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},i.prototype.enable=function(){this.enabled=!0},i.prototype.disable=function(){this.enabled=!1},i.prototype.toggleEnabled=function(){this.enabled=!this.enabled},i.prototype.toggle=function(e){var i=this;e&&(i=t(e.currentTarget).data("bs."+this.type),i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i))),i.tip().hasClass("in")?i.leave(i):i.enter(i)},i.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide(function(){t.$element.off("."+t.type).removeData("bs."+t.type)})};var o=t.fn.tooltip;t.fn.tooltip=e,t.fn.tooltip.Constructor=i,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=o,this}}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var o=t(this),n=o.data("bs.popover"),s="object"==typeof e&&e;(n||!/destroy|hide/.test(e))&&(n||o.data("bs.popover",n=new i(this,s)),"string"==typeof e&&n[e]())})}var i=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");i.VERSION="3.3.2",i.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),i.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),i.prototype.constructor=i,i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),i=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof i?"html":"append":"text"](i),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},i.prototype.hasContent=function(){return this.getTitle()||this.getContent()},i.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var o=t.fn.popover;t.fn.popover=e,t.fn.popover.Constructor=i,t.fn.popover.noConflict=function(){return t.fn.popover=o,this}}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var o=t(this),n=o.data("bs.tab");n||o.data("bs.tab",n=new i(this)),"string"==typeof e&&n[e]()})}var i=function(e){this.element=t(e)};i.VERSION="3.3.2",i.TRANSITION_DURATION=150,i.prototype.show=function(){var e=this.element,i=e.closest("ul:not(.dropdown-menu)"),o=e.data("target");if(o||(o=e.attr("href"),o=o&&o.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var n=i.find(".active:last a"),s=t.Event("hide.bs.tab",{relatedTarget:e[0]}),a=t.Event("show.bs.tab",{relatedTarget:n[0]});if(n.trigger(s),e.trigger(a),!a.isDefaultPrevented()&&!s.isDefaultPrevented()){var r=t(o);this.activate(e.closest("li"),i),this.activate(r,r.parent(),function(){n.trigger({type:"hidden.bs.tab",relatedTarget:e[0]}),e.trigger({type:"shown.bs.tab",relatedTarget:n[0]})})}}},i.prototype.activate=function(e,o,n){function s(){a.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),e.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),r?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu").length&&e.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),n&&n()}var a=o.find("> .active"),r=n&&t.support.transition&&(a.length&&a.hasClass("fade")||!!o.find("> .fade").length);a.length&&r?a.one("bsTransitionEnd",s).emulateTransitionEnd(i.TRANSITION_DURATION):s(),a.removeClass("in")};var o=t.fn.tab;t.fn.tab=e,t.fn.tab.Constructor=i,t.fn.tab.noConflict=function(){return t.fn.tab=o,this};var n=function(i){i.preventDefault(),e.call(t(this),"show")};t(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',n).on("click.bs.tab.data-api",'[data-toggle="pill"]',n)}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var o=t(this),n=o.data("bs.affix"),s="object"==typeof e&&e;n||o.data("bs.affix",n=new i(this,s)),"string"==typeof e&&n[e]()})}var i=function(e,o){this.options=t.extend({},i.DEFAULTS,o),this.$target=t(this.options.target).on("scroll.bs.affix.data-api",t.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",t.proxy(this.checkPositionWithEventLoop,this)),this.$element=t(e),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};i.VERSION="3.3.2",i.RESET="affix affix-top affix-bottom",i.DEFAULTS={offset:0,target:window},i.prototype.getState=function(t,e,i,o){var n=this.$target.scrollTop(),s=this.$element.offset(),a=this.$target.height();if(null!=i&&"top"==this.affixed)return i>n?"top":!1;if("bottom"==this.affixed)return null!=i?n+this.unpin<=s.top?!1:"bottom":t-o>=n+a?!1:"bottom";var r=null==this.affixed,l=r?n:s.top,h=r?a:e;return null!=i&&i>=n?"top":null!=o&&l+h>=t-o?"bottom":!1},i.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(i.RESET).addClass("affix");var t=this.$target.scrollTop(),e=this.$element.offset();return this.pinnedOffset=e.top-t},i.prototype.checkPositionWithEventLoop=function(){setTimeout(t.proxy(this.checkPosition,this),1)},i.prototype.checkPosition=function(){if(this.$element.is(":visible")){var e=this.$element.height(),o=this.options.offset,n=o.top,s=o.bottom,a=t(document.body).height();"object"!=typeof o&&(s=n=o),"function"==typeof n&&(n=o.top(this.$element)),"function"==typeof s&&(s=o.bottom(this.$element));var r=this.getState(a,e,n,s);if(this.affixed!=r){null!=this.unpin&&this.$element.css("top","");var l="affix"+(r?"-"+r:""),h=t.Event(l+".bs.affix");if(this.$element.trigger(h),h.isDefaultPrevented())return;this.affixed=r,this.unpin="bottom"==r?this.getPinnedOffset():null,this.$element.removeClass(i.RESET).addClass(l).trigger(l.replace("affix","affixed")+".bs.affix")}"bottom"==r&&this.$element.offset({top:a-e-s})}};var o=t.fn.affix;t.fn.affix=e,t.fn.affix.Constructor=i,t.fn.affix.noConflict=function(){return t.fn.affix=o,this},t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var i=t(this),o=i.data();o.offset=o.offset||{},null!=o.offsetBottom&&(o.offset.bottom=o.offsetBottom),null!=o.offsetTop&&(o.offset.top=o.offsetTop),e.call(i,o)})})}(jQuery),+function(t){"use strict";function e(e){var i,o=e.attr("data-target")||(i=e.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"");return t(o)}function i(e){return this.each(function(){var i=t(this),n=i.data("bs.collapse"),s=t.extend({},o.DEFAULTS,i.data(),"object"==typeof e&&e);!n&&s.toggle&&/show|hide/.test(e)&&(s.toggle=!1),n||i.data("bs.collapse",n=new o(this,s)),"string"==typeof e&&n[e]()})}var o=function(e,i){this.$element=t(e),this.options=t.extend({},o.DEFAULTS,i),this.$trigger=t('[data-toggle="collapse"][href="#'+e.id+'"],[data-toggle="collapse"][data-target="#'+e.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};o.VERSION="3.3.2",o.TRANSITION_DURATION=350,o.DEFAULTS={toggle:!0},o.prototype.dimension=function(){var t=this.$element.hasClass("width");return t?"width":"height"},o.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var e,n=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(n&&n.length&&(e=n.data("bs.collapse"),e&&e.transitioning))){var s=t.Event("show.bs.collapse");if(this.$element.trigger(s),!s.isDefaultPrevented()){n&&n.length&&(i.call(n,"hide"),e||n.data("bs.collapse",null));var a=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[a](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var r=function(){this.$element.removeClass("collapsing").addClass("collapse in")[a](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return r.call(this);var l=t.camelCase(["scroll",a].join("-"));this.$element.one("bsTransitionEnd",t.proxy(r,this)).emulateTransitionEnd(o.TRANSITION_DURATION)[a](this.$element[0][l])}}}},o.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=t.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var i=this.dimension();this.$element[i](this.$element[i]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var n=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return t.support.transition?void this.$element[i](0).one("bsTransitionEnd",t.proxy(n,this)).emulateTransitionEnd(o.TRANSITION_DURATION):n.call(this)}}},o.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},o.prototype.getParent=function(){return t(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(t.proxy(function(i,o){var n=t(o);
this.addAriaAndCollapsedClass(e(n),n)},this)).end()},o.prototype.addAriaAndCollapsedClass=function(t,e){var i=t.hasClass("in");t.attr("aria-expanded",i),e.toggleClass("collapsed",!i).attr("aria-expanded",i)};var n=t.fn.collapse;t.fn.collapse=i,t.fn.collapse.Constructor=o,t.fn.collapse.noConflict=function(){return t.fn.collapse=n,this},t(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(o){var n=t(this);n.attr("data-target")||o.preventDefault();var s=e(n),a=s.data("bs.collapse"),r=a?"toggle":n.data();i.call(s,r)})}(jQuery),+function(t){"use strict";function e(i,o){this.$body=t(document.body),this.$scrollElement=t(t(i).is(document.body)?window:i),this.options=t.extend({},e.DEFAULTS,o),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",t.proxy(this.process,this)),this.refresh(),this.process()}function i(i){return this.each(function(){var o=t(this),n=o.data("bs.scrollspy"),s="object"==typeof i&&i;n||o.data("bs.scrollspy",n=new e(this,s)),"string"==typeof i&&n[i]()})}e.VERSION="3.3.2",e.DEFAULTS={offset:10},e.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},e.prototype.refresh=function(){var e=this,i="offset",o=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),t.isWindow(this.$scrollElement[0])||(i="position",o=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var e=t(this),n=e.data("target")||e.attr("href"),s=/^#./.test(n)&&t(n);return s&&s.length&&s.is(":visible")&&[[s[i]().top+o,n]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){e.offsets.push(this[0]),e.targets.push(this[1])})},e.prototype.process=function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,i=this.getScrollHeight(),o=this.options.offset+i-this.$scrollElement.height(),n=this.offsets,s=this.targets,a=this.activeTarget;if(this.scrollHeight!=i&&this.refresh(),e>=o)return a!=(t=s[s.length-1])&&this.activate(t);if(a&&e<n[0])return this.activeTarget=null,this.clear();for(t=n.length;t--;)a!=s[t]&&e>=n[t]&&(void 0===n[t+1]||e<=n[t+1])&&this.activate(s[t])},e.prototype.activate=function(e){this.activeTarget=e,this.clear();var i=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',o=t(i).parents("li").addClass("active");o.parent(".dropdown-menu").length&&(o=o.closest("li.dropdown").addClass("active")),o.trigger("activate.bs.scrollspy")},e.prototype.clear=function(){t(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var o=t.fn.scrollspy;t.fn.scrollspy=i,t.fn.scrollspy.Constructor=e,t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=o,this},t(window).on("load.bs.scrollspy.data-api",function(){t('[data-spy="scroll"]').each(function(){var e=t(this);i.call(e,e.data())})})}(jQuery),+function(t){"use strict";function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in e)if(void 0!==t.style[i])return{end:e[i]};return!1}t.fn.emulateTransitionEnd=function(e){var i=!1,o=this;t(this).one("bsTransitionEnd",function(){i=!0});var n=function(){i||t(o).trigger(t.support.transition.end)};return setTimeout(n,e),this},t(function(){t.support.transition=e(),t.support.transition&&(t.event.special.bsTransitionEnd={bindType:t.support.transition.end,delegateType:t.support.transition.end,handle:function(e){return t(e.target).is(this)?e.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery);